var e=Object.defineProperty,i=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(i,t,l)=>t in i?e(i,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[t]=l,o=(e,i)=>{for(var t in i||(i={}))d.call(i,t)&&n(e,t,i[t]);if(l)for(var t of l(i))a.call(i,t)&&n(e,t,i[t]);return e},s=(e,l)=>i(e,t(l));import{c as m,r as c,g as r,m as b,a as p,B as h,l as Z,i as y,b as u,d as X,e as G,w as W,f as g,h as x,j as V,k as L,n as Y,u as K,o as I,p as k,q as H,s as C,t as S,v as f,x as R,y as T,z as J,A as v,C as P,D as F,E as w,F as z,G as M,H as N,I as Q,P as j,J as U,T as B,K as D,R as O,L as E,M as A,O as _,N as $,W as q,Q as ee,S as ie,U as te,V as le,X as de,Y as ae,Z as ne,_ as oe,$ as se,a0 as me,a1 as ce,a2 as re,a3 as be,a4 as pe,a5 as he,a6 as Ze,a7 as ye,a8 as ue,a9 as Xe,aa as Ge}from"./vendor.c436a148.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&i(e)})).observe(document,{childList:!0,subtree:!0})}function i(e){if(e.ep)return;e.ep=!0;const i=function(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?i.credentials="include":"anonymous"===e.crossorigin?i.credentials="omit":i.credentials="same-origin",i}(e);fetch(e.href,i)}}();var We={$ref:"#/definitions/GoslingSpec",$schema:"http://json-schema.org/draft-07/schema#",definitions:{Aggregate:{enum:["max","min","mean","bin","count"],type:"string"},Assembly:{enum:["hg38","hg19","hg18","hg17","hg16","mm10","mm9","unknown"],type:"string"},AxisPosition:{enum:["none","top","bottom","left","right"],type:"string"},BAMData:{additionalProperties:!1,properties:{indexUrl:{type:"string"},type:{const:"bam",type:"string"},url:{type:"string"}},required:["type","url","indexUrl"],type:"object"},BEDDBData:{additionalProperties:!1,properties:{exonIntervalFields:{items:[{additionalProperties:!1,properties:{index:{type:"number"},name:{type:"string"}},required:["index","name"],type:"object"},{additionalProperties:!1,properties:{index:{type:"number"},name:{type:"string"}},required:["index","name"],type:"object"}],maxItems:2,minItems:2,type:"array"},genomicFields:{items:{additionalProperties:!1,properties:{index:{type:"number"},name:{type:"string"}},required:["index","name"],type:"object"},type:"array"},type:{const:"beddb",type:"string"},url:{type:"string"},valueFields:{items:{additionalProperties:!1,properties:{index:{type:"number"},name:{type:"string"},type:{enum:["nominal","quantitative"],type:"string"}},required:["index","name","type"],type:"object"},type:"array"}},required:["type","url","genomicFields"],type:"object"},BIGWIGData:{additionalProperties:!1,properties:{binSize:{type:"number"},column:{type:"string"},end:{type:"string"},start:{type:"string"},type:{const:"bigwig",type:"string"},url:{type:"string"},value:{type:"string"}},required:["type","url","column","value"],type:"object"},CSVData:{additionalProperties:!1,properties:{chromosomeField:{type:"string"},chromosomePrefix:{type:"string"},genomicFields:{items:{type:"string"},type:"array"},genomicFieldsToConvert:{items:{additionalProperties:!1,properties:{chromosomeField:{type:"string"},genomicFields:{items:{type:"string"},type:"array"}},required:["chromosomeField","genomicFields"],type:"object"},type:"array"},headerNames:{items:{type:"string"},type:"array"},longToWideId:{type:"string"},quantitativeFields:{items:{type:"string"},type:"array"},sampleLength:{type:"number"},separator:{type:"string"},type:{const:"csv",type:"string"},url:{type:"string"}},required:["type","url"],type:"object"},Channel:{anyOf:[{$ref:"#/definitions/ChannelDeep"},{$ref:"#/definitions/ChannelValue"}]},ChannelBind:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate"},bind:{$ref:"#/definitions/ChannelType"}},required:["bind"],type:"object"},ChannelDeep:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate"},axis:{$ref:"#/definitions/AxisPosition"},baseline:{type:["string","number"]},domain:{$ref:"#/definitions/Domain"},field:{type:"string"},flip:{type:"boolean"},grid:{type:"boolean"},legend:{type:"boolean"},linkingId:{type:"string"},mirrored:{type:"boolean"},padding:{type:"number"},range:{$ref:"#/definitions/Range"},sort:{items:{type:"string"},type:"array"},stack:{type:"boolean"},type:{$ref:"#/definitions/FieldType"},zeroBaseline:{type:"boolean"}},type:"object"},ChannelType:{type:"string"},ChannelValue:{additionalProperties:!1,properties:{value:{type:["number","string"]}},required:["value"],type:"object"},Chromosome:{enum:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","X","Y","M","chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY","chrM"],type:"string"},CoverageTransform:{additionalProperties:!1,description:"Aggregate rows and calculate coverage",properties:{endField:{type:"string"},groupField:{type:"string"},newField:{type:"string"},startField:{type:"string"},type:{const:"coverage",type:"string"}},required:["type","startField","endField"],type:"object"},DataDeep:{anyOf:[{$ref:"#/definitions/JSONData"},{$ref:"#/definitions/CSVData"},{$ref:"#/definitions/BIGWIGData"},{$ref:"#/definitions/MultivecData"},{$ref:"#/definitions/BEDDBData"},{$ref:"#/definitions/VectorData"},{$ref:"#/definitions/MatrixData"},{$ref:"#/definitions/BAMData"}]},DataTrack:{additionalProperties:!1,description:"Partial specification of `BasicSingleTrack` to use default visual encoding predefined by data type.",properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},data:{$ref:"#/definitions/DataDeep"},endAngle:{type:"number"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},title:{type:"string"},width:{type:"number"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},yOffset:{type:"number"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["data","height","width"],type:"object"},DataTransform:{anyOf:[{$ref:"#/definitions/FilterTransform"},{$ref:"#/definitions/StrConcatTransform"},{$ref:"#/definitions/StrReplaceTransform"},{$ref:"#/definitions/LogTransform"},{$ref:"#/definitions/DisplaceTransform"},{$ref:"#/definitions/ExonSplitTransform"},{$ref:"#/definitions/CoverageTransform"},{$ref:"#/definitions/JSONParseTransform"}]},Datum:{additionalProperties:{type:["number","string"]},type:"object"},DisplaceTransform:{additionalProperties:!1,properties:{boundingBox:{additionalProperties:!1,properties:{endField:{type:"string"},groupField:{type:"string"},isPaddingBP:{type:"boolean"},padding:{type:"number"},startField:{type:"string"}},required:["startField","endField"],type:"object"},maxRows:{type:"number"},method:{$ref:"#/definitions/DisplacementType"},newField:{type:"string"},type:{const:"displace",type:"string"}},required:["type","boundingBox","method","newField"],type:"object"},Displacement:{additionalProperties:!1,properties:{padding:{type:"number"},type:{$ref:"#/definitions/DisplacementType"}},required:["type"],type:"object"},DisplacementType:{enum:["pile","spread"],type:"string"},Domain:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"},{$ref:"#/definitions/DomainGene"}]},DomainChr:{additionalProperties:!1,properties:{chromosome:{$ref:"#/definitions/Chromosome"}},required:["chromosome"],type:"object"},DomainChrInterval:{additionalProperties:!1,properties:{chromosome:{$ref:"#/definitions/Chromosome"},interval:{items:[{type:"number"},{type:"number"}],maxItems:2,minItems:2,type:"array"}},required:["chromosome","interval"],type:"object"},DomainGene:{additionalProperties:!1,properties:{gene:{anyOf:[{type:"string"},{items:[{type:"string"},{type:"string"}],maxItems:2,minItems:2,type:"array"}]}},required:["gene"],type:"object"},DomainInterval:{additionalProperties:!1,properties:{interval:{items:[{type:"number"},{type:"number"}],maxItems:2,minItems:2,type:"array"}},required:["interval"],type:"object"},ExonSplitTransform:{additionalProperties:!1,properties:{fields:{items:{additionalProperties:!1,properties:{chrField:{type:"string"},field:{type:"string"},newField:{type:"string"},type:{$ref:"#/definitions/FieldType"}},required:["field","type","newField","chrField"],type:"object"},type:"array"},flag:{additionalProperties:!1,properties:{field:{type:"string"},value:{type:["number","string"]}},required:["field","value"],type:"object"},separator:{type:"string"},type:{const:"exonSplit",type:"string"}},required:["type","separator","flag","fields"],type:"object"},FieldType:{enum:["genomic","nominal","quantitative"],type:"string"},FilterTransform:{anyOf:[{$ref:"#/definitions/OneOfFilter"},{$ref:"#/definitions/RangeFilter"},{$ref:"#/definitions/IncludeFilter"}]},FlatTracks:{additionalProperties:!1,properties:{assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},orientation:{$ref:"#/definitions/Orientation"},spacing:{type:"number"},static:{type:"boolean"},style:{$ref:"#/definitions/Style"},tracks:{items:{$ref:"#/definitions/Track"},type:"array"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},yOffset:{type:"number"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["tracks"],type:"object"},GlyphElement:{additionalProperties:!1,properties:{background:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},color:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},description:{type:"string"},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkBind"}]},opacity:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},row:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},select:{items:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/ChannelType"},oneOf:{items:{type:"string"},type:"array"}},required:["channel","oneOf"],type:"object"},type:"array"},size:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},stroke:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},strokeWidth:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},style:{$ref:"#/definitions/MarkStyleInGlyph"},text:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},w:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},x:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},x1:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},x1e:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},xe:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},y:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},y1:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},y1e:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]},ye:{anyOf:[{$ref:"#/definitions/ChannelBind"},{$ref:"#/definitions/ChannelValue"},{const:"none",type:"string"}]}},required:["mark"],type:"object"},GoslingSpec:{anyOf:[{$ref:"#/definitions/RootSpecWithSingleView"},{$ref:"#/definitions/RootSpecWithMultipleViews"}]},IncludeFilter:{additionalProperties:!1,properties:{field:{type:"string"},include:{type:"string"},not:{type:"boolean"},type:{const:"filter",type:"string"}},required:["type","field","include"],type:"object"},JSONData:{additionalProperties:!1,properties:{chromosomeField:{type:"string"},genomicFields:{items:{type:"string"},type:"array"},genomicFieldsToConvert:{items:{additionalProperties:!1,properties:{chromosomeField:{type:"string"},genomicFields:{items:{type:"string"},type:"array"}},required:["chromosomeField","genomicFields"],type:"object"},type:"array"},quantitativeFields:{items:{type:"string"},type:"array"},sampleLength:{type:"number"},type:{const:"json",type:"string"},values:{items:{$ref:"#/definitions/Datum"},type:"array"}},required:["type","values"],type:"object"},JSONParseTransform:{additionalProperties:!1,description:"Parse JSON Object Array and append vertically",properties:{baseGenomicField:{type:"string"},field:{type:"string"},genomicField:{type:"string"},genomicLengthField:{type:"string"},type:{const:"subjson",type:"string"}},required:["type","field","baseGenomicField","genomicField","genomicLengthField"],type:"object"},Layout:{enum:["linear","circular"],type:"string"},LogBase:{anyOf:[{type:"number"},{const:"e",type:"string"}]},LogTransform:{additionalProperties:!1,properties:{base:{$ref:"#/definitions/LogBase"},field:{type:"string"},newField:{type:"string"},type:{const:"log",type:"string"}},required:["type","field"],type:"object"},LogicalOperation:{enum:["less-than","lt","LT","greater-than","gt","GT","less-than-or-equal-to","ltet","LTET","greater-than-or-equal-to","gtet","GTET"],type:"string"},Mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkDeep"}]},MarkBind:{additionalProperties:!1,properties:{bind:{type:"string"},domain:{items:{type:"string"},type:"array"},range:{items:{$ref:"#/definitions/MarkType"},type:"array"}},required:["bind","domain","range"],type:"object"},MarkDeep:{anyOf:[{$ref:"#/definitions/MarkGlyphPreset"},{$ref:"#/definitions/MarkGlyph"}]},MarkGlyph:{additionalProperties:!1,properties:{elements:{items:{$ref:"#/definitions/GlyphElement"},type:"array"},name:{type:"string"},referenceColumn:{type:"string"},requiredChannels:{items:{$ref:"#/definitions/ChannelType"},type:"array"},type:{const:"compositeMark",type:"string"}},required:["type","name","requiredChannels","elements"],type:"object"},MarkGlyphPreset:{additionalProperties:!1,properties:{server:{type:"string"},type:{type:"string"}},required:["type","server"],type:"object"},MarkStyleInGlyph:{additionalProperties:!1,properties:{background:{type:"string"},dashed:{type:"string"},dy:{type:"number"},stroke:{type:"string"},strokeWidth:{type:"number"}},type:"object"},MarkType:{enum:["point","line","area","bar","rect","text","withinLink","betweenLink","rule","triangleLeft","triangleRight","triangleBottom","brush","header"],type:"string"},MatrixData:{additionalProperties:!1,properties:{type:{const:"matrix",type:"string"},url:{type:"string"}},required:["type","url"],type:"object"},MultipleViews:{additionalProperties:!1,properties:{arrangement:{enum:["parallel","serial","horizontal","vertical"],type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},orientation:{$ref:"#/definitions/Orientation"},spacing:{type:"number"},static:{type:"boolean"},style:{$ref:"#/definitions/Style"},views:{items:{anyOf:[{$ref:"#/definitions/SingleView"},{$ref:"#/definitions/MultipleViews"}]},type:"array"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},yOffset:{type:"number"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["views"],type:"object"},MultivecData:{additionalProperties:!1,properties:{binSize:{type:"number"},categories:{items:{type:"string"},type:"array"},column:{type:"string"},end:{type:"string"},row:{type:"string"},start:{type:"string"},type:{const:"multivec",type:"string"},url:{type:"string"},value:{type:"string"}},required:["type","url","column","row","value"],type:"object"},OneOfFilter:{additionalProperties:!1,properties:{field:{type:"string"},not:{type:"boolean"},oneOf:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"}]},type:{const:"filter",type:"string"}},required:["type","field","oneOf"],type:"object"},Orientation:{enum:["horizontal","vertical"],type:"string"},OverlaidTrack:{additionalProperties:!1,description:"Superposing multiple tracks.",properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlay:{items:{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},id:{type:"string"},innerRadius:{type:"number"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},text:{$ref:"#/definitions/Channel"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},type:"object"},type:"array"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["height","overlay","width"],type:"object"},OverlaidTracks:{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},alignment:{const:"overlay",type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},tracks:{items:{$ref:"#/definitions/PartialTrack"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["alignment","tracks","width","height"],type:"object"},PREDEFINED_COLORS:{enum:["viridis","grey","spectral","warm","cividis","bupu","rdbu"],type:"string"},PartialTrack:{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},encoding:{additionalProperties:{$ref:"#/definitions/Channel"},type:"object"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlay:{items:{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},id:{type:"string"},innerRadius:{type:"number"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},text:{$ref:"#/definitions/Channel"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},type:"object"},type:"array"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},template:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},type:"object"},Range:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{$ref:"#/definitions/PREDEFINED_COLORS"}]},RangeFilter:{additionalProperties:!1,properties:{field:{type:"string"},inRange:{items:{type:"number"},type:"array"},not:{type:"boolean"},type:{const:"filter",type:"string"}},required:["type","field","inRange"],type:"object"},RootSpecWithMultipleViews:{additionalProperties:!1,properties:{arrangement:{enum:["parallel","serial","horizontal","vertical"],type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},description:{type:"string"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},orientation:{$ref:"#/definitions/Orientation"},spacing:{type:"number"},static:{type:"boolean"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},title:{type:"string"},views:{items:{anyOf:[{$ref:"#/definitions/SingleView"},{$ref:"#/definitions/MultipleViews"}]},type:"array"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},yOffset:{type:"number"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["views"],type:"object"},RootSpecWithSingleView:{anyOf:[{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},alignment:{const:"overlay",type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},description:{type:"string"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},tracks:{items:{$ref:"#/definitions/PartialTrack"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["alignment","height","tracks","width"],type:"object"},{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},alignment:{const:"stack",type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},description:{type:"string"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},tracks:{items:{anyOf:[{$ref:"#/definitions/PartialTrack"},{$ref:"#/definitions/OverlaidTracks"}]},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["tracks"],type:"object"},{additionalProperties:!1,properties:{assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},description:{type:"string"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},orientation:{$ref:"#/definitions/Orientation"},spacing:{type:"number"},static:{type:"boolean"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},title:{type:"string"},tracks:{items:{$ref:"#/definitions/Track"},type:"array"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},yOffset:{type:"number"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["tracks"],type:"object"}]},SingleTrack:{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["data","height","mark","width"],type:"object"},SingleView:{anyOf:[{$ref:"#/definitions/OverlaidTracks"},{$ref:"#/definitions/StackedTracks"},{$ref:"#/definitions/FlatTracks"}]},SizeVisibilityCondition:{additionalProperties:!1,properties:{conditionPadding:{type:"number"},measure:{enum:["width","height"],type:"string"},operation:{$ref:"#/definitions/LogicalOperation"},target:{enum:["track","mark"],type:"string"},threshold:{anyOf:[{type:"number"},{const:"|xe-x|",type:"string"}]},transitionPadding:{type:"number"}},required:["measure","operation","target","threshold"],type:"object"},StackedTracks:{additionalProperties:!1,properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},alignment:{const:"stack",type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},color:{$ref:"#/definitions/Channel"},column:{$ref:"#/definitions/Channel"},data:{$ref:"#/definitions/DataDeep"},dataTransform:{items:{$ref:"#/definitions/DataTransform"},type:"array"},displacement:{$ref:"#/definitions/Displacement"},endAngle:{type:"number"},flipY:{type:"boolean"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},mark:{$ref:"#/definitions/Mark"},opacity:{$ref:"#/definitions/Channel"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},overrideTemplate:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},row:{$ref:"#/definitions/Channel"},size:{$ref:"#/definitions/Channel"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},stretch:{type:"boolean"},stroke:{$ref:"#/definitions/Channel"},strokeWidth:{$ref:"#/definitions/Channel"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},text:{$ref:"#/definitions/Channel"},title:{type:"string"},tooltip:{items:{$ref:"#/definitions/Tooltip"},type:"array"},tracks:{items:{anyOf:[{$ref:"#/definitions/PartialTrack"},{$ref:"#/definitions/OverlaidTracks"}]},type:"array"},visibility:{items:{$ref:"#/definitions/VisibilityCondition"},type:"array"},width:{type:"number"},x:{$ref:"#/definitions/Channel"},x1:{$ref:"#/definitions/Channel"},x1e:{$ref:"#/definitions/Channel"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},xe:{$ref:"#/definitions/Channel"},y:{$ref:"#/definitions/Channel"},y1:{$ref:"#/definitions/Channel"},y1e:{$ref:"#/definitions/Channel"},yOffset:{type:"number"},ye:{$ref:"#/definitions/Channel"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["tracks"],type:"object"},StrConcatTransform:{additionalProperties:!1,properties:{fields:{items:{type:"string"},type:"array"},newField:{type:"string"},separator:{type:"string"},type:{const:"concat",type:"string"}},required:["type","fields","newField","separator"],type:"object"},StrReplaceTransform:{additionalProperties:!1,properties:{field:{type:"string"},newField:{type:"string"},replace:{items:{additionalProperties:!1,properties:{from:{type:"string"},to:{type:"string"}},required:["from","to"],type:"object"},type:"array"},type:{const:"replace",type:"string"}},required:["type","field","newField","replace"],type:"object"},Style:{additionalProperties:!1,properties:{align:{enum:["left","right"],type:"string"},background:{type:"string"},backgroundOpacity:{type:"number"},bazierLink:{type:"boolean"},circularLink:{type:"boolean"},curve:{enum:["top","bottom","left","right"],type:"string"},dashed:{items:[{type:"number"},{type:"number"}],maxItems:2,minItems:2,type:"array"},dx:{type:"number"},dy:{type:"number"},enableSmoothPath:{type:"boolean"},inlineLegend:{type:"boolean"},legendTitle:{type:"string"},linePattern:{additionalProperties:!1,properties:{size:{type:"number"},type:{enum:["triangleLeft","triangleRight"],type:"string"}},required:["type","size"],type:"object"},linkConnectionType:{enum:["straight","curve","corner"],type:"string"},outline:{type:"string"},outlineWidth:{type:"number"},textAnchor:{enum:["start","middle","end"],type:"string"},textFontSize:{type:"number"},textFontWeight:{enum:["bold","normal"],type:"string"},textStroke:{type:"string"},textStrokeWidth:{type:"number"}},type:"object"},TemplateTrack:{additionalProperties:!1,description:"Template specification that will be internally converted into `SingleTrack` for rendering",properties:{_invalidTrack:{type:"boolean"},_renderingId:{type:"string"},assembly:{$ref:"#/definitions/Assembly"},centerRadius:{description:"Proportion of the radius of the center white space.",type:"number"},data:{$ref:"#/definitions/DataDeep"},encoding:{additionalProperties:{$ref:"#/definitions/Channel"},type:"object"},endAngle:{type:"number"},height:{type:"number"},id:{type:"string"},innerRadius:{type:"number"},layout:{$ref:"#/definitions/Layout"},linkingId:{type:"string"},orientation:{$ref:"#/definitions/Orientation"},outerRadius:{type:"number"},overlayOnPreviousTrack:{type:"boolean"},prerelease:{additionalProperties:!1,type:"object"},spacing:{type:"number"},startAngle:{type:"number"},static:{type:"boolean"},style:{$ref:"#/definitions/Style"},subtitle:{type:"string"},template:{type:"string"},title:{type:"string"},width:{type:"number"},xAxis:{$ref:"#/definitions/AxisPosition"},xDomain:{anyOf:[{$ref:"#/definitions/DomainInterval"},{$ref:"#/definitions/DomainChrInterval"},{$ref:"#/definitions/DomainChr"}]},xOffset:{type:"number"},yOffset:{type:"number"},zoomLimits:{$ref:"#/definitions/ZoomLimits"}},required:["data","height","template","width"],type:"object"},Tooltip:{additionalProperties:!1,properties:{alt:{type:"string"},field:{type:"string"},format:{type:"string"},type:{$ref:"#/definitions/FieldType"}},required:["field","type"],type:"object"},Track:{anyOf:[{$ref:"#/definitions/SingleTrack"},{$ref:"#/definitions/OverlaidTrack"},{$ref:"#/definitions/DataTrack"},{$ref:"#/definitions/TemplateTrack"}]},VectorData:{additionalProperties:!1,properties:{binSize:{type:"number"},column:{type:"string"},end:{type:"string"},start:{type:"string"},type:{const:"vector",type:"string"},url:{type:"string"},value:{type:"string"}},required:["type","url","column","value"],type:"object"},VisibilityCondition:{anyOf:[{$ref:"#/definitions/SizeVisibilityCondition"},{$ref:"#/definitions/ZoomLevelVisibilityCondition"}]},ZoomLevelVisibilityCondition:{additionalProperties:!1,properties:{conditionPadding:{type:"number"},measure:{const:"zoomLevel",type:"string"},operation:{$ref:"#/definitions/LogicalOperation"},target:{enum:["track","mark"],type:"string"},threshold:{type:"number"},transitionPadding:{type:"number"}},required:["measure","operation","target","threshold"],type:"object"},ZoomLimits:{items:[{type:["number","null"]},{type:["number","null"]}],maxItems:2,minItems:2,type:"array"}}};const ge=e=>{let i=m(e);i||(i=m("gray"));return c([i.rgb().r/255,i.rgb().g/255,i.rgb().b/255])};function xe(e,i,t,l,d){const a=Math.max(Math.min(i,e),0),n=null!=d?d:0,o=(l-t)/360*Math.PI*2-2*n;return-(t/360*Math.PI*2+a/i*o)-Math.PI/2-n}function Ve(e,i,t,l,d,a,n){return{x:l+t*Math.cos(xe(e,i,a,n)),y:d+t*Math.sin(xe(e,i,a,n))}}function Le(e,i,t,l){return t<=e?Math.atan((i-l)/(e-t)):Math.atan((i-l)/(e-t))-Math.PI}const Ye={fontSize:"12px",fontFamily:"sans-serif",fontWeight:"normal",fill:"black",background:"white",lineJoin:"round",stroke:"#ffffff",strokeThickness:0};function Ke(e,i,t){!function(e,i,t){var l,d,a,n,o;const s=i.spec();if(!Qe(s.y)||!0!==s.y.grid)return;const[m,c]=e.position,[r,b]=e.dimensions,p=m,h=m+r,Z="circular"===i.spec().layout,y=null!=(l=s.innerRadius)?l:220,u=null!=(d=s.outerRadius)?d:300,X=null!=(a=s.startAngle)?a:0,G=null!=(n=s.endAngle)?n:360,W=u-y,g=r/2,x=b/2,V=null!=(o=i.getChannelDomainArray("row"))?o:["___SINGLE_ROW___"],L=b/V.length,Y=i.getChannelScale("y"),K=i.getChannelDomainArray("y");if(!Y||!K)return;if(Z&&L/b*W<=20||!Z&&L<=20)return;const I=e.pBackground,k=t.axis.gridStrokeWidth;V.forEach((e=>{const l=i.encodedValue("row",e),d=Z?L/b*W:L,a=Math.max(Math.ceil(d/40),1);let n=Y.ticks(a).filter((e=>K[0]<=e&&e<=K[1]));1===n.length&&(n=Y.ticks(a+1).filter((e=>K[0]<=e&&e<=K[1]))),Z?n.forEach((e=>{const i=Y(e),d=u-(l+L-i)/b*W,a=d+k/2,n=d-k/2,o=Ve(0,r,n,g,x,X,G),s=xe(0,r,X,G),p=xe(r,r,X,G);I.lineStyle(k,ge("black"),0,.5),I.beginFill(ge(t.axis.gridColor),1),I.moveTo(m+o.x,c+o.y),I.arc(m+g,c+x,n,s,p,!0),I.arc(m+g,c+x,a,p,s,!1),I.closePath()})):(I.lineStyle(k,ge(t.axis.gridColor),1,.5),n.forEach((e=>{var i;const d=c+l+L-Y(e);if("solid"===t.axis.gridStrokeType)I.moveTo(p,d),I.lineTo(h,d);else if("dashed"===t.axis.gridStrokeType){const[e,l]=null!=(i=t.axis.gridStrokeDash)?i:[1,1];for(let i=p;i<h;i+=e+l)I.moveTo(i,d),I.lineTo(i+e,d)}})))}))}(e,i,t),function(e,i,t){var l,d,a,n;const o=i.spec();if(!Qe(o.row)||!0!==o.row.grid)return;const[s,m]=e.position,[c,r]=e.dimensions,b="circular"===i.spec().layout,p=null!=(l=o.innerRadius)?l:220,h=null!=(d=o.outerRadius)?d:300,Z=null!=(a=o.startAngle)?a:0,y=null!=(n=o.endAngle)?n:360,u=h-p,X=c/2,G=r/2,W=i.getChannelDomainArray("row");if(!W)return;const g=r/W.length;if(b&&u<=20||!b&&g<=20)return;const x=e.pBackground,V=t.axis.gridStrokeWidth;W.forEach((e=>{const l=i.encodedValue("row",e);if(b){const e=h-(l+g/2)/r*u,i=e+V/2,d=e-V/2,a=Ve(0,c,d,X,G,Z,y),n=xe(0,c,Z,y),o=xe(c,c,Z,y);x.lineStyle(V,ge("black"),0,.5),x.beginFill(ge(t.axis.gridColor),1),x.moveTo(s+a.x,m+a.y),x.arc(s+X,m+G,d,n,o,!0),x.arc(s+X,m+G,i,o,n,!1),x.closePath()}else{x.lineStyle(V,ge(t.axis.gridColor),1,.5);const e=m+l+g/2;x.moveTo(s,e),x.lineTo(s+c,e)}}))}(e,i,t)}const Ie={color:"black",size:10,fontFamily:"Arial",fontWeight:"normal",stroke:"#ffffff",strokeThickness:0};function ke(e=Ie){var i,t,l,d,a,n;return{fontSize:`${null!=(i=e.size)?i:Ie.size}px`,fontFamily:null!=(t=e.fontFamily)?t:Ie.fontFamily,fontWeight:null!=(l=e.fontWeight)?l:Ie.fontWeight,fill:null!=(d=e.color)?d:Ie.color,background:"white",lineJoin:"round",stroke:null!=(a=e.stroke)?a:Ie.stroke,strokeThickness:null!=(n=e.strokeThickness)?n:Ie.strokeThickness}}function He(e,i,t,l,d){const a=l.spec();if(Qe(a.color)&&a.color.legend)switch(a.color.type){case"nominal":!function(e,i,t,l,d){var a,n,m,c,r;const b=l.spec();if(!Qe(b.color)||"nominal"!==b.color.type||!b.color.legend)return;const p=null!=(a=l.getChannelDomainArray("color"))?a:["___SINGLE_COLOR___"];if(0===p.length)return;const h=i.pBorder,Z=10,y=4;let u=y,X=0;const G=[],W=ke({color:d.legend.labelColor,size:d.legend.labelFontSize,fontWeight:d.legend.labelFontWeight,fontFamily:d.legend.labelFontFamily});if(null==(n=b.style)?void 0:n.inlineLegend)p.map((e=>e)).reverse().forEach((t=>{if(X>i.dimensions[0])return;const d=l.encodedValue("color",t),a=new e.libraries.PIXI.Text(t,W);a.anchor.x=1,a.anchor.y=0,a.position.x=i.position[0]+i.dimensions[0]-X-Z,a.position.y=i.position[1]+y,h.addChild(a);const n=new e.libraries.PIXI.TextStyle(W),o=e.libraries.PIXI.TextMetrics.measureText(t,n);u<o.height+3*y&&(u=o.height+3*y),G.push({x:i.position[0]+i.dimensions[0]-o.width-X-2*Z,y:i.position[1]+y+o.height/2,color:d}),X+=o.width+3*Z}));else{if(null==(m=b.style)?void 0:m.legendTitle){const t=new e.libraries.PIXI.Text(null==(c=b.style)?void 0:c.legendTitle,s(o({},W),{fontWeight:"bold"}));t.anchor.x=1,t.anchor.y=0,t.position.x=i.position[0]+i.dimensions[0]-Z,t.position.y=i.position[1]+u;const l=new e.libraries.PIXI.TextStyle(s(o({},W),{fontWeight:"bold"})),d=e.libraries.PIXI.TextMetrics.measureText(null==(r=b.style)?void 0:r.legendTitle,l);h.addChild(t),u+=d.height+2*y}p.forEach((t=>{if(u>i.dimensions[1])return;const d=l.encodedValue("color",t),a=new e.libraries.PIXI.Text(t,W);a.anchor.x=1,a.anchor.y=0,a.position.x=i.position[0]+i.dimensions[0]-Z,a.position.y=i.position[1]+u,h.addChild(a);const n=new e.libraries.PIXI.TextStyle(W),o=e.libraries.PIXI.TextMetrics.measureText(t,n);X<o.width+3*Z&&(X=o.width+3*Z),G.push({x:i.position[0]+i.dimensions[0]-o.width-2*Z,y:i.position[1]+u+o.height/2,color:d}),u+=o.height+2*y}))}h.beginFill(ge(d.legend.background),d.legend.backgroundOpacity),h.lineStyle(1,ge(d.legend.backgroundStroke),d.legend.backgroundOpacity,0),h.drawRect(i.position[0]+i.dimensions[0]-X-1,i.position[1]+1,X,u-y),G.forEach((e=>{h.lineStyle(1,ge("black"),0,0),h.beginFill(ge(e.color),1),h.drawCircle(e.x,e.y,4)}))}(e,i,0,l,d);break;case"quantitative":!function(e,i,t,l,d){const a=l.spec();if(!Qe(a.color)||"quantitative"!==a.color.type||!a.color.legend)return;const[n,o]=i.position,[s,m]=i.dimensions,c=80,r=m-2>110?110:Math.max(m-2,38),b={top:10,left:55,width:20,height:r-20},p=n+s-c-1,h=o+1,Z=l.getChannelScale("color"),y=l.getChannelDomainArray("color");if(!Z||!y)return;const u=i.pBorder;u.beginFill(ge(d.legend.background),d.legend.backgroundOpacity),u.lineStyle(1,ge(d.legend.backgroundStroke),d.legend.backgroundOpacity,0),u.drawRect(p,h,c,r);const[X,G]=y,W=G-X;[...Array(b.height).keys()].forEach((e=>{const i=(b.height-e)/b.height*W+X;u.beginFill(ge(Z(i)),1),u.lineStyle(1,ge(d.legend.backgroundStroke),0,.5),u.drawRect(p+b.left,h+b.top+e,b.width,1)}));const g=Math.max(Math.ceil(b.height/30),2);let x=Z.ticks(g).filter((e=>y[0]<=e&&e<=y[1]));1===x.length&&(x=Z.ticks(g+1).filter((e=>y[0]<=e&&e<=y[1])));const V=1;u.lineStyle(V,ge(d.legend.tickColor),1,.5);const L=ke({color:d.legend.labelColor,size:d.legend.labelFontSize,fontWeight:d.legend.labelFontWeight,fontFamily:d.legend.labelFontFamily}),Y=p+b.left;x.forEach((i=>{let t=h+b.top+b.height-(i-X)/W*b.height;t===h+b.top?t+=V/2:t===h+b.top+b.height&&(t-=V/2),u.moveTo(Y-3,t),u.lineTo(Y,t);const l=new e.libraries.PIXI.Text(i,L);l.anchor.x=1,l.anchor.y=.5,l.position.x=Y-6,l.position.y=t,u.addChild(l)}))}(e,i,0,l,d)}}const Ce=["x","xe","x1","x1e","y","ye","y1","y1e","color","size","row","stroke","strokeWidth","opacity","text"];function Se(e,i,t,l){if(!e||!i||!t)return;if("brush"===l.spec().mark)return;if(["x","x1","x1e","xe"].forEach((e=>{l.setChannelScale(e,i._xScale)})),ze(l.spec())){const e=i._yScale.copy();e.range([e.range()[1],e.range()[0]]),["y","y1","y1e","ye"].forEach((i=>{l.setChannelScale(i,e)}))}const[d,a]=i.dimensions;switch(l.spec().mark){case"point":!function(e,i,t){var l,d,a,n,o;const s=t.spec();if(!s.width||!s.height)return void console.warn("Size of a track is not properly determined, so visual mark cannot be rendered");const m=t.data(),[c,r]=e.dimensions,b=t.getChannelScale("x").invert(c)-t.getChannelScale("x").invert(0),p="circular"===s.layout,h=null!=(l=s.innerRadius)?l:220,Z=null!=(d=s.outerRadius)?d:300,y=null!=(a=s.startAngle)?a:0,u=null!=(n=s.endAngle)?n:360,X=Z-h,G=c/2,W=r/2,g=null!=(o=t.getChannelDomainArray("row"))?o:["___SINGLE_ROW___"],x=r/g.length;g.forEach((l=>{const d=t.encodedValue("row",l);m.filter((e=>!Be(e,s.row)||Be(e,s.row)===l)).forEach((l=>{const a=t.encodedPIXIProperty("x-center",l),n=t.encodedPIXIProperty("y-center",l),o=t.encodedPIXIProperty("color",l),s=t.encodedPIXIProperty("p-size",l),m=t.encodedPIXIProperty("strokeWidth",l),h=t.encodedPIXIProperty("stroke",l),g=t.encodedPIXIProperty("opacity",l),V=t.markVisibility(l,{width:s,zoomLevel:b}),L=Math.min(V,g);if(!(s<=.1||0===L||a+s<0||a-s>c))if(i.lineStyle(m,ge(h),L,1),p){const e=Ve(a,c,Z-(d+x-n)/r*X,G,W,y,u);i.beginFill(ge(o),L),i.drawCircle(e.x,e.y,s)}else if(i.beginFill(ge(o),L),i.drawCircle(a,d+x-n,s),null==e?void 0:e.tooltips){const i=d+x-n;e.tooltips.push({datum:l,isMouseOver:(e,t)=>Math.sqrt(Math.abs(e-a)*Math.abs(e-a)+Math.abs(t-i)*Math.abs(t-i))<s+1,markInfo:{x:a,y:d+x-n,width:s,height:s,type:"point"}})}}))}))}(i,t.graphics,l);break;case"bar":!function(e,i,t){var l,d,a,n,o,s,m;const c=t.spec();if(!c.width||!c.height)return void console.warn("Size of a track is not properly determined, so visual mark cannot be rendered");const b=t.data(),[p,h]=e.dimensions,Z=e.tilesetInfo.tile_size,{tileX:y,tileWidth:u}=e.getTilePosAndDimensions(i.gos.zoomLevel,i.gos.tilePos,Z),X=t.getChannelScale("x").invert(p)-t.getChannelScale("x").invert(0),G="circular"===c.layout,W=null!=(l=c.innerRadius)?l:220,g=null!=(d=c.outerRadius)?d:300,x=null!=(a=c.startAngle)?a:0,V=null!=(n=c.endAngle)?n:360,L=g-W,Y=p/2,K=h/2,I=t.getChannelScale("x"),k=I(y+u/Z)-I(y),H=null!=(o=t.getChannelDomainArray("row"))?o:["___SINGLE_ROW___"],C=h/H.length,S=Qe(c.y)?null==(s=c.y)?void 0:s.baseline:void 0,f=null!=(m=t.encodedValue("y",S))?m:0,R=i.graphics;if(Ue(c)){const i=t.getGenomicChannel();if(!i||!i.field)return void console.warn("Genomic field is not provided in the specification");const l=r(b,(e=>e[i.field]));[...l.keys()].forEach((i=>{var d;let a=0;null==(d=l.get(i))||d.forEach((i=>{const l=t.encodedPIXIProperty("color",i),d=t.encodedPIXIProperty("stroke",i),n=t.encodedPIXIProperty("strokeWidth",i),o=t.encodedPIXIProperty("opacity",i),s=t.encodedPIXIProperty("y",i),m=t.encodedPIXIProperty("width",i,{tileUnitWidth:k}),r=t.encodedPIXIProperty("x-start",i,{markWidth:m}),b=r+m,Z=t.markVisibility(i,{width:m,zoomLevel:X}),y=Math.min(Z,o);if(!(0===y||m<=0||s<=0)){if(R.lineStyle(n,ge(d),y,0),G){const e=g-(C-a)/h*L,i=g-(C-s-a)/h*L,t=Ve(r,p,i,Y,K,x,V),d=xe(r,p,x,V),n=xe(r+m,p,x,V);R.beginFill(ge(l),y),R.moveTo(t.x,t.y),R.arc(Y,K,i,d,n,!0),R.arc(Y,K,e,n,d,!1),R.closePath()}else{const t=C-s-a,d=s;R.beginFill(ge(l),y),R.drawRect(r,C-s-a,m,s),c.tooltip&&e.tooltips.push({datum:i,isMouseOver:(e,i)=>r-1<e&&e<b+1&&t-1<i&&i<t+d+1,markInfo:{x:r,y:t,width:m,height:d,type:"bar"}})}a+=s}}))}))}else H.forEach((i=>{const l=t.encodedValue("row",i);b.filter((e=>{const t=Be(e,c.row);return!t||t===i})).forEach((i=>{const d=t.encodedPIXIProperty("color",i),a=t.encodedPIXIProperty("stroke",i),n=t.encodedPIXIProperty("strokeWidth",i),o=t.encodedPIXIProperty("opacity");let s=t.encodedPIXIProperty("y",i),m=t.encodedPIXIProperty("ye",i);void 0!==m&&([s,m]=[s,m].sort());const r=t.encodedPIXIProperty("width",i,{tileUnitWidth:k}),b=t.encodedPIXIProperty("x-start",i,{markWidth:r}),Z=b+r;let y,u;void 0===m?(y=l+C-f-s,u=l+C-f):(y=l+C-m,u=l+C-s);const W=t.markVisibility(i,{width:r,zoomLevel:X}),I=Math.min(W,o);if(0!==I&&0!==r&&0!==s)if(R.lineStyle(n,ge(a),I,0),G){const e=g-y/h*L,i=g-u/h*L,t=Ve(b,p,i,Y,K,x,V),l=xe(b,p,x,V),a=xe(b+r,p,x,V);R.beginFill(ge(d),I),R.moveTo(t.x,t.y),R.arc(Y,K,i,l,a,!0),R.arc(Y,K,e,a,l,!1),R.closePath()}else if(R.beginFill(ge(d),I),R.drawRect(b,y,r,u-y),c.tooltip){const t=u-y;e.tooltips.push({datum:i,isMouseOver:(e,i)=>b-1<e&&e<Z+1&&y-1<i&&i<u+1,markInfo:{x:b,y:y,width:r,height:t,type:"bar"}})}}))}))}(i,t,l);break;case"line":!function(e,i,t,l,d){var a,n,o,s,m,c;const r=i.spec();if(!r.width||!r.height)return void console.warn("Size of a track is not properly determined, so visual mark cannot be rendered");const b=i.data(),p="circular"===r.layout,h=null!=(a=r.innerRadius)?a:220,Z=null!=(n=r.outerRadius)?n:300,y=null!=(o=r.startAngle)?o:0,u=null!=(s=r.endAngle)?s:360,X=Z-h,G=l/2,W=d/2,g=null!=(m=i.getChannelDomainArray("row"))?m:["___SINGLE_ROW___"],x=d/g.length,V=null!=(c=i.getChannelDomainArray("color"))?c:["___SINGLE_COLOR___"];g.forEach((a=>{const n=i.encodedValue("row",a);V.forEach((o=>{b.filter((e=>!(Be(e,r.row)&&Be(e,r.row)!==a||Be(e,r.color)&&Be(e,r.color)!==o))).sort(((e,i)=>Be(e,r.x)-Be(i,r.x))).forEach(((a,o)=>{const s=i.encodedPIXIProperty("x",a),m=i.encodedPIXIProperty("y",a),c=i.encodedPIXIProperty("size",a),b=i.encodedPIXIProperty("color",a),h=i.encodedPIXIProperty("opacity",a);if(e.lineStyle(c,ge(b),h,.5),p){const i=Ve(s,l,Z-(n+x-m)/d*X,G,W,y,u);0===o?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y)}else 0===o?e.moveTo(s,n+x-m):e.lineTo(s,n+x-m),r.tooltip&&t.push({datum:a,isMouseOver:(e,i)=>s-1<e&&e<s+1&&n-1<i&&i<n+x+1,markInfo:{x:s,y:m,width:1,height:m,type:"line"}})}))}))}))}(t.graphics,l,i.tooltips,d,a);break;case"area":!function(e,i,t,l){var d,a,n,o,s,m;const c=l.spec(),h=l.data(),Z=i.dimensions[0],y=i.dimensions[1],u=i.tilesetInfo.tile_size,{tileX:X}=i.getTilePosAndDimensions(t.gos.zoomLevel,t.gos.tilePos,u),G="circular"===c.layout,W=null!=(d=c.innerRadius)?d:220,g=null!=(a=c.outerRadius)?a:300,x=null!=(n=c.startAngle)?n:0,V=null!=(o=c.endAngle)?o:360,L=g-W,Y=Z/2,K=y/2,I=l.getChannelScale("x"),k=null!=(s=l.getChannelDomainArray("row"))?s:["___SINGLE_ROW___"],H=y/k.length,C=null!=(m=l.getChannelDomainArray("color"))?m:["___SINGLE_COLOR___"],S=l.encodedPIXIProperty("opacity"),f=l.encodedPIXIProperty("strokeWidth"),R=l.encodedPIXIProperty("stroke"),T=t.graphics;if(Ue(c)){const e=l.getGenomicChannel();if(!e||!e.field)return void console.warn("Genomic field is not provided in the specification");const t=r(h,(i=>i[e.field])),d=[...t.keys()];T.lineStyle(f,ge(R),S,1);const a={};C.forEach((e=>{const n=[],o=[];d.forEach(((d,s,m)=>{var r,p;null==(p=null==(r=t.get(d))?void 0:r.filter((i=>Be(i,c.color)===e)))||p.forEach((e=>{const t=I(+d),r=b([l.encodedPIXIProperty("y",e),0]);if(G){if(0===s){const e=Ve(t,Z,g-H/y*L,Y,K,x,V);n.push([e.x,e.y]),o.push([e.x,e.y])}void 0===a[d]&&(a[d]=0);const e=g-(H-r-a[d])/y*L,i=Ve(t,Z,e,Y,K,x,V);n.push([i.x,i.y]);const l=g-(H-a[d])/y*L,c=Ve(t,Z,l,Y,K,x,V);if(o.push([c.x,c.y]),s===m.length-1){const e=Ve(t,Z,g-H/y*L,Y,K,x,V);n.push([e.x,e.y]),o.push([e.x,e.y])}}else if(0===s&&(n.push([t,H]),o.push([t,H])),void 0===a[d]&&(a[d]=0),n.push([t,H-r-a[d]]),o.push([t,H-a[d]]),s===m.length-1&&(n.push([t,H]),o.push([t,H])),c.tooltip){const l=H-r-a[d],n=H-a[d];i.tooltips.push({datum:e,isMouseOver:(e,i)=>t-1<e&&e<t+1&&l-1<i&&i<n+1,markInfo:{x:t,y:l,width:1,height:r,type:"area"}})}a[d]+=r}))}));const s=l.encodedValue("color",e);T.beginFill(ge(s),S),T.drawPolygon([...n.reduce(((e,i)=>e.concat(i))),...o.reverse().reduce(((e,i)=>e.concat(i)))]),T.endFill()}))}else k.forEach((e=>{const t=l.encodedValue("row",e);T.lineStyle(f,ge(R),S,0),C.forEach((d=>{const a=[],n=[],o=g-(t+H)/y*L;h.filter((i=>!(void 0!==Be(i,c.row)&&Be(i,c.row)!==e||void 0!==Be(i,c.color)&&Be(i,c.color)!==d))).sort(((e,i)=>l.encodedPIXIProperty("x",e)-l.encodedPIXIProperty("x",i))).forEach(((e,d,s)=>{const m=p([b([l.encodedPIXIProperty("y",e),0]),H]),r=l.encodedPIXIProperty("x",e);if(G){const e=Ve(r,Z,o,Y,K,x,V);a.push([e.x,e.y]),0===d&&n.push(e.x,e.y);const i=Ve(r,Z,g-(t+H-m)/y*L,Y,K,x,V);if(n.push(i.x,i.y),d===s.length-1){const e=Ve(r,Z,g-(t+H)/y*L,Y,K,x,V);n.push(e.x,e.y)}}else{if(0===d&&n.push(r,t+H),n.push(r,t+H-m),d===s.length-1){const e=I(X);n.push(r,t+H),n.push(e,t+H)}c.tooltip&&i.tooltips.push({datum:e,isMouseOver:(e,i)=>r-1<e&&e<r+1&&t-1<i&&i<t+H+1,markInfo:{x:r,y:m,width:1,height:m,type:"area"}})}})),G&&0!==a.length&&n.push(...a.reverse().reduce(((e,i)=>e.concat(i))));const s=l.encodedValue("color",d);T.beginFill(ge(s),S),T.drawPolygon(n),T.endFill()}))}))}(0,i,t,l);break;case"rect":!function(e,i,t,l){var d,a,n,o,s,m;const c=l.spec(),r=l.data(),[b,p]=i.dimensions,h=i.tilesetInfo.tile_size,{tileX:Z,tileWidth:y}=i.getTilePosAndDimensions(t.gos.zoomLevel,t.gos.tilePos,h),u="circular"===c.layout,X=null!=(d=c.innerRadius)?d:220,G=null!=(a=c.outerRadius)?a:300,W=null!=(n=c.startAngle)?n:0,g=null!=(o=c.endAngle)?o:360,x=G-X,V=b/2,L=p/2,Y=i._xScale,K=Y(Z+y/h)-Y(Z),I=null!=(s=l.getChannelDomainArray("row"))?s:["___SINGLE_ROW___"],k=p/I.length,H=null!=(m=l.getChannelDomainArray("y"))?m:["___SINGLE_Y_POSITION___"],C=k/H.length,S=t.graphics;r.forEach((e=>{var t;const d=l.encodedPIXIProperty("row",e),a=l.encodedPIXIProperty("x",e),n=l.encodedPIXIProperty("color",e),o=l.encodedPIXIProperty("stroke",e),s=l.encodedPIXIProperty("strokeWidth",e),m=l.encodedPIXIProperty("opacity",e),r=l.encodedPIXIProperty("width",e,{markWidth:K}),h=l.encodedPIXIProperty("height",e,{markHeight:C}),Z=l.encodedPIXIProperty("y",e),y=l.markVisibility(e,{width:r,zoomLevel:i._xScale.invert(b)-i._xScale.invert(0)}),X=Math.min(y,m);if(0===X||0===h||r<=1e-4)return;const Y=a,I=a+r,H=null!=(t=l.visualPropertyByChannel("size",e))?t:void 0;if(S.lineStyle(s,ge(o),X,.5),u){if(I<0||b<Y)return;let e=G-(d+k-Z-h/2)/p*x,i=G-(d+k-Z+h/2)/p*x;if(H){const t=G-(d+Z)/p*x;e=t-H/2,i=t+H/2}const t=Ve(Y,b,i,V,L,W,g),l=xe(Y,b,W,g),a=xe(I,b,W,g);S.beginFill(ge("none"===n?"white":n),"none"===n?0:X),S.moveTo(t.x,t.y),S.arc(V,L,i,l,a,!0),S.arc(V,L,e,a,l,!1),S.closePath()}else S.beginFill(ge("none"===n?"white":n),"none"===n?0:X),S.drawRect(Y,d+k-Z-h/2,I-Y,h),c.tooltip&&i.tooltips.push({datum:e,isMouseOver:(e,i)=>Y-1<e&&e<I+1&&d+k-Z-h/2-1<i&&i<d+k-Z+h/2+1,markInfo:{x:Y,y:d+k-Z-h/2,width:I-Y,height:h,type:"rect"}})}))}(0,i,t,l);break;case"triangleLeft":case"triangleRight":case"triangleBottom":!function(e,i,t,l){var d,a,n,o,s,m,c;const r=i.spec();if(!r.width||!r.height)return void console.warn("Size of a track is not properly determined, so visual mark cannot be rendered");const b=i.data(),p=i.getChannelScale("x").invert(t)-i.getChannelScale("x").invert(0),h="circular"===r.layout,Z=null!=(d=r.innerRadius)?d:220,y=null!=(a=r.outerRadius)?a:300,u=null!=(n=r.startAngle)?n:0,X=null!=(o=r.endAngle)?o:360,G=y-Z,W=t/2,g=l/2,x=null!=(s=i.getChannelDomainArray("row"))?s:["___SINGLE_ROW___"],V=l/x.length,L=null!=(m=i.getChannelDomainArray("y"))?m:["___SINGLE_Y___"],Y=null!=(c=i.encodedValue("size"))?c:h?G/x.length/L.length:V/L.length;x.forEach((d=>{const a=i.encodedValue("row",d);b.filter((e=>!Be(e,r.row)||Be(e,r.row)===d)).forEach((d=>{var n,o,s;const m=i.encodedPIXIProperty("x",d),c=i.encodedPIXIProperty("xe",d),b=null!=(n=i.encodedPIXIProperty("size",d))?n:void 0===c?Y:c-m,Z=i.encodedPIXIProperty("y",d),x=i.encodedPIXIProperty("strokeWidth",d),L=i.encodedPIXIProperty("stroke",d),K=i.encodedPIXIProperty("color",d),I=i.encodedPIXIProperty("opacity",d);if(h){let n=m||c-b,s=c||m+b,h=(n+s)/2;const k=y-(a+V-Z)/l*G,H=k-Y/2,C=k+Y/2;"right"!==(null==(o=r.style)?void 0:o.align)||c||(n-=b,s-=b,h-=b);let S=[];if("triangleLeft"===r.mark){const e=Ve(s,t,H,W,g,u,X),i=Ve(n,t,k,W,g,u,X),l=Ve(s,t,C,W,g,u,X),d=Ve(s,t,H,W,g,u,X);S=[e.x,e.y,i.x,i.y,l.x,l.y,d.x,d.y]}else if("triangleRight"===r.mark){const e=Ve(n,t,H,W,g,u,X),i=Ve(s,t,k,W,g,u,X),l=Ve(n,t,C,W,g,u,X),d=Ve(n,t,H,W,g,u,X);S=[e.x,e.y,i.x,i.y,l.x,l.y,d.x,d.y]}else if("triangleBottom"===r.mark){n=h-b/2,s=h+b/2;const e=Ve(n,t,C,W,g,u,X),i=Ve(s,t,C,W,g,u,X),l=Ve(h,t,H,W,g,u,X),d=Ve(n,t,C,W,g,u,X);S=[e.x,e.y,i.x,i.y,l.x,l.y,d.x,d.y]}const f=i.markVisibility(d,{width:s-n,zoomLevel:p}),R=Math.min(f,I);e.lineStyle(x,ge(L),s-n>2?R:0,0),e.beginFill(ge(K),R),e.drawPolygon(S),e.endFill()}else{let t=m||c-b,l=c||m+b,n=t+(l-t)/2;const o=a+V-Z,h=a+V-Z-Y/2,y=a+V-Z+Y/2;"right"!==(null==(s=r.style)?void 0:s.align)||c||(t-=b,l-=b,n-=b);const u={triangleLeft:[l,h,t,o,l,y,l,h],triangleRight:[t,h,l,o,t,y,t,h],triangleBottom:[t,h,l,h,n,y,t,h]}[r.mark],X=i.markVisibility(d,{width:l-t,zoomLevel:p}),G=Math.min(X,I);e.lineStyle(x,ge(L),l-t>2?G:0,.5),e.beginFill(ge(K),G),e.drawPolygon(u),e.endFill()}}))}))}(t.graphics,l,d,a);break;case"text":!function(e,i,t,l){var d,a,n,m,c,b,p,h,Z;const y=l.spec(),u=l.data(),[X,G]=i.dimensions,W="circular"===y.layout,g=null!=(d=y.innerRadius)?d:220,x=null!=(a=y.outerRadius)?a:300,V=null!=(n=y.startAngle)?n:0,L=null!=(m=y.endAngle)?m:360,Y=x-g,K=X/2,I=G/2,k=null!=(c=l.getChannelDomainArray("row"))?c:["___SINGLE_ROW___"],H=G/k.length,C=null!=(p=null==(b=y.style)?void 0:b.dx)?p:0,S=null!=(Z=null==(h=y.style)?void 0:h.dy)?Z:0;if(Ue(y)){if(W)return;const d=t.graphics,a=l.getGenomicChannel();if(!a||!a.field)return void console.warn("Genomic field is not provided in the specification");const n=r(u,(e=>e[a.field]));[...n.keys()].forEach((t=>{var a;let m=0;null==(a=n.get(t))||a.forEach((t=>{var a,n,c,r,b,p,h,Z;const u=l.encodedPIXIProperty("text",t),G=l.encodedPIXIProperty("color",t),W=l.encodedPIXIProperty("x",t)+C,g=l.encodedPIXIProperty("xe",t)+C,x=l.encodedPIXIProperty("x-center",t)+C,V=l.encodedPIXIProperty("y",t)+S,L=l.encodedPIXIProperty("size",t),Y=l.encodedPIXIProperty("stroke",t),K=l.encodedPIXIProperty("strokeWidth",t),I=l.encodedPIXIProperty("opacity",t);if(x<0||x>X)return;if(i.textsBeingUsed>1e3)return;const k=s(o({},Ye),{fontSize:null!=L?L:(null==(a=y.style)?void 0:a.textFontSize)?`${null==(n=y.style)?void 0:n.textFontSize}px`:Ye.fontSize,stroke:null!=(r=null!=Y?Y:null==(c=y.style)?void 0:c.textStroke)?r:Ye.stroke,strokeThickness:null!=(p=null!=K?K:null==(b=y.style)?void 0:b.textStrokeWidth)?p:Ye.strokeThickness,fontWeight:null!=(Z=null==(h=y.style)?void 0:h.textFontWeight)?Z:Ye.fontWeight}),f=new e.libraries.PIXI.TextStyle(k);let R;i.textGraphics.length>i.textsBeingUsed?(R=i.textGraphics[i.textsBeingUsed],R.style.fill=G,R.visible=!0,R.text=u,R.alpha=1):(R=new e.libraries.PIXI.Text(u,s(o({},k),{fill:G})),i.textGraphics.push(R));const T=e.libraries.PIXI.TextMetrics.measureText(u,f);i.textsBeingUsed++;const J=l.markVisibility(t,s(o({},T),{zoomLevel:i._xScale.invert(X)-i._xScale.invert(0)})),v=Math.min(J,I);if(!u||0===v)return i.textsBeingUsed--,void(R.visible=!1);R.alpha=v,R.resolution=8,R.updateText(),R.texture.baseTexture.scaleMode=e.libraries.PIXI.SCALE_MODES.LINEAR;const P=new e.libraries.PIXI.Sprite(R.texture);P.x=W,P.y=H-V-m,P.width=g-W,P.height=V,d.addChild(P),m+=V}))}))}else k.forEach((d=>{const a=t.graphics,n=l.encodedValue("row",d);u.filter((e=>!Be(e,y.row)||Be(e,y.row)===d)).forEach((t=>{var d,m,c,r,b,p,h,Z,u,g;const k=l.encodedPIXIProperty("text",t),f=l.encodedPIXIProperty("color",t),R=l.encodedPIXIProperty("x-center",t)+C,T=l.encodedPIXIProperty("y",t)+S,J=l.encodedPIXIProperty("size",t),v=l.encodedPIXIProperty("stroke",t),P=l.encodedPIXIProperty("strokeWidth",t),F=l.encodedPIXIProperty("opacity",t);if(R<0||R>X)return;if(i.textsBeingUsed>1e3)return;const w=s(o({},Ye),{fontSize:null!=J?J:(null==(d=y.style)?void 0:d.textFontSize)?`${null==(m=y.style)?void 0:m.textFontSize}px`:Ye.fontSize,stroke:null!=(r=null!=v?v:null==(c=y.style)?void 0:c.textStroke)?r:Ye.stroke,strokeThickness:null!=(p=null!=P?P:null==(b=y.style)?void 0:b.textStrokeWidth)?p:Ye.strokeThickness,fontWeight:null!=(Z=null==(h=y.style)?void 0:h.textFontWeight)?Z:Ye.fontWeight}),z=new e.libraries.PIXI.TextStyle(w);let M;i.textGraphics.length>i.textsBeingUsed?(M=i.textGraphics[i.textsBeingUsed],M.style.fill=f,M.visible=!0,M.text=k,M.alpha=1):(M=new e.libraries.PIXI.Text(k,s(o({},w),{fill:f})),i.textGraphics.push(M));const N=e.libraries.PIXI.TextMetrics.measureText(k,z);i.textsBeingUsed++;const Q=l.markVisibility(t,s(o({},N),{zoomLevel:i._xScale.invert(X)-i._xScale.invert(0)})),j=Math.min(Q,F);if(!k||0===j)return i.textsBeingUsed--,void(M.visible=!1);if(M.alpha=j,M.anchor.x=(null==(u=y.style)?void 0:u.textAnchor)&&"middle"!==(null==(g=y.style)?void 0:g.textAnchor)?"start"===y.style.textAnchor?0:1:.5,M.anchor.y=.5,W){const i=x-(n+H-T)/G*Y,t=Ve(R,X,i,K,I,V,L);M.x=t.x,M.y=t.y,M.resolution=4;const l=new e.libraries.PIXI.TextStyle(z),d=e.libraries.PIXI.TextMetrics.measureText(M.text,l).width/(2*i*Math.PI)*X;let[o,s]=[R-d/2,R+d/2];if(o<0){const e=-o;o=0,s+=e}else if(s>X){const e=s-X;s=X,o-=e}const m=[];for(let a=s;a>=o;a-=d/10){const t=Ve(a,X,i,K,I,V,L);m.push(new e.libraries.PIXI.Point(t.x,t.y))}M.updateText();const c=new e.libraries.PIXI.SimpleRope(M.texture,m);c.alpha=j,a.addChild(c)}else M.position.x=R,M.position.y=n+H-T,a.addChild(M)}))}))}(e,i,t,l);break;case"rule":!function(e,i,t,l){var d,a,n,o,s,m,c,r;const b=l.spec(),p=l.data(),[h,Z]=i.dimensions,y="circular"===b.layout,u=null!=(d=b.innerRadius)?d:220,X=null!=(a=b.outerRadius)?a:300,G=null!=(n=b.startAngle)?n:0,W=null!=(o=b.endAngle)?o:360,g=X-u,x=h/2,V=Z/2,L=null!=(s=l.getChannelDomainArray("row"))?s:["___SINGLE_ROW___"],Y=Z/L.length,K=null==(m=b.style)?void 0:m.dashed,I=null==(c=b.style)?void 0:c.linePattern,k=null==(r=b.style)?void 0:r.curve,H=t.graphics;L.forEach((e=>{const t=l.encodedValue("row",e);p.filter((i=>!Be(i,b.row)||Be(i,b.row)===e)).forEach((e=>{const d=l.encodedPIXIProperty("x",e),a=l.encodedPIXIProperty("xe",e),n=l.encodedPIXIProperty("y",e),o=l.encodedPIXIProperty("color",e),s=l.encodedPIXIProperty("strokeWidth",e),m=l.encodedPIXIProperty("opacity",e),c=l.markVisibility(e,{width:a-d,zoomLevel:i._xScale.invert(h)-i._xScale.invert(0)}),r=Math.min(c,m);if(H.lineStyle(s,ge(o),r,.5),y){if(0===s)return;H.lineStyle(s,ge(o),0,.5);const e=X-(t+n)/Z*g,i=e+s/2,l=e-s/2,m=Ve(d,h,l,x,V,G,W),c=xe(d,h,G,W),b=xe(a,h,G,W);H.beginFill(ge(o),r),H.moveTo(m.x,m.y),H.arc(x,V,l,c,b,!0),H.arc(x,V,i,b,c,!1),H.closePath()}else if(K){const[e,i]=K;let l=d;do{H.moveTo(l,t+Y-n),H.lineTo(l+e,t+Y-n),l+=e+i}while(l<a)}else if(void 0===k)H.moveTo(d,t+Y-n),H.lineTo(a,t+Y-n);else if("top"===k){const e=2,i=d+(a-d)/2;H.moveTo(d,t+Y-n+e/2),H.lineTo(i,t+Y-n-e/2),H.moveTo(i,t+Y-n-e/2),H.lineTo(a,t+Y-n+e/2)}if(I&&void 0===k&&!y){const{type:e,size:i}=I;let l=Math.max(d,0);H.lineStyle(0);const s=2*i;let m=0;for(;l<Math.min(a,h)&&m<100;){const d=l,a=l+i,c=t+Y-n,b=c-i/2,p=c+i/2;H.beginFill(ge(o),r),H.drawPolygon("triangleLeft"===e?[a,b,d,c,a,p,a,b]:[d,b,a,c,d,p,d,b]),H.endFill(),l+=i+s,m++}}}))}))}(0,i,t,l);break;case"betweenLink":case"withinLink":!function(e,i,t){var l,d,a,n,o;const s=t.spec();if(!s.width||!s.height)return void console.warn("Size of a track is not properly determined, so visual mark cannot be rendered");const m=t.data(),[c,r]=i.dimensions,b="circular"===s.layout,p=null!=(l=s.innerRadius)?l:220,Z=null!=(d=s.outerRadius)?d:300,y=null!=(a=s.startAngle)?a:0,u=null!=(n=s.endAngle)?n:360,X=Z-p,G=c/2,W=r/2,g=null!=(o=t.getChannelDomainArray("row"))?o:["___SINGLE_ROW___"],x=r/g.length;g.forEach((l=>{const d=t.encodedValue("row",l);m.filter((e=>!Be(e,s.row)||Be(e,s.row)===l)).forEach((l=>{var a,n,o,m;let p=t.encodedPIXIProperty("x",l),g=t.encodedPIXIProperty("xe",l);const V=t.encodedPIXIProperty("x1",l),L=t.encodedPIXIProperty("x1e",l),Y=t.encodedPIXIProperty("y",l),K=t.encodedPIXIProperty("stroke",l),I=t.encodedPIXIProperty("color",l),k=t.encodedPIXIProperty("opacity",l),H=void 0!==g&&void 0!==L&&Math.abs(p-g)>.1&&Math.abs(V-L)>.1;if(!H&&void 0===g&&!ze(s)){if(void 0===V&&void 0===L)return;g=void 0!==V?V:L}!H&&Math.abs(p-g)<=.1&&Math.abs(V-L)<=.1&&(p=(p+g)/2,g=(V+L)/2),e.lineStyle(t.encodedValue("strokeWidth"),ge(K),k,.5);const C=Qe(s.y)&&s.y.flip||s.flipY,S=d+(C?0:x);if(H){e.beginFill(ge("none"===I?"white":I),"none"===I?0:k);let[i,t,l,n]=[p,g,V,L];if("betweenLink"===s.mark?([i,t]=[i,t].sort(((e,i)=>e-i)),[l,n]=[l,n].sort(((e,i)=>e-i))):[i,t,l,n]=[i,t,l,n].sort(((e,i)=>e-i)),i>c||n<0||Math.abs(n-i)<.5)return;if(b){if(i<0||n>c)return;const a=Z-d/r*X,o=Ve(i,c,a,G,W,y,u),s=Ve(t,c,a,G,W,y,u),m=Ve(l,c,a,G,W,y,u),b=Ve(n,c,a,G,W,y,u);e.moveTo(o.x,o.y),e.bezierCurveTo(G,W,G,W,b.x,b.y),e.arc(G,W,Z,Le(b.x,b.y,G,W),Le(m.x,m.y,G,W),!1),e.bezierCurveTo(G,W,G,W,s.x,s.y),e.arc(G,W,Z,Le(s.x,s.y,G,W),Le(o.x,o.y,G,W),!1),e.endFill()}else{if("betweenLink"===s.mark)return e.moveTo(i,d),e.lineTo(t,d),e.lineTo(n,d+x),e.lineTo(l,d+x),e.lineTo(i,d),void e.closePath();e.moveTo(i,S),null==(a=s.style)||a.bazierLink,e.arc((i+n)/2,S,(n-i)/2,-Math.PI,Math.PI,!1),e.arc((t+l)/2,S,(l-t)/2,Math.PI,-Math.PI,!0),e.closePath()}}else{if(ze(s)&&"betweenLink"===s.mark)return void("curve"===(null==(n=s.style)?void 0:n.linkConnectionType)?(e.moveTo(p,0),e.bezierCurveTo(p/5*4,(d+x-Y)/2,p/2,(d+x-Y)/5*4,0,d+x-Y)):"straight"===(null==(o=s.style)?void 0:o.linkConnectionType)?(e.moveTo(p,0),e.lineTo(0,d+x-Y)):(e.moveTo(p,0),e.lineTo(p,d+x-Y),e.lineTo(0,d+x-Y)));if("betweenLink"===s.mark&&b){let i,l;for(let d=0;d<=1;d+=.02){const a=e=>Math.log(e/(1-e)),n=e=>Z-1/(1+Math.exp(a(e)))*X+3,o=(e,i,t)=>((t-i)*e+i)/c,s=G+n(d)*Math.cos(2*-o(d,p,g)*Math.PI-Math.PI/2),m=W+n(d)*Math.sin(2*-o(d,p,g)*Math.PI-Math.PI/2);i&&l&&(e.lineStyle(t.encodedValue("strokeWidth"),ge(K),k,.5),e.moveTo(i,l),e.lineTo(s,m)),i=s,l=m}return}if("betweenLink"===s.mark)return e.moveTo(g,d+x),void e.lineTo(p,d);if(g-p<=.1)return;const a=(p+g)/2;if(e.beginFill(ge("white"),0),b){if(p<0||g>c)return;const i=Z-d/r*X,t=Ve(p,c,i,G,W,y,u),l=Ve(g,c,i,G,W,y,u);e.moveTo(t.x,t.y),e.bezierCurveTo(t.x,t.y,c/2,r/2,l.x,l.y)}else if(e.moveTo(p,S),null==(m=s.style)?void 0:m.bazierLink){const t=p,d=S,a=p+(g-p)/3,n=S+Math.min(x,(g-p)/2)*(C?1:-1),o=p+(g-p)/3*2,m=S+Math.min(x,(g-p)/2)*(C?1:-1),c=g,r=S;e.bezierCurveTo(a,n,o,m,c,r);const b=new h(t,d,a,n,o,m,c,r).getLUT(1e3);s.tooltip&&i.tooltips.push({datum:l,isMouseOver:(e,i)=>-1!==b.findIndex((t=>Math.sqrt((t.x-e)**2+(t.y-i)**2)<5)),markInfo:{}})}else{if(g<0||p>c)return;e.arc(a,S,(g-p)/2,-Math.PI,Math.PI),e.closePath()}}}))}))}(t.graphics,i,l);break;default:console.warn("Unsupported mark type")}}function fe(e,i,t,l,d){if(!e||!i||!t)return;if("brush"===l.spec().mark)return;i.pBackground.clear(),i.pBackground.removeChildren(),i.pBorder.clear(),i.pBorder.removeChildren();const a="circular"===l.spec().layout;["x","x1","x1e","xe"].forEach((e=>{l.setChannelScale(e,i._xScale)})),a?function(e,i,t,l,d){var a,n,o,s,m,c,r,b,p,h,Z,y;const u=l.spec(),[X,G]=i.position,[W,g]=i.dimensions,x=null!=(a=u.innerRadius)?a:220,V=null!=(n=u.outerRadius)?n:300,L=null!=(o=u.startAngle)?o:0,Y=null!=(s=u.endAngle)?s:360,K=X+W/2,I=G+g/2,k=Ve(0,W,x,K,I,L,Y),H=xe(0,W,L,Y),C=xe(W,W,L,Y),S=i.pBackground;"circular"===u.layout&&"withinLink"===u.mark||(S.lineStyle((null==(m=u.style)?void 0:m.outlineWidth)?(null==(c=u.style)?void 0:c.outlineWidth)/2.5:0,ge(null!=(b=null==(r=u.style)?void 0:r.outline)?b:"#DBDBDB"),1,1),S.beginFill(ge(null!=(h=null==(p=l.spec().style)?void 0:p.background)?h:d.track.background),null!=(y=null==(Z=l.spec().style)?void 0:Z.backgroundOpacity)?y:d.track.background&&"transparent"!==d.track.background?1:0),S.moveTo(k.x,k.y),S.arc(K,I,x,H,C,!0),S.arc(K,I,V,C,H,!1),S.closePath()),Qe(u.x)&&"top"===u.x.axis&&(S.lineStyle(.5,ge("black"),0,.5),S.beginFill(ge("white"),0),S.moveTo(k.x,k.y),S.arc(K,I,V-.5,H,C,!0),S.arc(K,I,V,C,H,!1),S.closePath()),S.lineStyle(.5,ge("black"),0,.5),S.beginFill(ge("white"),0),S.moveTo(K,I),S.arc(K,I,V+3,H,C,!1),S.closePath(),S.lineStyle(1,ge("#DBDBDB"),0,0),S.beginFill(ge("white"),0),S.drawCircle(K,I,x-1)}(0,i,0,l,d):(function(e,i,t,l,d){var a,n,o,s,m,c;const[r,b]=i.position,[p,h]=i.dimensions,Z=i.pBackground;if((null==(a=l.spec().style)?void 0:a.background)||d.track.background&&"transparent"!==d.track.background){Z.clear();const e=null!=(o=null==(n=l.spec().style)?void 0:n.background)?o:d.track.background,i=y(null==(s=l.spec().style)?void 0:s.backgroundOpacity)?1:null==(m=l.spec().style)?void 0:m.backgroundOpacity;Z.lineStyle(1,ge("white"),0,0),Z.beginFill(ge(e),i),Z.drawRect(r,b,p,h)}if(d.track.alternatingBackground&&"transparent"!==d.track.alternatingBackground){const e=l.spec();if(!Qe(e.row)||"nominal"!==e.row.type)return;const t=null!=(c=l.getChannelDomainArray("row"))?c:["___SINGLE_ROW___"];if(0===t.length)return;t.forEach(((e,a)=>{var n,o,s,m;if(a%2==0)return;const c=l.encodedValue("row",e),r=null!=(o=null==(n=l.spec().style)?void 0:n.background)?o:d.track.alternatingBackground,b=y(null==(s=l.spec().style)?void 0:s.backgroundOpacity)?1:null==(m=l.spec().style)?void 0:m.backgroundOpacity;Z.lineStyle(1,ge("white"),0,0),Z.beginFill(ge(r),b),Z.drawRect(i.position[0],i.position[1]+c,p,h/t.length)}))}}(0,i,0,l,d),function(e,i,t,l){var d,a,n,o;const s=i.pBorder,[m,c]=i.position,[r,b]=i.dimensions;s.lineStyle(null!=(a=null==(d=t.spec().style)?void 0:d.outlineWidth)?a:1,ge(null!=(o=null==(n=t.spec().style)?void 0:n.outline)?o:l.track.outline),1,.5),s.beginFill(ge("white"),0),s.drawRect(m,c,r,b);const p=t.spec().x;s.lineStyle(1,ge(l.axis.baselineColor),1,.5),Qe(p)&&"top"===p.axis?(s.moveTo(m,c),s.lineTo(m+r,c)):Qe(p)&&"bottom"===p.axis&&(s.moveTo(m,c+b),s.lineTo(m+r,c+b))}(0,i,l,d)),Ke(i,l,d)}function Re(e,i,t,l,d){if(!e||!i||!t)return;if("brush"===l.spec().mark)return;const a="circular"===l.spec().layout;["x","x1","x1e","xe"].forEach((e=>{l.setChannelScale(e,i._xScale)})),a?(function(e,i,t,l,d){var a,n,o,s,m;const c=l.spec(),r="circular"===c.layout,b=l.getChannelDomainArray("y"),p=l.getChannelRangeArray("y");if(!r)return;if(!l.isShowYAxis()||!b||!p)return;const[h,y]=[c.width,c.height],u=null!=(a=c.innerRadius)?a:220,X=null!=(n=c.outerRadius)?n:300,G=X-u,W=null!=(o=c.startAngle)?o:0,g=null!=(s=c.endAngle)?s:360,x=h/2,V=y/2,L=null!=(m=l.getChannelDomainArray("row"))?m:["___SINGLE_ROW___"],Y=y/L.length;if(Y/y*G<=20)return;const K=l.spec().y,I=!Qe(K)||"right"!==K.axis,k=Z().domain(b).range(p),H=t.graphics;L.forEach((i=>{const t=l.encodedValue("row",i),a=X-t/y*G,n=Ve(I?0:h,h,X-(t+Y)/y*G,x,V,W,g),o=Ve(I?0:h,h,a,x,V,W,g);H.lineStyle(1,ge(d.axis.baselineColor),1,.5),H.moveTo(n.x,n.y),H.lineTo(o.x,o.y);const s=e=>6*h/2/Math.PI/e,m=e=>8*h/2/Math.PI/e,c=Y/y*G,r=Math.max(Math.ceil(c/40),1);let p=k.ticks(r).filter((e=>b[0]<=e&&e<=b[1]));1===p.length&&(p=k.ticks(r+1).filter((e=>b[0]<=e&&e<=b[1]))),H.lineStyle(1,ge(d.axis.tickColor),1,.5),p.forEach((e=>{const i=k(e),l=X-(t+Y-i)/y*G,d=I?0:h-s(l),a=I?s(l):h,n=Ve(d,h,l,x,V,W,g),o=xe(d,h,W,g),m=xe(a,h,W,g);H.moveTo(n.x,n.y),H.arc(x,V,l,o,m,!0),H.arc(x,V,l,m,o,!1),H.closePath()}));{const e=I?0:h-m(u),i=I?m(u):h,t=xe(e,h,W,g),l=xe(i,h,W,g);H.moveTo(n.x,n.y),H.arc(x,V,u,t,l,!0),H.arc(x,V,u,l,t,!1),H.closePath()}{const e=I?0:h-m(X),i=I?m(X):h,t=xe(e,h,W,g),l=xe(i,h,W,g);H.moveTo(o.x,o.y),H.arc(x,V,X,t,l,!0),H.arc(x,V,X,l,t,!1),H.closePath()}p.forEach((i=>{const l=k(i),a=X-(t+Y-l)/y*G,n=Ve(2*s(a),h,a,x,V,W,g),o=ke({color:d.axis.labelColor,size:d.axis.labelFontSize,fontFamily:d.axis.labelFontFamily,fontWeight:d.axis.labelFontWeight}),m=new e.libraries.PIXI.Text(i,o);m.anchor.x=I?1:0,m.anchor.y=.5,m.position.x=n.x,m.position.y=n.y,m.resolution=4;const c=new e.libraries.PIXI.TextStyle(o),r=e.libraries.PIXI.TextMetrics.measureText(m.text,c).width/(2*a*Math.PI)*h*360/(g-W),b=I?2*s(a):h-2*s(a)-r,p=[];for(let t=I?2*s(a)+r:h-2*s(a);t>=b;t-=r/10){const i=Ve(t,h,a,x,V,W,g);p.push(new e.libraries.PIXI.Point(i.x,i.y))}m.updateText();const Z=new e.libraries.PIXI.SimpleRope(m.texture,p);H.addChild(Z)}))}))}(e,0,t,l,d),function(e,i,t,l,d){var a,n,o;const s=l.spec(),{title:m}=s;if("circular"!==s.layout)return;if(!m)return;const[c,r]=i.dimensions,b=null!=(a=s.outerRadius)?a:300,p=null!=(n=s.startAngle)?n:0,h=null!=(o=s.endAngle)?o:360,Z=c/2,y=r/2,u=t.graphics,X=b-1,G=Ve(1,c,X,Z,y,p,h),W=ke({color:d.track.titleColor,size:12,fontFamily:d.axis.labelFontFamily,fontWeight:d.axis.labelFontWeight}),g=new e.libraries.PIXI.Text(m,W);g.anchor.x=1,g.anchor.y=.5,g.position.x=G.x,g.position.y=G.y,g.resolution=4;const x=new e.libraries.PIXI.TextStyle(W),V=e.libraries.PIXI.TextMetrics.measureText(g.text,x),L=V.width/(2*X*Math.PI)*c*360/(h-p),Y=1+L,K=[];for(let C=Y;C>=1;C-=L/10){const i=Ve(C,c,X-V.height/2,Z,y,p,h);K.push(new e.libraries.PIXI.Point(i.x,i.y))}const I=xe(1,c,p,h),k=xe(Y+1,c,p,h);u.lineStyle(1,ge("red"),0,.5),u.beginFill(ge(d.track.titleBackground),.5),u.moveTo(G.x,G.y),u.arc(Z,y,X-V.height,I,k,!0),u.arc(Z,y,X,k,I,!1),u.closePath(),g.updateText();const H=new e.libraries.PIXI.SimpleRope(g.texture,K);u.addChild(H)}(e,i,t,l,d)):(function(e,i,t,l,d){var a;const n="circular"===l.spec().layout,o=l.getChannelDomainArray("y"),s=l.getChannelRangeArray("y");if(n)return;if(!l.isShowYAxis()||!o||!s)return;const[m,c]=i.dimensions,[r,b]=i.position,p=null!=(a=l.getChannelDomainArray("row"))?a:["___SINGLE_ROW___"],h=c/p.length;if(h<=20)return;const y=l.spec().y,u=!Qe(y)||"right"!==y.axis,X=Z().domain(o).range(s),G=i.pBorder;p.forEach((i=>{const t=l.encodedValue("row",i),a=u?r:r+m,n=b+t;G.lineStyle(1,ge(d.axis.baselineColor),1,.5),G.moveTo(a,n),G.lineTo(a,n+h);const s=Math.max(Math.ceil(h/40),1);let c=X.ticks(s).filter((e=>o[0]<=e&&e<=o[1]));1===c.length&&(c=X.ticks(s+1).filter((e=>o[0]<=e&&e<=o[1]))),G.lineStyle(1,ge(d.axis.tickColor),1,.5);let p=u?a+6:a-6;c.forEach((e=>{const i=X(e);G.moveTo(a,n+h-i),G.lineTo(p,n+h-i)})),p=u?a+8:a-8,G.moveTo(a,n),G.lineTo(p,n),G.moveTo(a,n+h),G.lineTo(p,n+h);const Z=ke({color:d.axis.labelColor,size:d.axis.labelFontSize,fontFamily:d.axis.labelFontFamily,fontWeight:d.axis.labelFontWeight});c.forEach((i=>{const t=X(i);p=u?a+12:a-12;const l=new e.libraries.PIXI.Text(i,Z);l.anchor.x=u?0:1,l.anchor.y=0===t?.9:.5,l.position.x=p,l.position.y=n+h-t,G.addChild(l)}))}))}(e,i,0,l,d),function(e,i,t,l,d){var a;const n=l.spec();if(!Qe(n.row)||"nominal"!==n.row.type||!n.row.legend)return;const o=null!=(a=l.getChannelDomainArray("row"))?a:["___SINGLE_ROW___"];if(0===o.length)return;const s=i.pBorder,m=ke({color:d.legend.labelColor,size:d.legend.labelFontSize,fontWeight:d.legend.labelFontWeight,fontFamily:d.legend.labelFontFamily});o.forEach((t=>{const a=l.encodedValue("row",t),n=new e.libraries.PIXI.Text(t,m);n.anchor.x=0,n.anchor.y=0,n.position.x=i.position[0]+4,n.position.y=i.position[1]+a+2,s.addChild(n);const o=new e.libraries.PIXI.TextStyle(m),c=e.libraries.PIXI.TextMetrics.measureText(t,o);s.beginFill(ge(d.legend.background),d.legend.backgroundOpacity),s.lineStyle(1,ge(d.legend.backgroundStroke),0,0),s.drawRect(i.position[0]+1,i.position[1]+a+1,c.width+8,c.height+4)}))}(e,i,0,l,d)),He(e,i,0,l,d)}const Te={viridis:X,grey:G,warm:W,spectral:g,cividis:x,bupu:V,rdbu:L};function Je(e){return!("alignment"in e)&&!e.tracks.find((e=>"overlay"===e.alignment||"tracks"in e))}function ve(e){return!we(e)&&"data"in e&&!("mark"in e)}function Pe(e){return"object"==typeof e}function Fe(e){return!("overlay"in e)}function we(e){return"overlay"in e}function ze(e){return Fe(e)&&Qe(e.x)&&"genomic"===e.x.type&&Qe(e.y)&&"genomic"===e.y.type}function Me(e){return null!==e&&"object"==typeof e&&"value"in e}function Ne(e){return void 0!==e&&("vector"===e.type||"beddb"===e.type||"multivec"===e.type||"bigwig"===e.type||"matrix"===e.type||"bam"===e.type)}function Qe(e){return"object"==typeof e&&!("value"in e)}function je(e){return u(e)}function Ue(e){return("bar"===e.mark||"area"===e.mark||"text"===e.mark)&&Qe(e.color)&&"nominal"===e.color.type&&(!e.row||Me(e.row))&&Qe(e.y)&&"quantitative"===e.y.type&&!Qe(e.ye)}function Be(e,i){if(Qe(i)&&i.field)return e[null==i?void 0:i.field]}function De(e,i){const t=[];return Ce.forEach((l=>{const d=e[l];Qe(d)&&d.type===i&&t.push(l)})),t}function Oe(e){if((Fe(e)||we(e))&&Qe(e.x)&&e.x.axis&&"none"!==e.x.axis)return!0;if(we(e)){let i=!1;return e.overlay.forEach((e=>{i||Qe(e.x)&&e.x.axis&&"none"!==e.x.axis&&(i=!0)})),i}return!1}function Ee(e){if(ve(e))return[];if(!we(e))return[e];if(0===e.overlay.length)return[s(o({},e),{superpose:void 0})];const i=JSON.parse(JSON.stringify(e));delete i.overlay;const t=[];let l;e.overlay.forEach(((e,l)=>{const d=Y(JSON.parse(JSON.stringify(i)),e);d.title&&0!==l&&delete d.title,t.push(d)})),t.forEach((e=>{Qe(e.x)&&e.x.axis&&!l&&(l=e.x.axis)}));return t.map((e=>s(o({},e),{x:s(o({},e.x),{axis:l})})))}function Ae(e){if(0===e.length)return!1;const i=e.filter((e=>e));if(i.length!==e.length)return!1;const t=Object.keys(i[0]).sort();let l=!0;return t.forEach((e=>{1===Array.from(new Set(i.map((i=>JSON.stringify(i[e]))))).length||(l=!1)})),l}function _e(e,i){const t=e?JSON.parse(JSON.stringify(e)):{};return i?Y(t,i):t}function $e(e,i){"tracks"in e?e.tracks.forEach(((...e)=>i(...e))):e.views.forEach((e=>$e(e,i)))}function qe(e,i){"tracks"in e?e.tracks.forEach((e=>i(e))):e.views.forEach((e=>{i(e),qe(e,i)}))}function ei(e,i){"tracks"in e||(i(e),e.views.forEach((e=>{ei(e,i)})))}function ii(e){if(Je(e)){const i=JSON.parse(JSON.stringify(e));return delete i.tracks,e.tracks.filter((e=>!e._invalidTrack)).map((e=>Y(JSON.parse(JSON.stringify(i)),e)))}const i=[];var t;return Je(t=e)||function(e){return"alignment"in e&&"overlay"===e.alignment}(t)?i.push(s(o({},e),{overlay:[...e.tracks.filter((e=>!e._invalidTrack))],tracks:void 0,alignment:void 0})):e.tracks.filter((e=>!e._invalidTrack)).map((t=>{if("alignment"in t)i.push(s(o({},t),{overlay:[...t.tracks],tracks:void 0,alignment:void 0}));else{const l=JSON.parse(JSON.stringify(e));delete l.tracks;const d=Y(JSON.parse(JSON.stringify(l)),t);i.push(d)}})),JSON.parse(JSON.stringify(i))}function ti(e,i){if(i?(void 0===e.assembly&&(e.assembly=i.assembly),void 0===e.layout&&(e.layout=i.layout),void 0===e.orientation&&(e.orientation=i.orientation),void 0===e.static&&(e.static=void 0!==i.static&&i.static),void 0===e.zoomLimits&&(e.zoomLimits=i.zoomLimits),void 0===e.xDomain&&(e.xDomain=i.xDomain),void 0===e.linkingId&&(e.linkingId=i.linkingId),void 0===e.centerRadius&&(e.centerRadius=i.centerRadius),void 0!==e.spacing||"tracks"in e||(e.spacing=i.spacing),void 0===e.xOffset&&(e.xOffset=i.xOffset),void 0===e.yOffset&&(e.yOffset=i.yOffset),"views"in e&&"arrangement"in i&&void 0===e.arrangement&&(e.arrangement=i.arrangement),e.style=_e(i.style,e.style)):(void 0===e.assembly&&(e.assembly="hg38"),void 0===e.layout&&(e.layout="linear"),void 0===e.orientation&&(e.orientation="horizontal"),void 0===e.static&&(e.static=!1),void 0===e.zoomLimits&&(e.zoomLimits=[1,null]),void 0===e.centerRadius&&(e.centerRadius=.3),void 0===e.spacing&&(e.spacing=10),"views"in e&&void 0===e.arrangement&&(e.arrangement="vertical"),void 0===e.xOffset&&(e.xOffset=0),void 0===e.yOffset&&(e.yOffset=0)),"tracks"in e){let i=ii(e);i=function(e){return[].concat(...e.map((e=>{if(ve(e)||!we(e)||e.overlay.length<=1)return[e];if(0===e.overlay.filter((e=>e.data)).length)return[e];if(Ae([e.data,...e.overlay.map((e=>e.data))]))return[e];const i=JSON.parse(JSON.stringify(e));delete i.overlay;const t=[],l=JSON.parse(JSON.stringify(i));return l.overlay=[],e.overlay.forEach((e=>{if(l.data||(l.data=e.data),!e.data||Ae([l.data,e.data]))return void l.overlay.push(e);const d=Y(JSON.parse(JSON.stringify(i)),e);t.push(d)})),(l.overlay.length>0?[l,...t]:t).map(((e,i,t)=>{const l=0!==i,d=Fe(e)&&Qe(e.y)&&!e.y.axis&&l?s(o({},e.y),{axis:1===i?"right":"none"}):Fe(e)?e.y:void 0;return e.title&&i!==t.length-1&&1!==t.length&&delete e.title,s(o({},e),{overlayOnPreviousTrack:l,y:d})}))})))}(i);const t=K.v4();i.forEach(((l,d,a)=>{var n,o,s;if(l.width||(l.width=360),l.height||(l.height=180),"displacement"in l)if("pile"===(null==(n=l.displacement)?void 0:n.type)&&void 0===l.row&&Qe(l.x)&&l.x.field&&Qe(l.xe)&&l.xe.field){const e=K.v4(),i={type:"displace",newField:e,boundingBox:{startField:l.x.field,endField:l.xe.field,padding:l.displacement.padding},method:"pile"};l.dataTransform||(l.dataTransform=[]),l.dataTransform=[...l.dataTransform,i],l.row={field:e,type:"nominal"}}else null==(o=l.displacement)||o.type;if(l.layout&&(l.layout=void 0),l.zoomLimits&&(l.zoomLimits=void 0),l.assembly||(l.assembly=e.assembly),l.layout||(l.layout=e.layout),l.orientation||(l.orientation=e.orientation),void 0===l.static&&(l.static=void 0!==e.static&&e.static),l.zoomLimits||(l.zoomLimits=e.zoomLimits),l.style=_e(e.style,l.style),we(l)&&l.overlay.forEach((e=>{e.style=_e(l.style,e.style)})),"circular"!==l.layout&&!ze(l)||"vertical"!==l.orientation||(l.orientation="horizontal"),ze(l)&&(l.layout="linear"),(Fe(l)||we(l))&&Qe(l.x)&&!l.x.domain?l.x.domain=e.xDomain:we(l)&&l.overlay.forEach((i=>{Qe(i.x)&&!i.x.domain&&(i.x.domain=e.xDomain)})),(Fe(l)||we(l))&&Qe(l.x)&&!l.x.linkingId)l.x.linkingId=null!=(s=e.linkingId)?s:t;else if(we(l)){let i=!1;l.overlay.forEach((l=>{var d;i||Qe(l.x)&&!l.x.linkingId&&(l.x.linkingId=null!=(d=e.linkingId)?d:t,i=!0)}))}0===d&&(l.overlayOnPreviousTrack=!1),(0===d||0!==d&&1===i.slice(0,d).filter((e=>!e.overlayOnPreviousTrack)).length&&!0===l.overlayOnPreviousTrack)&&((Fe(l)||we(l))&&Qe(l.x)&&!l.x.axis?"vertical"===l.orientation?l.x.axis="left":l.x.axis="top":we(l)&&l.overlay.forEach((e=>{Qe(e.x)&&!e.x.axis&&("vertical"===l.orientation?e.x.axis="left":e.x.axis="top")}))),(Fe(l)||we(l))&&Qe(l.x)&&l.x.axis&&"none"!==l.x.axis?"vertical"===l.orientation?"top"===l.x.axis?l.x.axis="left":"bottom"===l.x.axis&&(l.x.axis="right"):"left"===l.x.axis?l.x.axis="top":"right"===l.x.axis&&(l.x.axis="bottom"):we(l)&&l.overlay.forEach((e=>{Qe(e.x)&&e.x.axis&&"none"!==e.x.axis&&("vertical"===l.orientation?"top"===e.x.axis?e.x.axis="left":"bottom"===e.x.axis&&(e.x.axis="right"):"left"===e.x.axis?e.x.axis="top":"right"===e.x.axis&&(e.x.axis="bottom"))})),0!==d&&(d===a.length-1&&a.slice(0,d+1).filter((e=>e.overlayOnPreviousTrack)).length<d||d!==a.length-1&&a.slice(d+1).filter((e=>e.overlayOnPreviousTrack)).length===a.length-d-1&&a.slice(0,d+1).filter((e=>e.overlayOnPreviousTrack)).length<d)&&(Fe(l)&&"withinLink"===l.mark&&void 0===l.flipY?l.flipY=!0:we(l)&&("withinLink"===l.mark&&void 0===l.flipY&&(l.flipY=!0),l.overlay.forEach((e=>{"withinLink"===e.mark&&void 0===e.flipY&&(e.flipY=!0)})))),l.overlayOnPreviousTrack&&a[d-1]&&(l.width=a[d-1].width,l.height=a[d-1].height,l.layout=a[d-1].layout,l.assembly=a[d-1].assembly)})),e.tracks=i}else e.views.forEach((i=>{ti(i,e)}))}const li=[{name:"gene",channels:[{name:"startPosition",type:"genomic",required:!0},{name:"endPosition",type:"genomic",required:!0},{name:"strandColor",type:"nominal",required:!0},{name:"strandRow",type:"nominal",required:!0},{name:"opacity",type:"value",required:!1},{name:"geneHeight",type:"value",required:!1},{name:"geneLabel",type:"nominal",required:!0},{name:"geneLabelColor",type:"nominal",required:!0},{name:"geneLabelFontSize",type:"value",required:!1},{name:"geneLabelStroke",type:"value",required:!1},{name:"geneLabelStrokeThickness",type:"value",required:!1},{name:"geneLabelOpacity",type:"value",required:!1},{name:"type",type:"nominal",required:!0}],mapping:[{dataTransform:[{type:"filter",base:"type",oneOf:["gene"]},{type:"filter",base:"strandColor",oneOf:["-"]}],mark:"triangleLeft",x:{base:"startPosition",type:"genomic"},size:{base:"geneHeight",value:12},row:{base:"strandRow",type:"nominal",domain:["+","-"]},color:{base:"strandColor",type:"nominal",domain:["+","-"],range:["blue","red"]},opacity:{base:"opacity",value:.4},style:{align:"right"}},{dataTransform:[{type:"filter",base:"type",oneOf:["gene"]},{type:"filter",base:"strandColor",oneOf:["+"]}],mark:"triangleRight",x:{base:"endPosition",type:"genomic"},size:{base:"geneHeight",value:12},row:{base:"strandRow",type:"nominal",domain:["+","-"]},color:{base:"strandColor",type:"nominal",domain:["+","-"],range:["blue","red"]},opacity:{base:"opacity",value:.4},style:{align:"left"}},{dataTransform:[{type:"filter",base:"type",oneOf:["exon"]}],mark:"rect",x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},size:{base:"geneHeight",value:12},row:{base:"strandRow",type:"nominal",domain:["+","-"]},color:{base:"strandColor",type:"nominal",domain:["+","-"],range:["blue","red"]},opacity:{base:"opacity",value:.4}},{dataTransform:[{type:"filter",base:"type",oneOf:["gene"]},{type:"filter",base:"strandColor",oneOf:["+"]}],mark:"rect",x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},row:{base:"strandRow",type:"nominal",domain:["+","-"]},color:{base:"strandColor",type:"nominal",domain:["+","-"],range:["blue","red"]},opacity:{base:"opacity",value:.4},size:{value:3}},{dataTransform:[{type:"filter",base:"type",oneOf:["gene"]},{type:"filter",base:"strandColor",oneOf:["-"]}],mark:"rect",x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},row:{base:"strandRow",type:"nominal",domain:["+","-"]},color:{base:"strandColor",type:"nominal",domain:["+","-"],range:["blue","red"]},opacity:{base:"opacity",value:.4},size:{value:3}},{dataTransform:[{type:"filter",base:"type",oneOf:["gene"]}],mark:"text",text:{base:"geneLabel",type:"nominal"},x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},row:{base:"strandRow",type:"nominal",domain:["+","-"]},color:{base:"geneLabelColor",type:"nominal",domain:["+","-"],range:["blue","red"]},opacity:{base:"opacity",value:1},size:{base:"geneLabelFontSize",value:18},stroke:{base:"geneLabelStroke",value:"white"},strokeWidth:{base:"geneLabelStrokeThickness",value:2},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}]}]},{name:"ideogram",channels:[{name:"startPosition",type:"genomic",required:!0},{name:"endPosition",type:"genomic",required:!0},{name:"chrHeight",type:"value",required:!1},{name:"name",type:"nominal",required:!0},{name:"stainBackgroundColor",type:"nominal",required:!0},{name:"stainLabelColor",type:"nominal",required:!0},{name:"stainStroke",type:"value",required:!1},{name:"stainStrokeWidth",type:"value",required:!1}],mapping:[{mark:"rect",dataTransform:[{type:"filter",base:"stainBackgroundColor",oneOf:["acen"],not:!0}],color:{base:"stainBackgroundColor",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","lightgray","gray","gray","black","#7B9CC8","#DC4542"]},size:{base:"chrHeight",value:18},x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},stroke:{base:"stainStroke",value:"gray"},strokeWidth:{base:"stainStrokeWidth",value:.3}},{mark:"triangleRight",dataTransform:[{type:"filter",base:"stainBackgroundColor",oneOf:["acen"]},{type:"filter",base:"name",include:"q"}],color:{base:"stainBackgroundColor",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","lightgray","gray","gray","black","#7B9CC8","#DC4542"]},size:{base:"chrHeight",value:18},x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},stroke:{base:"stainStroke",value:"gray"},strokeWidth:{base:"stainStrokeWidth",value:.3}},{mark:"triangleLeft",dataTransform:[{type:"filter",base:"stainBackgroundColor",oneOf:["acen"]},{type:"filter",base:"name",include:"p"}],color:{base:"stainBackgroundColor",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","lightgray","gray","gray","black","#7B9CC8","#DC4542"]},size:{base:"chrHeight",value:18},x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},stroke:{base:"stainStroke",value:"gray"},strokeWidth:{base:"stainStrokeWidth",value:.3}},{mark:"text",dataTransform:[{type:"filter",base:"stainLabelColor",oneOf:["acen"],not:!0}],color:{base:"stainLabelColor",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},text:{base:"name",type:"nominal"},x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}]}]},{name:"sequence",channels:[{name:"startPosition",type:"genomic",required:!0},{name:"endPosition",type:"genomic",required:!0},{name:"barLength",type:"quantitative",required:!0},{name:"baseBackground",type:"nominal",required:!0},{name:"baseLabelColor",type:"nominal",required:!0},{name:"baseLabelFontSize",type:"value",required:!1}],mapping:[{mark:"bar",x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},y:{base:"barLength",type:"quantitative",axis:"none"},color:{base:"baseBackground",type:"nominal",domain:["A","T","G","C"]}},{dataTransform:[{type:"filter",base:"barLength",oneOf:[0],not:!0}],mark:"text",x:{base:"startPosition",type:"genomic"},xe:{base:"endPosition",type:"genomic"},color:{base:"baseLabelColor",type:"nominal",domain:["A","T","G","C"],range:["white"]},text:{base:"baseBackground",type:"nominal"},size:{base:"baseLabelFontSize",value:18},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:30,target:"mark"},{operation:"LT",measure:"zoomLevel",threshold:10,target:"track"}]}]}];const di={chr1:248956422,chr2:242193529,chr3:198295559,chr4:190214555,chr5:181538259,chr6:170805979,chr7:159345973,chr8:145138636,chr9:138394717,chr10:133797422,chr11:135086622,chr12:133275309,chr13:114364328,chr14:107043718,chr15:101991189,chr16:90338345,chr17:83257441,chr18:80373285,chr19:58617616,chr20:64444167,chr21:46709983,chr22:50818468,chrX:156040895,chrY:57227415},ai={chr1:249250621,chr2:243199373,chr3:198022430,chr4:191154276,chr5:180915260,chr6:171115067,chr7:159138663,chr8:146364022,chr9:141213431,chr10:135534747,chr11:135006516,chr12:133851895,chr13:115169878,chr14:107349540,chr15:102531392,chr16:90354753,chr17:81195210,chr18:78077248,chr19:59128983,chr20:63025520,chr21:48129895,chr22:51304566,chrX:155270560,chrY:59373566,chrM:16571},ni={chr1:247249719,chr2:242951149,chr3:199501827,chr4:191273063,chr5:180857866,chr6:170899992,chr7:158821424,chr8:146274826,chr9:140273252,chr10:135374737,chr11:134452384,chr12:132349534,chr13:114142980,chr14:106368585,chr15:100338915,chr16:88827254,chr17:78774742,chr18:76117153,chr19:63811651,chr20:62435964,chr21:46944323,chr22:49691432,chrX:154913754,chrY:57772954,chrM:16571},oi={chr1:245522847,chr2:243018229,chr3:199505740,chr4:191411218,chr5:180857866,chr6:170975699,chr7:158628139,chr8:146274826,chr9:138429268,chr10:135413628,chr11:134452384,chr12:132449811,chr13:114142980,chr14:106368585,chr15:100338915,chr16:88827254,chr17:78774742,chr18:76117153,chr19:63811651,chr20:62435964,chr21:46944323,chr22:49554710,chrX:154824264,chrY:57701691,chrM:16571},si={chr1:246127941,chr2:243615958,chr3:199344050,chr4:191731959,chr5:181034922,chr6:170914576,chr7:158545518,chr8:146308819,chr9:136372045,chr10:135037215,chr11:134482954,chr12:132078379,chr13:113042980,chr14:105311216,chr15:100256656,chr16:90041932,chr17:81860266,chr18:76115139,chr19:63811651,chr20:63741868,chr21:46976097,chr22:49396972,chrX:153692391,chrY:50286555,chrM:16571},mi={chr1:195471971,chr2:182113224,chr3:160039680,chr4:156508116,chr5:151834684,chr6:149736546,chr7:145441459,chr8:129401213,chr9:124595110,chr10:130694993,chr11:122082543,chr12:120129022,chr13:120421639,chr14:124902244,chr15:104043685,chr16:98207768,chr17:94987271,chr18:90702639,chr19:61431566,chrX:171031299,chrY:91744698,chrM:16299},ci={chr1:197195432,chr2:181748087,chr3:159599783,chr4:155630120,chr5:152537259,chr6:149517037,chr7:152524553,chr8:131738871,chr9:124076172,chr10:129993255,chr11:121843856,chr12:121257530,chr13:120284312,chr14:125194864,chr15:103494974,chr16:98319150,chr17:95272651,chr18:90772031,chr19:61342430,chrX:166650296,chrY:15902555,chrM:16299};function ri(e,i){const t=Object.entries(bi(i).interval).find((i=>{const[,[t,l]]=i;return t<=e&&e<l}));if(!t)return`${e}`;const l=I(",")(e-t[1][0]);return`${t[0]}:${l}`}function bi(e){return e&&e in hi?hi[e]:hi.hg38}const pi=e=>`https://s3.amazonaws.com/gosling-lang.org/data/${e}.chrom.sizes`,hi=Object.freeze({hg38:{size:di,interval:Zi(di),total:yi(di),path:pi("hg38")},hg19:{size:ai,interval:Zi(ai),total:yi(ai),path:pi("hg19")},hg18:{size:ni,interval:Zi(ni),total:yi(ni),path:pi("hg18")},hg17:{size:oi,interval:Zi(oi),total:yi(oi),path:pi("hg17")},hg16:{size:si,interval:Zi(si),total:yi(si),path:pi("hg16")},mm10:{size:mi,interval:Zi(mi),total:yi(mi),path:pi("mm10")},mm9:{size:ci,interval:Zi(ci),total:yi(ci),path:pi("mm9")},unknown:{size:{chr:Number.MAX_VALUE},interval:{chr:[0,Number.MAX_VALUE]},total:Number.MAX_VALUE,path:pi("hg38")}});function Zi(e){const i={};return Object.keys(e).reduce(((t,l)=>(i[l]=[t,t+e[l]],t+e[l])),0),i}function yi(e){return Object.values(e).reduce(((e,i)=>e+i),0)}function ui(e,...i){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');const{absToChr:t,colorToHex:l,pixiTextToSvg:d,showMousePosition:a,svgLine:n}=e.utils;class s extends e.tracks.PixiTrack{constructor(i){super(...i);const[t,d]=i,{dataConfig:n,animate:s,chromInfoPath:m,isShowGlobalMousePosition:c}=t;this.searchField=null,this.chromInfo=null,this.dataConfig=n,this.pTicksCircular=new e.libraries.PIXI.Graphics,this.pTicks=new e.libraries.PIXI.Graphics,this.pMain.addChild(this.pTicks),this.pMain.addChild(this.pTicksCircular),this.gTicks={},this.tickTexts={},this.options=d,this.isShowGlobalMousePosition=c,this.textFontSize=12,this.textFontFamily="sans-serif",this.textFontWeight="normal",this.textFontColor="#808080",this.textStrokeColor="#ffffff",this.pixiTextConfig=ke({size:+this.options.fontSize||this.textFontSize,fontFamily:this.options.fontFamily||this.textFontFamily,fontWeight:this.options.fontWeight||this.textFontWeight,color:this.options.color||this.textFontColor,stroke:this.options.stroke||this.textStrokeColor,strokeThickness:2}),this.stroke=l(this.pixiTextConfig.stroke),this.tickWidth=200,this.tickHeight=6,this.tickTextSeparation=2,this.tickColor=this.options.tickColor?l(this.options.tickColor):7829367,this.animate=s,this.pubSubs=[],this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=a(this,this.is2d,this.isShowGlobalMousePosition()));let r=m;m||(r=`${n.server}/chrom-sizes/?id=${n.tilesetUid}`);const b=this.options.assembly,p={},h=o({},bi(b).size),Z=[];Object.keys(bi(b).size).forEach((e=>{p[e]={chr:e,pos:bi(b).size[e]}})),Object.keys(bi(b).interval).forEach((e=>{Z.push({chr:e,pos:bi(b).interval[e][0]})})),this.chromInfo={chrPositions:p,chromLengths:h,cumPositions:Z},this.rerender(this.options,!0),this.draw(),this.animate()}initBoundsTicks(){this.pTicks&&(this.pMain.removeChild(this.pTicks),this.pTicks=null),this.gBoundTicks||(this.gBoundTicks=new e.libraries.PIXI.Graphics,this.leftBoundTick=new e.libraries.PIXI.Text("",this.pixiTextConfig),this.rightBoundTick=new e.libraries.PIXI.Text("",this.pixiTextConfig),this.gBoundTicks.addChild(this.leftBoundTick),this.gBoundTicks.addChild(this.rightBoundTick),this.pMain.addChild(this.gBoundTicks)),this.texts=[]}initChromLabels(){this.chromInfo&&(this.gBoundTicks&&(this.pMain.removeChild(this.gBoundTicks),this.gBoundTicks=null),this.pTicks||(this.pTicks=new e.libraries.PIXI.Graphics,this.pMain.addChild(this.pTicks)),this.texts=[],this.pTicks.removeChildren(),this.chromInfo.cumPositions.forEach((i=>{const t=i.chr;this.gTicks[t]=new e.libraries.PIXI.Graphics,this.tickTexts[t]||(this.tickTexts[t]=[]);const l=new e.libraries.PIXI.Text(t,this.pixiTextConfig);l.hashValue=Math.random(),this.pTicks.addChild(l),this.pTicks.addChild(this.gTicks[t]),this.texts.push(l)})))}rerender(e,i){const t=JSON.stringify(e);(i||t!==this.prevOptions)&&(this.prevOptions=t,this.options=e,this.pixiTextConfig.fontSize=+this.options.fontSize?+this.options.fontSize+"px":this.pixiTextConfig.fontSize,this.pixiTextConfig.fill=this.options.color||this.pixiTextConfig.fill,this.pixiTextConfig.stroke=this.options.stroke||this.pixiTextConfig.stroke,this.stroke=l(this.pixiTextConfig.stroke),this.tickColor=this.options.tickColor?l(this.options.tickColor):7829367,"ends"===this.options.tickPositions&&"circular"!==this.options.layout?this.initBoundsTicks():this.initChromLabels(),super.rerender(e,i),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=a(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}formatTick(e){if(isNaN(e))return"null";const i=this._xScale.domain(),t=i[1]-i[0],l=k(e,t),d=I(","),a=H(`,.${l}`,t);let n=d;return"si"===this.options.tickFormat?n=a:"plain"===this.options.tickFormat?n=d:"ends"===this.options.tickPositions&&(n=a),n(e)}drawBoundsTicks(e,i){const t=this.gBoundTicks;t.clear(),t.lineStyle(1,0);const l=this.options.reverseOrientation?0:this.dimensions[1],d=this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight;t.moveTo(1,l),t.lineTo(1,d),t.moveTo(this.dimensions[0]-1,l),t.lineTo(this.dimensions[0]-1,d),this.leftBoundTick.x=0,this.leftBoundTick.y=this.options.reverseOrientation?d+this.tickTextSeparation:d-this.tickTextSeparation,this.leftBoundTick.text="unknown"===this.options.assembly?`${this.formatTick(e[1])}`:`${e[0]}: ${this.formatTick(e[1])}`,this.leftBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.x=this.dimensions[0],this.rightBoundTick.text="unknown"===this.options.assembly?`${this.formatTick(i[1])}`:`${i[0]}: ${this.formatTick(i[1])}`,this.rightBoundTick.y=this.options.reverseOrientation?d+this.tickTextSeparation:d-this.tickTextSeparation,this.rightBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.anchor.x=1,this.flipText&&(this.leftBoundTick.scale.x=-1,this.leftBoundTick.anchor.x=1,this.rightBoundTick.scale.x=-1,this.rightBoundTick.anchor.x=0),this.leftBoundTick.tickLine=[1,this.dimensions[1],1,this.dimensions[1]-this.tickHeight],this.rightBoundTick.tickLine=[this.dimensions[0]-1,this.dimensions[1],this.dimensions[0]-1,this.dimensions[1]-this.tickHeight],this.tickTexts={},this.tickTexts.all=[this.leftBoundTick,this.rightBoundTick]}drawTicks(i){const t=this.gTicks[i.chr];t.visible=!0,t.clear();const l=+this.chromInfo.chromLengths[i.chr],d=Math.max(this._xScale(i.pos),0),a=Math.min(this._xScale(i.pos+l),this.dimensions[0]),n=(a-d)/this.tickWidth,o=Z().domain([Math.max(1,this._xScale.invert(0)-i.pos),Math.min(l,this._xScale.invert(this.dimensions[0])-i.pos)]).range([d,a]).ticks(n).filter((e=>Number.isInteger(e))),s=this.tickTexts[i.chr],m=this.tickHeight;let c=m+this.tickTextSeparation;for(this.options.reverseOrientation&&(c=this.dimensions[1]-c);s.length<o.length;){const t=new e.libraries.PIXI.Text("",this.pixiTextConfig);s.push(t),this.gTicks[i.chr].addChild(t)}for(;s.length>o.length;){const e=s.pop();this.gTicks[i.chr].removeChild(e)}let r=0;for(;r<o.length;){s[r].visible=!0,s[r].anchor.x=.5,s[r].anchor.y="circular"===this.options.layout||this.options.reverseOrientation?0:1,this.flipText&&(s[r].scale.x=-1);const e="unknown"===this.options.assembly?"":`${i.chr}: `;s[r].text=0===o[r]?`${e}1`:`${e}${this.formatTick(o[r])}`;const l=this._xScale(i.pos+o[r]);if("circular"===this.options.layout){const e=this.addCurvedText(s[r],l+0);this.pTicksCircular.addChild(e)}else{s[r].x=l+0,s[r].y=this.dimensions[1]-c,s[r].tickLine=[l-1,this.dimensions[1],l-1,this.dimensions[1]-m-1];const e=this.options.reverseOrientation?0:this.dimensions[1],i=this.options.reverseOrientation?m:this.dimensions[1]-m;t.lineStyle(1,this.tickColor),t.moveTo(l,e),t.lineTo(l,i)}r+=1}for("circular"===this.options.layout&&(r=0);r<s.length;)s[r].visible=!1,r+=1;return o.length}addCurvedText(i,t){const{innerRadius:l,outerRadius:d,startAngle:a,endAngle:n,width:o,height:s}=this.options,m=(d+l)/2,c=Ve(t,o,m,o/2,s/2,a,n);i.x=c.x,i.y=c.y,i.resolution=4;const r=new e.libraries.PIXI.TextStyle(this.pixiTextConfig),b=e.libraries.PIXI.TextMetrics.measureText(i.text,r),p=b.width/(2*m*Math.PI)*o*360/(n-a);let[h,Z]=[t-p/2,t+p/2];if(h<0){const e=-h;h=0,Z+=e}else if(Z>o){const e=Z-o;Z=o,h-=e}const y=[],u=l+b.height/2+3;for(let X=Z;X>=h;X-=p/10){const i=Ve(X,o,u,o/2,s/2,a,n);y.push(new e.libraries.PIXI.Point(i.x,i.y))}i.updateText();return new e.libraries.PIXI.SimpleRope(i.texture,y)}draw(){if(this.allTexts=[],!this.texts)return;const e=t(this._xScale.domain()[0],this.chromInfo),i=t(this._xScale.domain()[1],this.chromInfo);if(!e||!i)return void console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo);if("ends"===this.options.tickPositions&&"circular"!==this.options.layout){if(!this.gBoundTicks)return;return this.gBoundTicks.visible=!0,void this.drawBoundsTicks(e,i)}if(!this.pTicks)return;const l="circular"===this.options.layout;for(let t=0;t<this.texts.length;t++)this.texts[t].visible=!1,this.gTicks[this.chromInfo.cumPositions[t].chr].visible=!1;let d=this.tickHeight+this.tickTextSeparation;this.options.reverseOrientation&&(d=this.dimensions[1]-d),Object.keys(this.chromInfo.chrPositions).forEach((e=>{this.tickTexts[e]&&this.tickTexts[e].forEach((e=>{e.visible=!1}))})),this.pTicksCircular.removeChildren();for(let t=e[3];t<=i[3];t++){const e=this.chromInfo.cumPositions[t],i=e.pos+this.chromInfo.chromLengths[e.chr]/2,a=this._xScale(i),n=this.texts[t];let o;n.anchor.x=.5,n.anchor.y=l?.5:this.options.reverseOrientation?0:1,l?(o=this.addCurvedText(n,a),this.pTicksCircular.addChild(o)):(n.x=a,n.y=this.dimensions[1]-d),n.updateTransform(),this.flipText&&(n.scale.x=-1);const s=this.drawTicks(e);l?s>0&&this.pTicksCircular.removeChild(o):n.visible=s<=0,this.allTexts.push({importance:n.hashValue,text:n,caption:null,rope:o})}this.hideOverlaps(this.allTexts)}hideOverlaps(e){let i=[];i=e.map((({text:e})=>{e.updateTransform();const i=e.getBounds();return[i.x-5,i.y-5,i.x+i.width+10,i.y+i.height+10]})),C(i,((i,t)=>{e[i].importance>e[t].importance?(e[t].text.visible=!1,"circular"===this.options.layout&&e[t].rope&&this.pTicksCircular.removeChild(e[t].rope)):(e[i].text.visible=!1,"circular"===this.options.layout&&e[i].rope&&this.pTicksCircular.removeChild(e[i].rope))}))}setPosition(e){super.setPosition(e),[this.pMain.position.x,this.pMain.position.y]=this.position}zoomed(e,i){0===[...e.domain(),...i.domain()].filter((e=>isNaN(e))).length&&(this.xScale(e),this.yScale(i),this.draw())}exportSVG(){let e=null,i=null;super.exportSVG?[i,e]=super.exportSVG():(i=document.createElement("g"),e=i),i.setAttribute("class","chromosome-labels");const t=document.createElement("g");return e.appendChild(t),t.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.allTexts.filter((e=>e.text.visible)).forEach((e=>{const i=d(e.text);t.appendChild(i)})),Object.values(this.tickTexts).forEach((e=>{e.filter((e=>e.visible)).forEach((e=>{let i=d(e);t.appendChild(i),i=n(e.x,this.options.reverseOrientation?0:this.dimensions[1],e.x,this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight,1,this.tickColor);const l=document.createElement("line");l.setAttribute("x1",e.tickLine[0]),l.setAttribute("y1",e.tickLine[1]),l.setAttribute("x2",e.tickLine[2]),l.setAttribute("y2",e.tickLine[3]),l.setAttribute("style","stroke: grey"),t.appendChild(i),t.appendChild(l)}))})),[i,e]}}return new s(i)}function Xi(e,...i){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');class t extends e.tracks.SVGTrack{constructor(e){var i,t;super(...e);const[l,d]=e,{registerViewportChanged:a,removeViewportChanged:n,setDomainsCallback:o}=l;this.uid=K.v1(),this.options=d,this.hasFromView=!l.projectionXDomain,this.removeViewportChanged=n,this.setDomainsCallback=o,this.viewportXDomain=this.hasFromView?null:l.projectionXDomain,this.viewportYDomain=this.hasFromView?null:[0,0],this.prevExtent=[0,0],this.RR=.02;const s=[0,1.7*Math.PI];this.circularBrushData=this.getBrushData(s),this.brush=S().innerRadius(null!=(i=this.options.innerRadius)?i:100).outerRadius(null!=(t=this.options.outerRadius)?t:200),this.gBrush=this.gMain.append("g").attr("id",`brush-${this.uid}`).selectAll(".brush").data(this.circularBrushData).enter().append("path").attr("class","brush").attr("d",this.brush).attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",(e=>"brush"===e.type?this.options.projectionFillOpacity:0)).attr("stroke-opacity",(e=>"brush"===e.type?this.options.projectionStrokeOpacity:0)).attr("stroke-width",this.options.strokeWidth).style("pointer-events","all").style("cursor",(e=>e.cursor)).call(this.dragged()),a(this.uid,this.viewportChanged.bind(this)),this.draw()}getBrushData(e){return[{type:"brush",startAngle:e[0],endAngle:e[1],cursor:"grab"},{type:"start",startAngle:e[0],endAngle:e[0]+this.RR,cursor:"move"},{type:"end",startAngle:e[1]-this.RR,endAngle:e[1],cursor:"move"}]}cropExtent(e){let[i,t]=e,l=0;for(;(i>2*Math.PI||t>2*Math.PI||i<0||t<0)&&!(l++>10);)i>2*Math.PI||t>2*Math.PI?(i-=2*Math.PI,t-=2*Math.PI):(i<0||t<0)&&(i+=2*Math.PI,t+=2*Math.PI);return[i,t].sort(((e,i)=>e-i))}updateBrush(e){let[i,t]=e;i<=0&&t<=0||i>=2*Math.PI-0&&t>=2*Math.PI-0?this.gBrush.attr("visibility","hidden"):(i<0&&(i=0),i>2*Math.PI-0&&(i=2*Math.PI-0),t<0&&(t=0),t>2*Math.PI-0&&(t=2*Math.PI-0),this.circularBrushData=this.getBrushData(e),this.gBrush.data(this.circularBrushData).attr("d",this.brush).attr("visibility","visible"))}dragged(){return e.libraries.d3Drag.drag().on("start",(()=>{this.startEvent=e.libraries.d3Selection.event.sourceEvent,this.prevExtent=[this.circularBrushData[0].startAngle-this.RR,this.circularBrushData[0].endAngle+this.RR]})).on("drag",(i=>{const[t,l]=this.position,[d,a]=this.dimensions,n=e.libraries.d3Selection.event.sourceEvent,o=this.startEvent.layerX-t,s=this.startEvent.layerY-l,m=n.layerX-t,c=n.layerY-l,r=Math.atan2(o-d/2,s-a/2)-Math.atan2(m-d/2,c-a/2);let[b,p]=this.prevExtent;if("brush"===i.type){if(b+=r,p+=r,b<0||2*Math.PI-0<p){const e=0-b,i=p-(2*Math.PI-0);e>i?(p+=e,b+=e):(b-=i,p-=i)}}else"start"===i.type?b+=r:"end"===i.type&&(p+=r);if([b,p]=this.cropExtent([b,p]),!this._xScale||!this._yScale)return;const h=(this.options.endAngle-this.options.startAngle)/360,Z=b-this.options.startAngle/360*Math.PI*2,y=p-this.options.startAngle/360*Math.PI*2,u=[this._xScale.invert(d-d*y/(2*Math.PI*h)),this._xScale.invert(d-d*Z/(2*Math.PI*h))],X=this.viewportYDomain;this.hasFromView||(this.viewportXDomain=u),this.setDomainsCallback(u,X),this.updateBrush([b,p])}))}draw(){if(!this._xScale||!this.yScale)return;if(!this.viewportXDomain||!this.viewportYDomain)return;const e=this._xScale(this.viewportXDomain[0]),i=this._xScale(this.viewportXDomain[1]),[t]=this.dimensions;let l=xe(e,t,this.options.startAngle,this.options.endAngle)+Math.PI/2,d=xe(i,t,this.options.startAngle,this.options.endAngle)+Math.PI/2;[d,l]=this.cropExtent([d,l]),this.updateBrush([d,l])}viewportChanged(e,i){const t=e.domain(),l=i.domain();this.viewportXDomain=t,this.viewportYDomain=l,this.draw()}remove(){this.removeViewportChanged(this.uid),super.remove()}rerender(){}zoomed(e,i){this.xScale(e),this.yScale(i),this.draw()}setPosition(e){super.setPosition(e),this.draw()}setDimensions(e){super.setDimensions(e),this.gBrush.attr("transform",`translate(${e[0]/2},${e[1]/2})`),this.draw()}}return new t(i)}ui.config={type:"axis-track",datatype:["multivec","epilogos"],local:!1,orientation:"1d-horizontal",thumbnail:(new DOMParser).parseFromString('<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 5640 5420" preserveAspectRatio="xMidYMid meet"> <g id="layer101" fill="#000000" stroke="none"> <path d="M0 2710 l0 -2710 2820 0 2820 0 0 2710 0 2710 -2820 0 -2820 0 0 -2710z"/> </g> <g id="layer102" fill="#750075" stroke="none"> <path d="M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z"/> <path d="M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z"/> <path d="M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z"/> <path d="M4340 2710 l0 -2510 560 0 560 0 0 2510 0 2510 -560 0 -560 0 0 -2510z"/> <path d="M200 1870 l0 -1670 630 0 630 0 0 1670 0 1670 -630 0 -630 0 0 -1670z"/> <path d="M1660 1810 l0 -1610 570 0 570 0 0 1610 0 1610 -570 0 -570 0 0 -1610z"/> <path d="M3000 840 l0 -640 570 0 570 0 0 640 0 640 -570 0 -570 0 0 -640z"/> </g> <g id="layer103" fill="#ffff04" stroke="none"> <path d="M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z"/> <path d="M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z"/> <path d="M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z"/> </g> </svg>',"text/xml").documentElement,availableOptions:["innerRadius","outerRadius","startAngle","endAngle","width","height","layout","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","trackType","tickPositions","scaledHeight","backgroundColor"],defaultOptions:{innerRadius:340,outerRadius:310,startAngle:0,endAngle:360,width:700,height:700,layout:"linear",labelPosition:"none",labelColor:"black",labelTextOpacity:.4,trackBorderWidth:0,trackBorderColor:"black",tickPositions:"even",backgroundColor:"transparent"}};function Gi(e,i){const{field:t,not:l}=e;let d=Array.from(i);if("oneOf"in e){const{oneOf:i}=e;d=d.filter((e=>l?-1===i.indexOf(e[t]):-1!==i.indexOf(e[t])))}else if(function(e){return"inRange"in e}(e)){const{inRange:i}=e;d=d.filter((e=>l?!(i[0]<=e[t]&&e[t]<=i[1]):i[0]<=e[t]&&e[t]<=i[1]))}else if(function(e){return"include"in e}(e)){const{include:i}=e;d=d.filter((e=>l?`${e[t]}`.includes(i):!`${e[t]}`.includes(i)))}return d}function Wi(e,i){if(0===function(e){const i=[];return Ce.forEach((t=>{const l=e[t];Qe(l)&&"aggregate"in l&&i.push(t)})),i}(e).length)return i;const t=De(e,"nominal");if(1!==t.length)return console.warn("Currently, we only support aggregating datasets with single nominal field."),i;const l=e[t[0]];if(!Qe(l))return i;const d=l.field;if(!d)return i;const a=[...De(e,"quantitative"),...De(e,"genomic")],n=[],o=Array.from(new Set(i.map((e=>e[d]))));let s=!1;return o.forEach((t=>{const l={};l[d]=t,a.forEach((a=>{const n=e[a];if(!Qe(n))return void(s=!0);const{field:o,aggregate:m}=n;o&&m?l[o]="max"===m?Math.max(...i.filter((e=>e[d]===t)).map((e=>+e[o]))):Math.min(...i.filter((e=>e[d]===t)).map((e=>+e[o]))):s=!0})),n.push(l)})),s?i:n}function gi(e,...i){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');return new class{constructor(e){const[i]=e;if(this.dataConfig=i,this.tilesetInfoLoading=!1,this.assembly=this.dataConfig.assembly,this.filter=this.dataConfig.filter,!i.url)return void console.error("Please provide the `url` of the data");const t=bi(this.assembly).size,l=[],d={};let a=0;Object.keys(bi(this.assembly).size).forEach(((e,i)=>{const t={id:i,chr:e,pos:a};l.push(t),d[e]=t,a+=bi(this.assembly).size[e]})),this.chromSizes={chrToAbs:(e,i)=>this.chromSizes.chrPositions[e].pos+i,cumPositions:l,chrPositions:d,totalLength:a,chromLengths:t},i.data?this.values=i.data:this.dataPromise=this.fetchCSV()}fetchCSV(){var e;const{url:i,chromosomeField:t,genomicFields:l,quantitativeFields:d,headerNames:a,chromosomePrefix:n,longToWideId:o,genomicFieldsToConvert:s}=this.dataConfig,m=null!=(e=this.dataConfig.separator)?e:",";return fetch(i).then((e=>e.ok?e.text():Promise.reject(e.status))).then((e=>{const i=a?`${a.join(m)}\n${e}`:e;return f(m).parse(i,(e=>{let i=!0;if(s?s.forEach((t=>{const l=t.chromosomeField;t.genomicFields.forEach((t=>{try{if("unknown"!==this.assembly){const i=n?e[l].replace(n,"chr"):e[l].includes("chr")?e[l]:`chr${e[l]}`;e[t]=bi(this.assembly).interval[i][0]+ +e[t]}}catch(d){i=!1}}))})):l.forEach((l=>{if(e[t])try{const i=n?e[t].replace(n,"chr"):e[t].includes("chr")?e[t]:`chr${e[t]}`;e[l]=bi(this.assembly).interval[i][0]+ +e[l]}catch(d){i=!1}})),i)return null==d||d.forEach((i=>{e[i]=+e[i]})),e}))})).then((e=>{var i;if(o&&(null==(i=e[0])?void 0:i[o])){const i=Object.keys(e[0]),t={};e.forEach((e=>{t[e[o]]?i.forEach((i=>{t[e[o]][`${i}_2`]=e[i]})):t[e[o]]=JSON.parse(JSON.stringify(e))})),this.values=Object.keys(t).map((e=>t[e]))}else this.values=e})).catch((e=>{console.error("[Gosling Data Fetcher] Error fetching data",e)}))}generateTilesetInfo(e){this.tilesetInfoLoading=!1;const i=this.chromSizes.totalLength,t={tile_size:1024,max_zoom:Math.ceil(Math.log(i/1024)/Math.log(2)),max_width:i,min_pos:[0,0],max_pos:[i,i]};return e&&e(t),t}tilesetInfo(e){if(this.dataPromise)return this.tilesetInfoLoading=!0,this.dataPromise.then((()=>this.generateTilesetInfo(e))).catch((e=>{this.tilesetInfoLoading=!1,console.error("[Gosling Data Fetcher] Error parsing data:",e)}))}fetchTilesDebounced(e,i){const t={},l=[],d=[];for(const a of i){const e=a.split("."),i=parseInt(e[0],10),t=parseInt(e[1],10),n=parseInt(e[2],10);Number.isNaN(t)||Number.isNaN(i)?console.warn("[Gosling Data Fetcher] Invalid tile zoom or position:",i,t,n):(l.push(a),d.push(this.tile(i,t,n)))}return Promise.all(d).then((i=>{i.forEach(((e,i)=>{const d=l[i];t[d]=e,t[d].tilePositionId=d})),e(t)})),t}tile(e,i,t){var l;return null==(l=this.tilesetInfo())?void 0:l.then((l=>{var d,a;const n=+l.max_width/2**+e,o=l.min_pos[0]+i*n,s=l.min_pos[0]+(i+1)*n;let m=this.values.filter((e=>{if(this.dataConfig.genomicFields)return this.dataConfig.genomicFields.find((i=>o<e[i]&&e[i]<=s));{const i=[];return this.dataConfig.genomicFieldsToConvert.forEach((e=>i.push(...e.genomicFields))),i.find((i=>o<e[i]&&e[i]<=s))}}));null==(d=this.filter)||d.forEach((e=>{m=Gi(e,m)}));const c=null!=(a=this.dataConfig.sampleLength)?a:1e3;return{tabularData:m.length>c?R(m,c):m,server:null,tilePos:[i,t],zoomLevel:e}}))}}(i)}function xi(e,...i){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');return new class{constructor(e){const[i]=e;if(this.dataConfig=i,this.tilesetInfoLoading=!1,this.assembly=this.dataConfig.assembly,!i.values)return void console.error("Please provide `values` of the raw data");const t=bi(this.assembly).size,l=[],d={};let a=0;Object.keys(bi(this.assembly).size).forEach(((e,i)=>{const t={id:i,chr:e,pos:a};l.push(t),d[e]=t,a+=bi(this.assembly).size[e]})),this.chromSizes={chrToAbs:(e,i)=>this.chromSizes.chrPositions[e].pos+i,cumPositions:l,chrPositions:d,totalLength:a,chromLengths:t},this.values=i.values.map((e=>{var i;let t=!0;if(this.dataConfig.genomicFields.forEach((i=>{if(e[this.dataConfig.chromosomeField])try{const t=e[this.dataConfig.chromosomeField].includes("chr")?e[this.dataConfig.chromosomeField]:`chr${e[this.dataConfig.chromosomeField]}`;e[i]=bi(this.assembly).interval[t][0]+ +e[i]}catch(l){t=!1}})),t)return null==(i=this.dataConfig.quantitativeFields)||i.forEach((i=>{e[i]=+e[i]})),e}))}tilesetInfo(e){this.tilesetInfoLoading=!1;const i=this.chromSizes.totalLength,t={tile_size:1024,max_zoom:Math.ceil(Math.log(i/1024)/Math.log(2)),max_width:i,min_pos:[0],max_pos:[i]};return e&&e(t),t}fetchTilesDebounced(e,i){const t={},l=[],d=[];for(const a of i){const e=a.split("."),i=parseInt(e[0],10),t=parseInt(e[1],10);Number.isNaN(t)||Number.isNaN(i)?console.warn("[Gosling Data Fetcher] Invalid tile zoom or position:",i,t):(l.push(a),d.push(this.tile(i,t)))}return Promise.all(d).then((i=>{i.forEach(((e,i)=>{const d=l[i];t[d]=e,t[d].tilePositionId=d})),e(t)})),t}tile(e,i){var t;const l=this.tilesetInfo(),d=+l.max_width/2**+e,a=l.min_pos[0]+i*d,n=l.min_pos[0]+(i+1)*d,o=this.values.filter((e=>this.dataConfig.genomicFields.find((i=>a<e[i]&&e[i]<=n)))),s=null!=(t=this.dataConfig.sampleLength)?t:1e3;return{tabularData:o.length>s?R(o,s):o,server:null,tilePos:[i],zoomLevel:e}}}(i)}function Vi(e,...i){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');return new class{constructor(e){e.chromSizesUrl="https://aveit.s3.amazonaws.com/higlass/data/sequence/hg38.chrom.sizes",this.dataConfig=e,this.bwFileHeader=null,this.bwFile=null,this.TILE_SIZE=1024,this.errorTxt="",this.dataPromises=[];const i=bi(this.assembly).size,t=[],l={};let d=0;Object.keys(bi(this.assembly).size).forEach(((e,i)=>{const a={id:i,chr:e,pos:d};t.push(a),l[e]=a,d+=bi(this.assembly).size[e]})),this.chromSizes={chrToAbs:(e,i)=>this.chromSizes.chrPositions[e].pos+i,cumPositions:t,chrPositions:l,totalLength:d,chromLengths:i},this.dataPromises.push(this.loadBBI(e))}loadBBI(e){return e.url?(this.bwFile=new T.BigWig({filehandle:new J.RemoteFile(e.url)}),this.bwFile.getHeader().then((e=>{this.bwFileHeader=e}))):(console.error('Please enter a "url" field to the data config'),null)}tilesetInfo(e){return this.tilesetInfoLoading=!0,Promise.all(this.dataPromises).then((()=>{this.tilesetInfoLoading=!1;let i={};const t=this.chromSizes.totalLength;return i={tile_size:this.TILE_SIZE,max_zoom:Math.ceil(Math.log(t/this.TILE_SIZE)/Math.log(2)),max_width:2**Math.ceil(Math.log(t)/Math.log(2)),min_pos:[0],max_pos:[t]},e&&e(i),i})).catch((i=>{this.tilesetInfoLoading=!1,console.error(i),e&&e({error:`Error parsing bigwig: ${i}`})}))}fetchTilesDebounced(e,i){const t={},l=[],d=[];for(const a of i){const e=a.split("."),i=parseInt(e[0],10),t=parseInt(e[1],10);Number.isNaN(t)||Number.isNaN(i)?console.warn("Invalid tile zoom or position:",i,t):(l.push(a),d.push(this.tile(i,t)))}return Promise.all(d).then((i=>{for(let e=0;e<i.length;e++){const d=l[e];t[d]=i[e],t[d].tilePositionId=d}e(t)})),t}tile(i,t){return this.tilesetInfo().then((l=>{const d=+l.max_width/2**+i,a=[],n={tilePos:[t],tileId:`bigwig.${i}.${t}`,zoomLevel:i},o=l.min_pos[0]+t*d;let s=o;const m=l.min_pos[0]+(t+1)*d,c=this.determineScale(s,m),r=(m-s)/this.TILE_SIZE,b=[];for(let e=0;e<this.TILE_SIZE;e++)b.push(s+e*r);const{chromLengths:p,cumPositions:h}=this.chromSizes;return h.forEach((i=>{const t=i.chr,l=i.pos,d=i.pos+p[t];let n,o;if(l<=s&&s<d){if(!(m>d))return n=Math.floor(s-l),o=Math.ceil(m-l),void a.push(this.bwFile.getFeatures(t,n,o,{scale:1/c}).then((i=>(i.forEach((i=>{i.startAbs=e.utils.chrToAbs(t,i.start,this.chromSizes),i.endAbs=e.utils.chrToAbs(t,i.end,this.chromSizes)})),i))));n=s-l,o=d-l,a.push(this.bwFile.getFeatures(t,n,o,{scale:1/c}).then((i=>(i.forEach((i=>{i.startAbs=e.utils.chrToAbs(t,i.start,this.chromSizes),i.endAbs=e.utils.chrToAbs(t,i.end,this.chromSizes)})),i)))),s=d}})),Promise.all(a).then((i=>{const t=i.flat();for(var l=[],d=0;d<this.TILE_SIZE;d++)l.push(null);b.forEach(((e,i)=>{if(e<o||e>m)return;const d=t.filter((i=>e>=i.startAbs&&e<i.endAbs)).map((e=>e.score));l[i]=d.length>0?d[0]:null})),n.min_value=Math.min(...l),n.max_value=Math.max(...l);const a=new e.utils.DenseDataExtrema1D(l);return n.dense=l,n.denseDataExtrema=a,n.minNonZero=a.minNonZeroInTile,n.maxNonZero=a.maxNonZeroInTile,n}))}))}determineScale(e,i){const t=[1],l=i-e;let d;return this.bwFileHeader.zoomLevels.forEach((e=>{t.push(e.reductionLevel)})),t.forEach((e=>{if(d)return;l/e<=20*this.TILE_SIZE&&(d=e)})),d||t.slice(-1)[0]}}(...i)}function Li(e){return Yi(We,e)}function Yi(e,i,t=!1){const l=new v({extendRefs:!0}).compile(e),d=l(i);let a="",n="";return l.errors&&(n=JSON.stringify(l.errors,null,2),t||console.warn(n),a=" Some properties are incorrectly used."),{state:d?"success":"warn",message:a,details:n}}function Ki(e){let i=!0;const t=[];return Ee(e).forEach((e=>{Ii(e)||"brush"===e.mark||(t.push("genomic type is not encoded to either a x- or y- axis"),i=!1);const l=e.color;Qe(l)&&"genomic"===l.type&&(t.push("genomic type cannot be used for a color channel"),i=!1);const d=e.row;Qe(d)&&"nominal"!==d.type&&(t.push(`${d.type} type cannot be used for a row channel`),i=!1),"line"===e.mark&&Qe(l)&&"quantitative"===l.type&&(t.push("`line` mark cannot be used with `quantitative` value"),i=!1)})),{valid:i,errorMessages:t}}function Ii(e){let i;return["x","y","xe","ye","x1","y1","x1e","y1e"].reverse().forEach((t=>{const l=e[t];Qe(l)&&"genomic"===l.type&&(i=l)})),i}function ki(e){let i;return["x","xe","y","ye","x1","y1","x1e","y1e"].reverse().forEach((t=>{const l=e[t];Qe(l)&&"genomic"===l.type&&(i=t)})),i}Xi.config={type:"brush-track",datatype:["projection"],local:!1,projection:!0,orientation:"2d",thumbnail:(new DOMParser).parseFromString('<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 5640 5420" preserveAspectRatio="xMidYMid meet"> <g id="layer101" fill="#000000" stroke="none"> <path d="M0 2710 l0 -2710 2820 0 2820 0 0 2710 0 2710 -2820 0 -2820 0 0 -2710z"/> </g> <g id="layer102" fill="#750075" stroke="none"> <path d="M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z"/> <path d="M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z"/> <path d="M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z"/> <path d="M4340 2710 l0 -2510 560 0 560 0 0 2510 0 2510 -560 0 -560 0 0 -2510z"/> <path d="M200 1870 l0 -1670 630 0 630 0 0 1670 0 1670 -630 0 -630 0 0 -1670z"/> <path d="M1660 1810 l0 -1610 570 0 570 0 0 1610 0 1610 -570 0 -570 0 0 -1610z"/> <path d="M3000 840 l0 -640 570 0 570 0 0 640 0 640 -570 0 -570 0 0 -640z"/> </g> <g id="layer103" fill="#ffff04" stroke="none"> <path d="M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z"/> <path d="M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z"/> <path d="M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z"/> </g> </svg>',"text/xml").documentElement,availableOptions:["innerRadius","outerRadius","startAngle","endAngle","axisPositionHorizontal","projectionFillColor","projectionStrokeColor","projectionFillOpacity","projectionStrokeOpacity","strokeWidth"],defaultOptions:{innerRadius:100,outerRadius:200,startAngle:0,endAngle:360,axisPositionHorizontal:"left",projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},gi.config={type:"csv"},xi.config={type:"json"},Vi.config={type:"bigwig"};var Hi={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://higlass.io/#viewconf",title:"HiGlass viewconf",type:"object",additionalProperties:!1,required:[],properties:{editable:{type:"boolean",default:!0},viewEditable:{type:"boolean",default:!0},tracksEditable:{type:"boolean",default:!0},zoomFixed:{type:"boolean"},compactLayout:{type:"boolean"},exportViewUrl:{type:"string"},trackSourceServers:{type:"array",items:{type:"string"},minLength:1},zoomLocks:{$ref:"#/definitions/locks/genericLocks"},locationLocks:{$ref:"#/definitions/locks/genericLocks"},valueScaleLocks:{$ref:"#/definitions/locks/valueScaleLocks"},views:{type:"array",items:{$ref:"#/definitions/view"},minLength:1},chromInfoPath:{type:"string"}},definitions:{data:{type:"object",properties:{type:{type:"string"},tilesetInfo:{type:"object"},children:{type:"array"},tiles:{type:"object"}}},locks:{slug:{type:"string"},locksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{$ref:"#/definitions/locks/slug"}}},genericLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},valueScaleLocks:{type:"object",additionalProperties:!1,required:["locksByViewUid","locksDict"],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"},ignoreOffScreenValues:{type:"boolean"}},patternProperties:{"^(?!(uid|ignoreOffScreenValues)).":{type:"object",additionalProperties:!1,required:["view","track"],properties:{view:{type:"string"},track:{$ref:"#/definitions/locks/slug"}}}}}}}}}},view:{type:"object",additionalProperties:!1,required:["tracks","layout"],properties:{autocompleteSource:{type:"string"},chromInfoPath:{type:"string"},genomePositionSearchBox:{$ref:"#/definitions/viewProperties/genomePositionSearchBox"},genomePositionSearchBoxVisible:{type:"boolean"},initialXDomain:{$ref:"#/definitions/viewProperties/domain"},initialYDomain:{$ref:"#/definitions/viewProperties/domain"},layout:{$ref:"#/definitions/viewProperties/layout"},overlays:{type:"array",items:{$ref:"#/definitions/viewProperties/overlay"}},selectionView:{type:"boolean"},tracks:{$ref:"#/definitions/viewProperties/tracks_object"},uid:{type:"string"},zoomFixed:{type:"boolean"},zoomLimits:{type:"array",minLength:2,maxLength:2}}},viewProperties:{genomePositionSearchBox:{type:"object",title:"The Genome Position Search Box Schema",required:["chromInfoServer","chromInfoId"],properties:{autocompleteServer:{type:"string",title:"The Autocomplete Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},autocompleteId:{type:"string",title:"The Autocomplete ID",default:"",examples:["OHJakQICQD6gTD7skx4EWA"],pattern:"^(.*)$"},chromInfoServer:{type:"string",title:"The Chrominfo Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},chromInfoId:{type:"string",title:"The Chromosome Info ID",default:"",examples:["hg19"],pattern:"^(.*)$"},visible:{type:"boolean",title:"The Visible Schema",default:!1}}},overlay:{type:"object",additionalProperties:!1,properties:{chromInfoPath:{type:"string"},includes:{type:"array"},options:{type:"object",properties:{extent:{type:"array"},minWidth:{type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},strokePos:{type:["string","array"]},outline:{type:"string"},outlineOpacity:{type:"number"},outlineWidth:{type:"number"},outlinePos:{type:["string","array"]}}},type:{type:"string"},uid:{type:"string"}}},layout:{type:"object",additionalProperties:!1,required:["w","h","x","y"],properties:{x:{type:"number",title:"The X Position",default:0},y:{type:"number",title:"The Y Position",default:0},w:{type:"number",title:"Width",default:12},h:{type:"number",title:"Height",default:12}}},tracks_object:{type:"object",additionalProperties:!1,properties:{left:{$ref:"#/definitions/viewProperties/tracks_array"},right:{$ref:"#/definitions/viewProperties/tracks_array"},top:{$ref:"#/definitions/viewProperties/tracks_array"},bottom:{$ref:"#/definitions/viewProperties/tracks_array"},center:{$ref:"#/definitions/viewProperties/tracks_array"},whole:{$ref:"#/definitions/viewProperties/tracks_array"},gallery:{$ref:"#/definitions/viewProperties/tracks_array"}}},tracks_array:{type:"array",items:{oneOf:[{$ref:"#/definitions/tracks/enum_track"},{$ref:"#/definitions/tracks/combined_track"},{$ref:"#/definitions/tracks/heatmap_track"},{$ref:"#/definitions/tracks/independent_viewport_projection_track"}]}},domain:{type:"array",items:{type:"number"},maxItems:2,minItems:2}},tracks:{heatmap_track:{type:"object",additionalProperties:!1,required:[],properties:{uid:{type:"string"},type:{const:"heatmap"},data:{$ref:"#/definitions/data"},height:{type:"number"},options:{type:"object"},position:{type:"string"},server:{type:"string"},tilesetUid:{type:"string"},width:{type:"number"}}},combined_track:{type:"object",additionalProperties:!1,required:["contents"],properties:{contents:{$ref:"#/definitions/viewProperties/tracks_array"},height:{type:"number"},options:{},position:{type:"string"},type:{const:"combined"},uid:{type:"string"},width:{type:"number"}}},enum_track:{type:"object",additionalProperties:!1,required:["type"],properties:{server:{type:"string"},tilesetUid:{type:"string"},data:{$ref:"#/definitions/data"},uid:{type:"string"},type:{enum:["2d-annotations","2d-chromosome-annotations","2d-chromosome-grid","2d-chromosome-labels","2d-rectangle-domains","2d-tiles","arrowhead-domains","bedlike","cross-rule","dummy","horizontal-1d-annotations","horizontal-1d-heatmap","horizontal-1d-tiles","horizontal-1d-value-interval","horizontal-2d-rectangle-domains","horizontal-bar","horizontal-chromosome-grid","horizontal-chromosome-labels","horizontal-divergent-bar","horizontal-gene-annotations","horizontal-heatmap","horizontal-line","horizontal-multivec","horizontal-point","horizontal-rule","horizontal-vector-heatmap","image-tiles","left-axis","left-stacked-interval","mapbox-tiles","osm-2d-tile-ids","osm-tiles","raster-tiles","simple-svg","square-markers","top-axis","top-stacked-interval","vertical-1d-annotations","vertical-1d-heatmap","vertical-1d-tiles","vertical-1d-value-interval","vertical-2d-rectangle-domains","vertical-bar","vertical-bedlike","vertical-chromosome-grid","vertical-chromosome-labels","vertical-gene-annotations","vertical-heatmap","vertical-line","vertical-multivec","vertical-point","vertical-rule","vertical-vector-heatmap","viewport-projection-center","viewport-projection-horizontal","viewport-projection-vertical"]},chromInfoPath:{type:"string"},fromViewUid:{type:"string"},height:{type:"number"},options:{type:"object"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}},independent_viewport_projection_track:{type:"object",additionalProperties:!1,properties:{uid:{type:"string"},type:{enum:["viewport-projection-horizontal","viewport-projection-vertical","viewport-projection-center"]},fromViewUid:{type:"null"},projectionXDomain:{$ref:"#/definitions/viewProperties/domain"},projectionYDomain:{$ref:"#/definitions/viewProperties/domain"},options:{type:"object"},transforms:{type:"array"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}}}}};function Ci(e,i){if("chromosome"in e&&(e.chromosome.includes("chr")&&(e.chromosome=e.chromosome.replace("chr","")),Object.keys(bi().interval).find((i=>i===`chr${e.chromosome}`))||(e.chromosome="1")),function(e){return"chromosome"in e&&!("interval"in e)}(e))return[bi(i).interval[`chr${e.chromosome}`][0]+1,bi(i).interval[`chr${e.chromosome}`][1]];if(function(e){return!("chromosome"in e)&&"interval"in e}(e))return e.interval;if(function(e){return"chromosome"in e&&"interval"in e}(e)){const t=bi(i).interval[`chr${e.chromosome}`][0],[l,d]=e.interval;return[t+l,t+d]}}const Si={compactLayout:!1,trackSourceServers:["https://server.gosling-lang.org/api/v1/"],views:[{genomePositionSearchBoxVisible:!1,genomePositionSearchBox:{autocompleteServer:"https://higlass.io/api/v1",autocompleteId:"P0PLbQMwTYGy-5uPIQid7A",chromInfoServer:"https://higlass.io/api/v1",chromInfoId:"hg38"},layout:{x:0,y:0,w:6.4,h:600},tracks:{top:[],left:[{type:"combined",width:130,height:600,contents:[{type:"gosling-track",server:"https://server.gosling-lang.org/api/v1/",tilesetUid:"cistrome-multivec",width:130,height:600,options:{showMousePosition:!0,mousePositionColor:"#000000",fontSize:24,labelPosition:"none",labelShowResolution:!1,labelColor:"black",labelBackgroundColor:"white",labelTextOpacity:1,labelLeftMargin:1,labelTopMargin:1,labelRightMargin:0,labelBottomMargin:0,backgroundColor:"transparent",spec:{spacing:10,orientation:"vertical",assembly:"hg38",layout:"linear",static:!1,xDomain:{interval:[0,1e9]},centerRadius:.3,xOffset:0,yOffset:0,style:{outlineWidth:.5},data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"rect",x:{field:"start",type:"genomic",axis:"left",domain:{interval:[0,1e9]},linkingId:"7f94b74e-25ec-4e67-8c75-3dc0f1b0d6bd"},xe:{field:"end",type:"genomic"},row:{field:"sample",type:"nominal",legend:!0},color:{field:"peak",type:"quantitative",legend:!0},tooltip:[{field:"start",type:"genomic",alt:"Start Position"},{field:"end",type:"genomic",alt:"End Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:160,height:600,overlayOnPreviousTrack:!1},theme:{base:"light",root:{background:"white",titleColor:"black",titleBackgroundColor:"transparent",titleFontSize:18,titleFontFamily:"Arial",titleAlign:"left",titleFontWeight:"bold",subtitleColor:"gray",subtitleBackgroundColor:"transparent",subtitleFontSize:16,subtitleFontFamily:"Arial",subtitleFontWeight:"normal",subtitleAlign:"left",mousePositionColor:"#000000"},track:{background:"transparent",alternatingBackground:"transparent",titleColor:"black",titleBackground:"white",titleFontSize:24,titleAlign:"left",outline:"black",outlineWidth:1},legend:{position:"top",background:"white",backgroundOpacity:.7,labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",backgroundStroke:"#DBDBDB",tickColor:"black"},axis:{tickColor:"black",labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",baselineColor:"black",gridColor:"#E3E3E3",gridStrokeWidth:1,gridStrokeType:"solid",gridStrokeDash:[4,4]},markCommon:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},point:{color:"#E79F00",size:3,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},rect:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},triangle:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},area:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},line:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},bar:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},rule:{color:"#E79F00",size:1,stroke:"black",strokeWidth:1,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},link:{color:"#E79F00",size:1,stroke:"black",strokeWidth:1,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},text:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6],textAnchor:"middle",textFontWeight:"normal"},brush:{color:"gray",size:1,stroke:"black",strokeWidth:1,opacity:.3,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]}}}}]},{uid:"15483511-f6fb-11eb-914b-976b6ecda162",type:"axis-track",chromInfoPath:"https://s3.amazonaws.com/gosling-lang.org/data/hg38.chrom.sizes",options:{layout:"linear",outerRadius:null,width:160,height:600,theme:{base:"light",root:{background:"white",titleColor:"black",titleBackgroundColor:"transparent",titleFontSize:18,titleFontFamily:"Arial",titleAlign:"left",titleFontWeight:"bold",subtitleColor:"gray",subtitleBackgroundColor:"transparent",subtitleFontSize:16,subtitleFontFamily:"Arial",subtitleFontWeight:"normal",subtitleAlign:"left",mousePositionColor:"#000000"},track:{background:"transparent",alternatingBackground:"transparent",titleColor:"black",titleBackground:"white",titleFontSize:24,titleAlign:"left",outline:"black",outlineWidth:1},legend:{position:"top",background:"white",backgroundOpacity:.7,labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",backgroundStroke:"#DBDBDB",tickColor:"black"},axis:{tickColor:"black",labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",baselineColor:"black",gridColor:"#E3E3E3",gridStrokeWidth:1,gridStrokeType:"solid",gridStrokeDash:[4,4]},markCommon:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},point:{color:"#E79F00",size:3,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},rect:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},triangle:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},area:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},line:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},bar:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},rule:{color:"#E79F00",size:1,stroke:"black",strokeWidth:1,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},link:{color:"#E79F00",size:1,stroke:"black",strokeWidth:1,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},text:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6],textAnchor:"middle",textFontWeight:"normal"},brush:{color:"gray",size:1,stroke:"black",strokeWidth:1,opacity:.3,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]}},assembly:"hg38",stroke:"transparent",color:"black",fontSize:12,fontFamily:"Arial",fontWeight:"normal",tickColor:"black",tickFormat:"plain",tickPositions:"even",reverseOrientation:!1},width:30}],center:[],right:[],bottom:[],gallery:[],whole:[]},initialXDomain:[0,1e9],initialYDomain:[0,1e9],zoomFixed:!1,zoomLimits:[1,null],uid:"15483510-f6fb-11eb-914b-976b6ecda162",chromInfoPath:"https://s3.amazonaws.com/gosling-lang.org/data/hg38.chrom.sizes"},{genomePositionSearchBoxVisible:!1,genomePositionSearchBox:{autocompleteServer:"https://higlass.io/api/v1",autocompleteId:"P0PLbQMwTYGy-5uPIQid7A",chromInfoServer:"https://higlass.io/api/v1",chromInfoId:"hg38"},layout:{x:6.8,y:0,w:5.2,h:600},tracks:{top:[],left:[{type:"combined",width:130,height:600,contents:[{type:"gosling-track",server:"https://server.gosling-lang.org/api/v1/",tilesetUid:"cistrome-multivec",width:130,height:600,options:{showMousePosition:!0,mousePositionColor:"#000000",fontSize:24,labelPosition:"none",labelShowResolution:!1,labelColor:"black",labelBackgroundColor:"white",labelTextOpacity:1,labelLeftMargin:1,labelTopMargin:1,labelRightMargin:0,labelBottomMargin:0,backgroundColor:"transparent",spec:{spacing:10,orientation:"vertical",assembly:"hg38",layout:"linear",static:!1,xDomain:{interval:[0,1e9]},centerRadius:.3,xOffset:0,yOffset:0,style:{outlineWidth:.5},data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"rect",x:{field:"start",type:"genomic",domain:{interval:[0,1e9]},linkingId:"7f94b74e-25ec-4e67-8c75-3dc0f1b0d6bd"},xe:{field:"end",type:"genomic"},row:{field:"sample",type:"nominal",legend:!0},color:{field:"peak",type:"quantitative",legend:!0},tooltip:[{field:"start",type:"genomic",alt:"Start Position"},{field:"end",type:"genomic",alt:"End Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:130,height:600},theme:{base:"light",root:{background:"white",titleColor:"black",titleBackgroundColor:"transparent",titleFontSize:18,titleFontFamily:"Arial",titleAlign:"left",titleFontWeight:"bold",subtitleColor:"gray",subtitleBackgroundColor:"transparent",subtitleFontSize:16,subtitleFontFamily:"Arial",subtitleFontWeight:"normal",subtitleAlign:"left",mousePositionColor:"#000000"},track:{background:"transparent",alternatingBackground:"transparent",titleColor:"black",titleBackground:"white",titleFontSize:24,titleAlign:"left",outline:"black",outlineWidth:1},legend:{position:"top",background:"white",backgroundOpacity:.7,labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",backgroundStroke:"#DBDBDB",tickColor:"black"},axis:{tickColor:"black",labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",baselineColor:"black",gridColor:"#E3E3E3",gridStrokeWidth:1,gridStrokeType:"solid",gridStrokeDash:[4,4]},markCommon:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},point:{color:"#E79F00",size:3,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},rect:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},triangle:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},area:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},line:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},bar:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},rule:{color:"#E79F00",size:1,stroke:"black",strokeWidth:1,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},link:{color:"#E79F00",size:1,stroke:"black",strokeWidth:1,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]},text:{color:"#E79F00",size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6],textAnchor:"middle",textFontWeight:"normal"},brush:{color:"gray",size:1,stroke:"black",strokeWidth:1,opacity:.3,nominalColorRange:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],quantitativeSizeRange:[2,6]}}}}]}],center:[],right:[],bottom:[],gallery:[],whole:[]},initialXDomain:[0,1e9],initialYDomain:[0,1e9],zoomFixed:!1,zoomLimits:[1,null],uid:"154b1b40-f6fb-11eb-914b-976b6ecda162"}],zoomLocks:{locksByViewUid:{},locksDict:{}},locationLocks:{locksByViewUid:{},locksDict:{}},editable:!1,chromInfoPath:"https://s3.amazonaws.com/gosling-lang.org/data/hg38.chrom.sizes"};class fi{constructor(){this.assembly="hg38",this.hg={compactLayout:!1,trackSourceServers:[],views:[],zoomLocks:{locksByViewUid:{},locksDict:{}},locationLocks:{locksByViewUid:{},locksDict:{}}},this.setEditable(!1)}spec(){return this.hg}setViewOrientation(e){return this.orientation=e,this}addDefaultView(e,i){return this.hg.views.push(JSON.parse(JSON.stringify(s(o({},(e=>({genomePositionSearchBoxVisible:!1,genomePositionSearchBox:{autocompleteServer:"https://higlass.io/api/v1",autocompleteId:"P0PLbQMwTYGy-5uPIQid7A",chromInfoServer:"https://higlass.io/api/v1",chromInfoId:null!=e?e:"hg38"},layout:{w:12,h:12,x:0,y:0},tracks:{top:[],left:[],center:[],right:[],bottom:[],gallery:[],whole:[]},initialXDomain:[0,bi(e).total],initialYDomain:[0,bi(e).total],zoomFixed:!1}))(i)),{uid:e})))),this}setAssembly(e){return this.assembly=e,this.setChromInfoPath(bi(this.assembly).path),this}getAssembly(){return this.assembly}setTextTrack(e,i,t,l="black",d=14,a="normal",n="left",o="transparent",s="Arial"){var m;return this.getLastView()&&(null==(m=this.getLastView().tracks.top)||m.push({type:"text",width:e,height:i,options:{backgroundColor:o,textColor:l,fontSize:d,fontWeight:a,fontFamily:s,offsetY:0,align:n,text:t}})),this}addBrush(e,i,t,l,d){var a,n,o,s,m,c;if(l)return null==(c=this.getView(i))||c.tracks.whole.push({type:"circular"===e?"brush-track":"viewport-projection-horizontal",uid:K.v4(),fromViewUid:l,options:{projectionFillColor:null!=(a=null==d?void 0:d.color)?a:t.brush.color,projectionStrokeColor:null!=(n=null==d?void 0:d.stroke)?n:t.brush.stroke,projectionFillOpacity:null!=(o=null==d?void 0:d.opacity)?o:t.brush.opacity,projectionStrokeOpacity:null!=(s=null==d?void 0:d.opacity)?s:t.brush.opacity,strokeWidth:null!=(m=null==d?void 0:d.strokeWidth)?m:t.brush.strokeWidth,startAngle:null==d?void 0:d.startAngle,endAngle:null==d?void 0:d.endAngle,innerRadius:null==d?void 0:d.innerRadius,outerRadius:null==d?void 0:d.outerRadius}}),this}getLastView(){return this.hg.views[this.hg.views.length-1]}getMainTrackPosition(){return"vertical"===this.orientation?"left":"center"}getLastVisView(){const e=this.hg.views.filter((e=>{var i,t;return"combined"===(null==(t=null==(i=e.tracks[this.getMainTrackPosition()])?void 0:i[0])?void 0:t.type)}));return e[e.length-1]}getView(e){return this.hg.views.find((i=>i.uid===e))}validateSpec(e=!1){return"success"===Yi(Hi,this.spec(),e).state}setDomain(e,i){return e&&(this.getLastView().initialXDomain=Ci(e,this.getAssembly())),i&&(this.getLastView().initialYDomain=Ci(i,this.getAssembly())),this}adjustDomain(e="horizontal",i,t){if("vertical"!==e)return this;const l=this.getLastView().initialXDomain;if(!l)return this;const[d,a]=l,n=a-d,o=(d+a)/2;return this.getLastView().initialXDomain=[o-n/i/2/t*i,o+n/i/2/t*i],this}setZoomFixed(e){return this.getLastView().zoomFixed=e,this}setZoomLimits(e){return this.getLastView().zoomLimits=e,this}setLayout(e){return this.getLastView().layout=e,this}setEditable(e){return this.hg.editable=e,this}setChromInfoPath(e){return this.getLastView()&&(this.getLastView().chromInfoPath=e),this.hg.chromInfoPath=e,this}addTrackSourceServers(e){var i,t;return e&&-1===(null==(i=this.hg.trackSourceServers)?void 0:i.indexOf(e))&&(null==(t=this.hg.trackSourceServers)||t.push(e)),this}setMainTrack(e){var i;return this.getLastView()?(this.getLastView().tracks[this.getMainTrackPosition()]=[{type:"combined",uid:`${null!=(i=e.uid)?i:K.v4()}-${this.getMainTrackPosition()}-combined`,width:e.width-1,height:e.height,contents:[e]}],this):this}addTrackToCombined(e){var i;return this.getLastVisView()?(null==(i=this.getLastVisView().tracks[this.getMainTrackPosition()][0])||i.contents.push(e),this):this}setAxisTrack(e,i="regular",t){if(!this.hg.views)return this;const l="left"===e||"right"===e?"width":"height",d={uid:K.v1(),type:"axis-track",chromInfoPath:this.hg.chromInfoPath,options:s(o({},t),{assembly:this.getAssembly(),stroke:"transparent",color:t.theme.axis.labelColor,fontSize:t.theme.axis.labelFontSize,fontFamily:t.theme.axis.labelFontFamily,fontWeight:t.theme.axis.labelFontWeight,tickColor:t.theme.axis.tickColor,tickFormat:"narrower"===i?"si":"plain",tickPositions:"regular"===i?"even":"ends",reverseOrientation:"bottom"===e||"right"===e})};if("circular"===t.layout)this.addTrackToCombined(s(o({},d),{options:s(o({},d.options),{layout:"circular"})}));else{const i=s(o({},d),{[l]:30});if("left"===e){if(0!==this.getLastView().tracks.left.filter((e=>"axis-track"===e.type)).length)return this;this.getLastView().tracks.left=(a=this.getLastView().tracks.left,n=0,m=i,a||(a=[]),[...a.slice(0,n),m,...a.slice(n)])}else if("right"===e){if(0!==this.getLastView().tracks.left.filter((e=>"axis-track"===e.type)).length)return this;this.getLastView().tracks.left.push(i)}else{if(0!==this.getLastView().tracks[e].filter((e=>"axis-track"===e.type)).length)return this;this.getLastView().tracks[e].push(i)}}var a,n,m;return this}setExampleHiglassViewConfig(){this.hg=Si}}function Ri(e,i,t,l){const d=l&&0!==l?l:void 0;let a=0;switch(i){case"less-than":case"LT":case"lt":a=t>e?d?(t-e)/d:1:0;break;case"less-than-or-equal-to":case"LTET":case"ltet":a=t>=e?d?(t-e)/d:1:0;break;case"greater-than":case"GT":case"gt":a=t<e?d?(e-t)/d:1:0;break;case"greater-than-or-equal-to":case"GTET":case"gtet":a=t<=e?d?(e-t)/d:1:0}return Math.max(Math.min(1,a),0)}const Ti={NOMINAL_COLOR:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"],NOMINAL_COLOR_EXTENDED:["#d60000","#018700","#b500ff","#05acc6","#97ff00","#ffa52f","#ff8ec8","#79525e","#00fdcf","#afa5ff","#93ac83","#9a6900","#366962","#d3008c","#fdf490","#c86e66","#9ee2ff","#00c846","#a877ac","#b8ba01","#f4bfb1","#ff28fd","#f2cdff","#009e7c","#ff6200","#56642a","#953f1f","#90318e","#ff3464","#a0e491","#8c9ab1","#829026","#ae083f","#77c6ba","#bc9157","#e48eff","#72b8ff","#c6a5c1","#ff9070","#d3c37c","#bceddb","#6b8567","#916e56","#f9ff00","#bac1df","#ac567c","#ffcd03","#ff49b1","#c15603","#5d8c90","#c144bc","#00753f","#ba6efd","#00d493","#00ff75","#49a150","#cc9790","#00ebed","#db7e01","#f77589","#b89500","#c84248","#00cff9","#755726","#85d401","#ebffd4","#a77b87","#db72c8","#cae256","#8abf5d","#a1216b","#855b89","#89bacf","#ffbad6","#b6cfaa","#97414d","#67aa00","#fde1b1","#ff3628","#80793d","#d6e8ff","#a795c6","#7ea59a","#d182a3","#54823b","#e6a872","#9cffff","#da5480","#05b3aa","#ffaaf6","#d1afef","#da015d","#ac1a13","#60b385","#d442fd","#acaa59","#fb9ca7","#b3723b","#f26952","#aed1d4","#9affc3","#dbb333","#eb01c3","#9900c4","#cfff9e","#a55949","#3b6d01","#008579","#959167","#89dbb3","#6d7400","#aa5dca","#07ef00","#804f3d","#d88052","#ffc862","#b8009e","#99acdd","#904f00","#8c4470","#4f6e52","#ff8734","#c68ecd","#d4e29e","#b1826d","#9cfb75","#56dd77","#f90087","#a1cdff","#13cad1","#118e54","#d154a5","#00dfc3","#a3832f","#77975b","#baaa80","#70a3af","#d6fbff","#e8013a","#d84621","#ff82ed","#b63862","#b6cd72","#97626b","#897490","#00a316","#00f4a1","#bf90f2","#89e4d8","#a34d95","#6e5d00","#8cc68e","#95aa2a","#c672dd","#b33b01","#d69a36","#dfacb6","#009aa0","#599000","#97bca8","#ac8ca8","#dad4ff","#547c72","#00ba69","#ffc38e","#b800d4","#dfcf5b","#629a7b","#bfedbc","#c1bdfd","#80d3dd","#e2857e","#f9eb4d","#bf6d82","#caff4f","#ef72aa","#ed67ff","#9946ae","#6d6942","#e25660","#dd662d","#9cdb5d","#e29ccf","#b87500","#c6002d","#dfbcda","#59b5df","#ff59da","#38c1a1","#9e698c","#acaac8","#95622f","#b55662","#2b7e60","#b1e400","#eda590","#95fde2","#ff548e","#bd6ea1","#aa3b36","#d8cf00","#aa80cd","#a08052","#e100e8","#c35b3d","#b53a85","#8c7700","#dbbc95","#529e93","#afbc82","#91b5b6","#a75423","#ffd4ef","#79ae6b","#5db54b","#80fb9a","#48ffef","#979548","#9387a7","#31d400","#6ee956","#b6d4eb","#705470","#f2db8a","#aad4c1","#7ecdf2","#89ba00","#64b6ba","#ffb500","#c38285","#caaa5e","#647748","#59e2ff","#df4dcd","#e9ff79","#bc66b8","#c395a5","#64c674","#d19570","#70cf4f","#aa6e66","#9c60a5","#00b800","#e299b3","#bc006b","#b3e8ef","#cdbfe4","#77a342","#856277","#568e5b","#9eafc4","#e82fa0","#247c2a","#826723","#bfbc4d","#ddd3a5"],QUANTITATIVE_COLOR:"viridis",SIZE:3,SIZE_RANGE:[2,6]};class Ji{constructor(e,i,t){this.id=K.v1(),this.theme=t,this.dataOriginal=JSON.parse(JSON.stringify(i)),this.dataAggregated=JSON.parse(JSON.stringify(i)),this.specOriginal=JSON.parse(JSON.stringify(e)),this.specComplete=JSON.parse(JSON.stringify(e)),this.channelScales={};const l=this.validateSpec();l.valid?(this.generateCompleteSpec(this.specComplete),this.flipRanges(this.specComplete),this.generateScales(),this.dataAggregated=Wi(this.spec(),this.dataAggregated)):console.warn("Gosling specification is not valid!",l.errorMessages)}getId(){return this.id}getRenderingId(){var e;return null!=(e=this.spec()._renderingId)?e:this.getId()}originalSpec(){return this.specOriginal}spec(){return this.specComplete}data(){return this.dataAggregated}generateCompleteSpec(e){if(!e.width||!e.height)return void console.warn("Size of track is not determined yet.");if("vertical"===e.orientation){const i=e.width;e.width=e.height,e.height=i}const i=this.getGenomicChannelKey();let t=!1;"x"===i&&(t=Qe(e.x)&&void 0!==e.x.axis&&"none"!==e.x.axis),"y"===i&&(t=Qe(e.y)&&void 0!==e.y.axis&&"none"!==e.y.axis),"circular"!==e.layout?Qe(e.x)&&void 0!==e.x.axis&&"none"!==e.x.axis&&(e.height-=30):"x"===i&&t&&Qe(e.x)&&"top"===e.x.axis?e.outerRadius=e.outerRadius-30:"x"===i&&t&&Qe(e.x)&&"bottom"===e.x.axis&&(e.innerRadius=e.innerRadius+30),Ce.forEach((i=>{const t=e[i];Qe(t)&&void 0===t.zeroBaseline&&"genomic"!==t.type&&["x","y"].includes(i)&&(t.zeroBaseline=!0)})),this.addScaleMaterials(e)}flipRanges(e){Qe(e.x)&&e.x.flip&&Array.isArray(e.x.range)&&(e.x.range=e.x.range.reverse()),Qe(e.y)&&e.y.flip&&Array.isArray(e.y.range)&&(e.y.range=e.y.range.reverse())}getGenomicChannelKey(){return ki(this.spec())}getGenomicChannel(){return Ii(this.spec())}setChannelDomain(e,i,t){const l=this.originalSpec()[e];if(!t&&Qe(l)&&void 0!==l.domain)return;const d=this.specComplete[e];Qe(d)&&(d.domain=i)}setChannelRange(e,i){const t=this.specComplete[e];Qe(t)&&(t.range=i)}updateChannelValue(){if(void 0===this.originalSpec().y){const e=this.spec().y,i=this.getChannelDomainArray("row");e&&Me(e)&&i&&(e.value=this.spec().height/i.length/2)}}encodedValue(e,i){if("text"===e&&void 0!==i)return`${+i?~~i:i}`;const t=this.spec()[e],l=Qe(t)?t.type:Me(t)?"constant":void 0;if(l){if("constant"===l)return this.channelScales[e]();if(void 0!==i&&"function"==typeof this.channelScales[e])switch(e){case"x":case"y":case"x1":case"y1":case"xe":case"ye":case"x1e":if("quantitative"===l||"genomic"===l)return this.channelScales[e](i);if("nominal"===l)return this.channelScales[e](i);break;case"color":case"stroke":case"size":if("quantitative"===l)return this.channelScales[e](i);if("nominal"===l)return this.channelScales[e](i);break;case"row":if("nominal"===l)return this.channelScales[e](i);break;case"strokeWidth":case"opacity":if("quantitative"===l)return this.channelScales[e](i);break;default:return void console.warn(`${e} is not supported for encoding values, so returning a undefined value`)}}}trackVisibility(e){const i=this.spec();if(!i.visibility||0===i.visibility.length||0===i.visibility.filter((e=>"track"===e.target)).length)return!0;let t=!0;return i.visibility.filter((e=>"track"===e.target)).forEach((l=>{const{operation:d,measure:a,threshold:n}=l;let o;o="zoomLevel"===a?e[a]:i[a],void 0!==o&&(t=t&&1===Ri(o,d,n))})),t}markVisibility(e,i){const t=this.spec();if(!t.visibility||0===t.visibility.length||0===t.visibility.filter((e=>"mark"===e.target)).length)return 1;let l=1;return t.visibility.filter((e=>"mark"===e.target)).forEach((d=>{const{operation:a,threshold:n,conditionPadding:o,transitionPadding:s,measure:m}=d,c=null!=o?o:0;let r=1;if("text"===t.mark&&"|xe-x|"===n&&"width"===m){const t=this.encodedPIXIProperty("xe",e),l=this.encodedPIXIProperty("x",e);void 0!==t&&(null==i?void 0:i.width)&&(r=Ri(i.width+c,a,Math.abs(t-l),s))}else"width"===m&&"number"==typeof n&&(null==i?void 0:i.width)?r=Ri(i.width+c,a,n,s):"zoomLevel"===m&&"number"==typeof n&&(null==i?void 0:i.zoomLevel)&&(r=Ri(i.zoomLevel,a,n,s));l>r&&(l=r)})),l}visualPropertyByChannel(e,i){const t=void 0!==i?Be(i,this.spec()[e]):void 0;return this.encodedValue(e,t)}encodedPIXIProperty(e,i,t){const l=this.spec().mark;if(function(e){return"object"!=typeof e}(l)){if(["text","color","row","stroke","opacity","strokeWidth","x","y","xe","x1","x1e","ye","size"].includes(e))return this.visualPropertyByChannel(e,i);switch(l){case"bar":return function(e,i,t,l){const d=e.visualPropertyByChannel("x",t),a=e.visualPropertyByChannel("xe",t),n=e.visualPropertyByChannel("size",t);switch(i){case"width":return null!=n?n:a?a-d:null==l?void 0:l.tileUnitWidth;case"x-start":if(!(null==l?void 0:l.markWidth))return;return a?(d+a-(null==l?void 0:l.markWidth))/2:d-(null==l?void 0:l.markWidth)/2;default:return}}(this,e,i,t);case"point":case"text":return function(e,i,t){const l=e.visualPropertyByChannel("xe",t),d=e.visualPropertyByChannel("x",t),a=e.visualPropertyByChannel("size",t);switch(i){case"x-center":return l?(l+d)/2:d;case"y-center":const i=e.visualPropertyByChannel("ye",t),n=e.visualPropertyByChannel("y",t);return i?(i+n)/2:n;case"p-size":return l&&e.spec().stretch?(l-d)/2:a;default:return}}(this,e,i);case"rect":return function(e,i,t,l){var d;switch(i){case"width":const i=e.visualPropertyByChannel("xe",t)?e.visualPropertyByChannel("xe",t)-e.visualPropertyByChannel("x",t):null==l?void 0:l.markWidth;return 0===i?.1:i;case"height":return null!=(d=e.visualPropertyByChannel("size",t))?d:null==l?void 0:l.markHeight;default:return}}(this,e,i,t);default:return}}}addScaleMaterials(e){const i=this.data(),t=this.getGenomicChannel();t&&t.field?e.width&&e.height?(Ce.forEach((l=>{var d,a,n,o;const s=e[l];if(function(e,i){const t=e[i];return Ue(e)&&("x"===i||"y"===i)&&Qe(t)&&"quantitative"===t.type}(e,l)&&Qe(s)){const a=r(i,(e=>e[t.field])),n=[...a.keys()];if(!s.domain){const e=s.zeroBaseline?0:p(n.map((e=>P(a.get(e).map((e=>s.field?e[s.field]:void 0)))))),i=b(n.map((e=>P(a.get(e).map((e=>s.field?e[s.field]:void 0))))));s.domain=[e,i]}if(!s.range){const t=e.row,a=Qe(t)?t.field:void 0,n=null!=(d=this.getChannelDomainArray("row"))?d:a?Array.from(new Set(i.map((e=>e[a])))):[1],o=e.height/n.length;switch(l){case"x":s.range=[0,e.width];break;case"y":s.range=[0,o]}}}else{const t=e.row,d=Qe(t)?t.field:void 0,m=null!=(a=this.getChannelDomainArray("row"))?a:d?Array.from(new Set(i.map((e=>e[d])))):[1],c=e.height/m.length;if(s)if(!Qe(s)||"quantitative"!==s.type&&"genomic"!==s.type){if(Qe(s)&&"nominal"===s.type&&(void 0===s.domain&&(s.domain=Array.from(new Set(i.map((e=>e[s.field]))))),!s.range)){let i,t=2;switch(l){case"x":case"xe":i=[0,e.width];break;case"y":case"ye":i=[c,0];break;case"color":case"stroke":i=this.theme.markCommon.nominalColorRange;break;case"row":i=[0,e.height];break;case"size":i=s.domain.map((()=>t++))}i&&(s.range=i)}}else{if(void 0===s.domain){const e=s.zeroBaseline?0:null!=(n=p(i.map((e=>+e[s.field]))))?n:0,t=null!=(o=b(i.map((e=>+e[s.field]))))?o:0;s.domain=[e,t]}else"genomic"!==s.type||je(s.domain)||(s.domain=Ci(s.domain));if(!s.range){let i;switch(l){case"x":case"xe":case"x1":case"x1e":i=[0,e.width];break;case"y":case"ye":i=[0,c];break;case"color":case"stroke":i=Ti.QUANTITATIVE_COLOR;break;case"size":i=this.theme.markCommon.quantitativeSizeRange;break;case"strokeWidth":i=[1,3];break;case"opacity":i=[0,1]}i&&(s.range=i)}}else{let i;switch(l){case"x":i=e.width/2;break;case"y":i=c/2;break;case"size":i="line"===e.mark?this.theme.line.size:"bar"===e.mark||"rect"===e.mark||"triangleRight"===e.mark||"triangleLeft"===e.mark||"triangleBottom"===e.mark||e.stretch&&"point"===e.mark&&Qe(e.x)&&Qe(e.xe)?void 0:"text"===e.mark?12:this.theme.point.size;break;case"color":i=this.theme.markCommon.color;break;case"row":i=0;break;case"stroke":i="text"===e.mark?this.theme.text.stroke:this.theme.markCommon.stroke;break;case"strokeWidth":i="rule"===e.mark?this.theme.rule.strokeWidth:"withinLink"===e.mark||"betweenLink"===e.mark?this.theme.link.strokeWidth:"text"===e.mark?this.theme.text.strokeWidth:this.theme.markCommon.strokeWidth;break;case"opacity":i=this.theme.markCommon.opacity;break;case"text":i=""}void 0!==i&&(e[l]={value:i})}}})),[["x","xe"],["y","ye"]].forEach((i=>{const[t,l]=i,d=e[t],a=e[l];if(Qe(d)&&Qe(a)&&d.type===a.type&&d.domain&&a.domain&&Array.isArray(d.domain)&&Array.isArray(a.domain))if("genomic"===d.type||"quantitative"===d.type){const e=p([d.domain[0],a.domain[0]]),i=b([d.domain[1],a.domain[1]]);d.domain=a.domain=[e,i]}else if("nominal"===d.type){const e=Array.from(new Set([...d.domain,...a.domain]));d.range=a.range=e}}))):console.warn("Track size is not determined yet"):console.warn("Genomic field is not provided in the specification")}generateScales(){const e=this.spec();Ce.forEach((i=>{const t=e[i];if(Me(t))this.channelScales[i]=()=>t.value;else if(Qe(t)){if("text"===i)return;const e=t.domain,l=t.range;if(void 0===e||void 0===l)return;if("quantitative"===t.type||"genomic"===t.type)switch(i){case"x":case"x1":case"xe":case"x1e":case"y":case"ye":case"size":case"opacity":case"strokeWidth":this.channelScales[i]=Z().domain(e).range(l);break;case"color":case"stroke":let t=X;Object.keys(Te).includes(l)&&(t=Te[l]),this.channelScales[i]=F(t).domain(e)}else if("nominal"===t.type)switch(i){case"x":case"xe":case"y":case"ye":case"row":this.channelScales[i]=z().domain(e).range(l);break;case"size":this.channelScales[i]=w().domain(e).range(l);break;case"color":case"stroke":this.channelScales[i]=w(l).domain(e)}}}))}getChannelScale(e){return this.channelScales[e]}setChannelScale(e,i){this.channelScales[e]=i}addDataRows(e){this.dataAggregated=[...this.dataAggregated,...e]}isShowYAxis(){const e=this.spec(),i=this.getChannelDomainArray("y"),t=this.getChannelRangeArray("y");return Qe(e.y)&&"none"!==e.y.axis&&"quantitative"===e.y.type&&!!i&&!!t}getChannelDomainArray(e){const i=this.spec()[e];return Qe(i)&&je(i.domain)?i.domain:void 0}getChannelRangeArray(e){const i=this.spec()[e];return Qe(i)&&(t=i.range,u(t))?i.range:void 0;var t}validateSpec(){return Ki(this.originalSpec())}}class vi{constructor(e,i,t){this.worker=t,this.dataConfig=i,this.uid=e.libraries.slugid.nice(),this.assembly="hg38",this.fetchTimeout=null,this.toFetch=new Set,this.initPromise=this.worker.then((e=>{var t;return i.url&&!i.bamUrl&&(i.bamUrl=i.url),i.baiUrl||(i.baiUrl=null!=(t=i.indexUrl)?t:`${i.bamUrl}.bai`),e.init(this.uid,i.bamUrl,i.baiUrl,i.chromSizesUrl).then((()=>this.worker))}))}tilesetInfo(e){this.worker.then((i=>{i.tilesetInfo(this.uid).then(e)}))}fetchTilesDebounced(e,i){const{toFetch:t}=this;if(i[0].split(".")[0]!==(t.size?[...t][0].split(".")[0]:null)){for(const e of this.toFetch)this.track.fetching.delete(e);this.toFetch.clear()}i.forEach((e=>this.toFetch.add(e))),this.fetchTimeout&&clearTimeout(this.fetchTimeout),this.fetchTimeout=setTimeout((()=>{this.sendFetch(e,[...this.toFetch]),this.toFetch.clear()}),200)}sendFetch(e,i){this.worker.then((t=>{t.fetchTilesDebounced(this.uid,i).then(e)}))}}const Pi="dmFyIF9fZGVmUHJvcD1PYmplY3QuZGVmaW5lUHJvcGVydHksX19kZWZQcm9wcz1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxfX2dldE93blByb3BEZXNjcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxfX2dldE93blByb3BTeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsX19oYXNPd25Qcm9wPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksX19wcm9wSXNFbnVtPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsX19kZWZOb3JtYWxQcm9wPSh0LGUscik9PmUgaW4gdD9fX2RlZlByb3AodCxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpyfSk6dFtlXT1yLF9fc3ByZWFkVmFsdWVzPSh0LGUpPT57Zm9yKHZhciByIGluIGV8fChlPXt9KSlfX2hhc093blByb3AuY2FsbChlLHIpJiZfX2RlZk5vcm1hbFByb3AodCxyLGVbcl0pO2lmKF9fZ2V0T3duUHJvcFN5bWJvbHMpZm9yKHZhciByIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoZSkpX19wcm9wSXNFbnVtLmNhbGwoZSxyKSYmX19kZWZOb3JtYWxQcm9wKHQscixlW3JdKTtyZXR1cm4gdH0sX19zcHJlYWRQcm9wcz0odCxlKT0+X19kZWZQcm9wcyh0LF9fZ2V0T3duUHJvcERlc2NzKGUpKTshZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPSIkIjtmdW5jdGlvbiByKCl7fWZ1bmN0aW9uIG4odCxlKXt2YXIgbj1uZXcgcjtpZih0IGluc3RhbmNlb2Ygcil0LmVhY2goKGZ1bmN0aW9uKHQsZSl7bi5zZXQoZSx0KX0pKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkodCkpe3ZhciBpLG89LTEsYT10Lmxlbmd0aDtpZihudWxsPT1lKWZvcig7KytvPGE7KW4uc2V0KG8sdFtvXSk7ZWxzZSBmb3IoOysrbzxhOyluLnNldChlKGk9dFtvXSxvLHQpLGkpfWVsc2UgaWYodClmb3IodmFyIHMgaW4gdCluLnNldChzLHRbc10pO3JldHVybiBufWZ1bmN0aW9uIGkoKXt9ci5wcm90b3R5cGU9bi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnIsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBlK3QgaW4gdGhpc30sZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW2UrdF19LHNldDpmdW5jdGlvbih0LHIpe3JldHVybiB0aGlzW2UrdF09cix0aGlzfSxyZW1vdmU6ZnVuY3Rpb24odCl7dmFyIHI9ZSt0O3JldHVybiByIGluIHRoaXMmJmRlbGV0ZSB0aGlzW3JdfSxjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzKXRbMF09PT1lJiZkZWxldGUgdGhpc1t0XX0sa2V5czpmdW5jdGlvbigpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzKXJbMF09PT1lJiZ0LnB1c2goci5zbGljZSgxKSk7cmV0dXJuIHR9LHZhbHVlczpmdW5jdGlvbigpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzKXJbMF09PT1lJiZ0LnB1c2godGhpc1tyXSk7cmV0dXJuIHR9LGVudHJpZXM6ZnVuY3Rpb24oKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcylyWzBdPT09ZSYmdC5wdXNoKHtrZXk6ci5zbGljZSgxKSx2YWx1ZTp0aGlzW3JdfSk7cmV0dXJuIHR9LHNpemU6ZnVuY3Rpb24oKXt2YXIgdD0wO2Zvcih2YXIgciBpbiB0aGlzKXJbMF09PT1lJiYrK3Q7cmV0dXJuIHR9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMpaWYodFswXT09PWUpcmV0dXJuITE7cmV0dXJuITB9LGVhY2g6ZnVuY3Rpb24odCl7Zm9yKHZhciByIGluIHRoaXMpclswXT09PWUmJnQodGhpc1tyXSxyLnNsaWNlKDEpLHRoaXMpfX07dmFyIG89bi5wcm90b3R5cGU7aS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmksaGFzOm8uaGFzLGFkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1tlKyh0Kz0iIildPXQsdGhpc30scmVtb3ZlOm8ucmVtb3ZlLGNsZWFyOm8uY2xlYXIsdmFsdWVzOm8ua2V5cyxzaXplOm8uc2l6ZSxlbXB0eTpvLmVtcHR5LGVhY2g6by5lYWNofTt2YXIgYT17dmFsdWU6ZnVuY3Rpb24oKXt9fTtmdW5jdGlvbiBzKCl7Zm9yKHZhciB0LGU9MCxyPWFyZ3VtZW50cy5sZW5ndGgsbj17fTtlPHI7KytlKXtpZighKHQ9YXJndW1lbnRzW2VdKyIiKXx8dCBpbiBufHwvW1xzLl0vLnRlc3QodCkpdGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIHR5cGU6ICIrdCk7blt0XT1bXX1yZXR1cm4gbmV3IHUobil9ZnVuY3Rpb24gdSh0KXt0aGlzLl89dH1mdW5jdGlvbiBmKHQsZSl7cmV0dXJuIHQudHJpbSgpLnNwbGl0KC9efFxzKy8pLm1hcCgoZnVuY3Rpb24odCl7dmFyIHI9IiIsbj10LmluZGV4T2YoIi4iKTtpZihuPj0wJiYocj10LnNsaWNlKG4rMSksdD10LnNsaWNlKDAsbikpLHQmJiFlLmhhc093blByb3BlcnR5KHQpKXRocm93IG5ldyBFcnJvcigidW5rbm93biB0eXBlOiAiK3QpO3JldHVybnt0eXBlOnQsbmFtZTpyfX0pKX1mdW5jdGlvbiBsKHQsZSl7Zm9yKHZhciByLG49MCxpPXQubGVuZ3RoO248aTsrK24paWYoKHI9dFtuXSkubmFtZT09PWUpcmV0dXJuIHIudmFsdWV9ZnVuY3Rpb24gYyh0LGUscil7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aDtuPGk7KytuKWlmKHRbbl0ubmFtZT09PWUpe3Rbbl09YSx0PXQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTticmVha31yZXR1cm4gbnVsbCE9ciYmdC5wdXNoKHtuYW1lOmUsdmFsdWU6cn0pLHR9dS5wcm90b3R5cGU9cy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnUsb246ZnVuY3Rpb24odCxlKXt2YXIgcixuPXRoaXMuXyxpPWYodCsiIixuKSxvPS0xLGE9aS5sZW5ndGg7aWYoIShhcmd1bWVudHMubGVuZ3RoPDIpKXtpZihudWxsIT1lJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgY2FsbGJhY2s6ICIrZSk7Zm9yKDsrK288YTspaWYocj0odD1pW29dKS50eXBlKW5bcl09YyhuW3JdLHQubmFtZSxlKTtlbHNlIGlmKG51bGw9PWUpZm9yKHIgaW4gbiluW3JdPWMobltyXSx0Lm5hbWUsbnVsbCk7cmV0dXJuIHRoaXN9Zm9yKDsrK288YTspaWYoKHI9KHQ9aVtvXSkudHlwZSkmJihyPWwobltyXSx0Lm5hbWUpKSlyZXR1cm4gcn0sY29weTpmdW5jdGlvbigpe3ZhciB0PXt9LGU9dGhpcy5fO2Zvcih2YXIgciBpbiBlKXRbcl09ZVtyXS5zbGljZSgpO3JldHVybiBuZXcgdSh0KX0sY2FsbDpmdW5jdGlvbih0LGUpe2lmKChyPWFyZ3VtZW50cy5sZW5ndGgtMik+MClmb3IodmFyIHIsbixpPW5ldyBBcnJheShyKSxvPTA7bzxyOysrbylpW29dPWFyZ3VtZW50c1tvKzJdO2lmKCF0aGlzLl8uaGFzT3duUHJvcGVydHkodCkpdGhyb3cgbmV3IEVycm9yKCJ1bmtub3duIHR5cGU6ICIrdCk7Zm9yKG89MCxyPShuPXRoaXMuX1t0XSkubGVuZ3RoO288cjsrK28pbltvXS52YWx1ZS5hcHBseShlLGkpfSxhcHBseTpmdW5jdGlvbih0LGUscil7aWYoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0KSl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIit0KTtmb3IodmFyIG49dGhpcy5fW3RdLGk9MCxvPW4ubGVuZ3RoO2k8bzsrK2kpbltpXS52YWx1ZS5hcHBseShlLHIpfX07dmFyIGgsZCxwPShoPSJ0ZXh0L3BsYWluIixkPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlc3BvbnNlVGV4dH0sZnVuY3Rpb24odCxlKXt2YXIgcj1mdW5jdGlvbih0LGUpe3ZhciByLGksbyxhLHU9cygiYmVmb3Jlc2VuZCIsInByb2dyZXNzIiwibG9hZCIsImVycm9yIiksZj1uKCksbD1uZXcgWE1MSHR0cFJlcXVlc3QsYz1udWxsLGg9bnVsbCxkPTA7ZnVuY3Rpb24gcCh0KXt2YXIgZSxuPWwuc3RhdHVzO2lmKCFuJiZmdW5jdGlvbih0KXt2YXIgZT10LnJlc3BvbnNlVHlwZTtyZXR1cm4gZSYmInRleHQiIT09ZT90LnJlc3BvbnNlOnQucmVzcG9uc2VUZXh0fShsKXx8bj49MjAwJiZuPDMwMHx8MzA0PT09bil7aWYobyl0cnl7ZT1vLmNhbGwocixsKX1jYXRjaChpKXtyZXR1cm4gdm9pZCB1LmNhbGwoImVycm9yIixyLGkpfWVsc2UgZT1sO3UuY2FsbCgibG9hZCIscixlKX1lbHNlIHUuY2FsbCgiZXJyb3IiLHIsdCl9aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBYRG9tYWluUmVxdWVzdCYmISgid2l0aENyZWRlbnRpYWxzImluIGwpJiYvXihodHRwKHMpPzopP1wvXC8vLnRlc3QodCkmJihsPW5ldyBYRG9tYWluUmVxdWVzdCksIm9ubG9hZCJpbiBsP2wub25sb2FkPWwub25lcnJvcj1sLm9udGltZW91dD1wOmwub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKHQpe2wucmVhZHlTdGF0ZT4zJiZwKHQpfSxsLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24odCl7dS5jYWxsKCJwcm9ncmVzcyIscix0KX0scj17aGVhZGVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9KHQrIiIpLnRvTG93ZXJDYXNlKCksYXJndW1lbnRzLmxlbmd0aDwyP2YuZ2V0KHQpOihudWxsPT1lP2YucmVtb3ZlKHQpOmYuc2V0KHQsZSsiIikscil9LG1pbWVUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW51bGw9PXQ/bnVsbDp0KyIiLHIpOml9LHJlc3BvbnNlVHlwZTpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT10LHIpOmF9LHRpbWVvdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGQ9K3Qscik6ZH0sdXNlcjpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwxP2M6KGM9bnVsbD09dD9udWxsOnQrIiIscil9LHBhc3N3b3JkOmZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDE/aDooaD1udWxsPT10P251bGw6dCsiIixyKX0scmVzcG9uc2U6ZnVuY3Rpb24odCl7cmV0dXJuIG89dCxyfSxnZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gci5zZW5kKCJHRVQiLHQsZSl9LHBvc3Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gci5zZW5kKCJQT1NUIix0LGUpfSxzZW5kOmZ1bmN0aW9uKGUsbixvKXtyZXR1cm4gbC5vcGVuKGUsdCwhMCxjLGgpLG51bGw9PWl8fGYuaGFzKCJhY2NlcHQiKXx8Zi5zZXQoImFjY2VwdCIsaSsiLCovKiIpLGwuc2V0UmVxdWVzdEhlYWRlciYmZi5lYWNoKChmdW5jdGlvbih0LGUpe2wuc2V0UmVxdWVzdEhlYWRlcihlLHQpfSkpLG51bGwhPWkmJmwub3ZlcnJpZGVNaW1lVHlwZSYmbC5vdmVycmlkZU1pbWVUeXBlKGkpLG51bGwhPWEmJihsLnJlc3BvbnNlVHlwZT1hKSxkPjAmJihsLnRpbWVvdXQ9ZCksbnVsbD09byYmImZ1bmN0aW9uIj09dHlwZW9mIG4mJihvPW4sbj1udWxsKSxudWxsIT1vJiYxPT09by5sZW5ndGgmJihvPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3QobnVsbD09ZT9yOm51bGwpfX0obykpLG51bGwhPW8mJnIub24oImVycm9yIixvKS5vbigibG9hZCIsKGZ1bmN0aW9uKHQpe28obnVsbCx0KX0pKSx1LmNhbGwoImJlZm9yZXNlbmQiLHIsbCksbC5zZW5kKG51bGw9PW4/bnVsbDpuKSxyfSxhYm9ydDpmdW5jdGlvbigpe3JldHVybiBsLmFib3J0KCkscn0sb246ZnVuY3Rpb24oKXt2YXIgdD11Lm9uLmFwcGx5KHUsYXJndW1lbnRzKTtyZXR1cm4gdD09PXU/cjp0fX0sbnVsbCE9ZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGNhbGxiYWNrOiAiK2UpO3JldHVybiByLmdldChlKX1yZXR1cm4gcn0odCkubWltZVR5cGUoaCkucmVzcG9uc2UoZCk7aWYobnVsbCE9ZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGNhbGxiYWNrOiAiK2UpO3JldHVybiByLmdldChlKX1yZXR1cm4gcn0pO3ZhciB2PXt9LGc9e307ZnVuY3Rpb24geSh0KXtyZXR1cm4gbmV3IEZ1bmN0aW9uKCJkIiwicmV0dXJuIHsiK3QubWFwKChmdW5jdGlvbih0LGUpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0KSsiOiBkWyIrZSsnXSB8fCAiIid9KSkuam9pbigiLCIpKyJ9Iil9ZnVuY3Rpb24gYih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLHI9W107cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIHQpbiBpbiBlfHxyLnB1c2goZVtuXT1uKX0pKSxyfWZ1bmN0aW9uIG0odCxlKXt2YXIgcj10KyIiLG49ci5sZW5ndGg7cmV0dXJuIG48ZT9uZXcgQXJyYXkoZS1uKzEpLmpvaW4oMCkrcjpyfWZ1bmN0aW9uIHcodCl7dmFyIGUscj10LmdldFVUQ0hvdXJzKCksbj10LmdldFVUQ01pbnV0ZXMoKSxpPXQuZ2V0VVRDU2Vjb25kcygpLG89dC5nZXRVVENNaWxsaXNlY29uZHMoKTtyZXR1cm4gaXNOYU4odCk/IkludmFsaWQgRGF0ZSI6KChlPXQuZ2V0VVRDRnVsbFllYXIoKSk8MD8iLSIrbSgtZSw2KTplPjk5OTk/IisiK20oZSw2KTptKGUsNCkpKyItIittKHQuZ2V0VVRDTW9udGgoKSsxLDIpKyItIittKHQuZ2V0VVRDRGF0ZSgpLDIpKyhvPyJUIittKHIsMikrIjoiK20obiwyKSsiOiIrbShpLDIpKyIuIittKG8sMykrIloiOmk/IlQiK20ociwyKSsiOiIrbShuLDIpKyI6IittKGksMikrIloiOm58fHI/IlQiK20ociwyKSsiOiIrbShuLDIpKyJaIjoiIil9dmFyIF89ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFJlZ0V4cCgnWyInK3QrIlxuXHJdIikscj10LmNoYXJDb2RlQXQoMCk7ZnVuY3Rpb24gbih0LGUpe3ZhciBuLGk9W10sbz10Lmxlbmd0aCxhPTAscz0wLHU9bzw9MCxmPSExO2Z1bmN0aW9uIGwoKXtpZih1KXJldHVybiBnO2lmKGYpcmV0dXJuIGY9ITEsdjt2YXIgZSxuLGk9YTtpZigzND09PXQuY2hhckNvZGVBdChpKSl7Zm9yKDthKys8byYmMzQhPT10LmNoYXJDb2RlQXQoYSl8fDM0PT09dC5jaGFyQ29kZUF0KCsrYSk7KTtyZXR1cm4oZT1hKT49bz91PSEwOjEwPT09KG49dC5jaGFyQ29kZUF0KGErKykpP2Y9ITA6MTM9PT1uJiYoZj0hMCwxMD09PXQuY2hhckNvZGVBdChhKSYmKythKSx0LnNsaWNlKGkrMSxlLTEpLnJlcGxhY2UoLyIiL2csJyInKX1mb3IoO2E8bzspe2lmKDEwPT09KG49dC5jaGFyQ29kZUF0KGU9YSsrKSkpZj0hMDtlbHNlIGlmKDEzPT09bilmPSEwLDEwPT09dC5jaGFyQ29kZUF0KGEpJiYrK2E7ZWxzZSBpZihuIT09ciljb250aW51ZTtyZXR1cm4gdC5zbGljZShpLGUpfXJldHVybiB1PSEwLHQuc2xpY2UoaSxvKX1mb3IoMTA9PT10LmNoYXJDb2RlQXQoby0xKSYmLS1vLDEzPT09dC5jaGFyQ29kZUF0KG8tMSkmJi0tbzsobj1sKCkpIT09Zzspe2Zvcih2YXIgYz1bXTtuIT09diYmbiE9PWc7KWMucHVzaChuKSxuPWwoKTtlJiZudWxsPT0oYz1lKGMscysrKSl8fGkucHVzaChjKX1yZXR1cm4gaX1mdW5jdGlvbiBpKGUscil7cmV0dXJuIGUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gci5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBhKGVbdF0pfSkpLmpvaW4odCl9KSl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZS5tYXAoYSkuam9pbih0KX1mdW5jdGlvbiBhKHQpe3JldHVybiBudWxsPT10PyIiOnQgaW5zdGFuY2VvZiBEYXRlP3codCk6ZS50ZXN0KHQrPSIiKT8nIicrdC5yZXBsYWNlKC8iL2csJyIiJykrJyInOnR9cmV0dXJue3BhcnNlOmZ1bmN0aW9uKHQsZSl7dmFyIHIsaSxvPW4odCwoZnVuY3Rpb24odCxuKXtpZihyKXJldHVybiByKHQsbi0xKTtpPXQscj1lP2Z1bmN0aW9uKHQsZSl7dmFyIHI9eSh0KTtyZXR1cm4gZnVuY3Rpb24obixpKXtyZXR1cm4gZShyKG4pLGksdCl9fSh0LGUpOnkodCl9KSk7cmV0dXJuIG8uY29sdW1ucz1pfHxbXSxvfSxwYXJzZVJvd3M6bixmb3JtYXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbnVsbD09ciYmKHI9YihlKSksW3IubWFwKGEpLmpvaW4odCldLmNvbmNhdChpKGUscikpLmpvaW4oIlxuIil9LGZvcm1hdEJvZHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09ZSYmKGU9Yih0KSksaSh0LGUpLmpvaW4oIlxuIil9LGZvcm1hdFJvd3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFwKG8pLmpvaW4oIlxuIil9LGZvcm1hdFJvdzpvLGZvcm1hdFZhbHVlOmF9fSgiXHQiKS5wYXJzZVJvd3MseD0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIGsodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKT90LmRlZmF1bHQ6dH1mdW5jdGlvbiBFKHQpe2lmKHQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3JldHVybiBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChmdW5jdGlvbihyKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixuLmdldD9uOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfSkpLGV9dmFyIEE9e30sUz10PT4hIXQmJigic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5vYnNlcnZhYmxlJiYiZnVuY3Rpb24iPT10eXBlb2YgdFtTeW1ib2wub2JzZXJ2YWJsZV0/dD09PXRbU3ltYm9sLm9ic2VydmFibGVdKCk6ImZ1bmN0aW9uIj09dHlwZW9mIHRbIkBAb2JzZXJ2YWJsZSJdJiZ0PT09dFsiQEBvYnNlcnZhYmxlIl0oKSksTz17fSxUPXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShULCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxULkRlZmF1bHRTZXJpYWxpemVyPVQuZXh0ZW5kU2VyaWFsaXplcj12b2lkIDAsVC5leHRlbmRTZXJpYWxpemVyPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgcj10LmRlc2VyaWFsaXplLmJpbmQodCksbj10LnNlcmlhbGl6ZS5iaW5kKHQpO3JldHVybntkZXNlcmlhbGl6ZTp0PT5lLmRlc2VyaWFsaXplKHQsciksc2VyaWFsaXplOnQ9PmUuc2VyaWFsaXplKHQsbil9fTtjb25zdCBCPXtkZXNlcmlhbGl6ZTp0PT5PYmplY3QuYXNzaWduKEVycm9yKHQubWVzc2FnZSkse25hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2t9KSxzZXJpYWxpemU6dD0+KHtfX2Vycm9yX21hcmtlcjoiJCRlcnJvciIsbWVzc2FnZTp0Lm1lc3NhZ2UsbmFtZTp0Lm5hbWUsc3RhY2s6dC5zdGFja30pfTtULkRlZmF1bHRTZXJpYWxpemVyPXtkZXNlcmlhbGl6ZSh0KXtyZXR1cm4oZT10KSYmIm9iamVjdCI9PXR5cGVvZiBlJiYiX19lcnJvcl9tYXJrZXIiaW4gZSYmIiQkZXJyb3IiPT09ZS5fX2Vycm9yX21hcmtlcj9CLmRlc2VyaWFsaXplKHQpOnQ7dmFyIGV9LHNlcmlhbGl6ZTp0PT50IGluc3RhbmNlb2YgRXJyb3I/Qi5zZXJpYWxpemUodCk6dH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLE8uc2VyaWFsaXplPU8uZGVzZXJpYWxpemU9Ty5yZWdpc3RlclNlcmlhbGl6ZXI9dm9pZCAwO2NvbnN0IEk9VDtsZXQgUD1JLkRlZmF1bHRTZXJpYWxpemVyO08ucmVnaXN0ZXJTZXJpYWxpemVyPWZ1bmN0aW9uKHQpe1A9SS5leHRlbmRTZXJpYWxpemVyKFAsdCl9LE8uZGVzZXJpYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIFAuZGVzZXJpYWxpemUodCl9LE8uc2VyaWFsaXplPWZ1bmN0aW9uKHQpe3JldHVybiBQLnNlcmlhbGl6ZSh0KX07dmFyIFI9e30sTT17fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksTS4kd29ya2VyPU0uJHRyYW5zZmVyYWJsZT1NLiR0ZXJtaW5hdGU9TS4kZXZlbnRzPU0uJGVycm9ycz12b2lkIDAsTS4kZXJyb3JzPVN5bWJvbCgidGhyZWFkLmVycm9ycyIpLE0uJGV2ZW50cz1TeW1ib2woInRocmVhZC5ldmVudHMiKSxNLiR0ZXJtaW5hdGU9U3ltYm9sKCJ0aHJlYWQudGVybWluYXRlIiksTS4kdHJhbnNmZXJhYmxlPVN5bWJvbCgidGhyZWFkLnRyYW5zZmVyYWJsZSIpLE0uJHdvcmtlcj1TeW1ib2woInRocmVhZC53b3JrZXIiKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksUi5UcmFuc2Zlcj1SLmlzVHJhbnNmZXJEZXNjcmlwdG9yPXZvaWQgMDtjb25zdCBMPU07Ui5pc1RyYW5zZmVyRGVzY3JpcHRvcj1mdW5jdGlvbih0KXtyZXR1cm4gdCYmIm9iamVjdCI9PXR5cGVvZiB0JiZ0W0wuJHRyYW5zZmVyYWJsZV19LFIuVHJhbnNmZXI9ZnVuY3Rpb24odCxlKXtpZighZSl7aWYoIShyPXQpfHwib2JqZWN0IiE9dHlwZW9mIHIpdGhyb3cgRXJyb3IoKTtlPVt0XX12YXIgcjtyZXR1cm57W0wuJHRyYW5zZmVyYWJsZV06ITAsc2VuZDp0LHRyYW5zZmVyYWJsZXM6ZX19O3ZhciBqLHosQyxOPXt9O2o9TixPYmplY3QuZGVmaW5lUHJvcGVydHkoaiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksai5Xb3JrZXJNZXNzYWdlVHlwZT1qLk1hc3Rlck1lc3NhZ2VUeXBlPXZvaWQgMCwoej1qLk1hc3Rlck1lc3NhZ2VUeXBlfHwoai5NYXN0ZXJNZXNzYWdlVHlwZT17fSkpLmNhbmNlbD0iY2FuY2VsIix6LnJ1bj0icnVuIiwoQz1qLldvcmtlck1lc3NhZ2VUeXBlfHwoai5Xb3JrZXJNZXNzYWdlVHlwZT17fSkpLmVycm9yPSJlcnJvciIsQy5pbml0PSJpbml0IixDLnJlc3VsdD0icmVzdWx0IixDLnJ1bm5pbmc9InJ1bm5pbmciLEMudW5jYXVnaHRFcnJvcj0idW5jYXVnaHRFcnJvciI7dmFyIFU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KFUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO1UuZGVmYXVsdD17aXNXb3JrZXJSdW50aW1lOmZ1bmN0aW9uKCl7Y29uc3QgdD0idW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJiJ1bmRlZmluZWQiIT10eXBlb2YgV2luZG93JiZzZWxmIGluc3RhbmNlb2YgV2luZG93O3JldHVybiEoInVuZGVmaW5lZCI9PXR5cGVvZiBzZWxmfHwhc2VsZi5wb3N0TWVzc2FnZXx8dCl9LHBvc3RNZXNzYWdlVG9NYXN0ZXI6ZnVuY3Rpb24odCxlKXtzZWxmLnBvc3RNZXNzYWdlKHQsZSl9LHN1YnNjcmliZVRvTWFzdGVyTWVzc2FnZXM6ZnVuY3Rpb24odCl7Y29uc3QgZT1lPT57dChlLmRhdGEpfTtyZXR1cm4gc2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixlKSwoKT0+e3NlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZSl9fX0sZnVuY3Rpb24odCl7dmFyIGU9eCYmeC5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuZXcocnx8KHI9UHJvbWlzZSkpKChmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIGEodCl7dHJ5e3Uobi5uZXh0KHQpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBzKHQpe3RyeXt1KG4udGhyb3codCkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHUodCl7dmFyIGU7dC5kb25lP2kodC52YWx1ZSk6KGU9dC52YWx1ZSxlIGluc3RhbmNlb2Ygcj9lOm5ldyByKChmdW5jdGlvbih0KXt0KGUpfSkpKS50aGVuKGEscyl9dSgobj1uLmFwcGx5KHQsZXx8W10pKS5uZXh0KCkpfSkpfSxyPXgmJnguX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmV4cG9zZT10LmlzV29ya2VyUnVudGltZT10LlRyYW5zZmVyPXQucmVnaXN0ZXJTZXJpYWxpemVyPXZvaWQgMDtjb25zdCBuPXIoUyksaT1PLG89UixhPU4scz1yKFUpO3ZhciB1PU87T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsInJlZ2lzdGVyU2VyaWFsaXplciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUucmVnaXN0ZXJTZXJpYWxpemVyfX0pO3ZhciBmPVI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIlRyYW5zZmVyIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZi5UcmFuc2Zlcn19KSx0LmlzV29ya2VyUnVudGltZT1zLmRlZmF1bHQuaXNXb3JrZXJSdW50aW1lO2xldCBsPSExO2NvbnN0IGM9bmV3IE1hcCxoPXQ9PnQmJnQudHlwZT09PWEuTWFzdGVyTWVzc2FnZVR5cGUucnVuLGQ9dD0+bi5kZWZhdWx0KHQpfHxmdW5jdGlvbih0KXtyZXR1cm4gdCYmIm9iamVjdCI9PXR5cGVvZiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgdC5zdWJzY3JpYmV9KHQpO2Z1bmN0aW9uIHAodCl7cmV0dXJuIG8uaXNUcmFuc2ZlckRlc2NyaXB0b3IodCk/e3BheWxvYWQ6dC5zZW5kLHRyYW5zZmVyYWJsZXM6dC50cmFuc2ZlcmFibGVzfTp7cGF5bG9hZDp0LHRyYW5zZmVyYWJsZXM6dm9pZCAwfX1mdW5jdGlvbiB2KHQsZSl7Y29uc3R7cGF5bG9hZDpyLHRyYW5zZmVyYWJsZXM6bn09cChlKSxvPXt0eXBlOmEuV29ya2VyTWVzc2FnZVR5cGUuZXJyb3IsdWlkOnQsZXJyb3I6aS5zZXJpYWxpemUocil9O3MuZGVmYXVsdC5wb3N0TWVzc2FnZVRvTWFzdGVyKG8sbil9ZnVuY3Rpb24gZyh0LGUscil7Y29uc3R7cGF5bG9hZDpuLHRyYW5zZmVyYWJsZXM6aX09cChyKSxvPXt0eXBlOmEuV29ya2VyTWVzc2FnZVR5cGUucmVzdWx0LHVpZDp0LGNvbXBsZXRlOiEhZXx8dm9pZCAwLHBheWxvYWQ6bn07cy5kZWZhdWx0LnBvc3RNZXNzYWdlVG9NYXN0ZXIobyxpKX1mdW5jdGlvbiB5KHQpe3RyeXtjb25zdCBlPXt0eXBlOmEuV29ya2VyTWVzc2FnZVR5cGUudW5jYXVnaHRFcnJvcixlcnJvcjppLnNlcmlhbGl6ZSh0KX07cy5kZWZhdWx0LnBvc3RNZXNzYWdlVG9NYXN0ZXIoZSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcigiTm90IHJlcG9ydGluZyB1bmNhdWdodCBlcnJvciBiYWNrIHRvIG1hc3RlciB0aHJlYWQgYXMgaXQgb2NjdXJlZCB3aGlsZSByZXBvcnRpbmcgYW4gdW5jYXVnaHQgZXJyb3IgYWxyZWFkeS5cbkxhdGVzdCBlcnJvcjoiLGUsIlxuT3JpZ2luYWwgZXJyb3I6Iix0KX19ZnVuY3Rpb24gYih0LHIsbil7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtsZXQgZTt0cnl7ZT1yKC4uLm4pfWNhdGNoKHUpe3JldHVybiB2KHQsdSl9Y29uc3Qgbz1kKGUpPyJvYnNlcnZhYmxlIjoicHJvbWlzZSI7aWYoZnVuY3Rpb24odCxlKXtjb25zdCByPXt0eXBlOmEuV29ya2VyTWVzc2FnZVR5cGUucnVubmluZyx1aWQ6dCxyZXN1bHRUeXBlOmV9O3MuZGVmYXVsdC5wb3N0TWVzc2FnZVRvTWFzdGVyKHIpfSh0LG8pLGQoZSkpe2NvbnN0IHI9ZS5zdWJzY3JpYmUoKGU9PmcodCwhMSxpLnNlcmlhbGl6ZShlKSkpLChlPT57dih0LGkuc2VyaWFsaXplKGUpKSxjLmRlbGV0ZSh0KX0pLCgoKT0+e2codCwhMCksYy5kZWxldGUodCl9KSk7Yy5zZXQodCxyKX1lbHNlIHRyeXtjb25zdCByPXlpZWxkIGU7Zyh0LCEwLGkuc2VyaWFsaXplKHIpKX1jYXRjaCh1KXt2KHQsaS5zZXJpYWxpemUodSkpfX0pKX10LmV4cG9zZT1mdW5jdGlvbih0KXtpZighcy5kZWZhdWx0LmlzV29ya2VyUnVudGltZSgpKXRocm93IEVycm9yKCJleHBvc2UoKSBjYWxsZWQgaW4gdGhlIG1hc3RlciB0aHJlYWQuIik7aWYobCl0aHJvdyBFcnJvcigiZXhwb3NlKCkgY2FsbGVkIG1vcmUgdGhhbiBvbmNlLiBUaGlzIGlzIG5vdCBwb3NzaWJsZS4gUGFzcyBhbiBvYmplY3QgdG8gZXhwb3NlKCkgaWYgeW91IHdhbnQgdG8gZXhwb3NlIG11bHRpcGxlIGZ1bmN0aW9ucy4iKTtpZihsPSEwLCJmdW5jdGlvbiI9PXR5cGVvZiB0KXMuZGVmYXVsdC5zdWJzY3JpYmVUb01hc3Rlck1lc3NhZ2VzKChlPT57aChlKSYmIWUubWV0aG9kJiZiKGUudWlkLHQsZS5hcmdzLm1hcChpLmRlc2VyaWFsaXplKSl9KSksZnVuY3Rpb24oKXtjb25zdCB0PXt0eXBlOmEuV29ya2VyTWVzc2FnZVR5cGUuaW5pdCxleHBvc2VkOnt0eXBlOiJmdW5jdGlvbiJ9fTtzLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3Rlcih0KX0oKTtlbHNle2lmKCJvYmplY3QiIT10eXBlb2YgdHx8IXQpdGhyb3cgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGV4cG9zZSgpLiBFeHBlY3RlZCBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCwgZ290OiAke3R9YCk7cy5kZWZhdWx0LnN1YnNjcmliZVRvTWFzdGVyTWVzc2FnZXMoKGU9PntoKGUpJiZlLm1ldGhvZCYmYihlLnVpZCx0W2UubWV0aG9kXSxlLmFyZ3MubWFwKGkuZGVzZXJpYWxpemUpKX0pKTshZnVuY3Rpb24odCl7Y29uc3QgZT17dHlwZTphLldvcmtlck1lc3NhZ2VUeXBlLmluaXQsZXhwb3NlZDp7dHlwZToibW9kdWxlIixtZXRob2RzOnR9fTtzLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3RlcihlKX0oT2JqZWN0LmtleXModCkuZmlsdGVyKChlPT4iZnVuY3Rpb24iPT10eXBlb2YgdFtlXSkpKX1zLmRlZmF1bHQuc3Vic2NyaWJlVG9NYXN0ZXJNZXNzYWdlcygodD0+e2lmKChlPXQpJiZlLnR5cGU9PT1hLk1hc3Rlck1lc3NhZ2VUeXBlLmNhbmNlbCl7Y29uc3QgZT10LnVpZCxyPWMuZ2V0KGUpO3ImJihyLnVuc3Vic2NyaWJlKCksYy5kZWxldGUoZSkpfXZhciBlfSkpfSwidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJiJmdW5jdGlvbiI9PXR5cGVvZiBzZWxmLmFkZEV2ZW50TGlzdGVuZXImJnMuZGVmYXVsdC5pc1dvcmtlclJ1bnRpbWUoKSYmKHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCh0PT57c2V0VGltZW91dCgoKCk9PnkodC5lcnJvcnx8dCkpLDI1MCl9KSksc2VsZi5hZGRFdmVudExpc3RlbmVyKCJ1bmhhbmRsZWRyZWplY3Rpb24iLCh0PT57Y29uc3QgZT10LnJlYXNvbjtlJiYic3RyaW5nIj09dHlwZW9mIGUubWVzc2FnZSYmc2V0VGltZW91dCgoKCk9PnkoZSkpLDI1MCl9KSkpLCJ1bmRlZmluZWQiIT10eXBlb2YgcHJvY2VzcyYmImZ1bmN0aW9uIj09dHlwZW9mIHByb2Nlc3Mub24mJnMuZGVmYXVsdC5pc1dvcmtlclJ1bnRpbWUoKSYmKHByb2Nlc3Mub24oInVuY2F1Z2h0RXhjZXB0aW9uIiwodD0+e3NldFRpbWVvdXQoKCgpPT55KHQpKSwyNTApfSkpLHByb2Nlc3Mub24oInVuaGFuZGxlZFJlamVjdGlvbiIsKHQ9Pnt0JiYic3RyaW5nIj09dHlwZW9mIHQubWVzc2FnZSYmc2V0VGltZW91dCgoKCk9PnkodCkpLDI1MCl9KSkpfShBKTt2YXIgRj1rKEEpO2NvbnN0IEQ9Ri5leHBvc2U7Ri5yZWdpc3RlclNlcmlhbGl6ZXI7Y29uc3QgcT1GLlRyYW5zZmVyO3ZhciAkLFo9e30sSD17ZXhwb3J0czp7fX07KCQ9SCkuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19LCQuZXhwb3J0cy5kZWZhdWx0PSQuZXhwb3J0cywkLmV4cG9ydHMuX19lc01vZHVsZT0hMDt2YXIgRz17ZXhwb3J0czp7fX0sVz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5NYXRoPT1NYXRoJiZ0fSxWPVcoIm9iamVjdCI9PXR5cGVvZiBnbG9iYWxUaGlzJiZnbG9iYWxUaGlzKXx8Vygib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93KXx8Vygib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYpfHxXKCJvYmplY3QiPT10eXBlb2YgeCYmeCl8fGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCl8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksWT1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdH0sWD17fSxLPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaChlKXtyZXR1cm4hMH19LEo9IUsoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwxLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KVsxXX0pKSxRPXt9LHR0PXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGV0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IscnQ9ZXQmJiF0dC5jYWxsKHsxOjJ9LDEpO1EuZj1ydD9mdW5jdGlvbih0KXt2YXIgZT1ldCh0aGlzLHQpO3JldHVybiEhZSYmZS5lbnVtZXJhYmxlfTp0dDt2YXIgbnQsaXQsb3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmdCksY29uZmlndXJhYmxlOiEoMiZ0KSx3cml0YWJsZTohKDQmdCksdmFsdWU6ZX19LGF0PXt9LnRvU3RyaW5nLHN0PWZ1bmN0aW9uKHQpe3JldHVybiBhdC5jYWxsKHQpLnNsaWNlKDgsLTEpfSx1dD1zdCxmdD0iIi5zcGxpdCxsdD1LKChmdW5jdGlvbigpe3JldHVybiFPYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKX0pKT9mdW5jdGlvbih0KXtyZXR1cm4iU3RyaW5nIj09dXQodCk/ZnQuY2FsbCh0LCIiKTpPYmplY3QodCl9Ok9iamVjdCxjdD1mdW5jdGlvbih0KXtpZihudWxsPT10KXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIit0KTtyZXR1cm4gdH0saHQ9bHQsZHQ9Y3QscHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGh0KGR0KHQpKX0sdnQ9WSxndD1mdW5jdGlvbih0KXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIHQ/bnVsbCE9PXQ6dnQodCl9LHl0PXt9LGJ0PXl0LG10PVYsd3Q9WSxfdD1mdW5jdGlvbih0KXtyZXR1cm4gd3QodCk/dDp2b2lkIDB9LHh0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mj9fdChidFt0XSl8fF90KG10W3RdKTpidFt0XSYmYnRbdF1bZV18fG10W3RdJiZtdFt0XVtlXX0sa3Q9eHQoIm5hdmlnYXRvciIsInVzZXJBZ2VudCIpfHwiIixFdD1WLEF0PWt0LFN0PUV0LnByb2Nlc3MsT3Q9RXQuRGVubyxUdD1TdCYmU3QudmVyc2lvbnN8fE90JiZPdC52ZXJzaW9uLEJ0PVR0JiZUdC52ODtCdD9pdD0obnQ9QnQuc3BsaXQoIi4iKSlbMF08ND8xOm50WzBdK250WzFdOkF0JiYoIShudD1BdC5tYXRjaCgvRWRnZVwvKFxkKykvKSl8fG50WzFdPj03NCkmJihudD1BdC5tYXRjaCgvQ2hyb21lXC8oXGQrKS8pKSYmKGl0PW50WzFdKTt2YXIgSXQ9aXQmJitpdCxQdD1JdCxSdD1LLE10PSEhT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyYmIVJ0KChmdW5jdGlvbigpe3ZhciB0PVN5bWJvbCgpO3JldHVybiFTdHJpbmcodCl8fCEoT2JqZWN0KHQpaW5zdGFuY2VvZiBTeW1ib2wpfHwhU3ltYm9sLnNoYW0mJlB0JiZQdDw0MX0pKSxMdD1NdCYmIVN5bWJvbC5zaGFtJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcixqdD1ZLHp0PXh0LEN0PUx0P2Z1bmN0aW9uKHQpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgdH06ZnVuY3Rpb24odCl7dmFyIGU9enQoIlN5bWJvbCIpO3JldHVybiBqdChlKSYmT2JqZWN0KHQpaW5zdGFuY2VvZiBlfSxOdD1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIFN0cmluZyh0KX1jYXRjaChlKXtyZXR1cm4iT2JqZWN0In19LFV0PVksRnQ9TnQsRHQ9ZnVuY3Rpb24odCl7aWYoVXQodCkpcmV0dXJuIHQ7dGhyb3cgVHlwZUVycm9yKEZ0KHQpKyIgaXMgbm90IGEgZnVuY3Rpb24iKX0scXQ9RHQsJHQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10W2VdO3JldHVybiBudWxsPT1yP3ZvaWQgMDpxdChyKX0sWnQ9WSxIdD1ndCxHdD17ZXhwb3J0czp7fX0sV3Q9VixWdD1mdW5jdGlvbih0LGUpe3RyeXtPYmplY3QuZGVmaW5lUHJvcGVydHkoV3QsdCx7dmFsdWU6ZSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KX1jYXRjaChyKXtXdFt0XT1lfXJldHVybiBlfSxZdD0iX19jb3JlLWpzX3NoYXJlZF9fIixYdD1WW1l0XXx8VnQoWXQse30pLEt0PVh0OyhHdC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEt0W3RdfHwoS3RbdF09dm9pZCAwIT09ZT9lOnt9KX0pKCJ2ZXJzaW9ucyIsW10pLnB1c2goe3ZlcnNpb246IjMuMTguMCIsbW9kZToicHVyZSIsY29weXJpZ2h0OiLCqSAyMDIxIERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pO3ZhciBKdD1jdCxRdD1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KEp0KHQpKX0sdGU9UXQsZWU9e30uaGFzT3duUHJvcGVydHkscmU9T2JqZWN0Lmhhc093bnx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gZWUuY2FsbCh0ZSh0KSxlKX0sbmU9MCxpZT1NYXRoLnJhbmRvbSgpLG9lPWZ1bmN0aW9uKHQpe3JldHVybiJTeW1ib2woIitTdHJpbmcodm9pZCAwPT09dD8iIjp0KSsiKV8iKygrK25lK2llKS50b1N0cmluZygzNil9LGFlPVYsc2U9R3QuZXhwb3J0cyx1ZT1yZSxmZT1vZSxsZT1NdCxjZT1MdCxoZT1zZSgid2tzIiksZGU9YWUuU3ltYm9sLHBlPWNlP2RlOmRlJiZkZS53aXRob3V0U2V0dGVyfHxmZSx2ZT1mdW5jdGlvbih0KXtyZXR1cm4gdWUoaGUsdCkmJihsZXx8InN0cmluZyI9PXR5cGVvZiBoZVt0XSl8fChsZSYmdWUoZGUsdCk/aGVbdF09ZGVbdF06aGVbdF09cGUoIlN5bWJvbC4iK3QpKSxoZVt0XX0sZ2U9Z3QseWU9Q3QsYmU9JHQsbWU9ZnVuY3Rpb24odCxlKXt2YXIgcixuO2lmKCJzdHJpbmciPT09ZSYmWnQocj10LnRvU3RyaW5nKSYmIUh0KG49ci5jYWxsKHQpKSlyZXR1cm4gbjtpZihadChyPXQudmFsdWVPZikmJiFIdChuPXIuY2FsbCh0KSkpcmV0dXJuIG47aWYoInN0cmluZyIhPT1lJiZadChyPXQudG9TdHJpbmcpJiYhSHQobj1yLmNhbGwodCkpKXJldHVybiBuO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9LHdlPXZlKCJ0b1ByaW1pdGl2ZSIpLF9lPWZ1bmN0aW9uKHQsZSl7aWYoIWdlKHQpfHx5ZSh0KSlyZXR1cm4gdDt2YXIgcixuPWJlKHQsd2UpO2lmKG4pe2lmKHZvaWQgMD09PWUmJihlPSJkZWZhdWx0Iikscj1uLmNhbGwodCxlKSwhZ2Uocil8fHllKHIpKXJldHVybiByO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9cmV0dXJuIHZvaWQgMD09PWUmJihlPSJudW1iZXIiKSxtZSh0LGUpfSx4ZT1DdCxrZT1mdW5jdGlvbih0KXt2YXIgZT1fZSh0LCJzdHJpbmciKTtyZXR1cm4geGUoZSk/ZTpTdHJpbmcoZSl9LEVlPWd0LEFlPVYuZG9jdW1lbnQsU2U9RWUoQWUpJiZFZShBZS5jcmVhdGVFbGVtZW50KSxPZT1mdW5jdGlvbih0KXtyZXR1cm4gU2U/QWUuY3JlYXRlRWxlbWVudCh0KTp7fX0sVGU9T2UsQmU9IUomJiFLKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoVGUoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pKSxJZT1KLFBlPVEsUmU9b3QsTWU9cHQsTGU9a2UsamU9cmUsemU9QmUsQ2U9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtYLmY9SWU/Q2U6ZnVuY3Rpb24odCxlKXtpZih0PU1lKHQpLGU9TGUoZSksemUpdHJ5e3JldHVybiBDZSh0LGUpfWNhdGNoKHIpe31pZihqZSh0LGUpKXJldHVybiBSZSghUGUuZi5jYWxsKHQsZSksdFtlXSl9O3ZhciBOZT1LLFVlPVksRmU9LyN8XC5wcm90b3R5cGVcLi8sRGU9ZnVuY3Rpb24odCxlKXt2YXIgcj0kZVtxZSh0KV07cmV0dXJuIHI9PUhlfHxyIT1aZSYmKFVlKGUpP05lKGUpOiEhZSl9LHFlPURlLm5vcm1hbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gU3RyaW5nKHQpLnJlcGxhY2UoRmUsIi4iKS50b0xvd2VyQ2FzZSgpfSwkZT1EZS5kYXRhPXt9LFplPURlLk5BVElWRT0iTiIsSGU9RGUuUE9MWUZJTEw9IlAiLEdlPURlLFdlPUR0LFZlPWZ1bmN0aW9uKHQsZSxyKXtpZihXZSh0KSx2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChyKXtjYXNlIDA6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuY2FsbChlKX07Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gdC5jYWxsKGUscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gdC5jYWxsKGUscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4saSl7cmV0dXJuIHQuY2FsbChlLHIsbixpKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0sWWU9e30sWGU9Z3QsS2U9ZnVuY3Rpb24odCl7aWYoWGUodCkpcmV0dXJuIHQ7dGhyb3cgVHlwZUVycm9yKFN0cmluZyh0KSsiIGlzIG5vdCBhbiBvYmplY3QiKX0sSmU9SixRZT1CZSx0cj1LZSxlcj1rZSxycj1PYmplY3QuZGVmaW5lUHJvcGVydHk7WWUuZj1KZT9ycjpmdW5jdGlvbih0LGUscil7aWYodHIodCksZT1lcihlKSx0cihyKSxRZSl0cnl7cmV0dXJuIHJyKHQsZSxyKX1jYXRjaChuKXt9aWYoImdldCJpbiByfHwic2V0ImluIHIpdGhyb3cgVHlwZUVycm9yKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCIpO3JldHVybiJ2YWx1ZSJpbiByJiYodFtlXT1yLnZhbHVlKSx0fTt2YXIgbnI9WWUsaXI9b3Qsb3I9Sj9mdW5jdGlvbih0LGUscil7cmV0dXJuIG5yLmYodCxlLGlyKDEscikpfTpmdW5jdGlvbih0LGUscil7cmV0dXJuIHRbZV09cix0fSxhcj1WLHNyPVksdXI9WC5mLGZyPUdlLGxyPXl0LGNyPVZlLGhyPW9yLGRyPXJlLHByPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUscixuKXtpZih0aGlzIGluc3RhbmNlb2YgdCl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChlKTtjYXNlIDI6cmV0dXJuIG5ldyB0KGUscil9cmV0dXJuIG5ldyB0KGUscixuKX1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBlLnByb3RvdHlwZT10LnByb3RvdHlwZSxlfSx2cj1mdW5jdGlvbih0LGUpe3ZhciByLG4saSxvLGEscyx1LGYsbD10LnRhcmdldCxjPXQuZ2xvYmFsLGg9dC5zdGF0LGQ9dC5wcm90byxwPWM/YXI6aD9hcltsXTooYXJbbF18fHt9KS5wcm90b3R5cGUsdj1jP2xyOmxyW2xdfHxocihscixsLHt9KVtsXSxnPXYucHJvdG90eXBlO2ZvcihpIGluIGUpcj0hZnIoYz9pOmwrKGg/Ii4iOiIjIikraSx0LmZvcmNlZCkmJnAmJmRyKHAsaSksYT12W2ldLHImJihzPXQubm9UYXJnZXRHZXQ/KGY9dXIocCxpKSkmJmYudmFsdWU6cFtpXSksbz1yJiZzP3M6ZVtpXSxyJiZ0eXBlb2YgYT09dHlwZW9mIG98fCh1PXQuYmluZCYmcj9jcihvLGFyKTp0LndyYXAmJnI/cHIobyk6ZCYmc3Iobyk/Y3IoRnVuY3Rpb24uY2FsbCxvKTpvLCh0LnNoYW18fG8mJm8uc2hhbXx8YSYmYS5zaGFtKSYmaHIodSwic2hhbSIsITApLGhyKHYsaSx1KSxkJiYoZHIobHIsbj1sKyJQcm90b3R5cGUiKXx8aHIobHIsbix7fSksaHIobHJbbl0saSxvKSx0LnJlYWwmJmcmJiFnW2ldJiZocihnLGksbykpKX07dnIoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLGZvcmNlZDohSixzaGFtOiFKfSx7ZGVmaW5lUHJvcGVydHk6WWUuZn0pO3ZhciBncj15dC5PYmplY3QseXI9Ry5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZ3IuZGVmaW5lUHJvcGVydHkodCxlLHIpfTtnci5kZWZpbmVQcm9wZXJ0eS5zaGFtJiYoeXIuc2hhbT0hMCk7dmFyIGJyPUcuZXhwb3J0cyxtcj1icix3cj17fSxfcj17fSx4cj1ZLGtyPVh0LEVyPUZ1bmN0aW9uLnRvU3RyaW5nO3hyKGtyLmluc3BlY3RTb3VyY2UpfHwoa3IuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gRXIuY2FsbCh0KX0pO3ZhciBBcixTcixPcixUcj1rci5pbnNwZWN0U291cmNlLEJyPVksSXI9VHIsUHI9Vi5XZWFrTWFwLFJyPUJyKFByKSYmL25hdGl2ZSBjb2RlLy50ZXN0KElyKFByKSksTXI9R3QuZXhwb3J0cyxMcj1vZSxqcj1Ncigia2V5cyIpLHpyPWZ1bmN0aW9uKHQpe3JldHVybiBqclt0XXx8KGpyW3RdPUxyKHQpKX0sQ3I9e30sTnI9UnIsVXI9Z3QsRnI9b3IsRHI9cmUscXI9WHQsJHI9enIsWnI9Q3IsSHI9Ik9iamVjdCBhbHJlYWR5IGluaXRpYWxpemVkIixHcj1WLldlYWtNYXA7aWYoTnJ8fHFyLnN0YXRlKXt2YXIgV3I9cXIuc3RhdGV8fChxci5zdGF0ZT1uZXcgR3IpLFZyPVdyLmdldCxZcj1Xci5oYXMsWHI9V3Iuc2V0O0FyPWZ1bmN0aW9uKHQsZSl7aWYoWXIuY2FsbChXcix0KSl0aHJvdyBuZXcgVHlwZUVycm9yKEhyKTtyZXR1cm4gZS5mYWNhZGU9dCxYci5jYWxsKFdyLHQsZSksZX0sU3I9ZnVuY3Rpb24odCl7cmV0dXJuIFZyLmNhbGwoV3IsdCl8fHt9fSxPcj1mdW5jdGlvbih0KXtyZXR1cm4gWXIuY2FsbChXcix0KX19ZWxzZXt2YXIgS3I9JHIoInN0YXRlIik7WnJbS3JdPSEwLEFyPWZ1bmN0aW9uKHQsZSl7aWYoRHIodCxLcikpdGhyb3cgbmV3IFR5cGVFcnJvcihIcik7cmV0dXJuIGUuZmFjYWRlPXQsRnIodCxLcixlKSxlfSxTcj1mdW5jdGlvbih0KXtyZXR1cm4gRHIodCxLcik/dFtLcl06e319LE9yPWZ1bmN0aW9uKHQpe3JldHVybiBEcih0LEtyKX19dmFyIEpyLFFyPXtzZXQ6QXIsZ2V0OlNyLGhhczpPcixlbmZvcmNlOmZ1bmN0aW9uKHQpe3JldHVybiBPcih0KT9Tcih0KTpBcih0LHt9KX0sZ2V0dGVyRm9yOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcjtpZighVXIoZSl8fChyPVNyKGUpKS50eXBlIT09dCl0aHJvdyBUeXBlRXJyb3IoIkluY29tcGF0aWJsZSByZWNlaXZlciwgIit0KyIgcmVxdWlyZWQiKTtyZXR1cm4gcn19fSx0bj1KLGVuPXJlLHJuPUZ1bmN0aW9uLnByb3RvdHlwZSxubj10biYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixvbj1lbihybiwibmFtZSIpLGFuPXtFWElTVFM6b24sUFJPUEVSOm9uJiYic29tZXRoaW5nIj09PWZ1bmN0aW9uKCl7fS5uYW1lLENPTkZJR1VSQUJMRTpvbiYmKCF0bnx8dG4mJm5uKHJuLCJuYW1lIikuY29uZmlndXJhYmxlKX0sc249TWF0aC5jZWlsLHVuPU1hdGguZmxvb3IsZm49ZnVuY3Rpb24odCl7cmV0dXJuIGlzTmFOKHQ9K3QpPzA6KHQ+MD91bjpzbikodCl9LGxuPWZuLGNuPU1hdGgubWluLGhuPWZ1bmN0aW9uKHQpe3JldHVybiB0PjA/Y24obG4odCksOTAwNzE5OTI1NDc0MDk5MSk6MH0sZG49Zm4scG49TWF0aC5tYXgsdm49TWF0aC5taW4sZ249ZnVuY3Rpb24odCxlKXt2YXIgcj1kbih0KTtyZXR1cm4gcjwwP3BuKHIrZSwwKTp2bihyLGUpfSx5bj1wdCxibj1obixtbj1nbix3bj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3ZhciBpLG89eW4oZSksYT1ibihvLmxlbmd0aCkscz1tbihuLGEpO2lmKHQmJnIhPXIpe2Zvcig7YT5zOylpZigoaT1vW3MrK10pIT1pKXJldHVybiEwfWVsc2UgZm9yKDthPnM7cysrKWlmKCh0fHxzIGluIG8pJiZvW3NdPT09cilyZXR1cm4gdHx8c3x8MDtyZXR1cm4hdCYmLTF9fSxfbj17aW5jbHVkZXM6d24oITApLGluZGV4T2Y6d24oITEpfSx4bj1yZSxrbj1wdCxFbj1fbi5pbmRleE9mLEFuPUNyLFNuPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbj1rbih0KSxpPTAsbz1bXTtmb3IociBpbiBuKSF4bihBbixyKSYmeG4obixyKSYmby5wdXNoKHIpO2Zvcig7ZS5sZW5ndGg+aTspeG4obixyPWVbaSsrXSkmJih+RW4obyxyKXx8by5wdXNoKHIpKTtyZXR1cm4gb30sT249WyJjb25zdHJ1Y3RvciIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwidG9Mb2NhbGVTdHJpbmciLCJ0b1N0cmluZyIsInZhbHVlT2YiXSxUbj1TbixCbj1PbixJbj1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7cmV0dXJuIFRuKHQsQm4pfSxQbj1ZZSxSbj1LZSxNbj1JbixMbj1KP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsZSl7Um4odCk7Zm9yKHZhciByLG49TW4oZSksaT1uLmxlbmd0aCxvPTA7aT5vOylQbi5mKHQscj1uW28rK10sZVtyXSk7cmV0dXJuIHR9LGpuPXh0KCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIpLHpuPUtlLENuPUxuLE5uPU9uLFVuPUNyLEZuPWpuLERuPU9lLHFuPXpyKCJJRV9QUk9UTyIpLCRuPWZ1bmN0aW9uKCl7fSxabj1mdW5jdGlvbih0KXtyZXR1cm4iPHNjcmlwdD4iK3QrIjwvIisic2NyaXB0PiJ9LEhuPWZ1bmN0aW9uKHQpe3Qud3JpdGUoWm4oIiIpKSx0LmNsb3NlKCk7dmFyIGU9dC5wYXJlbnRXaW5kb3cuT2JqZWN0O3JldHVybiB0PW51bGwsZX0sR249ZnVuY3Rpb24oKXt0cnl7SnI9bmV3IEFjdGl2ZVhPYmplY3QoImh0bWxmaWxlIil9Y2F0Y2gobil7fXZhciB0LGU7R249InVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudD9kb2N1bWVudC5kb21haW4mJkpyP0huKEpyKTooKGU9RG4oImlmcmFtZSIpKS5zdHlsZS5kaXNwbGF5PSJub25lIixGbi5hcHBlbmRDaGlsZChlKSxlLnNyYz1TdHJpbmcoImphdmFzY3JpcHQ6IiksKHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50KS5vcGVuKCksdC53cml0ZShabigiZG9jdW1lbnQuRj1PYmplY3QiKSksdC5jbG9zZSgpLHQuRik6SG4oSnIpO2Zvcih2YXIgcj1Obi5sZW5ndGg7ci0tOylkZWxldGUgR24ucHJvdG90eXBlW05uW3JdXTtyZXR1cm4gR24oKX07VW5bcW5dPSEwO3ZhciBXbixWbixZbixYbj1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciByO3JldHVybiBudWxsIT09dD8oJG4ucHJvdG90eXBlPXpuKHQpLHI9bmV3ICRuLCRuLnByb3RvdHlwZT1udWxsLHJbcW5dPXQpOnI9R24oKSx2b2lkIDA9PT1lP3I6Q24ocixlKX0sS249IUsoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuY29uc3RydWN0b3I9bnVsbCxPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3IHQpIT09dC5wcm90b3R5cGV9KSksSm49cmUsUW49WSx0aT1RdCxlaT1LbixyaT16cigiSUVfUFJPVE8iKSxuaT1PYmplY3QucHJvdG90eXBlLGlpPWVpP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXt2YXIgZT10aSh0KTtpZihKbihlLHJpKSlyZXR1cm4gZVtyaV07dmFyIHI9ZS5jb25zdHJ1Y3RvcjtyZXR1cm4gUW4ocikmJmUgaW5zdGFuY2VvZiByP3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/bmk6bnVsbH0sb2k9b3IsYWk9ZnVuY3Rpb24odCxlLHIsbil7biYmbi5lbnVtZXJhYmxlP3RbZV09cjpvaSh0LGUscil9LHNpPUssdWk9WSxmaT1YbixsaT1paSxjaT1haSxoaT12ZSgiaXRlcmF0b3IiKSxkaT0hMTtbXS5rZXlzJiYoIm5leHQiaW4oWW49W10ua2V5cygpKT8oVm49bGkobGkoWW4pKSkhPT1PYmplY3QucHJvdG90eXBlJiYoV249Vm4pOmRpPSEwKTt2YXIgcGk9bnVsbD09V258fHNpKChmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiBXbltoaV0uY2FsbCh0KSE9PXR9KSk7dWkoKFduPXBpP3t9OmZpKFduKSlbaGldKXx8Y2koV24saGksKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSk7dmFyIHZpPXtJdGVyYXRvclByb3RvdHlwZTpXbixCVUdHWV9TQUZBUklfSVRFUkFUT1JTOmRpfSxnaT17fTtnaVt2ZSgidG9TdHJpbmdUYWciKV09InoiO3ZhciB5aT0iW29iamVjdCB6XSI9PT1TdHJpbmcoZ2kpLGJpPXlpLG1pPVksd2k9c3QsX2k9dmUoInRvU3RyaW5nVGFnIikseGk9IkFyZ3VtZW50cyI9PXdpKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksa2k9Ymk/d2k6ZnVuY3Rpb24odCl7dmFyIGUscixuO3JldHVybiB2b2lkIDA9PT10PyJVbmRlZmluZWQiOm51bGw9PT10PyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9ZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuIHRbZV19Y2F0Y2gocil7fX0oZT1PYmplY3QodCksX2kpKT9yOnhpP3dpKGUpOiJPYmplY3QiPT0obj13aShlKSkmJm1pKGUuY2FsbGVlKT8iQXJndW1lbnRzIjpufSxFaT1raSxBaT15aT97fS50b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0ICIrRWkodGhpcykrIl0ifSxTaT15aSxPaT1ZZS5mLFRpPW9yLEJpPXJlLElpPUFpLFBpPXZlKCJ0b1N0cmluZ1RhZyIpLFJpPWZ1bmN0aW9uKHQsZSxyLG4pe2lmKHQpe3ZhciBpPXI/dDp0LnByb3RvdHlwZTtCaShpLFBpKXx8T2koaSxQaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KSxuJiYhU2kmJlRpKGksInRvU3RyaW5nIixJaSl9fSxNaT12aS5JdGVyYXRvclByb3RvdHlwZSxMaT1YbixqaT1vdCx6aT1SaSxDaT1fcixOaT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxVaT1ZLEZpPUtlLERpPWZ1bmN0aW9uKHQpe2lmKCJvYmplY3QiPT10eXBlb2YgdHx8VWkodCkpcmV0dXJuIHQ7dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBzZXQgIitTdHJpbmcodCkrIiBhcyBhIHByb3RvdHlwZSIpfSxxaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24oKXt2YXIgdCxlPSExLHI9e307dHJ5eyh0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0KS5jYWxsKHIsW10pLGU9ciBpbnN0YW5jZW9mIEFycmF5fWNhdGNoKG4pe31yZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gRmkociksRGkobiksZT90LmNhbGwocixuKTpyLl9fcHJvdG9fXz1uLHJ9fSgpOnZvaWQgMCksJGk9dnIsWmk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPWUrIiBJdGVyYXRvciI7cmV0dXJuIHQucHJvdG90eXBlPUxpKE1pLHtuZXh0OmppKDEscil9KSx6aSh0LG4sITEsITApLENpW25dPU5pLHR9LEhpPWlpLEdpPVJpLFdpPWFpLFZpPV9yLFlpPWFuLlBST1BFUixYaT12aS5CVUdHWV9TQUZBUklfSVRFUkFUT1JTLEtpPXZlKCJpdGVyYXRvciIpLEppPSJrZXlzIixRaT0idmFsdWVzIix0bz0iZW50cmllcyIsZW89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scm89ZnVuY3Rpb24odCxlLHIsbixpLG8sYSl7WmkocixlLG4pO3ZhciBzLHUsZixsPWZ1bmN0aW9uKHQpe2lmKHQ9PT1pJiZ2KXJldHVybiB2O2lmKCFYaSYmdCBpbiBkKXJldHVybiBkW3RdO3N3aXRjaCh0KXtjYXNlIEppOmNhc2UgUWk6Y2FzZSB0bzpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMpfX0sYz1lKyIgSXRlcmF0b3IiLGg9ITEsZD10LnByb3RvdHlwZSxwPWRbS2ldfHxkWyJAQGl0ZXJhdG9yIl18fGkmJmRbaV0sdj0hWGkmJnB8fGwoaSksZz0iQXJyYXkiPT1lJiZkLmVudHJpZXN8fHA7aWYoZyYmKHM9SGkoZy5jYWxsKG5ldyB0KSkpIT09T2JqZWN0LnByb3RvdHlwZSYmcy5uZXh0JiYoR2kocyxjLCEwLCEwKSxWaVtjXT1lbyksWWkmJmk9PVFpJiZwJiZwLm5hbWUhPT1RaSYmKGg9ITAsdj1mdW5jdGlvbigpe3JldHVybiBwLmNhbGwodGhpcyl9KSxpKWlmKHU9e3ZhbHVlczpsKFFpKSxrZXlzOm8/djpsKEppKSxlbnRyaWVzOmwodG8pfSxhKWZvcihmIGluIHUpKFhpfHxofHwhKGYgaW4gZCkpJiZXaShkLGYsdVtmXSk7ZWxzZSAkaSh7dGFyZ2V0OmUscHJvdG86ITAsZm9yY2VkOlhpfHxofSx1KTtyZXR1cm4gYSYmZFtLaV0hPT12JiZXaShkLEtpLHYse25hbWU6aX0pLFZpW2VdPXYsdX0sbm89cHQsaW89X3Isb289UXIsYW89cm8sc289IkFycmF5IEl0ZXJhdG9yIix1bz1vby5zZXQsZm89b28uZ2V0dGVyRm9yKHNvKTthbyhBcnJheSwiQXJyYXkiLChmdW5jdGlvbih0LGUpe3VvKHRoaXMse3R5cGU6c28sdGFyZ2V0Om5vKHQpLGluZGV4OjAsa2luZDplfSl9KSwoZnVuY3Rpb24oKXt2YXIgdD1mbyh0aGlzKSxlPXQudGFyZ2V0LHI9dC5raW5kLG49dC5pbmRleCsrO3JldHVybiFlfHxuPj1lLmxlbmd0aD8odC50YXJnZXQ9dm9pZCAwLHt2YWx1ZTp2b2lkIDAsZG9uZTohMH0pOiJrZXlzIj09cj97dmFsdWU6bixkb25lOiExfToidmFsdWVzIj09cj97dmFsdWU6ZVtuXSxkb25lOiExfTp7dmFsdWU6W24sZVtuXV0sZG9uZTohMX19KSwidmFsdWVzIiksaW8uQXJndW1lbnRzPWlvLkFycmF5O3ZhciBsbz1raSxjbz1mdW5jdGlvbih0KXtpZigiU3ltYm9sIj09PWxvKHQpKXRocm93IFR5cGVFcnJvcigiQ2Fubm90IGNvbnZlcnQgYSBTeW1ib2wgdmFsdWUgdG8gYSBzdHJpbmciKTtyZXR1cm4gU3RyaW5nKHQpfSxobz1mbixwbz1jbyx2bz1jdCxnbz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXt2YXIgbixpLG89cG8odm8oZSkpLGE9aG8ocikscz1vLmxlbmd0aDtyZXR1cm4gYTwwfHxhPj1zP3Q/IiI6dm9pZCAwOihuPW8uY2hhckNvZGVBdChhKSk8NTUyOTZ8fG4+NTYzMTl8fGErMT09PXN8fChpPW8uY2hhckNvZGVBdChhKzEpKTw1NjMyMHx8aT41NzM0Mz90P28uY2hhckF0KGEpOm46dD9vLnNsaWNlKGEsYSsyKTppLTU2MzIwKyhuLTU1Mjk2PDwxMCkrNjU1MzZ9fSx5bz17Y29kZUF0OmdvKCExKSxjaGFyQXQ6Z28oITApfS5jaGFyQXQsYm89Y28sbW89UXIsd289cm8sX289IlN0cmluZyBJdGVyYXRvciIseG89bW8uc2V0LGtvPW1vLmdldHRlckZvcihfbyk7d28oU3RyaW5nLCJTdHJpbmciLChmdW5jdGlvbih0KXt4byh0aGlzLHt0eXBlOl9vLHN0cmluZzpibyh0KSxpbmRleDowfSl9KSwoZnVuY3Rpb24oKXt2YXIgdCxlPWtvKHRoaXMpLHI9ZS5zdHJpbmcsbj1lLmluZGV4O3JldHVybiBuPj1yLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PXlvKHIsbiksZS5pbmRleCs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSkpO3ZhciBFbz1raSxBbz0kdCxTbz1fcixPbz12ZSgiaXRlcmF0b3IiKSxUbz1mdW5jdGlvbih0KXtpZihudWxsIT10KXJldHVybiBBbyh0LE9vKXx8QW8odCwiQEBpdGVyYXRvciIpfHxTb1tFbyh0KV19LEJvPUR0LElvPUtlLFBvPVRvLFJvPWZ1bmN0aW9uKHQsZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDwyP1BvKHQpOmU7aWYoQm8ocikpcmV0dXJuIElvKHIuY2FsbCh0KSk7dGhyb3cgVHlwZUVycm9yKFN0cmluZyh0KSsiIGlzIG5vdCBpdGVyYWJsZSIpfSxNbz1SbyxMbz17Q1NTUnVsZUxpc3Q6MCxDU1NTdHlsZURlY2xhcmF0aW9uOjAsQ1NTVmFsdWVMaXN0OjAsQ2xpZW50UmVjdExpc3Q6MCxET01SZWN0TGlzdDowLERPTVN0cmluZ0xpc3Q6MCxET01Ub2tlbkxpc3Q6MSxEYXRhVHJhbnNmZXJJdGVtTGlzdDowLEZpbGVMaXN0OjAsSFRNTEFsbENvbGxlY3Rpb246MCxIVE1MQ29sbGVjdGlvbjowLEhUTUxGb3JtRWxlbWVudDowLEhUTUxTZWxlY3RFbGVtZW50OjAsTWVkaWFMaXN0OjAsTWltZVR5cGVBcnJheTowLE5hbWVkTm9kZU1hcDowLE5vZGVMaXN0OjEsUGFpbnRSZXF1ZXN0TGlzdDowLFBsdWdpbjowLFBsdWdpbkFycmF5OjAsU1ZHTGVuZ3RoTGlzdDowLFNWR051bWJlckxpc3Q6MCxTVkdQYXRoU2VnTGlzdDowLFNWR1BvaW50TGlzdDowLFNWR1N0cmluZ0xpc3Q6MCxTVkdUcmFuc2Zvcm1MaXN0OjAsU291cmNlQnVmZmVyTGlzdDowLFN0eWxlU2hlZXRMaXN0OjAsVGV4dFRyYWNrQ3VlTGlzdDowLFRleHRUcmFja0xpc3Q6MCxUb3VjaExpc3Q6MH0sam89Vix6bz1raSxDbz1vcixObz1fcixVbz12ZSgidG9TdHJpbmdUYWciKTtmb3IodmFyIEZvIGluIExvKXt2YXIgRG89am9bRm9dLHFvPURvJiZEby5wcm90b3R5cGU7cW8mJnpvKHFvKSE9PVVvJiZDbyhxbyxVbyxGbyksTm9bRm9dPU5vLkFycmF5fXZhciAkbz1Nbyxabz1zdCxIbz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm4iQXJyYXkiPT1abyh0KX07dnIoe3RhcmdldDoiQXJyYXkiLHN0YXQ6ITB9LHtpc0FycmF5OkhvfSk7dmFyIEdvPXl0LkFycmF5LmlzQXJyYXksV289R28sVm89VG8sWW89a2UsWG89WWUsS289b3QsSm89ZnVuY3Rpb24odCxlLHIpe3ZhciBuPVlvKGUpO24gaW4gdD9Yby5mKHQsbixLbygwLHIpKTp0W25dPXJ9LFFvPUssdGE9WSxlYT1raSxyYT1UcixuYT1bXSxpYT14dCgiUmVmbGVjdCIsImNvbnN0cnVjdCIpLG9hPS9eXHMqKD86Y2xhc3N8ZnVuY3Rpb24pXGIvLGFhPW9hLmV4ZWMsc2E9IW9hLmV4ZWMoKGZ1bmN0aW9uKCl7fSkpLHVhPWZ1bmN0aW9uKHQpe2lmKCF0YSh0KSlyZXR1cm4hMTt0cnl7cmV0dXJuIGlhKE9iamVjdCxuYSx0KSwhMH1jYXRjaChlKXtyZXR1cm4hMX19LGZhPSFpYXx8UW8oKGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHVhKHVhLmNhbGwpfHwhdWEoT2JqZWN0KXx8IXVhKChmdW5jdGlvbigpe3Q9ITB9KSl8fHR9KSk/ZnVuY3Rpb24odCl7aWYoIXRhKHQpKXJldHVybiExO3N3aXRjaChlYSh0KSl7Y2FzZSJBc3luY0Z1bmN0aW9uIjpjYXNlIkdlbmVyYXRvckZ1bmN0aW9uIjpjYXNlIkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24iOnJldHVybiExfXJldHVybiBzYXx8ISFhYS5jYWxsKG9hLHJhKHQpKX06dWEsbGE9SG8sY2E9ZmEsaGE9Z3QsZGE9dmUoInNwZWNpZXMiKSxwYT1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gbGEodCkmJihlPXQuY29uc3RydWN0b3IsKGNhKGUpJiYoZT09PUFycmF5fHxsYShlLnByb3RvdHlwZSkpfHxoYShlKSYmbnVsbD09PShlPWVbZGFdKSkmJihlPXZvaWQgMCkpLHZvaWQgMD09PWU/QXJyYXk6ZX0sdmE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3KHBhKHQpKSgwPT09ZT8wOmUpfSxnYT1LLHlhPUl0LGJhPXZlKCJzcGVjaWVzIiksbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHlhPj01MXx8IWdhKChmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybihlLmNvbnN0cnVjdG9yPXt9KVtiYV09ZnVuY3Rpb24oKXtyZXR1cm57Zm9vOjF9fSwxIT09ZVt0XShCb29sZWFuKS5mb299KSl9LHdhPXZyLF9hPUsseGE9SG8sa2E9Z3QsRWE9UXQsQWE9aG4sU2E9Sm8sT2E9dmEsVGE9bWEsQmE9SXQsSWE9dmUoImlzQ29uY2F0U3ByZWFkYWJsZSIpLFBhPTkwMDcxOTkyNTQ3NDA5OTEsUmE9Ik1heGltdW0gYWxsb3dlZCBpbmRleCBleGNlZWRlZCIsTWE9QmE+PTUxfHwhX2EoKGZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHRbSWFdPSExLHQuY29uY2F0KClbMF0hPT10fSkpLExhPVRhKCJjb25jYXQiKSxqYT1mdW5jdGlvbih0KXtpZigha2EodCkpcmV0dXJuITE7dmFyIGU9dFtJYV07cmV0dXJuIHZvaWQgMCE9PWU/ISFlOnhhKHQpfTt3YSh7dGFyZ2V0OiJBcnJheSIscHJvdG86ITAsZm9yY2VkOiFNYXx8IUxhfSx7Y29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlLHIsbixpLG8sYT1FYSh0aGlzKSxzPU9hKGEsMCksdT0wO2ZvcihlPS0xLG49YXJndW1lbnRzLmxlbmd0aDtlPG47ZSsrKWlmKGphKG89LTE9PT1lP2E6YXJndW1lbnRzW2VdKSl7aWYodSsoaT1BYShvLmxlbmd0aCkpPlBhKXRocm93IFR5cGVFcnJvcihSYSk7Zm9yKHI9MDtyPGk7cisrLHUrKylyIGluIG8mJlNhKHMsdSxvW3JdKX1lbHNle2lmKHU+PVBhKXRocm93IFR5cGVFcnJvcihSYSk7U2Eocyx1Kyssbyl9cmV0dXJuIHMubGVuZ3RoPXUsc319KTt2YXIgemE9e30sQ2E9U24sTmE9T24uY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTt6YS5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbih0KXtyZXR1cm4gQ2EodCxOYSl9O3ZhciBVYT17fSxGYT1wdCxEYT16YS5mLHFhPXt9LnRvU3RyaW5nLCRhPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W107VWEuZj1mdW5jdGlvbih0KXtyZXR1cm4gJGEmJiJbb2JqZWN0IFdpbmRvd10iPT1xYS5jYWxsKHQpP2Z1bmN0aW9uKHQpe3RyeXtyZXR1cm4gRGEodCl9Y2F0Y2goZSl7cmV0dXJuICRhLnNsaWNlKCl9fSh0KTpEYShGYSh0KSl9O3ZhciBaYT17fTtaYS5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIEhhPXt9LEdhPXZlO0hhLmY9R2E7dmFyIFdhPXl0LFZhPXJlLFlhPUhhLFhhPVllLmYsS2E9ZnVuY3Rpb24odCl7dmFyIGU9V2EuU3ltYm9sfHwoV2EuU3ltYm9sPXt9KTtWYShlLHQpfHxYYShlLHQse3ZhbHVlOllhLmYodCl9KX0sSmE9VmUsUWE9bHQsdHM9UXQsZXM9aG4scnM9dmEsbnM9W10ucHVzaCxpcz1mdW5jdGlvbih0KXt2YXIgZT0xPT10LHI9Mj09dCxuPTM9PXQsaT00PT10LG89Nj09dCxhPTc9PXQscz01PT10fHxvO3JldHVybiBmdW5jdGlvbih1LGYsbCxjKXtmb3IodmFyIGgsZCxwPXRzKHUpLHY9UWEocCksZz1KYShmLGwsMykseT1lcyh2Lmxlbmd0aCksYj0wLG09Y3x8cnMsdz1lP20odSx5KTpyfHxhP20odSwwKTp2b2lkIDA7eT5iO2IrKylpZigoc3x8YiBpbiB2KSYmKGQ9ZyhoPXZbYl0sYixwKSx0KSlpZihlKXdbYl09ZDtlbHNlIGlmKGQpc3dpdGNoKHQpe2Nhc2UgMzpyZXR1cm4hMDtjYXNlIDU6cmV0dXJuIGg7Y2FzZSA2OnJldHVybiBiO2Nhc2UgMjpucy5jYWxsKHcsaCl9ZWxzZSBzd2l0Y2godCl7Y2FzZSA0OnJldHVybiExO2Nhc2UgNzpucy5jYWxsKHcsaCl9cmV0dXJuIG8/LTE6bnx8aT9pOnd9fSxvcz17Zm9yRWFjaDppcygwKSxtYXA6aXMoMSksZmlsdGVyOmlzKDIpLHNvbWU6aXMoMyksZXZlcnk6aXMoNCksZmluZDppcyg1KSxmaW5kSW5kZXg6aXMoNiksZmlsdGVyUmVqZWN0OmlzKDcpfSxhcz12cixzcz1WLHVzPXh0LGZzPUosbHM9TXQsY3M9Syxocz1yZSxkcz1Ibyxwcz1ZLHZzPWd0LGdzPUN0LHlzPUtlLGJzPVF0LG1zPXB0LHdzPWtlLF9zPWNvLHhzPW90LGtzPVhuLEVzPUluLEFzPXphLFNzPVVhLE9zPVphLFRzPVgsQnM9WWUsSXM9USxQcz1haSxScz1HdC5leHBvcnRzLE1zPUNyLExzPW9lLGpzPXZlLHpzPUhhLENzPUthLE5zPVJpLFVzPVFyLEZzPW9zLmZvckVhY2gsRHM9enIoImhpZGRlbiIpLHFzPSJTeW1ib2wiLCRzPWpzKCJ0b1ByaW1pdGl2ZSIpLFpzPVVzLnNldCxIcz1Vcy5nZXR0ZXJGb3IocXMpLEdzPU9iamVjdC5wcm90b3R5cGUsV3M9c3MuU3ltYm9sLFZzPXVzKCJKU09OIiwic3RyaW5naWZ5IiksWXM9VHMuZixYcz1Ccy5mLEtzPVNzLmYsSnM9SXMuZixRcz1Scygic3ltYm9scyIpLHR1PVJzKCJvcC1zeW1ib2xzIiksZXU9UnMoInN0cmluZy10by1zeW1ib2wtcmVnaXN0cnkiKSxydT1Scygic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeSIpLG51PVJzKCJ3a3MiKSxpdT1zcy5RT2JqZWN0LG91PSFpdXx8IWl1LnByb3RvdHlwZXx8IWl1LnByb3RvdHlwZS5maW5kQ2hpbGQsYXU9ZnMmJmNzKChmdW5jdGlvbigpe3JldHVybiA3IT1rcyhYcyh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBYcyh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KSk/ZnVuY3Rpb24odCxlLHIpe3ZhciBuPVlzKEdzLGUpO24mJmRlbGV0ZSBHc1tlXSxYcyh0LGUsciksbiYmdCE9PUdzJiZYcyhHcyxlLG4pfTpYcyxzdT1mdW5jdGlvbih0LGUpe3ZhciByPVFzW3RdPWtzKFdzLnByb3RvdHlwZSk7cmV0dXJuIFpzKHIse3R5cGU6cXMsdGFnOnQsZGVzY3JpcHRpb246ZX0pLGZzfHwoci5kZXNjcmlwdGlvbj1lKSxyfSx1dT1mdW5jdGlvbih0LGUscil7dD09PUdzJiZ1dSh0dSxlLHIpLHlzKHQpO3ZhciBuPXdzKGUpO3JldHVybiB5cyhyKSxocyhRcyxuKT8oci5lbnVtZXJhYmxlPyhocyh0LERzKSYmdFtEc11bbl0mJih0W0RzXVtuXT0hMSkscj1rcyhyLHtlbnVtZXJhYmxlOnhzKDAsITEpfSkpOihocyh0LERzKXx8WHModCxEcyx4cygxLHt9KSksdFtEc11bbl09ITApLGF1KHQsbixyKSk6WHModCxuLHIpfSxmdT1mdW5jdGlvbih0LGUpe3lzKHQpO3ZhciByPW1zKGUpLG49RXMocikuY29uY2F0KGR1KHIpKTtyZXR1cm4gRnMobiwoZnVuY3Rpb24oZSl7ZnMmJiFsdS5jYWxsKHIsZSl8fHV1KHQsZSxyW2VdKX0pKSx0fSxsdT1mdW5jdGlvbih0KXt2YXIgZT13cyh0KSxyPUpzLmNhbGwodGhpcyxlKTtyZXR1cm4hKHRoaXM9PT1HcyYmaHMoUXMsZSkmJiFocyh0dSxlKSkmJighKHJ8fCFocyh0aGlzLGUpfHwhaHMoUXMsZSl8fGhzKHRoaXMsRHMpJiZ0aGlzW0RzXVtlXSl8fHIpfSxjdT1mdW5jdGlvbih0LGUpe3ZhciByPW1zKHQpLG49d3MoZSk7aWYociE9PUdzfHwhaHMoUXMsbil8fGhzKHR1LG4pKXt2YXIgaT1ZcyhyLG4pO3JldHVybiFpfHwhaHMoUXMsbil8fGhzKHIsRHMpJiZyW0RzXVtuXXx8KGkuZW51bWVyYWJsZT0hMCksaX19LGh1PWZ1bmN0aW9uKHQpe3ZhciBlPUtzKG1zKHQpKSxyPVtdO3JldHVybiBGcyhlLChmdW5jdGlvbih0KXtocyhRcyx0KXx8aHMoTXMsdCl8fHIucHVzaCh0KX0pKSxyfSxkdT1mdW5jdGlvbih0KXt2YXIgZT10PT09R3Mscj1LcyhlP3R1Om1zKHQpKSxuPVtdO3JldHVybiBGcyhyLChmdW5jdGlvbih0KXshaHMoUXMsdCl8fGUmJiFocyhHcyx0KXx8bi5wdXNoKFFzW3RdKX0pKSxufTsobHN8fChQcygoV3M9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgV3MpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTt2YXIgdD1hcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/X3MoYXJndW1lbnRzWzBdKTp2b2lkIDAsZT1Mcyh0KSxyPWZ1bmN0aW9uKHQpe3RoaXM9PT1HcyYmci5jYWxsKHR1LHQpLGhzKHRoaXMsRHMpJiZocyh0aGlzW0RzXSxlKSYmKHRoaXNbRHNdW2VdPSExKSxhdSh0aGlzLGUseHMoMSx0KSl9O3JldHVybiBmcyYmb3UmJmF1KEdzLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6cn0pLHN1KGUsdCl9KS5wcm90b3R5cGUsInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gSHModGhpcykudGFnfSkpLFBzKFdzLCJ3aXRob3V0U2V0dGVyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHN1KExzKHQpLHQpfSkpLElzLmY9bHUsQnMuZj11dSxUcy5mPWN1LEFzLmY9U3MuZj1odSxPcy5mPWR1LHpzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIHN1KGpzKHQpLHQpfSxmcyYmWHMoV3MucHJvdG90eXBlLCJkZXNjcmlwdGlvbiIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHModGhpcykuZGVzY3JpcHRpb259fSkpLGFzKHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6IWxzLHNoYW06IWxzfSx7U3ltYm9sOldzfSksRnMoRXMobnUpLChmdW5jdGlvbih0KXtDcyh0KX0pKSxhcyh7dGFyZ2V0OnFzLHN0YXQ6ITAsZm9yY2VkOiFsc30se2ZvcjpmdW5jdGlvbih0KXt2YXIgZT1fcyh0KTtpZihocyhldSxlKSlyZXR1cm4gZXVbZV07dmFyIHI9V3MoZSk7cmV0dXJuIGV1W2VdPXIscnVbcl09ZSxyfSxrZXlGb3I6ZnVuY3Rpb24odCl7aWYoIWdzKHQpKXRocm93IFR5cGVFcnJvcih0KyIgaXMgbm90IGEgc3ltYm9sIik7aWYoaHMocnUsdCkpcmV0dXJuIHJ1W3RdfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtvdT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7b3U9ITF9fSksYXMoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLGZvcmNlZDohbHMsc2hhbTohZnN9LHtjcmVhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZT9rcyh0KTpmdShrcyh0KSxlKX0sZGVmaW5lUHJvcGVydHk6dXUsZGVmaW5lUHJvcGVydGllczpmdSxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6Y3V9KSxhcyh7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOiFsc30se2dldE93blByb3BlcnR5TmFtZXM6aHUsZ2V0T3duUHJvcGVydHlTeW1ib2xzOmR1fSksYXMoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLGZvcmNlZDpjcygoZnVuY3Rpb24oKXtPcy5mKDEpfSkpfSx7Z2V0T3duUHJvcGVydHlTeW1ib2xzOmZ1bmN0aW9uKHQpe3JldHVybiBPcy5mKGJzKHQpKX19KSxWcykmJmFzKHt0YXJnZXQ6IkpTT04iLHN0YXQ6ITAsZm9yY2VkOiFsc3x8Y3MoKGZ1bmN0aW9uKCl7dmFyIHQ9V3MoKTtyZXR1cm4iW251bGxdIiE9VnMoW3RdKXx8Int9IiE9VnMoe2E6dH0pfHwie30iIT1WcyhPYmplY3QodCkpfSkpfSx7c3RyaW5naWZ5OmZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG4saT1bdF0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspaS5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihuPWUsKHZzKGUpfHx2b2lkIDAhPT10KSYmIWdzKHQpKXJldHVybiBkcyhlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZihwcyhuKSYmKGU9bi5jYWxsKHRoaXMsdCxlKSksIWdzKGUpKXJldHVybiBlfSksaVsxXT1lLFZzLmFwcGx5KG51bGwsaSl9fSk7aWYoIVdzLnByb3RvdHlwZVskc10pe3ZhciBwdT1Xcy5wcm90b3R5cGUudmFsdWVPZjtQcyhXcy5wcm90b3R5cGUsJHMsKGZ1bmN0aW9uKCl7cmV0dXJuIHB1LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pKX1OcyhXcyxxcyksTXNbRHNdPSEwLEthKCJhc3luY0l0ZXJhdG9yIiksS2EoImhhc0luc3RhbmNlIiksS2EoImlzQ29uY2F0U3ByZWFkYWJsZSIpLEthKCJpdGVyYXRvciIpLEthKCJtYXRjaCIpLEthKCJtYXRjaEFsbCIpLEthKCJyZXBsYWNlIiksS2EoInNlYXJjaCIpLEthKCJzcGVjaWVzIiksS2EoInNwbGl0IiksS2EoInRvUHJpbWl0aXZlIiksS2EoInRvU3RyaW5nVGFnIiksS2EoInVuc2NvcGFibGVzIiksUmkoVi5KU09OLCJKU09OIiwhMCk7dmFyIHZ1PXl0LlN5bWJvbCxndT12dSx5dT1LZSxidT0kdCxtdT1mdW5jdGlvbih0LGUscil7dmFyIG4saTt5dSh0KTt0cnl7aWYoIShuPWJ1KHQsInJldHVybiIpKSl7aWYoInRocm93Ij09PWUpdGhyb3cgcjtyZXR1cm4gcn1uPW4uY2FsbCh0KX1jYXRjaChvKXtpPSEwLG49b31pZigidGhyb3ciPT09ZSl0aHJvdyByO2lmKGkpdGhyb3cgbjtyZXR1cm4geXUobikscn0sd3U9S2UsX3U9bXUseHU9X3Isa3U9dmUoIml0ZXJhdG9yIiksRXU9QXJyYXkucHJvdG90eXBlLEF1PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYoeHUuQXJyYXk9PT10fHxFdVtrdV09PT10KX0sU3U9VmUsT3U9UXQsVHU9ZnVuY3Rpb24odCxlLHIsbil7dHJ5e3JldHVybiBuP2Uod3UocilbMF0sclsxXSk6ZShyKX1jYXRjaChpKXtfdSh0LCJ0aHJvdyIsaSl9fSxCdT1BdSxJdT1mYSxQdT1obixSdT1KbyxNdT1SbyxMdT1UbyxqdT12ZSgiaXRlcmF0b3IiKSx6dT0hMTt0cnl7dmFyIEN1PTAsTnU9e25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTohIUN1Kyt9fSxyZXR1cm46ZnVuY3Rpb24oKXt6dT0hMH19O051W2p1XT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxBcnJheS5mcm9tKE51LChmdW5jdGlvbigpe3Rocm93IDJ9KSl9Y2F0Y2god0Upe312YXIgVXU9ZnVuY3Rpb24odCxlKXtpZighZSYmIXp1KXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgbj17fTtuW2p1XT1mdW5jdGlvbigpe3JldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6cj0hMH19fX0sdChuKX1jYXRjaCh3RSl7fXJldHVybiByfSxGdT1mdW5jdGlvbih0KXt2YXIgZT1PdSh0KSxyPUl1KHRoaXMpLG49YXJndW1lbnRzLmxlbmd0aCxpPW4+MT9hcmd1bWVudHNbMV06dm9pZCAwLG89dm9pZCAwIT09aTtvJiYoaT1TdShpLG4+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKTt2YXIgYSxzLHUsZixsLGMsaD1MdShlKSxkPTA7aWYoIWh8fHRoaXM9PUFycmF5JiZCdShoKSlmb3IoYT1QdShlLmxlbmd0aCkscz1yP25ldyB0aGlzKGEpOkFycmF5KGEpO2E+ZDtkKyspYz1vP2koZVtkXSxkKTplW2RdLFJ1KHMsZCxjKTtlbHNlIGZvcihsPShmPU11KGUsaCkpLm5leHQscz1yP25ldyB0aGlzOltdOyEodT1sLmNhbGwoZikpLmRvbmU7ZCsrKWM9bz9UdShmLGksW3UudmFsdWUsZF0sITApOnUudmFsdWUsUnUocyxkLGMpO3JldHVybiBzLmxlbmd0aD1kLHN9O3ZyKHt0YXJnZXQ6IkFycmF5IixzdGF0OiEwLGZvcmNlZDohVXUoKGZ1bmN0aW9uKHQpe0FycmF5LmZyb20odCl9KSl9LHtmcm9tOkZ1fSk7dmFyIER1PXl0LkFycmF5LmZyb20scXU9RHUsJHU9e2V4cG9ydHM6e319O3ZyKHt0YXJnZXQ6Ik9iamVjdCIsc3RhdDohMCxmb3JjZWQ6IUosc2hhbTohSn0se2RlZmluZVByb3BlcnRpZXM6TG59KTt2YXIgWnU9eXQuT2JqZWN0LEh1PSR1LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWnUuZGVmaW5lUHJvcGVydGllcyh0LGUpfTtadS5kZWZpbmVQcm9wZXJ0aWVzLnNoYW0mJihIdS5zaGFtPSEwKTt2YXIgR3U9JHUuZXhwb3J0cyxXdT16YSxWdT1aYSxZdT1LZSxYdT14dCgiUmVmbGVjdCIsIm93bktleXMiKXx8ZnVuY3Rpb24odCl7dmFyIGU9V3UuZihZdSh0KSkscj1WdS5mO3JldHVybiByP2UuY29uY2F0KHIodCkpOmV9LEt1PXB0LEp1PVgsUXU9Sm87dnIoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLHNoYW06IUp9LHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyLG49S3UodCksaT1KdS5mLG89WHUobiksYT17fSxzPTA7by5sZW5ndGg+czspdm9pZCAwIT09KHI9aShuLGU9b1tzKytdKSkmJlF1KGEsZSxyKTtyZXR1cm4gYX19KTt2YXIgdGY9eXQuT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsZWY9SyxyZj1mdW5jdGlvbih0LGUpe3ZhciByPVtdW3RdO3JldHVybiEhciYmZWYoKGZ1bmN0aW9uKCl7ci5jYWxsKG51bGwsZXx8ZnVuY3Rpb24oKXt0aHJvdyAxfSwxKX0pKX0sbmY9b3MuZm9yRWFjaCxvZj1yZigiZm9yRWFjaCIpP1tdLmZvckVhY2g6ZnVuY3Rpb24odCl7cmV0dXJuIG5mKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9O3ZyKHt0YXJnZXQ6IkFycmF5Iixwcm90bzohMCxmb3JjZWQ6W10uZm9yRWFjaCE9b2Z9LHtmb3JFYWNoOm9mfSk7dmFyIGFmPXl0LHNmPWZ1bmN0aW9uKHQpe3JldHVybiBhZlt0KyJQcm90b3R5cGUiXX0sdWY9c2YoIkFycmF5IikuZm9yRWFjaCxmZj1raSxsZj1BcnJheS5wcm90b3R5cGUsY2Y9e0RPTVRva2VuTGlzdDohMCxOb2RlTGlzdDohMH0saGY9ZnVuY3Rpb24odCl7dmFyIGU9dC5mb3JFYWNoO3JldHVybiB0PT09bGZ8fHQgaW5zdGFuY2VvZiBBcnJheSYmZT09PWxmLmZvckVhY2h8fGNmLmhhc093blByb3BlcnR5KGZmKHQpKT91ZjplfSxkZj17ZXhwb3J0czp7fX0scGY9dnIsdmY9SyxnZj1wdCx5Zj1YLmYsYmY9SixtZj12ZigoZnVuY3Rpb24oKXt5ZigxKX0pKTtwZih7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOiFiZnx8bWYsc2hhbTohYmZ9LHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4geWYoZ2YodCksZSl9fSk7dmFyIHdmPXl0Lk9iamVjdCxfZj1kZi5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHdmLmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpfTt3Zi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iuc2hhbSYmKF9mLnNoYW09ITApO3ZhciB4Zj1kZi5leHBvcnRzLGtmPXhmLEVmPW9zLmZpbHRlcjt2cih7dGFyZ2V0OiJBcnJheSIscHJvdG86ITAsZm9yY2VkOiFtYSgiZmlsdGVyIil9LHtmaWx0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIEVmKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIEFmPXNmKCJBcnJheSIpLmZpbHRlcixTZj1BcnJheS5wcm90b3R5cGUsT2Y9ZnVuY3Rpb24odCl7dmFyIGU9dC5maWx0ZXI7cmV0dXJuIHQ9PT1TZnx8dCBpbnN0YW5jZW9mIEFycmF5JiZlPT09U2YuZmlsdGVyP0FmOmV9LFRmPXl0Lk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsQmY9VGYsSWY9UXQsUGY9SW47dnIoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLGZvcmNlZDpLKChmdW5jdGlvbigpe1BmKDEpfSkpfSx7a2V5czpmdW5jdGlvbih0KXtyZXR1cm4gUGYoSWYodCkpfX0pO3ZhciBSZj15dC5PYmplY3Qua2V5cyxNZj1SZixMZj1mYSxqZj1OdCx6Zj1mdW5jdGlvbih0KXtpZihMZih0KSlyZXR1cm4gdDt0aHJvdyBUeXBlRXJyb3IoamYodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciIpfSxDZj1EdCxOZj1ndCxVZj1bXS5zbGljZSxGZj17fSxEZj1mdW5jdGlvbih0LGUscil7aWYoIShlIGluIEZmKSl7Zm9yKHZhciBuPVtdLGk9MDtpPGU7aSsrKW5baV09ImFbIitpKyJdIjtGZltlXT1GdW5jdGlvbigiQyxhIiwicmV0dXJuIG5ldyBDKCIrbi5qb2luKCIsIikrIikiKX1yZXR1cm4gRmZbZV0odCxyKX0scWY9RnVuY3Rpb24uYmluZHx8ZnVuY3Rpb24odCl7dmFyIGU9Q2YodGhpcykscj1VZi5jYWxsKGFyZ3VtZW50cywxKSxuPWZ1bmN0aW9uKCl7dmFyIGk9ci5jb25jYXQoVWYuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4/RGYoZSxpLmxlbmd0aCxpKTplLmFwcGx5KHQsaSl9O3JldHVybiBOZihlLnByb3RvdHlwZSkmJihuLnByb3RvdHlwZT1lLnByb3RvdHlwZSksbn0sJGY9dnIsWmY9emYsSGY9S2UsR2Y9Z3QsV2Y9WG4sVmY9cWYsWWY9SyxYZj14dCgiUmVmbGVjdCIsImNvbnN0cnVjdCIpLEtmPVlmKChmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIShYZigoZnVuY3Rpb24oKXt9KSxbXSx0KWluc3RhbmNlb2YgdCl9KSksSmY9IVlmKChmdW5jdGlvbigpe1hmKChmdW5jdGlvbigpe30pKX0pKSxRZj1LZnx8SmY7JGYoe3RhcmdldDoiUmVmbGVjdCIsc3RhdDohMCxmb3JjZWQ6UWYsc2hhbTpRZn0se2NvbnN0cnVjdDpmdW5jdGlvbih0LGUpe1pmKHQpLEhmKGUpO3ZhciByPWFyZ3VtZW50cy5sZW5ndGg8Mz90OlpmKGFyZ3VtZW50c1syXSk7aWYoSmYmJiFLZilyZXR1cm4gWGYodCxlLHIpO2lmKHQ9PXIpe3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgdDtjYXNlIDE6cmV0dXJuIG5ldyB0KGVbMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IHQoZVswXSxlWzFdKTtjYXNlIDM6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10pfXZhciBuPVtudWxsXTtyZXR1cm4gbi5wdXNoLmFwcGx5KG4sZSksbmV3KFZmLmFwcGx5KHQsbikpfXZhciBpPXIucHJvdG90eXBlLG89V2YoR2YoaSk/aTpPYmplY3QucHJvdG90eXBlKSxhPUZ1bmN0aW9uLmFwcGx5LmNhbGwodCxvLGUpO3JldHVybiBHZihhKT9hOm99fSk7dmFyIHRsPXl0LlJlZmxlY3QuY29uc3RydWN0LGVsPXtleHBvcnRzOnt9fSxybD17ZXhwb3J0czp7fX0sbmw9R287IWZ1bmN0aW9uKHQpe3ZhciBlPW5sO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZihlKHQpKXJldHVybiB0fSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KHJsKTt2YXIgaWw9e2V4cG9ydHM6e319O0thKCJhc3luY0Rpc3Bvc2UiKSxLYSgiZGlzcG9zZSIpLEthKCJtYXRjaGVyIiksS2EoIm1ldGFkYXRhIiksS2EoIm9ic2VydmFibGUiKSxLYSgicGF0dGVybk1hdGNoIiksS2EoInJlcGxhY2VBbGwiKTt2YXIgb2w9dnU7IWZ1bmN0aW9uKHQpe3ZhciBlPW9sLHI9Vm87dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7dmFyIGk9bnVsbD09dD9udWxsOnZvaWQgMCE9PWUmJnIodCl8fHRbIkBAaXRlcmF0b3IiXTtpZihudWxsIT1pKXt2YXIgbyxhLHM9W10sdT0hMCxmPSExO3RyeXtmb3IoaT1pLmNhbGwodCk7ISh1PShvPWkubmV4dCgpKS5kb25lKSYmKHMucHVzaChvLnZhbHVlKSwhbnx8cy5sZW5ndGghPT1uKTt1PSEwKTt9Y2F0Y2gobCl7Zj0hMCxhPWx9ZmluYWxseXt0cnl7dXx8bnVsbD09aS5yZXR1cm58fGkucmV0dXJuKCl9ZmluYWxseXtpZihmKXRocm93IGF9fXJldHVybiBzfX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShpbCk7dmFyIGFsPXtleHBvcnRzOnt9fSxzbD12cix1bD1IbyxmbD1mYSxsbD1ndCxjbD1nbixobD1obixkbD1wdCxwbD1Kbyx2bD12ZSxnbD1tYSgic2xpY2UiKSx5bD12bCgic3BlY2llcyIpLGJsPVtdLnNsaWNlLG1sPU1hdGgubWF4O3NsKHt0YXJnZXQ6IkFycmF5Iixwcm90bzohMCxmb3JjZWQ6IWdsfSx7c2xpY2U6ZnVuY3Rpb24odCxlKXt2YXIgcixuLGksbz1kbCh0aGlzKSxhPWhsKG8ubGVuZ3RoKSxzPWNsKHQsYSksdT1jbCh2b2lkIDA9PT1lP2E6ZSxhKTtpZih1bChvKSYmKHI9by5jb25zdHJ1Y3RvciwoZmwocikmJihyPT09QXJyYXl8fHVsKHIucHJvdG90eXBlKSl8fGxsKHIpJiZudWxsPT09KHI9clt5bF0pKSYmKHI9dm9pZCAwKSxyPT09QXJyYXl8fHZvaWQgMD09PXIpKXJldHVybiBibC5jYWxsKG8scyx1KTtmb3Iobj1uZXcodm9pZCAwPT09cj9BcnJheTpyKShtbCh1LXMsMCkpLGk9MDtzPHU7cysrLGkrKylzIGluIG8mJnBsKG4saSxvW3NdKTtyZXR1cm4gbi5sZW5ndGg9aSxufX0pO3ZhciB3bD1zZigiQXJyYXkiKS5zbGljZSxfbD1BcnJheS5wcm90b3R5cGUseGw9ZnVuY3Rpb24odCl7dmFyIGU9dC5zbGljZTtyZXR1cm4gdD09PV9sfHx0IGluc3RhbmNlb2YgQXJyYXkmJmU9PT1fbC5zbGljZT93bDplfSxrbD14bCxFbD1EdSxBbD17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgcj0wLG49bmV3IEFycmF5KGUpO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KEFsKSxmdW5jdGlvbih0KXt2YXIgZT1rbCxyPUVsLG49QWwuZXhwb3J0czt0LmV4cG9ydHM9ZnVuY3Rpb24odCxpKXt2YXIgbztpZih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIG4odCxpKTt2YXIgYT1lKG89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKS5jYWxsKG8sOCwtMSk7cmV0dXJuIk9iamVjdCI9PT1hJiZ0LmNvbnN0cnVjdG9yJiYoYT10LmNvbnN0cnVjdG9yLm5hbWUpLCJNYXAiPT09YXx8IlNldCI9PT1hP3IodCk6IkFyZ3VtZW50cyI9PT1hfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChhKT9uKHQsaSk6dm9pZCAwfX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShhbCk7dmFyIFNsPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShTbCksZnVuY3Rpb24odCl7dmFyIGU9cmwuZXhwb3J0cyxyPWlsLmV4cG9ydHMsbj1hbC5leHBvcnRzLGk9U2wuZXhwb3J0czt0LmV4cG9ydHM9ZnVuY3Rpb24odCxvKXtyZXR1cm4gZSh0KXx8cih0LG8pfHxuKHQsbyl8fGkoKX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShlbCk7dmFyIE9sPXtleHBvcnRzOnt9fSxUbD1icjshZnVuY3Rpb24odCl7dmFyIGU9VGw7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciBpbiB0P2UodCxyLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtyXT1uLHR9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oT2wpO3ZhciBCbD1vcy5tYXA7dnIoe3RhcmdldDoiQXJyYXkiLHByb3RvOiEwLGZvcmNlZDohbWEoIm1hcCIpfSx7bWFwOmZ1bmN0aW9uKHQpe3JldHVybiBCbCh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBJbD1zZigiQXJyYXkiKS5tYXAsUGw9QXJyYXkucHJvdG90eXBlLFJsPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWFwO3JldHVybiB0PT09UGx8fHQgaW5zdGFuY2VvZiBBcnJheSYmZT09PVBsLm1hcD9JbDplfSxNbD17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlLHI9T2JqZWN0LnByb3RvdHlwZSxuPXIuaGFzT3duUHJvcGVydHksaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxvPWkuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixhPWkuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIscz1pLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gdSh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXt1KHt9LCIiKX1jYXRjaChQKXt1PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBmKHQsZSxyLG4pe3ZhciBpPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgZz9lOmcsbz1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxhPW5ldyBUKG58fFtdKTtyZXR1cm4gby5faW52b2tlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1jO3JldHVybiBmdW5jdGlvbihpLG8pe2lmKG49PT1kKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1wKXtpZigidGhyb3ciPT09aSl0aHJvdyBvO3JldHVybiBJKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9bzs7KXt2YXIgYT1yLmRlbGVnYXRlO2lmKGEpe3ZhciBzPUEoYSxyKTtpZihzKXtpZihzPT09diljb250aW51ZTtyZXR1cm4gc319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT1jKXRocm93IG49cCxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249ZDt2YXIgdT1sKHQsZSxyKTtpZigibm9ybWFsIj09PXUudHlwZSl7aWYobj1yLmRvbmU/cDpoLHUuYXJnPT09diljb250aW51ZTtyZXR1cm57dmFsdWU6dS5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT11LnR5cGUmJihuPXAsci5tZXRob2Q9InRocm93IixyLmFyZz11LmFyZyl9fX0odCxyLGEpLG99ZnVuY3Rpb24gbCh0LGUscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzp0LmNhbGwoZSxyKX19Y2F0Y2goUCl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6UH19fXQud3JhcD1mO3ZhciBjPSJzdXNwZW5kZWRTdGFydCIsaD0ic3VzcGVuZGVkWWllbGQiLGQ9ImV4ZWN1dGluZyIscD0iY29tcGxldGVkIix2PXt9O2Z1bmN0aW9uIGcoKXt9ZnVuY3Rpb24geSgpe31mdW5jdGlvbiBiKCl7fXZhciBtPXt9O3UobSxvLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciB3PU9iamVjdC5nZXRQcm90b3R5cGVPZixfPXcmJncodyhCKFtdKSkpO18mJl8hPT1yJiZuLmNhbGwoXyxvKSYmKG09Xyk7dmFyIHg9Yi5wcm90b3R5cGU9Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShtKTtmdW5jdGlvbiBrKHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dSh0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX0pKX0pKX1mdW5jdGlvbiBFKHQsZSl7ZnVuY3Rpb24gcihpLG8sYSxzKXt2YXIgdT1sKHRbaV0sdCxvKTtpZigidGhyb3ciIT09dS50eXBlKXt2YXIgZj11LmFyZyxjPWYudmFsdWU7cmV0dXJuIGMmJiJvYmplY3QiPT10eXBlb2YgYyYmbi5jYWxsKGMsIl9fYXdhaXQiKT9lLnJlc29sdmUoYy5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtyKCJuZXh0Iix0LGEscyl9KSwoZnVuY3Rpb24odCl7cigidGhyb3ciLHQsYSxzKX0pKTplLnJlc29sdmUoYykudGhlbigoZnVuY3Rpb24odCl7Zi52YWx1ZT10LGEoZil9KSwoZnVuY3Rpb24odCl7cmV0dXJuIHIoInRocm93Iix0LGEscyl9KSl9cyh1LmFyZyl9dmFyIGk7dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gbygpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxpKXtyKHQsbixlLGkpfSkpfXJldHVybiBpPWk/aS50aGVuKG8sbyk6bygpfX1mdW5jdGlvbiBBKHQscil7dmFyIG49dC5pdGVyYXRvcltyLm1ldGhvZF07aWYobj09PWUpe2lmKHIuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09ci5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9ZSxBKHQsciksInRocm93Ij09PXIubWV0aG9kKSlyZXR1cm4gdjtyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKX1yZXR1cm4gdn12YXIgaT1sKG4sdC5pdGVyYXRvcixyLmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gci5tZXRob2Q9InRocm93IixyLmFyZz1pLmFyZyxyLmRlbGVnYXRlPW51bGwsdjt2YXIgbz1pLmFyZztyZXR1cm4gbz9vLmRvbmU/KHJbdC5yZXN1bHROYW1lXT1vLnZhbHVlLHIubmV4dD10Lm5leHRMb2MsInJldHVybiIhPT1yLm1ldGhvZCYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSxyLmRlbGVnYXRlPW51bGwsdik6bzooci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHIuZGVsZWdhdGU9bnVsbCx2KX1mdW5jdGlvbiBTKHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIE8odCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIFQodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaChTLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIEIodCl7aWYodCl7dmFyIHI9dFtvXTtpZihyKXJldHVybiByLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgaT0tMSxhPWZ1bmN0aW9uIHIoKXtmb3IoOysraTx0Lmxlbmd0aDspaWYobi5jYWxsKHQsaSkpcmV0dXJuIHIudmFsdWU9dFtpXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT1lLHIuZG9uZT0hMCxyfTtyZXR1cm4gYS5uZXh0PWF9fXJldHVybntuZXh0Okl9fWZ1bmN0aW9uIEkoKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEwfX1yZXR1cm4geS5wcm90b3R5cGU9Yix1KHgsImNvbnN0cnVjdG9yIixiKSx1KGIsImNvbnN0cnVjdG9yIix5KSx5LmRpc3BsYXlOYW1lPXUoYixzLCJHZW5lcmF0b3JGdW5jdGlvbiIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIWUmJihlPT09eXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PShlLmRpc3BsYXlOYW1lfHxlLm5hbWUpKX0sdC5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsYik6KHQuX19wcm90b19fPWIsdSh0LHMsIkdlbmVyYXRvckZ1bmN0aW9uIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeCksdH0sdC5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0sayhFLnByb3RvdHlwZSksdShFLnByb3RvdHlwZSxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuQXN5bmNJdGVyYXRvcj1FLHQuYXN5bmM9ZnVuY3Rpb24oZSxyLG4saSxvKXt2b2lkIDA9PT1vJiYobz1Qcm9taXNlKTt2YXIgYT1uZXcgRShmKGUscixuLGkpLG8pO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24ocik/YTphLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6YS5uZXh0KCl9KSl9LGsoeCksdSh4LHMsIkdlbmVyYXRvciIpLHUoeCxvLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHUoeCwidG9TdHJpbmciLChmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSkpLHQua2V5cz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdCllLnB1c2gocik7cmV0dXJuIGUucmV2ZXJzZSgpLGZ1bmN0aW9uIHIoKXtmb3IoO2UubGVuZ3RoOyl7dmFyIG49ZS5wb3AoKTtpZihuIGluIHQpcmV0dXJuIHIudmFsdWU9bixyLmRvbmU9ITEscn1yZXR1cm4gci5kb25lPSEwLHJ9fSx0LnZhbHVlcz1CLFQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpULHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PWUsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9ZSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChPKSwhdClmb3IodmFyIHIgaW4gdGhpcykidCI9PT1yLmNoYXJBdCgwKSYmbi5jYWxsKHRoaXMscikmJiFpc05hTigrci5zbGljZSgxKSkmJih0aGlzW3JdPWUpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7aWYodGhpcy5kb25lKXRocm93IHQ7dmFyIHI9dGhpcztmdW5jdGlvbiBpKG4saSl7cmV0dXJuIHMudHlwZT0idGhyb3ciLHMuYXJnPXQsci5uZXh0PW4saSYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSwhIWl9Zm9yKHZhciBvPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtvPj0wOy0tbyl7dmFyIGE9dGhpcy50cnlFbnRyaWVzW29dLHM9YS5jb21wbGV0aW9uO2lmKCJyb290Ij09PWEudHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihhLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgdT1uLmNhbGwoYSwiY2F0Y2hMb2MiKSxmPW4uY2FsbChhLCJmaW5hbGx5TG9jIik7aWYodSYmZil7aWYodGhpcy5wcmV2PGEuY2F0Y2hMb2MpcmV0dXJuIGkoYS5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PGEuZmluYWxseUxvYylyZXR1cm4gaShhLmZpbmFsbHlMb2MpfWVsc2UgaWYodSl7aWYodGhpcy5wcmV2PGEuY2F0Y2hMb2MpcmV0dXJuIGkoYS5jYXRjaExvYywhMCl9ZWxzZXtpZighZil0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PGEuZmluYWxseUxvYylyZXR1cm4gaShhLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbcl07aWYoaS50cnlMb2M8PXRoaXMucHJldiYmbi5jYWxsKGksImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PGkuZmluYWxseUxvYyl7dmFyIG89aTticmVha319byYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJm8udHJ5TG9jPD1lJiZlPD1vLmZpbmFsbHlMb2MmJihvPW51bGwpO3ZhciBhPW8/by5jb21wbGV0aW9uOnt9O3JldHVybiBhLnR5cGU9dCxhLmFyZz1lLG8/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9by5maW5hbGx5TG9jLHYpOnRoaXMuY29tcGxldGUoYSl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSksdn0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxPKHIpLHZ9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIGk9bi5hcmc7TyhyKX1yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LHIsbil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOkIodCkscmVzdWx0TmFtZTpyLG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1lKSx2fX0sdH0odC5leHBvcnRzKTt0cnl7cmVnZW5lcmF0b3JSdW50aW1lPWV9Y2F0Y2gocil7Im9iamVjdCI9PXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPWU6RnVuY3Rpb24oInIiLCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByIikoZSl9fShNbCk7dmFyIExsPU1sLmV4cG9ydHMsamw9e2V4cG9ydHM6e319LHpsPUtlLENsPUF1LE5sPWhuLFVsPVZlLEZsPVJvLERsPVRvLHFsPW11LCRsPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdG9wcGVkPXQsdGhpcy5yZXN1bHQ9ZX0sWmw9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGksbyxhLHMsdSxmLGw9ciYmci50aGF0LGM9ISghcnx8IXIuQVNfRU5UUklFUyksaD0hKCFyfHwhci5JU19JVEVSQVRPUiksZD0hKCFyfHwhci5JTlRFUlJVUFRFRCkscD1VbChlLGwsMStjK2QpLHY9ZnVuY3Rpb24odCl7cmV0dXJuIG4mJnFsKG4sIm5vcm1hbCIsdCksbmV3ICRsKCEwLHQpfSxnPWZ1bmN0aW9uKHQpe3JldHVybiBjPyh6bCh0KSxkP3AodFswXSx0WzFdLHYpOnAodFswXSx0WzFdKSk6ZD9wKHQsdik6cCh0KX07aWYoaCluPXQ7ZWxzZXtpZighKGk9RGwodCkpKXRocm93IFR5cGVFcnJvcihTdHJpbmcodCkrIiBpcyBub3QgaXRlcmFibGUiKTtpZihDbChpKSl7Zm9yKG89MCxhPU5sKHQubGVuZ3RoKTthPm87bysrKWlmKChzPWcodFtvXSkpJiZzIGluc3RhbmNlb2YgJGwpcmV0dXJuIHM7cmV0dXJuIG5ldyAkbCghMSl9bj1GbCh0LGkpfWZvcih1PW4ubmV4dDshKGY9dS5jYWxsKG4pKS5kb25lOyl7dHJ5e3M9ZyhmLnZhbHVlKX1jYXRjaCh3RSl7cWwobiwidGhyb3ciLHdFKX1pZigib2JqZWN0Ij09dHlwZW9mIHMmJnMmJnMgaW5zdGFuY2VvZiAkbClyZXR1cm4gc31yZXR1cm4gbmV3ICRsKCExKX0sSGw9dnIsR2w9aWksV2w9cWksVmw9WG4sWWw9b3IsWGw9b3QsS2w9WmwsSmw9Y28sUWw9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO2lmKCEociBpbnN0YW5jZW9mIFFsKSlyZXR1cm4gbmV3IFFsKHQsZSk7V2wmJihyPVdsKG5ldyBFcnJvcih2b2lkIDApLEdsKHIpKSksdm9pZCAwIT09ZSYmWWwociwibWVzc2FnZSIsSmwoZSkpO3ZhciBuPVtdO3JldHVybiBLbCh0LG4ucHVzaCx7dGhhdDpufSksWWwociwiZXJyb3JzIixuKSxyfTtRbC5wcm90b3R5cGU9VmwoRXJyb3IucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpYbCg1LFFsKSxtZXNzYWdlOlhsKDUsIiIpLG5hbWU6WGwoNSwiQWdncmVnYXRlRXJyb3IiKX0pLEhsKHtnbG9iYWw6ITB9LHtBZ2dyZWdhdGVFcnJvcjpRbH0pO3ZhciB0YyxlYyxyYyxuYyxpYz1WLlByb21pc2Usb2M9YWksYWM9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbiBpbiBlKXImJnIudW5zYWZlJiZ0W25dP3Rbbl09ZVtuXTpvYyh0LG4sZVtuXSxyKTtyZXR1cm4gdH0sc2M9eHQsdWM9WWUsZmM9SixsYz12ZSgic3BlY2llcyIpLGNjPWZ1bmN0aW9uKHQsZSxyKXtpZih0IGluc3RhbmNlb2YgZSlyZXR1cm4gdDt0aHJvdyBUeXBlRXJyb3IoIkluY29ycmVjdCAiKyhyP3IrIiAiOiIiKSsiaW52b2NhdGlvbiIpfSxoYz1LZSxkYz16ZixwYz12ZSgic3BlY2llcyIpLHZjPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbj1oYyh0KS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09bnx8bnVsbD09KHI9aGMobilbcGNdKT9lOmRjKHIpfSxnYz0vKD86aXBhZHxpcGhvbmV8aXBvZCkuKmFwcGxld2Via2l0L2kudGVzdChrdCkseWM9InByb2Nlc3MiPT1zdChWLnByb2Nlc3MpLGJjPVYsbWM9WSx3Yz1LLF9jPVZlLHhjPWpuLGtjPU9lLEVjPWdjLEFjPXljLFNjPWJjLnNldEltbWVkaWF0ZSxPYz1iYy5jbGVhckltbWVkaWF0ZSxUYz1iYy5wcm9jZXNzLEJjPWJjLk1lc3NhZ2VDaGFubmVsLEljPWJjLkRpc3BhdGNoLFBjPTAsUmM9e30sTWM9Im9ucmVhZHlzdGF0ZWNoYW5nZSI7dHJ5e3RjPWJjLmxvY2F0aW9ufWNhdGNoKHdFKXt9dmFyIExjPWZ1bmN0aW9uKHQpe2lmKFJjLmhhc093blByb3BlcnR5KHQpKXt2YXIgZT1SY1t0XTtkZWxldGUgUmNbdF0sZSgpfX0samM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7TGModCl9fSx6Yz1mdW5jdGlvbih0KXtMYyh0LmRhdGEpfSxDYz1mdW5jdGlvbih0KXtiYy5wb3N0TWVzc2FnZShTdHJpbmcodCksdGMucHJvdG9jb2wrIi8vIit0Yy5ob3N0KX07U2MmJk9jfHwoU2M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLHI9YXJndW1lbnRzLmxlbmd0aCxuPTE7cj5uOyllLnB1c2goYXJndW1lbnRzW24rK10pO3JldHVybiBSY1srK1BjXT1mdW5jdGlvbigpeyhtYyh0KT90OkZ1bmN0aW9uKHQpKS5hcHBseSh2b2lkIDAsZSl9LGVjKFBjKSxQY30sT2M9ZnVuY3Rpb24odCl7ZGVsZXRlIFJjW3RdfSxBYz9lYz1mdW5jdGlvbih0KXtUYy5uZXh0VGljayhqYyh0KSl9OkljJiZJYy5ub3c/ZWM9ZnVuY3Rpb24odCl7SWMubm93KGpjKHQpKX06QmMmJiFFYz8obmM9KHJjPW5ldyBCYykucG9ydDIscmMucG9ydDEub25tZXNzYWdlPXpjLGVjPV9jKG5jLnBvc3RNZXNzYWdlLG5jLDEpKTpiYy5hZGRFdmVudExpc3RlbmVyJiZtYyhiYy5wb3N0TWVzc2FnZSkmJiFiYy5pbXBvcnRTY3JpcHRzJiZ0YyYmImZpbGU6IiE9PXRjLnByb3RvY29sJiYhd2MoQ2MpPyhlYz1DYyxiYy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix6YywhMSkpOmVjPU1jIGluIGtjKCJzY3JpcHQiKT9mdW5jdGlvbih0KXt4Yy5hcHBlbmRDaGlsZChrYygic2NyaXB0IikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3hjLnJlbW92ZUNoaWxkKHRoaXMpLExjKHQpfX06ZnVuY3Rpb24odCl7c2V0VGltZW91dChqYyh0KSwwKX0pO3ZhciBOYyxVYyxGYyxEYyxxYywkYyxaYyxIYyxHYz17c2V0OlNjLGNsZWFyOk9jfSxXYz1WLFZjPS9pcGFkfGlwaG9uZXxpcG9kL2kudGVzdChrdCkmJnZvaWQgMCE9PVdjLlBlYmJsZSxZYz0vd2ViMHMoPyEuKmNocm9tZSkvaS50ZXN0KGt0KSxYYz1WLEtjPVguZixKYz1HYy5zZXQsUWM9Z2MsdGg9VmMsZWg9WWMscmg9eWMsbmg9WGMuTXV0YXRpb25PYnNlcnZlcnx8WGMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixpaD1YYy5kb2N1bWVudCxvaD1YYy5wcm9jZXNzLGFoPVhjLlByb21pc2Usc2g9S2MoWGMsInF1ZXVlTWljcm90YXNrIiksdWg9c2gmJnNoLnZhbHVlO3VofHwoTmM9ZnVuY3Rpb24oKXt2YXIgdCxlO2ZvcihyaCYmKHQ9b2guZG9tYWluKSYmdC5leGl0KCk7VWM7KXtlPVVjLmZuLFVjPVVjLm5leHQ7dHJ5e2UoKX1jYXRjaCh3RSl7dGhyb3cgVWM/RGMoKTpGYz12b2lkIDAsd0V9fUZjPXZvaWQgMCx0JiZ0LmVudGVyKCl9LFFjfHxyaHx8ZWh8fCFuaHx8IWloPyF0aCYmYWgmJmFoLnJlc29sdmU/KChaYz1haC5yZXNvbHZlKHZvaWQgMCkpLmNvbnN0cnVjdG9yPWFoLEhjPVpjLnRoZW4sRGM9ZnVuY3Rpb24oKXtIYy5jYWxsKFpjLE5jKX0pOkRjPXJoP2Z1bmN0aW9uKCl7b2gubmV4dFRpY2soTmMpfTpmdW5jdGlvbigpe0pjLmNhbGwoWGMsTmMpfToocWM9ITAsJGM9aWguY3JlYXRlVGV4dE5vZGUoIiIpLG5ldyBuaChOYykub2JzZXJ2ZSgkYyx7Y2hhcmFjdGVyRGF0YTohMH0pLERjPWZ1bmN0aW9uKCl7JGMuZGF0YT1xYz0hcWN9KSk7dmFyIGZoPXVofHxmdW5jdGlvbih0KXt2YXIgZT17Zm46dCxuZXh0OnZvaWQgMH07RmMmJihGYy5uZXh0PWUpLFVjfHwoVWM9ZSxEYygpKSxGYz1lfSxsaD17fSxjaD1EdCxoaD1mdW5jdGlvbih0KXt2YXIgZSxyO3RoaXMucHJvbWlzZT1uZXcgdCgoZnVuY3Rpb24odCxuKXtpZih2b2lkIDAhPT1lfHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTtlPXQscj1ufSkpLHRoaXMucmVzb2x2ZT1jaChlKSx0aGlzLnJlamVjdD1jaChyKX07bGguZj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGhoKHQpfTt2YXIgZGgscGgsdmgsZ2g9S2UseWg9Z3QsYmg9bGgsbWg9ZnVuY3Rpb24odCxlKXtpZihnaCh0KSx5aChlKSYmZS5jb25zdHJ1Y3Rvcj09PXQpcmV0dXJuIGU7dmFyIHI9YmguZih0KTtyZXR1cm4oMCxyLnJlc29sdmUpKGUpLHIucHJvbWlzZX0sd2g9VixfaD1mdW5jdGlvbih0KXt0cnl7cmV0dXJue2Vycm9yOiExLHZhbHVlOnQoKX19Y2F0Y2god0Upe3JldHVybntlcnJvcjohMCx2YWx1ZTp3RX19fSx4aD0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyxraD12cixFaD1WLEFoPXh0LFNoPWljLE9oPWFjLFRoPVJpLEJoPWZ1bmN0aW9uKHQpe3ZhciBlPXNjKHQpLHI9dWMuZjtmYyYmZSYmIWVbbGNdJiZyKGUsbGMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX0sSWg9RHQsUGg9WSxSaD1ndCxNaD1jYyxMaD1UcixqaD1abCx6aD1VdSxDaD12YyxOaD1HYy5zZXQsVWg9ZmgsRmg9bWgsRGg9ZnVuY3Rpb24odCxlKXt2YXIgcj13aC5jb25zb2xlO3ImJnIuZXJyb3ImJigxPT09YXJndW1lbnRzLmxlbmd0aD9yLmVycm9yKHQpOnIuZXJyb3IodCxlKSl9LHFoPWxoLCRoPV9oLFpoPVFyLEhoPUdlLEdoPXhoLFdoPXljLFZoPUl0LFloPXZlKCJzcGVjaWVzIiksWGg9IlByb21pc2UiLEtoPVpoLmdldCxKaD1aaC5zZXQsUWg9WmguZ2V0dGVyRm9yKFhoKSx0ZD1TaCYmU2gucHJvdG90eXBlLGVkPVNoLHJkPXRkLG5kPUVoLlR5cGVFcnJvcixpZD1FaC5kb2N1bWVudCxvZD1FaC5wcm9jZXNzLGFkPXFoLmYsc2Q9YWQsdWQ9ISEoaWQmJmlkLmNyZWF0ZUV2ZW50JiZFaC5kaXNwYXRjaEV2ZW50KSxmZD1QaChFaC5Qcm9taXNlUmVqZWN0aW9uRXZlbnQpLGxkPSJ1bmhhbmRsZWRyZWplY3Rpb24iLGNkPUhoKFhoLChmdW5jdGlvbigpe3ZhciB0PUxoKGVkKSxlPXQhPT1TdHJpbmcoZWQpO2lmKCFlJiY2Nj09PVZoKXJldHVybiEwO2lmKCFyZC5maW5hbGx5KXJldHVybiEwO2lmKFZoPj01MSYmL25hdGl2ZSBjb2RlLy50ZXN0KHQpKXJldHVybiExO3ZhciByPW5ldyBlZCgoZnVuY3Rpb24odCl7dCgxKX0pKSxuPWZ1bmN0aW9uKHQpe3QoKGZ1bmN0aW9uKCl7fSksKGZ1bmN0aW9uKCl7fSkpfTtyZXR1cm4oci5jb25zdHJ1Y3Rvcj17fSlbWWhdPW4sIShyLnRoZW4oKGZ1bmN0aW9uKCl7fSkpaW5zdGFuY2VvZiBuKXx8IWUmJkdoJiYhZmR9KSksaGQ9Y2R8fCF6aCgoZnVuY3Rpb24odCl7ZWQuYWxsKHQpLmNhdGNoKChmdW5jdGlvbigpe30pKX0pKSxkZD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4hKCFSaCh0KXx8IVBoKGU9dC50aGVuKSkmJmV9LHBkPWZ1bmN0aW9uKHQsZSl7aWYoIXQubm90aWZpZWQpe3Qubm90aWZpZWQ9ITA7dmFyIHI9dC5yZWFjdGlvbnM7VWgoKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPXQudmFsdWUsaT0xPT10LnN0YXRlLG89MDtyLmxlbmd0aD5vOyl7dmFyIGEscyx1LGY9cltvKytdLGw9aT9mLm9rOmYuZmFpbCxjPWYucmVzb2x2ZSxoPWYucmVqZWN0LGQ9Zi5kb21haW47dHJ5e2w/KGl8fCgyPT09dC5yZWplY3Rpb24mJmJkKHQpLHQucmVqZWN0aW9uPTEpLCEwPT09bD9hPW46KGQmJmQuZW50ZXIoKSxhPWwobiksZCYmKGQuZXhpdCgpLHU9ITApKSxhPT09Zi5wcm9taXNlP2gobmQoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KHM9ZGQoYSkpP3MuY2FsbChhLGMsaCk6YyhhKSk6aChuKX1jYXRjaCh3RSl7ZCYmIXUmJmQuZXhpdCgpLGgod0UpfX10LnJlYWN0aW9ucz1bXSx0Lm5vdGlmaWVkPSExLGUmJiF0LnJlamVjdGlvbiYmZ2QodCl9KSl9fSx2ZD1mdW5jdGlvbih0LGUscil7dmFyIG4saTt1ZD8oKG49aWQuY3JlYXRlRXZlbnQoIkV2ZW50IikpLnByb21pc2U9ZSxuLnJlYXNvbj1yLG4uaW5pdEV2ZW50KHQsITEsITApLEVoLmRpc3BhdGNoRXZlbnQobikpOm49e3Byb21pc2U6ZSxyZWFzb246cn0sIWZkJiYoaT1FaFsib24iK3RdKT9pKG4pOnQ9PT1sZCYmRGgoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIscil9LGdkPWZ1bmN0aW9uKHQpe05oLmNhbGwoRWgsKGZ1bmN0aW9uKCl7dmFyIGUscj10LmZhY2FkZSxuPXQudmFsdWU7aWYoeWQodCkmJihlPSRoKChmdW5jdGlvbigpe1doP29kLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixyKTp2ZChsZCxyLG4pfSkpLHQucmVqZWN0aW9uPVdofHx5ZCh0KT8yOjEsZS5lcnJvcikpdGhyb3cgZS52YWx1ZX0pKX0seWQ9ZnVuY3Rpb24odCl7cmV0dXJuIDEhPT10LnJlamVjdGlvbiYmIXQucGFyZW50fSxiZD1mdW5jdGlvbih0KXtOaC5jYWxsKEVoLChmdW5jdGlvbigpe3ZhciBlPXQuZmFjYWRlO1doP29kLmVtaXQoInJlamVjdGlvbkhhbmRsZWQiLGUpOnZkKCJyZWplY3Rpb25oYW5kbGVkIixlLHQudmFsdWUpfSkpfSxtZD1mdW5jdGlvbih0LGUscil7cmV0dXJuIGZ1bmN0aW9uKG4pe3QoZSxuLHIpfX0sd2Q9ZnVuY3Rpb24odCxlLHIpe3QuZG9uZXx8KHQuZG9uZT0hMCxyJiYodD1yKSx0LnZhbHVlPWUsdC5zdGF0ZT0yLHBkKHQsITApKX0sX2Q9ZnVuY3Rpb24odCxlLHIpe2lmKCF0LmRvbmUpe3QuZG9uZT0hMCxyJiYodD1yKTt0cnl7aWYodC5mYWNhZGU9PT1lKXRocm93IG5kKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpO3ZhciBuPWRkKGUpO24/VWgoKGZ1bmN0aW9uKCl7dmFyIHI9e2RvbmU6ITF9O3RyeXtuLmNhbGwoZSxtZChfZCxyLHQpLG1kKHdkLHIsdCkpfWNhdGNoKHdFKXt3ZChyLHdFLHQpfX0pKToodC52YWx1ZT1lLHQuc3RhdGU9MSxwZCh0LCExKSl9Y2F0Y2god0Upe3dkKHtkb25lOiExfSx3RSx0KX19fTtjZCYmKHJkPShlZD1mdW5jdGlvbih0KXtNaCh0aGlzLGVkLFhoKSxJaCh0KSxkaC5jYWxsKHRoaXMpO3ZhciBlPUtoKHRoaXMpO3RyeXt0KG1kKF9kLGUpLG1kKHdkLGUpKX1jYXRjaCh3RSl7d2QoZSx3RSl9fSkucHJvdG90eXBlLChkaD1mdW5jdGlvbih0KXtKaCh0aGlzLHt0eXBlOlhoLGRvbmU6ITEsbm90aWZpZWQ6ITEscGFyZW50OiExLHJlYWN0aW9uczpbXSxyZWplY3Rpb246ITEsc3RhdGU6MCx2YWx1ZTp2b2lkIDB9KX0pLnByb3RvdHlwZT1PaChyZCx7dGhlbjpmdW5jdGlvbih0LGUpe3ZhciByPVFoKHRoaXMpLG49YWQoQ2godGhpcyxlZCkpO3JldHVybiBuLm9rPSFQaCh0KXx8dCxuLmZhaWw9UGgoZSkmJmUsbi5kb21haW49V2g/b2QuZG9tYWluOnZvaWQgMCxyLnBhcmVudD0hMCxyLnJlYWN0aW9ucy5wdXNoKG4pLDAhPXIuc3RhdGUmJnBkKHIsITEpLG4ucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsdCl9fSkscGg9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZGgsZT1LaCh0KTt0aGlzLnByb21pc2U9dCx0aGlzLnJlc29sdmU9bWQoX2QsZSksdGhpcy5yZWplY3Q9bWQod2QsZSl9LHFoLmY9YWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lZHx8dD09PXZoP25ldyBwaCh0KTpzZCh0KX0pLGtoKHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6Y2R9LHtQcm9taXNlOmVkfSksVGgoZWQsWGgsITEsITApLEJoKFhoKSx2aD1BaChYaCksa2goe3RhcmdldDpYaCxzdGF0OiEwLGZvcmNlZDpjZH0se3JlamVjdDpmdW5jdGlvbih0KXt2YXIgZT1hZCh0aGlzKTtyZXR1cm4gZS5yZWplY3QuY2FsbCh2b2lkIDAsdCksZS5wcm9taXNlfX0pLGtoKHt0YXJnZXQ6WGgsc3RhdDohMCxmb3JjZWQ6dHJ1ZX0se3Jlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIEZoKHRoaXM9PT12aD9lZDp0aGlzLHQpfX0pLGtoKHt0YXJnZXQ6WGgsc3RhdDohMCxmb3JjZWQ6aGR9LHthbGw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxyPWFkKGUpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qsbz0kaCgoZnVuY3Rpb24oKXt2YXIgcj1JaChlLnJlc29sdmUpLG89W10sYT0wLHM9MTtqaCh0LChmdW5jdGlvbih0KXt2YXIgdT1hKyssZj0hMTtvLnB1c2godm9pZCAwKSxzKyssci5jYWxsKGUsdCkudGhlbigoZnVuY3Rpb24odCl7Znx8KGY9ITAsb1t1XT10LC0tc3x8bihvKSl9KSxpKX0pKSwtLXN8fG4obyl9KSk7cmV0dXJuIG8uZXJyb3ImJmkoby52YWx1ZSksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj1hZChlKSxuPXIucmVqZWN0LGk9JGgoKGZ1bmN0aW9uKCl7dmFyIGk9SWgoZS5yZXNvbHZlKTtqaCh0LChmdW5jdGlvbih0KXtpLmNhbGwoZSx0KS50aGVuKHIucmVzb2x2ZSxuKX0pKX0pKTtyZXR1cm4gaS5lcnJvciYmbihpLnZhbHVlKSxyLnByb21pc2V9fSk7dmFyIHhkPUR0LGtkPWxoLEVkPV9oLEFkPVpsO3ZyKHt0YXJnZXQ6IlByb21pc2UiLHN0YXQ6ITB9LHthbGxTZXR0bGVkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj1rZC5mKGUpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qsbz1FZCgoZnVuY3Rpb24oKXt2YXIgcj14ZChlLnJlc29sdmUpLGk9W10sbz0wLGE9MTtBZCh0LChmdW5jdGlvbih0KXt2YXIgcz1vKyssdT0hMTtpLnB1c2godm9pZCAwKSxhKyssci5jYWxsKGUsdCkudGhlbigoZnVuY3Rpb24odCl7dXx8KHU9ITAsaVtzXT17c3RhdHVzOiJmdWxmaWxsZWQiLHZhbHVlOnR9LC0tYXx8bihpKSl9KSwoZnVuY3Rpb24odCl7dXx8KHU9ITAsaVtzXT17c3RhdHVzOiJyZWplY3RlZCIscmVhc29uOnR9LC0tYXx8bihpKSl9KSl9KSksLS1hfHxuKGkpfSkpO3JldHVybiBvLmVycm9yJiZpKG8udmFsdWUpLHIucHJvbWlzZX19KTt2YXIgU2Q9RHQsT2Q9eHQsVGQ9bGgsQmQ9X2gsSWQ9WmwsUGQ9Ik5vIG9uZSBwcm9taXNlIHJlc29sdmVkIjt2cih7dGFyZ2V0OiJQcm9taXNlIixzdGF0OiEwfSx7YW55OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj1UZC5mKGUpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qsbz1CZCgoZnVuY3Rpb24oKXt2YXIgcj1TZChlLnJlc29sdmUpLG89W10sYT0wLHM9MSx1PSExO0lkKHQsKGZ1bmN0aW9uKHQpe3ZhciBmPWErKyxsPSExO28ucHVzaCh2b2lkIDApLHMrKyxyLmNhbGwoZSx0KS50aGVuKChmdW5jdGlvbih0KXtsfHx1fHwodT0hMCxuKHQpKX0pLChmdW5jdGlvbih0KXtsfHx1fHwobD0hMCxvW2ZdPXQsLS1zfHxpKG5ldyhPZCgiQWdncmVnYXRlRXJyb3IiKSkobyxQZCkpKX0pKX0pKSwtLXN8fGkobmV3KE9kKCJBZ2dyZWdhdGVFcnJvciIpKShvLFBkKSl9KSk7cmV0dXJuIG8uZXJyb3ImJmkoby52YWx1ZSksci5wcm9taXNlfX0pO3ZhciBSZD1pYyxNZD14dCxMZD1ZLGpkPXZjLHpkPW1oO3ZyKHt0YXJnZXQ6IlByb21pc2UiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOiEhUmQmJksoKGZ1bmN0aW9uKCl7UmQucHJvdG90eXBlLmZpbmFsbHkuY2FsbCh7dGhlbjpmdW5jdGlvbigpe319LChmdW5jdGlvbigpe30pKX0pKX0se2ZpbmFsbHk6ZnVuY3Rpb24odCl7dmFyIGU9amQodGhpcyxNZCgiUHJvbWlzZSIpKSxyPUxkKHQpO3JldHVybiB0aGlzLnRoZW4ocj9mdW5jdGlvbihyKXtyZXR1cm4gemQoZSx0KCkpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSl9OnQscj9mdW5jdGlvbihyKXtyZXR1cm4gemQoZSx0KCkpLnRoZW4oKGZ1bmN0aW9uKCl7dGhyb3cgcn0pKX06dCl9fSk7dmFyIENkPXl0LlByb21pc2UsTmQ9bGgsVWQ9X2g7dnIoe3RhcmdldDoiUHJvbWlzZSIsc3RhdDohMH0se3RyeTpmdW5jdGlvbih0KXt2YXIgZT1OZC5mKHRoaXMpLHI9VWQodCk7cmV0dXJuKHIuZXJyb3I/ZS5yZWplY3Q6ZS5yZXNvbHZlKShyLnZhbHVlKSxlLnByb21pc2V9fSk7dmFyIEZkPUNkOyFmdW5jdGlvbih0KXt2YXIgZT1GZDtmdW5jdGlvbiByKHQscixuLGksbyxhLHMpe3RyeXt2YXIgdT10W2FdKHMpLGY9dS52YWx1ZX1jYXRjaCh3RSl7cmV0dXJuIHZvaWQgbih3RSl9dS5kb25lP3IoZik6ZS5yZXNvbHZlKGYpLnRoZW4oaSxvKX10LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IGUoKGZ1bmN0aW9uKGUsbyl7dmFyIGE9dC5hcHBseShuLGkpO2Z1bmN0aW9uIHModCl7cihhLGUsbyxzLHUsIm5leHQiLHQpfWZ1bmN0aW9uIHUodCl7cihhLGUsbyxzLHUsInRocm93Iix0KX1zKHZvaWQgMCl9KSl9fSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KGpsKTt2YXIgRGQ9eGwscWQ9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShxZCk7dmFyICRkPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dmFyIGU9VGw7ZnVuY3Rpb24gcih0LHIpe2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKXt2YXIgaT1yW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBpJiYoaS53cml0YWJsZT0hMCksZSh0LGkua2V5LGkpfX10LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlJiZyKHQucHJvdG90eXBlLGUpLG4mJnIodCxuKSx0fSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KCRkKTt2YXIgWmQ9e2V4cG9ydHM6e319O3ZyKHt0YXJnZXQ6Ik9iamVjdCIsc3RhdDohMCxzaGFtOiFKfSx7Y3JlYXRlOlhufSk7dmFyIEhkPXl0Lk9iamVjdCxHZD1mdW5jdGlvbih0LGUpe3JldHVybiBIZC5jcmVhdGUodCxlKX0sV2Q9e2V4cG9ydHM6e319O3ZyKHt0YXJnZXQ6Ik9iamVjdCIsc3RhdDohMH0se3NldFByb3RvdHlwZU9mOnFpfSk7dmFyIFZkPXl0Lk9iamVjdC5zZXRQcm90b3R5cGVPZjshZnVuY3Rpb24odCl7dmFyIGU9VmQ7ZnVuY3Rpb24gcihuLGkpe3JldHVybiB0LmV4cG9ydHM9cj1lfHxmdW5jdGlvbih0LGUpe3JldHVybiB0Ll9fcHJvdG9fXz1lLHR9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMCxyKG4saSl9dC5leHBvcnRzPXIsdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShXZCksZnVuY3Rpb24odCl7dmFyIGU9R2Qscj1XZC5leHBvcnRzO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBuJiZudWxsIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO3QucHJvdG90eXBlPWUobiYmbi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxuJiZyKHQsbil9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oWmQpO3ZhciBZZD17ZXhwb3J0czp7fX0sWGQ9e2V4cG9ydHM6e319LEtkPUhhLmYoIml0ZXJhdG9yIik7IWZ1bmN0aW9uKHQpe3ZhciBlPW9sLHI9S2Q7ZnVuY3Rpb24gbihpKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmInN5bWJvbCI9PXR5cGVvZiByPyh0LmV4cG9ydHM9bj1mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMCk6KHQuZXhwb3J0cz1uPWZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgZSYmdC5jb25zdHJ1Y3Rvcj09PWUmJnQhPT1lLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwKSxuKGkpfXQuZXhwb3J0cz1uLHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oWGQpO3ZhciBKZD17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIHR9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oSmQpLGZ1bmN0aW9uKHQpe3ZhciBlPVhkLmV4cG9ydHMuZGVmYXVsdCxyPUpkLmV4cG9ydHM7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7aWYobiYmKCJvYmplY3QiPT09ZShuKXx8ImZ1bmN0aW9uIj09dHlwZW9mIG4pKXJldHVybiBuO2lmKHZvaWQgMCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTtyZXR1cm4gcih0KX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShZZCk7dmFyIFFkPXtleHBvcnRzOnt9fSx0cD1RdCxlcD1paSxycD1Lbjt2cih7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOksoKGZ1bmN0aW9uKCl7ZXAoMSl9KSksc2hhbTohcnB9LHtnZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gZXAodHAodCkpfX0pO3ZhciBucD15dC5PYmplY3QuZ2V0UHJvdG90eXBlT2Y7IWZ1bmN0aW9uKHQpe3ZhciBlPVZkLHI9bnA7ZnVuY3Rpb24gbihpKXtyZXR1cm4gdC5leHBvcnRzPW49ZT9yOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8cih0KX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwLG4oaSl9dC5leHBvcnRzPW4sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShRZCk7dmFyIGlwPWFwLG9wPW51bGw7dHJ5e29wPW5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShuZXcgV2ViQXNzZW1ibHkuTW9kdWxlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDEzLDIsOTYsMCwxLDEyNyw5Niw0LDEyNywxMjcsMTI3LDEyNywxLDEyNywzLDcsNiwwLDEsMSwxLDEsMSw2LDYsMSwxMjcsMSw2NSwwLDExLDcsNTAsNiwzLDEwOSwxMTcsMTA4LDAsMSw1LDEwMCwxMDUsMTE4LDk1LDExNSwwLDIsNSwxMDAsMTA1LDExOCw5NSwxMTcsMCwzLDUsMTE0LDEwMSwxMDksOTUsMTE1LDAsNCw1LDExNCwxMDEsMTA5LDk1LDExNywwLDUsOCwxMDMsMTAxLDExNiw5NSwxMDQsMTA1LDEwMywxMDQsMCwwLDEwLDE5MSwxLDYsNCwwLDM1LDAsMTEsMzYsMSwxLDEyNiwzMiwwLDE3MywzMiwxLDE3Myw2NiwzMiwxMzQsMTMyLDMyLDIsMTczLDMyLDMsMTczLDY2LDMyLDEzNCwxMzIsMTI2LDM0LDQsNjYsMzIsMTM1LDE2NywzNiwwLDMyLDQsMTY3LDExLDM2LDEsMSwxMjYsMzIsMCwxNzMsMzIsMSwxNzMsNjYsMzIsMTM0LDEzMiwzMiwyLDE3MywzMiwzLDE3Myw2NiwzMiwxMzQsMTMyLDEyNywzNCw0LDY2LDMyLDEzNSwxNjcsMzYsMCwzMiw0LDE2NywxMSwzNiwxLDEsMTI2LDMyLDAsMTczLDMyLDEsMTczLDY2LDMyLDEzNCwxMzIsMzIsMiwxNzMsMzIsMywxNzMsNjYsMzIsMTM0LDEzMiwxMjgsMzQsNCw2NiwzMiwxMzUsMTY3LDM2LDAsMzIsNCwxNjcsMTEsMzYsMSwxLDEyNiwzMiwwLDE3MywzMiwxLDE3Myw2NiwzMiwxMzQsMTMyLDMyLDIsMTczLDMyLDMsMTczLDY2LDMyLDEzNCwxMzIsMTI5LDM0LDQsNjYsMzIsMTM1LDE2NywzNiwwLDMyLDQsMTY3LDExLDM2LDEsMSwxMjYsMzIsMCwxNzMsMzIsMSwxNzMsNjYsMzIsMTM0LDEzMiwzMiwyLDE3MywzMiwzLDE3Myw2NiwzMiwxMzQsMTMyLDEzMCwzNCw0LDY2LDMyLDEzNSwxNjcsMzYsMCwzMiw0LDE2NywxMV0pKSx7fSkuZXhwb3J0c31jYXRjaChfRSl7fWZ1bmN0aW9uIGFwKHQsZSxyKXt0aGlzLmxvdz0wfHQsdGhpcy5oaWdoPTB8ZSx0aGlzLnVuc2lnbmVkPSEhcn1mdW5jdGlvbiBzcCh0KXtyZXR1cm4hMD09PSh0JiZ0Ll9faXNMb25nX18pfWFwLnByb3RvdHlwZS5fX2lzTG9uZ19fLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcC5wcm90b3R5cGUsIl9faXNMb25nX18iLHt2YWx1ZTohMH0pLGFwLmlzTG9uZz1zcDt2YXIgdXA9e30sZnA9e307ZnVuY3Rpb24gbHAodCxlKXt2YXIgcixuLGk7cmV0dXJuIGU/KGk9MDw9KHQ+Pj49MCkmJnQ8MjU2KSYmKG49ZnBbdF0pP246KHI9aHAodCwoMHx0KTwwPy0xOjAsITApLGkmJihmcFt0XT1yKSxyKTooaT0tMTI4PD0odHw9MCkmJnQ8MTI4KSYmKG49dXBbdF0pP246KHI9aHAodCx0PDA/LTE6MCwhMSksaSYmKHVwW3RdPXIpLHIpfWZ1bmN0aW9uIGNwKHQsZSl7aWYoaXNOYU4odCkpcmV0dXJuIGU/X3A6d3A7aWYoZSl7aWYodDwwKXJldHVybiBfcDtpZih0Pj15cClyZXR1cm4gU3B9ZWxzZXtpZih0PD0tYnApcmV0dXJuIE9wO2lmKHQrMT49YnApcmV0dXJuIEFwfXJldHVybiB0PDA/Y3AoLXQsZSkubmVnKCk6aHAodCVncHwwLHQvZ3B8MCxlKX1mdW5jdGlvbiBocCh0LGUscil7cmV0dXJuIG5ldyBhcCh0LGUscil9YXAuZnJvbUludD1scCxhcC5mcm9tTnVtYmVyPWNwLGFwLmZyb21CaXRzPWhwO3ZhciBkcD1NYXRoLnBvdztmdW5jdGlvbiBwcCh0LGUscil7aWYoMD09PXQubGVuZ3RoKXRocm93IEVycm9yKCJlbXB0eSBzdHJpbmciKTtpZigiTmFOIj09PXR8fCJJbmZpbml0eSI9PT10fHwiK0luZmluaXR5Ij09PXR8fCItSW5maW5pdHkiPT09dClyZXR1cm4gd3A7aWYoIm51bWJlciI9PXR5cGVvZiBlPyhyPWUsZT0hMSk6ZT0hIWUsKHI9cnx8MTApPDJ8fDM2PHIpdGhyb3cgUmFuZ2VFcnJvcigicmFkaXgiKTt2YXIgbjtpZigobj10LmluZGV4T2YoIi0iKSk+MCl0aHJvdyBFcnJvcigiaW50ZXJpb3IgaHlwaGVuIik7aWYoMD09PW4pcmV0dXJuIHBwKHQuc3Vic3RyaW5nKDEpLGUscikubmVnKCk7Zm9yKHZhciBpPWNwKGRwKHIsOCkpLG89d3AsYT0wO2E8dC5sZW5ndGg7YSs9OCl7dmFyIHM9TWF0aC5taW4oOCx0Lmxlbmd0aC1hKSx1PXBhcnNlSW50KHQuc3Vic3RyaW5nKGEsYStzKSxyKTtpZihzPDgpe3ZhciBmPWNwKGRwKHIscykpO289by5tdWwoZikuYWRkKGNwKHUpKX1lbHNlIG89KG89by5tdWwoaSkpLmFkZChjcCh1KSl9cmV0dXJuIG8udW5zaWduZWQ9ZSxvfWZ1bmN0aW9uIHZwKHQsZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0P2NwKHQsZSk6InN0cmluZyI9PXR5cGVvZiB0P3BwKHQsZSk6aHAodC5sb3csdC5oaWdoLCJib29sZWFuIj09dHlwZW9mIGU/ZTp0LnVuc2lnbmVkKX1hcC5mcm9tU3RyaW5nPXBwLGFwLmZyb21WYWx1ZT12cDt2YXIgZ3A9NDI5NDk2NzI5Nix5cD1ncCpncCxicD15cC8yLG1wPWxwKDE8PDI0KSx3cD1scCgwKTthcC5aRVJPPXdwO3ZhciBfcD1scCgwLCEwKTthcC5VWkVSTz1fcDt2YXIgeHA9bHAoMSk7YXAuT05FPXhwO3ZhciBrcD1scCgxLCEwKTthcC5VT05FPWtwO3ZhciBFcD1scCgtMSk7YXAuTkVHX09ORT1FcDt2YXIgQXA9aHAoLTEsMjE0NzQ4MzY0NywhMSk7YXAuTUFYX1ZBTFVFPUFwO3ZhciBTcD1ocCgtMSwtMSwhMCk7YXAuTUFYX1VOU0lHTkVEX1ZBTFVFPVNwO3ZhciBPcD1ocCgwLC0yMTQ3NDgzNjQ4LCExKTthcC5NSU5fVkFMVUU9T3A7dmFyIFRwPWFwLnByb3RvdHlwZTtUcC50b0ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3RoaXMubG93Pj4+MDp0aGlzLmxvd30sVHAudG9OdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bnNpZ25lZD8odGhpcy5oaWdoPj4+MCkqZ3ArKHRoaXMubG93Pj4+MCk6dGhpcy5oaWdoKmdwKyh0aGlzLmxvdz4+PjApfSxUcC50b1N0cmluZz1mdW5jdGlvbih0KXtpZigodD10fHwxMCk8Mnx8MzY8dCl0aHJvdyBSYW5nZUVycm9yKCJyYWRpeCIpO2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIjAiO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXtpZih0aGlzLmVxKE9wKSl7dmFyIGU9Y3AodCkscj10aGlzLmRpdihlKSxuPXIubXVsKGUpLnN1Yih0aGlzKTtyZXR1cm4gci50b1N0cmluZyh0KStuLnRvSW50KCkudG9TdHJpbmcodCl9cmV0dXJuIi0iK3RoaXMubmVnKCkudG9TdHJpbmcodCl9Zm9yKHZhciBpPWNwKGRwKHQsNiksdGhpcy51bnNpZ25lZCksbz10aGlzLGE9IiI7Oyl7dmFyIHM9by5kaXYoaSksdT0oby5zdWIocy5tdWwoaSkpLnRvSW50KCk+Pj4wKS50b1N0cmluZyh0KTtpZigobz1zKS5pc1plcm8oKSlyZXR1cm4gdSthO2Zvcig7dS5sZW5ndGg8NjspdT0iMCIrdTthPSIiK3UrYX19LFRwLmdldEhpZ2hCaXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGlnaH0sVHAuZ2V0SGlnaEJpdHNVbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2g+Pj4wfSxUcC5nZXRMb3dCaXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93fSxUcC5nZXRMb3dCaXRzVW5zaWduZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb3c+Pj4wfSxUcC5nZXROdW1CaXRzQWJzPWZ1bmN0aW9uKCl7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZXEoT3ApPzY0OnRoaXMubmVnKCkuZ2V0TnVtQml0c0FicygpO2Zvcih2YXIgdD0wIT10aGlzLmhpZ2g/dGhpcy5oaWdoOnRoaXMubG93LGU9MzE7ZT4wJiYwPT0odCYxPDxlKTtlLS0pO3JldHVybiAwIT10aGlzLmhpZ2g/ZSszMzplKzF9LFRwLmlzWmVybz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5oaWdoJiYwPT09dGhpcy5sb3d9LFRwLmVxej1UcC5pc1plcm8sVHAuaXNOZWdhdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVuc2lnbmVkJiZ0aGlzLmhpZ2g8MH0sVHAuaXNQb3NpdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkfHx0aGlzLmhpZ2g+PTB9LFRwLmlzT2RkPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PSgxJnRoaXMubG93KX0sVHAuaXNFdmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSgxJnRoaXMubG93KX0sVHAuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiBzcCh0KXx8KHQ9dnAodCkpLCh0aGlzLnVuc2lnbmVkPT09dC51bnNpZ25lZHx8dGhpcy5oaWdoPj4+MzEhPTF8fHQuaGlnaD4+PjMxIT0xKSYmKHRoaXMuaGlnaD09PXQuaGlnaCYmdGhpcy5sb3c9PT10Lmxvdyl9LFRwLmVxPVRwLmVxdWFscyxUcC5ub3RFcXVhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuZXEodCl9LFRwLm5lcT1UcC5ub3RFcXVhbHMsVHAubmU9VHAubm90RXF1YWxzLFRwLmxlc3NUaGFuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXAodCk8MH0sVHAubHQ9VHAubGVzc1RoYW4sVHAubGVzc1RoYW5PckVxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXAodCk8PTB9LFRwLmx0ZT1UcC5sZXNzVGhhbk9yRXF1YWwsVHAubGU9VHAubGVzc1RoYW5PckVxdWFsLFRwLmdyZWF0ZXJUaGFuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXAodCk+MH0sVHAuZ3Q9VHAuZ3JlYXRlclRoYW4sVHAuZ3JlYXRlclRoYW5PckVxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXAodCk+PTB9LFRwLmd0ZT1UcC5ncmVhdGVyVGhhbk9yRXF1YWwsVHAuZ2U9VHAuZ3JlYXRlclRoYW5PckVxdWFsLFRwLmNvbXBhcmU9ZnVuY3Rpb24odCl7aWYoc3AodCl8fCh0PXZwKHQpKSx0aGlzLmVxKHQpKXJldHVybiAwO3ZhciBlPXRoaXMuaXNOZWdhdGl2ZSgpLHI9dC5pc05lZ2F0aXZlKCk7cmV0dXJuIGUmJiFyPy0xOiFlJiZyPzE6dGhpcy51bnNpZ25lZD90LmhpZ2g+Pj4wPnRoaXMuaGlnaD4+PjB8fHQuaGlnaD09PXRoaXMuaGlnaCYmdC5sb3c+Pj4wPnRoaXMubG93Pj4+MD8tMToxOnRoaXMuc3ViKHQpLmlzTmVnYXRpdmUoKT8tMToxfSxUcC5jb21wPVRwLmNvbXBhcmUsVHAubmVnYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMudW5zaWduZWQmJnRoaXMuZXEoT3ApP09wOnRoaXMubm90KCkuYWRkKHhwKX0sVHAubmVnPVRwLm5lZ2F0ZSxUcC5hZGQ9ZnVuY3Rpb24odCl7c3AodCl8fCh0PXZwKHQpKTt2YXIgZT10aGlzLmhpZ2g+Pj4xNixyPTY1NTM1JnRoaXMuaGlnaCxuPXRoaXMubG93Pj4+MTYsaT02NTUzNSZ0aGlzLmxvdyxvPXQuaGlnaD4+PjE2LGE9NjU1MzUmdC5oaWdoLHM9dC5sb3c+Pj4xNix1PTAsZj0wLGw9MCxjPTA7cmV0dXJuIGwrPShjKz1pKyg2NTUzNSZ0LmxvdykpPj4+MTYsZis9KGwrPW4rcyk+Pj4xNix1Kz0oZis9cithKT4+PjE2LHUrPWUrbyxocCgobCY9NjU1MzUpPDwxNnwoYyY9NjU1MzUpLCh1Jj02NTUzNSk8PDE2fChmJj02NTUzNSksdGhpcy51bnNpZ25lZCl9LFRwLnN1YnRyYWN0PWZ1bmN0aW9uKHQpe3JldHVybiBzcCh0KXx8KHQ9dnAodCkpLHRoaXMuYWRkKHQubmVnKCkpfSxUcC5zdWI9VHAuc3VidHJhY3QsVHAubXVsdGlwbHk9ZnVuY3Rpb24odCl7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gd3A7aWYoc3AodCl8fCh0PXZwKHQpKSxvcClyZXR1cm4gaHAob3AubXVsKHRoaXMubG93LHRoaXMuaGlnaCx0Lmxvdyx0LmhpZ2gpLG9wLmdldF9oaWdoKCksdGhpcy51bnNpZ25lZCk7aWYodC5pc1plcm8oKSlyZXR1cm4gd3A7aWYodGhpcy5lcShPcCkpcmV0dXJuIHQuaXNPZGQoKT9PcDp3cDtpZih0LmVxKE9wKSlyZXR1cm4gdGhpcy5pc09kZCgpP09wOndwO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXJldHVybiB0LmlzTmVnYXRpdmUoKT90aGlzLm5lZygpLm11bCh0Lm5lZygpKTp0aGlzLm5lZygpLm11bCh0KS5uZWcoKTtpZih0LmlzTmVnYXRpdmUoKSlyZXR1cm4gdGhpcy5tdWwodC5uZWcoKSkubmVnKCk7aWYodGhpcy5sdChtcCkmJnQubHQobXApKXJldHVybiBjcCh0aGlzLnRvTnVtYmVyKCkqdC50b051bWJlcigpLHRoaXMudW5zaWduZWQpO3ZhciBlPXRoaXMuaGlnaD4+PjE2LHI9NjU1MzUmdGhpcy5oaWdoLG49dGhpcy5sb3c+Pj4xNixpPTY1NTM1JnRoaXMubG93LG89dC5oaWdoPj4+MTYsYT02NTUzNSZ0LmhpZ2gscz10Lmxvdz4+PjE2LHU9NjU1MzUmdC5sb3csZj0wLGw9MCxjPTAsaD0wO3JldHVybiBjKz0oaCs9aSp1KT4+PjE2LGwrPShjKz1uKnUpPj4+MTYsYyY9NjU1MzUsbCs9KGMrPWkqcyk+Pj4xNixmKz0obCs9cip1KT4+PjE2LGwmPTY1NTM1LGYrPShsKz1uKnMpPj4+MTYsbCY9NjU1MzUsZis9KGwrPWkqYSk+Pj4xNixmKz1lKnUrcipzK24qYStpKm8saHAoKGMmPTY1NTM1KTw8MTZ8KGgmPTY1NTM1KSwoZiY9NjU1MzUpPDwxNnwobCY9NjU1MzUpLHRoaXMudW5zaWduZWQpfSxUcC5tdWw9VHAubXVsdGlwbHksVHAuZGl2aWRlPWZ1bmN0aW9uKHQpe2lmKHNwKHQpfHwodD12cCh0KSksdC5pc1plcm8oKSl0aHJvdyBFcnJvcigiZGl2aXNpb24gYnkgemVybyIpO3ZhciBlLHIsbjtpZihvcClyZXR1cm4gdGhpcy51bnNpZ25lZHx8LTIxNDc0ODM2NDghPT10aGlzLmhpZ2h8fC0xIT09dC5sb3d8fC0xIT09dC5oaWdoP2hwKCh0aGlzLnVuc2lnbmVkP29wLmRpdl91Om9wLmRpdl9zKSh0aGlzLmxvdyx0aGlzLmhpZ2gsdC5sb3csdC5oaWdoKSxvcC5nZXRfaGlnaCgpLHRoaXMudW5zaWduZWQpOnRoaXM7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gdGhpcy51bnNpZ25lZD9fcDp3cDtpZih0aGlzLnVuc2lnbmVkKXtpZih0LnVuc2lnbmVkfHwodD10LnRvVW5zaWduZWQoKSksdC5ndCh0aGlzKSlyZXR1cm4gX3A7aWYodC5ndCh0aGlzLnNocnUoMSkpKXJldHVybiBrcDtuPV9wfWVsc2V7aWYodGhpcy5lcShPcCkpcmV0dXJuIHQuZXEoeHApfHx0LmVxKEVwKT9PcDp0LmVxKE9wKT94cDooZT10aGlzLnNocigxKS5kaXYodCkuc2hsKDEpKS5lcSh3cCk/dC5pc05lZ2F0aXZlKCk/eHA6RXA6KHI9dGhpcy5zdWIodC5tdWwoZSkpLG49ZS5hZGQoci5kaXYodCkpKTtpZih0LmVxKE9wKSlyZXR1cm4gdGhpcy51bnNpZ25lZD9fcDp3cDtpZih0aGlzLmlzTmVnYXRpdmUoKSlyZXR1cm4gdC5pc05lZ2F0aXZlKCk/dGhpcy5uZWcoKS5kaXYodC5uZWcoKSk6dGhpcy5uZWcoKS5kaXYodCkubmVnKCk7aWYodC5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZGl2KHQubmVnKCkpLm5lZygpO249d3B9Zm9yKHI9dGhpcztyLmd0ZSh0KTspe2U9TWF0aC5tYXgoMSxNYXRoLmZsb29yKHIudG9OdW1iZXIoKS90LnRvTnVtYmVyKCkpKTtmb3IodmFyIGk9TWF0aC5jZWlsKE1hdGgubG9nKGUpL01hdGguTE4yKSxvPWk8PTQ4PzE6ZHAoMixpLTQ4KSxhPWNwKGUpLHM9YS5tdWwodCk7cy5pc05lZ2F0aXZlKCl8fHMuZ3Qocik7KXM9KGE9Y3AoZS09byx0aGlzLnVuc2lnbmVkKSkubXVsKHQpO2EuaXNaZXJvKCkmJihhPXhwKSxuPW4uYWRkKGEpLHI9ci5zdWIocyl9cmV0dXJuIG59LFRwLmRpdj1UcC5kaXZpZGUsVHAubW9kdWxvPWZ1bmN0aW9uKHQpe3JldHVybiBzcCh0KXx8KHQ9dnAodCkpLG9wP2hwKCh0aGlzLnVuc2lnbmVkP29wLnJlbV91Om9wLnJlbV9zKSh0aGlzLmxvdyx0aGlzLmhpZ2gsdC5sb3csdC5oaWdoKSxvcC5nZXRfaGlnaCgpLHRoaXMudW5zaWduZWQpOnRoaXMuc3ViKHRoaXMuZGl2KHQpLm11bCh0KSl9LFRwLm1vZD1UcC5tb2R1bG8sVHAucmVtPVRwLm1vZHVsbyxUcC5ub3Q9ZnVuY3Rpb24oKXtyZXR1cm4gaHAofnRoaXMubG93LH50aGlzLmhpZ2gsdGhpcy51bnNpZ25lZCl9LFRwLmFuZD1mdW5jdGlvbih0KXtyZXR1cm4gc3AodCl8fCh0PXZwKHQpKSxocCh0aGlzLmxvdyZ0Lmxvdyx0aGlzLmhpZ2gmdC5oaWdoLHRoaXMudW5zaWduZWQpfSxUcC5vcj1mdW5jdGlvbih0KXtyZXR1cm4gc3AodCl8fCh0PXZwKHQpKSxocCh0aGlzLmxvd3x0Lmxvdyx0aGlzLmhpZ2h8dC5oaWdoLHRoaXMudW5zaWduZWQpfSxUcC54b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHNwKHQpfHwodD12cCh0KSksaHAodGhpcy5sb3dedC5sb3csdGhpcy5oaWdoXnQuaGlnaCx0aGlzLnVuc2lnbmVkKX0sVHAuc2hpZnRMZWZ0PWZ1bmN0aW9uKHQpe3JldHVybiBzcCh0KSYmKHQ9dC50b0ludCgpKSwwPT0odCY9NjMpP3RoaXM6dDwzMj9ocCh0aGlzLmxvdzw8dCx0aGlzLmhpZ2g8PHR8dGhpcy5sb3c+Pj4zMi10LHRoaXMudW5zaWduZWQpOmhwKDAsdGhpcy5sb3c8PHQtMzIsdGhpcy51bnNpZ25lZCl9LFRwLnNobD1UcC5zaGlmdExlZnQsVHAuc2hpZnRSaWdodD1mdW5jdGlvbih0KXtyZXR1cm4gc3AodCkmJih0PXQudG9JbnQoKSksMD09KHQmPTYzKT90aGlzOnQ8MzI/aHAodGhpcy5sb3c+Pj50fHRoaXMuaGlnaDw8MzItdCx0aGlzLmhpZ2g+PnQsdGhpcy51bnNpZ25lZCk6aHAodGhpcy5oaWdoPj50LTMyLHRoaXMuaGlnaD49MD8wOi0xLHRoaXMudW5zaWduZWQpfSxUcC5zaHI9VHAuc2hpZnRSaWdodCxUcC5zaGlmdFJpZ2h0VW5zaWduZWQ9ZnVuY3Rpb24odCl7aWYoc3AodCkmJih0PXQudG9JbnQoKSksMD09PSh0Jj02MykpcmV0dXJuIHRoaXM7dmFyIGU9dGhpcy5oaWdoO3JldHVybiB0PDMyP2hwKHRoaXMubG93Pj4+dHxlPDwzMi10LGU+Pj50LHRoaXMudW5zaWduZWQpOmhwKDMyPT09dD9lOmU+Pj50LTMyLDAsdGhpcy51bnNpZ25lZCl9LFRwLnNocnU9VHAuc2hpZnRSaWdodFVuc2lnbmVkLFRwLnNocl91PVRwLnNoaWZ0UmlnaHRVbnNpZ25lZCxUcC50b1NpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP2hwKHRoaXMubG93LHRoaXMuaGlnaCwhMSk6dGhpc30sVHAudG9VbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3RoaXM6aHAodGhpcy5sb3csdGhpcy5oaWdoLCEwKX0sVHAudG9CeXRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLnRvQnl0ZXNMRSgpOnRoaXMudG9CeXRlc0JFKCl9LFRwLnRvQnl0ZXNMRT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaGlnaCxlPXRoaXMubG93O3JldHVyblsyNTUmZSxlPj4+OCYyNTUsZT4+PjE2JjI1NSxlPj4+MjQsMjU1JnQsdD4+PjgmMjU1LHQ+Pj4xNiYyNTUsdD4+PjI0XX0sVHAudG9CeXRlc0JFPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oaWdoLGU9dGhpcy5sb3c7cmV0dXJuW3Q+Pj4yNCx0Pj4+MTYmMjU1LHQ+Pj44JjI1NSwyNTUmdCxlPj4+MjQsZT4+PjE2JjI1NSxlPj4+OCYyNTUsMjU1JmVdfSxhcC5mcm9tQnl0ZXM9ZnVuY3Rpb24odCxlLHIpe3JldHVybiByP2FwLmZyb21CeXRlc0xFKHQsZSk6YXAuZnJvbUJ5dGVzQkUodCxlKX0sYXAuZnJvbUJ5dGVzTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGFwKHRbMF18dFsxXTw8OHx0WzJdPDwxNnx0WzNdPDwyNCx0WzRdfHRbNV08PDh8dFs2XTw8MTZ8dFs3XTw8MjQsZSl9LGFwLmZyb21CeXRlc0JFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBhcCh0WzRdPDwyNHx0WzVdPDwxNnx0WzZdPDw4fHRbN10sdFswXTw8MjR8dFsxXTw8MTZ8dFsyXTw8OHx0WzNdLGUpfTt2YXIgQnA9e30sSXA9c2YoIkFycmF5IikuY29uY2F0LFBwPUFycmF5LnByb3RvdHlwZSxScD1mdW5jdGlvbih0KXt2YXIgZT10LmNvbmNhdDtyZXR1cm4gdD09PVBwfHx0IGluc3RhbmNlb2YgQXJyYXkmJmU9PT1QcC5jb25jYXQ/SXA6ZX07IWZ1bmN0aW9uKHQpe3ZhciBlPUguZXhwb3J0czttcih0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmZyb21CeXRlcz1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxyPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07aWYocil0aHJvdyBuZXcgRXJyb3IoImJpZy1lbmRpYW4gdmlydHVhbCBmaWxlIG9mZnNldHMgbm90IGltcGxlbWVudGVkIik7cmV0dXJuIG5ldyBhKDEwOTk1MTE2Mjc3NzYqdFtlKzddKzQyOTQ5NjcyOTYqdFtlKzZdKzE2Nzc3MjE2KnRbZSs1XSs2NTUzNip0W2UrNF0rMjU2KnRbZSszXSt0W2UrMl0sdFtlKzFdPDw4fHRbZV0pfSx0LmRlZmF1bHQ9dm9pZCAwO3ZhciByPWUoUnApLG49ZShxZC5leHBvcnRzKSxpPWUoJGQuZXhwb3J0cyksbz1lKE9sLmV4cG9ydHMpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscil7KDAsbi5kZWZhdWx0KSh0aGlzLHQpLCgwLG8uZGVmYXVsdCkodGhpcywiYmxvY2tQb3NpdGlvbiIsdm9pZCAwKSwoMCxvLmRlZmF1bHQpKHRoaXMsImRhdGFQb3NpdGlvbiIsdm9pZCAwKSx0aGlzLmJsb2NrUG9zaXRpb249ZSx0aGlzLmRhdGFQb3NpdGlvbj1yfXJldHVybigwLGkuZGVmYXVsdCkodCxbe2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuKDAsci5kZWZhdWx0KSh0PSIiLmNvbmNhdCh0aGlzLmJsb2NrUG9zaXRpb24sIjoiKSkuY2FsbCh0LHRoaXMuZGF0YVBvc2l0aW9uKX19LHtrZXk6ImNvbXBhcmVUbyIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYmxvY2tQb3NpdGlvbi10LmJsb2NrUG9zaXRpb258fHRoaXMuZGF0YVBvc2l0aW9uLXQuZGF0YVBvc2l0aW9ufX1dLFt7a2V5OiJtaW4iLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9MCxyPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkociksaT0wO2k8cjtpKyspbltpXT1hcmd1bWVudHNbaV07Zm9yKDshdDtlKz0xKXQ9bltlXTtmb3IoO2U8bi5sZW5ndGg7ZSs9MSl0LmNvbXBhcmVUbyhuW2VdKT4wJiYodD1uW2VdKTtyZXR1cm4gdH19XSksdH0oKTt0LmRlZmF1bHQ9YX0oQnApO3ZhciBNcD17fTshZnVuY3Rpb24odCl7dmFyIGU9SC5leHBvcnRzO21yKHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZGVmYXVsdD12b2lkIDA7dmFyIHI9ZShScCksbj1lKHFkLmV4cG9ydHMpLGk9ZSgkZC5leHBvcnRzKSxvPWUoT2wuZXhwb3J0cyksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLGkpe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTp2b2lkIDA7KDAsbi5kZWZhdWx0KSh0aGlzLHQpLCgwLG8uZGVmYXVsdCkodGhpcywibWludiIsdm9pZCAwKSwoMCxvLmRlZmF1bHQpKHRoaXMsIm1heHYiLHZvaWQgMCksKDAsby5kZWZhdWx0KSh0aGlzLCJiaW4iLHZvaWQgMCksKDAsby5kZWZhdWx0KSh0aGlzLCJfZmV0Y2hlZFNpemUiLHZvaWQgMCksdGhpcy5taW52PWUsdGhpcy5tYXh2PXIsdGhpcy5iaW49aSx0aGlzLl9mZXRjaGVkU2l6ZT1hfXJldHVybigwLGkuZGVmYXVsdCkodCxbe2tleToidG9VbmlxdWVTdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQsZSxuO3JldHVybigwLHIuZGVmYXVsdCkodD0oMCxyLmRlZmF1bHQpKGU9KDAsci5kZWZhdWx0KShuPSIiLmNvbmNhdCh0aGlzLm1pbnYsIi4uIikpLmNhbGwobix0aGlzLm1heHYsIiAoYmluICIpKS5jYWxsKGUsdGhpcy5iaW4sIiwgZmV0Y2hlZFNpemUgIikpLmNhbGwodCx0aGlzLmZldGNoZWRTaXplKCksIikiKX19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvVW5pcXVlU3RyaW5nKCl9fSx7a2V5OiJjb21wYXJlVG8iLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbnYuY29tcGFyZVRvKHQubWludil8fHRoaXMubWF4di5jb21wYXJlVG8odC5tYXh2KXx8dGhpcy5iaW4tdC5iaW59fSx7a2V5OiJmZXRjaGVkU2l6ZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5fZmV0Y2hlZFNpemU/dGhpcy5fZmV0Y2hlZFNpemU6dGhpcy5tYXh2LmJsb2NrUG9zaXRpb24rNjU1MzYtdGhpcy5taW52LmJsb2NrUG9zaXRpb259fV0pLHR9KCk7dC5kZWZhdWx0PWF9KE1wKTt2YXIgTHA9e30sanA9e30senA9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KHpwKTt2YXIgQ3A9e30sTnA9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yPyh0LmV4cG9ydHM9ZT1mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMCk6KHQuZXhwb3J0cz1lPWZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwKSxlKHIpfXQuZXhwb3J0cz1lLHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oTnApO3ZhciBVcD17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KFVwKTt2YXIgRnA9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19dC5leHBvcnRzPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShGcCk7dmFyIERwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPXIsdH0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShEcCk7dmFyIHFwPXt9LCRwPXt9O2Z1bmN0aW9uIFpwKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gSHAodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1mdW5jdGlvbiBHcCh0LGUscil7cmV0dXJuIGUmJkhwKHQucHJvdG90eXBlLGUpLHImJkhwKHQsciksdH1mdW5jdGlvbiBXcCh0KXtyZXR1cm4oV3A9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0pKHQpfWZ1bmN0aW9uIFZwKHQsZSl7cmV0dXJuKFZwPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5fX3Byb3RvX189ZSx0fSkodCxlKX1mdW5jdGlvbiBZcCh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIHR9ZnVuY3Rpb24gWHAodCxlKXtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT9ZcCh0KTplfWZ1bmN0aW9uIEtwKHQpe3ZhciBlPWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKF9FKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj1XcCh0KTtpZihlKXt2YXIgaT1XcCh0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gWHAodGhpcyxyKX19ZnVuY3Rpb24gSnAodCxlLHIpe3JldHVybihKcD0idW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJlJlZmxlY3QuZ2V0P1JlZmxlY3QuZ2V0OmZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1mdW5jdGlvbih0LGUpe2Zvcig7IU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpJiZudWxsIT09KHQ9V3AodCkpOyk7cmV0dXJuIHR9KHQsZSk7aWYobil7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLGUpO3JldHVybiBpLmdldD9pLmdldC5jYWxsKHIpOmkudmFsdWV9fSkodCxlLHJ8fHQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkcCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIFFwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe1pwKHRoaXMsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImxpc3RlbmVycyIse3ZhbHVlOnt9LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfXJldHVybiBHcCh0LFt7a2V5OiJhZGRFdmVudExpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbih0LGUscil7dCBpbiB0aGlzLmxpc3RlbmVyc3x8KHRoaXMubGlzdGVuZXJzW3RdPVtdKSx0aGlzLmxpc3RlbmVyc1t0XS5wdXNoKHtjYWxsYmFjazplLG9wdGlvbnM6cn0pfX0se2tleToicmVtb3ZlRXZlbnRMaXN0ZW5lciIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZih0IGluIHRoaXMubGlzdGVuZXJzKWZvcih2YXIgcj10aGlzLmxpc3RlbmVyc1t0XSxuPTAsaT1yLmxlbmd0aDtuPGk7bisrKWlmKHJbbl0uY2FsbGJhY2s9PT1lKXJldHVybiB2b2lkIHIuc3BsaWNlKG4sMSl9fSx7a2V5OiJkaXNwYXRjaEV2ZW50Iix2YWx1ZTpmdW5jdGlvbih0KXtpZih0LnR5cGUgaW4gdGhpcy5saXN0ZW5lcnMpe2Zvcih2YXIgZT10aGlzLmxpc3RlbmVyc1t0LnR5cGVdLnNsaWNlKCkscj0wLG49ZS5sZW5ndGg7cjxuO3IrKyl7dmFyIGk9ZVtyXTt0cnl7aS5jYWxsYmFjay5jYWxsKHRoaXMsdCl9Y2F0Y2goX0Upe1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7dGhyb3cgX0V9KSl9aS5vcHRpb25zJiZpLm9wdGlvbnMub25jZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHQudHlwZSxpLmNhbGxiYWNrKX1yZXR1cm4hdC5kZWZhdWx0UHJldmVudGVkfX19XSksdH0oKSx0dj1mdW5jdGlvbih0KXshZnVuY3Rpb24odCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmVnAodCxlKX0ocix0KTt2YXIgZT1LcChyKTtmdW5jdGlvbiByKCl7dmFyIHQ7cmV0dXJuIFpwKHRoaXMsciksKHQ9ZS5jYWxsKHRoaXMpKS5saXN0ZW5lcnN8fFFwLmNhbGwoWXAodCkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShZcCh0KSwiYWJvcnRlZCIse3ZhbHVlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShZcCh0KSwib25hYm9ydCIse3ZhbHVlOm51bGwsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdH1yZXR1cm4gR3Aocixbe2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgQWJvcnRTaWduYWxdIn19LHtrZXk6ImRpc3BhdGNoRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKHQpeyJhYm9ydCI9PT10LnR5cGUmJih0aGlzLmFib3J0ZWQ9ITAsImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub25hYm9ydCYmdGhpcy5vbmFib3J0LmNhbGwodGhpcyx0KSksSnAoV3Aoci5wcm90b3R5cGUpLCJkaXNwYXRjaEV2ZW50Iix0aGlzKS5jYWxsKHRoaXMsdCl9fV0pLHJ9KFFwKSxldj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtacCh0aGlzLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJzaWduYWwiLHt2YWx1ZTpuZXcgdHYsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9cmV0dXJuIEdwKHQsW3trZXk6ImFib3J0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O3RyeXt0PW5ldyBFdmVudCgiYWJvcnQiKX1jYXRjaChfRSl7InVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudD9kb2N1bWVudC5jcmVhdGVFdmVudD8odD1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSkuaW5pdEV2ZW50KCJhYm9ydCIsITEsITEpOih0PWRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCkpLnR5cGU9ImFib3J0Ijp0PXt0eXBlOiJhYm9ydCIsYnViYmxlczohMSxjYW5jZWxhYmxlOiExfX10aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHQpfX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgQWJvcnRDb250cm9sbGVyXSJ9fV0pLHR9KCk7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmKGV2LnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddPSJBYm9ydENvbnRyb2xsZXIiLHR2LnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddPSJBYm9ydFNpZ25hbCIpLCRwLkFib3J0Q29udHJvbGxlcj1ldiwkcC5BYm9ydFNpZ25hbD10diwkcC5hYm9ydGFibGVGZXRjaD1mdW5jdGlvbih0KXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9e2ZldGNoOnR9KTt2YXIgZSxyPXQsbj1yLmZldGNoLGk9ci5SZXF1ZXN0LG89dm9pZCAwPT09aT9uLlJlcXVlc3Q6aSxhPXIuQWJvcnRDb250cm9sbGVyLHM9ci5fX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMLHU9dm9pZCAwIT09cyYmcztpZighKChlPXtmZXRjaDpuLFJlcXVlc3Q6byxBYm9ydENvbnRyb2xsZXI6YSxfX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMOnV9KS5fX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMPyhjb25zb2xlLmxvZygiX19GT1JDRV9JTlNUQUxMX0FCT1JUQ09OVFJPTExFUl9QT0xZRklMTD10cnVlIGlzIHNldCwgd2lsbCBmb3JjZSBpbnN0YWxsIHBvbHlmaWxsIiksMSk6ImZ1bmN0aW9uIj09dHlwZW9mIGUuUmVxdWVzdCYmIWUuUmVxdWVzdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoInNpZ25hbCIpfHwhZS5BYm9ydENvbnRyb2xsZXIpKXJldHVybntmZXRjaDpuLFJlcXVlc3Q6Zn07dmFyIGY9bzsoZiYmIWYucHJvdG90eXBlLmhhc093blByb3BlcnR5KCJzaWduYWwiKXx8dSkmJigoZj1mdW5jdGlvbih0LGUpe3ZhciByO2UmJmUuc2lnbmFsJiYocj1lLnNpZ25hbCxkZWxldGUgZS5zaWduYWwpO3ZhciBuPW5ldyBvKHQsZSk7cmV0dXJuIHImJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJzaWduYWwiLHt3cml0YWJsZTohMSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx2YWx1ZTpyfSksbn0pLnByb3RvdHlwZT1vLnByb3RvdHlwZSk7dmFyIGw9bjtyZXR1cm57ZmV0Y2g6ZnVuY3Rpb24odCxlKXt2YXIgcj1mJiZmLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpP3Quc2lnbmFsOmU/ZS5zaWduYWw6dm9pZCAwO2lmKHIpe3ZhciBuO3RyeXtuPW5ldyBET01FeGNlcHRpb24oIkFib3J0ZWQiLCJBYm9ydEVycm9yIil9Y2F0Y2gobyl7KG49bmV3IEVycm9yKCJBYm9ydGVkIikpLm5hbWU9IkFib3J0RXJyb3IifWlmKHIuYWJvcnRlZClyZXR1cm4gUHJvbWlzZS5yZWplY3Qobik7dmFyIGk9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsZSl7ci5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGUobil9KSx7b25jZTohMH0pfSkpO3JldHVybiBlJiZlLnNpZ25hbCYmZGVsZXRlIGUuc2lnbmFsLFByb21pc2UucmFjZShbaSxsKHQsZSldKX1yZXR1cm4gbCh0LGUpfSxSZXF1ZXN0OmZ9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkocXAsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHFwLkFib3J0U2lnbmFsPXFwLkFib3J0Q29udHJvbGxlcj12b2lkIDA7dmFyIHJ2PSRwLG52PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmKXJldHVybiBzZWxmO2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93KXJldHVybiB3aW5kb3c7aWYodm9pZCAwIT09eClyZXR1cm4geDt0aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCIpfSxpdj12b2lkIDA9PT1udigpLkFib3J0Q29udHJvbGxlcj9ydi5BYm9ydENvbnRyb2xsZXI6bnYoKS5BYm9ydENvbnRyb2xsZXI7cXAuQWJvcnRDb250cm9sbGVyPWl2O3ZhciBvdj12b2lkIDA9PT1udigpLkFib3J0Q29udHJvbGxlcj9ydi5BYm9ydFNpZ25hbDpudigpLkFib3J0U2lnbmFsO3FwLkFib3J0U2lnbmFsPW92O3ZhciBhdj17fSxzdj16cC5leHBvcnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhdiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksYXYuZGVmYXVsdD12b2lkIDA7dmFyIHV2PXN2KEZwLmV4cG9ydHMpLGZ2PXN2KERwLmV4cG9ydHMpLGx2PXN2KFVwLmV4cG9ydHMpLGN2PXFwLGh2PWZ1bmN0aW9uIHQoKXsoMCxsdi5kZWZhdWx0KSh0aGlzLHQpfSxkdj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXsoMCxsdi5kZWZhdWx0KSh0aGlzLHQpLCgwLGZ2LmRlZmF1bHQpKHRoaXMsInNpZ25hbHMiLG5ldyBTZXQpLCgwLGZ2LmRlZmF1bHQpKHRoaXMsImFib3J0Q29udHJvbGxlciIsbmV3IGN2LkFib3J0Q29udHJvbGxlcil9cmV0dXJuKDAsdXYuZGVmYXVsdCkodCxbe2tleToiYWRkU2lnbmFsIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bmV3IGh2O2lmKHRoaXMuc2lnbmFsLmFib3J0ZWQpdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgYWRkIGEgc2lnbmFsLCBhbHJlYWR5IGFib3J0ZWQhIik7dGhpcy5zaWduYWxzLmFkZChlKSxlLmFib3J0ZWQ/dGhpcy5oYW5kbGVBYm9ydGVkKGUpOiJmdW5jdGlvbiI9PXR5cGVvZiBlLmFkZEV2ZW50TGlzdGVuZXImJmUuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLChmdW5jdGlvbigpe3QuaGFuZGxlQWJvcnRlZChlKX0pKX19LHtrZXk6ImhhbmRsZUFib3J0ZWQiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuc2lnbmFscy5kZWxldGUodCksMD09PXRoaXMuc2lnbmFscy5zaXplJiZ0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpfX0se2tleToiYWJvcnQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKX19LHtrZXk6InNpZ25hbCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbH19XSksdH0oKTthdi5kZWZhdWx0PWR2O3ZhciBwdj17fSx2dj16cC5leHBvcnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eShwdiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSkscHYuZGVmYXVsdD12b2lkIDA7dmFyIGd2PXZ2KFVwLmV4cG9ydHMpLHl2PXZ2KEZwLmV4cG9ydHMpLGJ2PXZ2KERwLmV4cG9ydHMpLG12PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpeygwLGd2LmRlZmF1bHQpKHRoaXMsdCksKDAsYnYuZGVmYXVsdCkodGhpcywiY2FsbGJhY2tzIixuZXcgU2V0KSwoMCxidi5kZWZhdWx0KSh0aGlzLCJjdXJyZW50TWVzc2FnZSIsdm9pZCAwKX1yZXR1cm4oMCx5di5kZWZhdWx0KSh0LFt7a2V5OiJhZGRDYWxsYmFjayIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06ZnVuY3Rpb24oKXt9O3RoaXMuY2FsbGJhY2tzLmFkZCh0KSx0KHRoaXMuY3VycmVudE1lc3NhZ2UpfX0se2tleToiY2FsbGJhY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY3VycmVudE1lc3NhZ2U9dCx0aGlzLmNhbGxiYWNrcy5mb3JFYWNoKChmdW5jdGlvbihlKXtlKHQpfSkpfX1dKSx0fSgpO3B2LmRlZmF1bHQ9bXY7dmFyIHd2PXpwLmV4cG9ydHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KENwLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxDcC5kZWZhdWx0PXZvaWQgMDt2YXIgX3Y9d3YoTnAuZXhwb3J0cykseHY9d3YoVXAuZXhwb3J0cyksa3Y9d3YoRnAuZXhwb3J0cyksRXY9d3YoRHAuZXhwb3J0cyksQXY9cXAsU3Y9d3YoYXYpLE92PXd2KHB2KSxUdj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9ZS5maWxsLG49ZS5jYWNoZTtpZigoMCx4di5kZWZhdWx0KSh0aGlzLHQpLCgwLEV2LmRlZmF1bHQpKHRoaXMsImNhY2hlIix2b2lkIDApLCgwLEV2LmRlZmF1bHQpKHRoaXMsImZpbGxDYWxsYmFjayIsdm9pZCAwKSwiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJtdXN0IHBhc3MgYSBmaWxsIGZ1bmN0aW9uIik7aWYoIm9iamVjdCIhPT0oMCxfdi5kZWZhdWx0KShuKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJtdXN0IHBhc3MgYSBjYWNoZSBvYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygbi5nZXR8fCJmdW5jdGlvbiIhPXR5cGVvZiBuLnNldHx8ImZ1bmN0aW9uIiE9dHlwZW9mIG4uZGVsZXRlKXRocm93IG5ldyBUeXBlRXJyb3IoImNhY2hlIG11c3QgaW1wbGVtZW50IGdldChrZXkpLCBzZXQoa2V5LCB2YWwpLCBhbmQgYW5kIGRlbGV0ZShrZXkpIik7dGhpcy5jYWNoZT1uLHRoaXMuZmlsbENhbGxiYWNrPXJ9cmV0dXJuKDAsa3YuZGVmYXVsdCkodCxbe2tleToiZXZpY3QiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5jYWNoZS5nZXQodCk9PT1lJiZ0aGlzLmNhY2hlLmRlbGV0ZSh0KX19LHtrZXk6ImZpbGwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPXRoaXMsbz1uZXcgU3YuZGVmYXVsdCxhPW5ldyBPdi5kZWZhdWx0O2EuYWRkQ2FsbGJhY2sobik7dmFyIHM9e2Fib3J0ZXI6byxwcm9taXNlOnRoaXMuZmlsbENhbGxiYWNrKGUsby5zaWduYWwsKGZ1bmN0aW9uKHQpe2EuY2FsbGJhY2sodCl9KSksc2V0dGxlZDohMSxzdGF0dXNSZXBvcnRlcjphLGdldCBhYm9ydGVkKCl7cmV0dXJuIHRoaXMuYWJvcnRlci5zaWduYWwuYWJvcnRlZH19O3MuYWJvcnRlci5hZGRTaWduYWwocikscy5hYm9ydGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsKGZ1bmN0aW9uKCl7cy5zZXR0bGVkfHxpLmV2aWN0KHQscyl9KSkscy5wcm9taXNlLnRoZW4oKGZ1bmN0aW9uKCl7cy5zZXR0bGVkPSEwfSksKGZ1bmN0aW9uKGUpe3Muc2V0dGxlZD0hMCxpLmV2aWN0KHQscyl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3Rocm93IGNvbnNvbGUuZXJyb3IodCksdH0pKSx0aGlzLmNhY2hlLnNldCh0LHMpfX0se2tleToiaGFzIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYWNoZS5oYXModCl9fSx7a2V5OiJnZXQiLHZhbHVlOmZ1bmN0aW9uKGUscixuLGkpe2lmKCFuJiZyIGluc3RhbmNlb2YgQXYuQWJvcnRTaWduYWwpdGhyb3cgbmV3IFR5cGVFcnJvcigic2Vjb25kIGdldCBhcmd1bWVudCBhcHBlYXJzIHRvIGJlIGFuIEFib3J0U2lnbmFsLCBwZXJoYXBzIHlvdSBtZWFudCB0byBwYXNzIGBudWxsYCBmb3IgdGhlIGZpbGwgZGF0YT8iKTt2YXIgbz10aGlzLmNhY2hlLmdldChlKTtyZXR1cm4gbz9vLmFib3J0ZWQmJiFvLnNldHRsZWQ/KHRoaXMuZXZpY3QoZSxvKSx0aGlzLmdldChlLHIsbixpKSk6by5zZXR0bGVkP28ucHJvbWlzZTooby5hYm9ydGVyLmFkZFNpZ25hbChuKSxvLnN0YXR1c1JlcG9ydGVyLmFkZENhbGxiYWNrKGkpLHQuY2hlY2tTaW5nbGVQcm9taXNlKG8ucHJvbWlzZSxuKSk6KHRoaXMuZmlsbChlLHIsbixpKSx0LmNoZWNrU2luZ2xlUHJvbWlzZSh0aGlzLmNhY2hlLmdldChlKS5wcm9taXNlLG4pKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jYWNoZS5nZXQodCk7ZSYmKGUuc2V0dGxlZHx8ZS5hYm9ydGVyLmFib3J0KCksdGhpcy5jYWNoZS5kZWxldGUodCkpfX0se2tleToiY2xlYXIiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuY2FjaGUua2V5cygpLGU9MCxyPXQubmV4dCgpOyFyLmRvbmU7cj10Lm5leHQoKSl0aGlzLmRlbGV0ZShyLnZhbHVlKSxlKz0xO3JldHVybiBlfX1dLFt7a2V5OiJpc0Fib3J0RXhjZXB0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4iQWJvcnRFcnJvciI9PT10Lm5hbWV8fCJFUlJfQUJPUlRFRCI9PT10LmNvZGV8fCJBYm9ydEVycm9yOiBhYm9ydGVkIj09PXQubWVzc2FnZXx8IkVycm9yOiBhYm9ydGVkIj09PXQubWVzc2FnZX19LHtrZXk6ImNoZWNrU2luZ2xlUHJvbWlzZSIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKCl7aWYoZSYmZS5hYm9ydGVkKXRocm93IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKCJhYm9ydGVkIikse2NvZGU6IkVSUl9BQk9SVEVEIn0pfXJldHVybiB0LnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiByKCksdH0pLChmdW5jdGlvbih0KXt0aHJvdyByKCksdH0pKX19XSksdH0oKTtDcC5kZWZhdWx0PVR2O3ZhciBCdj16cC5leHBvcnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eShqcCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksanAuZGVmYXVsdD12b2lkIDA7dmFyIEl2PUJ2KENwKS5kZWZhdWx0O2pwLmRlZmF1bHQ9SXY7Y2xhc3MgUHZ7Y29uc3RydWN0b3IodD17fSl7aWYoISh0Lm1heFNpemUmJnQubWF4U2l6ZT4wKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWF4U2l6ZWAgbXVzdCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMCIpO3RoaXMubWF4U2l6ZT10Lm1heFNpemUsdGhpcy5jYWNoZT1uZXcgTWFwLHRoaXMub2xkQ2FjaGU9bmV3IE1hcCx0aGlzLl9zaXplPTB9X3NldCh0LGUpe3RoaXMuY2FjaGUuc2V0KHQsZSksdGhpcy5fc2l6ZSsrLHRoaXMuX3NpemU+PXRoaXMubWF4U2l6ZSYmKHRoaXMuX3NpemU9MCx0aGlzLm9sZENhY2hlPXRoaXMuY2FjaGUsdGhpcy5jYWNoZT1uZXcgTWFwKX1nZXQodCl7aWYodGhpcy5jYWNoZS5oYXModCkpcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KHQpO2lmKHRoaXMub2xkQ2FjaGUuaGFzKHQpKXtjb25zdCBlPXRoaXMub2xkQ2FjaGUuZ2V0KHQpO3JldHVybiB0aGlzLl9zZXQodCxlKSxlfX1zZXQodCxlKXtyZXR1cm4gdGhpcy5jYWNoZS5oYXModCk/dGhpcy5jYWNoZS5zZXQodCxlKTp0aGlzLl9zZXQodCxlKSx0aGlzfWhhcyh0KXtyZXR1cm4gdGhpcy5jYWNoZS5oYXModCl8fHRoaXMub2xkQ2FjaGUuaGFzKHQpfXBlZWsodCl7cmV0dXJuIHRoaXMuY2FjaGUuaGFzKHQpP3RoaXMuY2FjaGUuZ2V0KHQpOnRoaXMub2xkQ2FjaGUuaGFzKHQpP3RoaXMub2xkQ2FjaGUuZ2V0KHQpOnZvaWQgMH1kZWxldGUodCl7Y29uc3QgZT10aGlzLmNhY2hlLmRlbGV0ZSh0KTtyZXR1cm4gZSYmdGhpcy5fc2l6ZS0tLHRoaXMub2xkQ2FjaGUuZGVsZXRlKHQpfHxlfWNsZWFyKCl7dGhpcy5jYWNoZS5jbGVhcigpLHRoaXMub2xkQ2FjaGUuY2xlYXIoKSx0aGlzLl9zaXplPTB9KmtleXMoKXtmb3IoY29uc3RbdF1vZiB0aGlzKXlpZWxkIHR9KnZhbHVlcygpe2Zvcihjb25zdFssdF1vZiB0aGlzKXlpZWxkIHR9KltTeW1ib2wuaXRlcmF0b3JdKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jYWNoZSl5aWVsZCB0O2Zvcihjb25zdCB0IG9mIHRoaXMub2xkQ2FjaGUpe2NvbnN0W2VdPXQ7dGhpcy5jYWNoZS5oYXMoZSl8fCh5aWVsZCB0KX19Z2V0IHNpemUoKXtsZXQgdD0wO2Zvcihjb25zdCBlIG9mIHRoaXMub2xkQ2FjaGUua2V5cygpKXRoaXMuY2FjaGUuaGFzKGUpfHx0Kys7cmV0dXJuIHRoaXMuX3NpemUrdH19dmFyIFJ2PVB2OyFmdW5jdGlvbih0KXt2YXIgZT1ILmV4cG9ydHM7bXIodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5kZWZhdWx0PXZvaWQgMDt2YXIgcj1lKG1yKSxuPWUoR3UpLGk9ZSh0Ziksbz1lKGhmKSxhPWUoa2YpLHM9ZShPZiksdT1lKEJmKSxmPWUoTWYpLGw9ZShMbCksYz1lKGpsLmV4cG9ydHMpLGg9ZShxZC5leHBvcnRzKSxkPWUoJGQuZXhwb3J0cykscD1lKE9sLmV4cG9ydHMpLHY9ZShqcCksZz1lKFJ2KTtmdW5jdGlvbiB5KHQsZSl7dmFyIHI9KDAsZi5kZWZhdWx0KSh0KTtpZih1LmRlZmF1bHQpe3ZhciBuPSgwLHUuZGVmYXVsdCkodCk7ZSYmKG49KDAscy5kZWZhdWx0KShuKS5jYWxsKG4sKGZ1bmN0aW9uKGUpe3JldHVybigwLGEuZGVmYXVsdCkodCxlKS5lbnVtZXJhYmxlfSkpKSxyLnB1c2guYXBwbHkocixuKX1yZXR1cm4gcn1mdW5jdGlvbiBiKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBzLHU9bnVsbCE9YXJndW1lbnRzW2VdP2FyZ3VtZW50c1tlXTp7fTtpZihlJTIpKDAsby5kZWZhdWx0KShzPXkoT2JqZWN0KHUpLCEwKSkuY2FsbChzLChmdW5jdGlvbihlKXsoMCxwLmRlZmF1bHQpKHQsZSx1W2VdKX0pKTtlbHNlIGlmKGkuZGVmYXVsdCkoMCxuLmRlZmF1bHQpKHQsKDAsaS5kZWZhdWx0KSh1KSk7ZWxzZXt2YXIgZjsoMCxvLmRlZmF1bHQpKGY9eShPYmplY3QodSkpKS5jYWxsKGYsKGZ1bmN0aW9uKGUpeygwLHIuZGVmYXVsdCkodCxlLCgwLGEuZGVmYXVsdCkodSxlKSl9KSl9fXJldHVybiB0fXZhciBtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1lLmZpbGVoYW5kbGUsbj1lLnJlbmFtZVJlZlNlcSxpPXZvaWQgMD09PW4/ZnVuY3Rpb24odCl7cmV0dXJuIHR9Om47KDAsaC5kZWZhdWx0KSh0aGlzLHQpLCgwLHAuZGVmYXVsdCkodGhpcywiZmlsZWhhbmRsZSIsdm9pZCAwKSwoMCxwLmRlZmF1bHQpKHRoaXMsInJlbmFtZVJlZlNlcSIsdm9pZCAwKSwoMCxwLmRlZmF1bHQpKHRoaXMsIl9wYXJzZUNhY2hlIix2b2lkIDApLHRoaXMuZmlsZWhhbmRsZT1yLHRoaXMucmVuYW1lUmVmU2VxPWl9dmFyIGUscjtyZXR1cm4oMCxkLmRlZmF1bHQpKHQsW3trZXk6Il9maW5kRmlyc3REYXRhIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciByPXQuZmlyc3REYXRhTGluZTt0LmZpcnN0RGF0YUxpbmU9cj9yLmNvbXBhcmVUbyhlKT4wP2U6cjplfX0se2tleToicGFyc2UiLHZhbHVlOihyPSgwLGMuZGVmYXVsdCkobC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoKXt2YXIgZSxyPXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIGwuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gZT1uLmxlbmd0aD4wJiZ2b2lkIDAhPT1uWzBdP25bMF06e30sdGhpcy5fcGFyc2VDYWNoZXx8KHRoaXMuX3BhcnNlQ2FjaGU9bmV3IHYuZGVmYXVsdCh7Y2FjaGU6bmV3IGcuZGVmYXVsdCh7bWF4U2l6ZToxfSksZmlsbDpmdW5jdGlvbih0LGUpe3JldHVybiByLl9wYXJzZShiKGIoe30sdCkse30se3NpZ25hbDplfSkpfX0pKSx0LmFicnVwdCgicmV0dXJuIix0aGlzLl9wYXJzZUNhY2hlLmdldCgiaW5kZXgiLGUsZS5zaWduYWwpKTtjYXNlIDM6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJoYXNSZWZTZXEiLHZhbHVlOihlPSgwLGMuZGVmYXVsdCkobC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHIsbj1hcmd1bWVudHM7cmV0dXJuIGwuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj1uLmxlbmd0aD4xJiZ2b2lkIDAhPT1uWzFdP25bMV06e30sdC5uZXh0PTMsdGhpcy5wYXJzZShyKTtjYXNlIDM6aWYodC50MT1lLHQudDA9dC5zZW50LmluZGljZXNbdC50MV0sdC50MCl7dC5uZXh0PTc7YnJlYWt9dC50MD17fTtjYXNlIDc6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLCEhdC50MC5iaW5JbmRleCk7Y2FzZSA4OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksdH0oKTt0LmRlZmF1bHQ9bX0oTHApO3ZhciBNdj17fSxMdj1NYXRoLmZsb29yLGp2PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5sZW5ndGgsbj1MdihyLzIpO3JldHVybiByPDg/enYodCxlKTpDdihqdih0LnNsaWNlKDAsbiksZSksanYodC5zbGljZShuKSxlKSxlKX0senY9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbixpPXQubGVuZ3RoLG89MTtvPGk7KXtmb3Iobj1vLHI9dFtvXTtuJiZlKHRbbi0xXSxyKT4wOyl0W25dPXRbLS1uXTtuIT09bysrJiYodFtuXT1yKX1yZXR1cm4gdH0sQ3Y9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj10Lmxlbmd0aCxpPWUubGVuZ3RoLG89MCxhPTAscz1bXTtvPG58fGE8aTspbzxuJiZhPGk/cy5wdXNoKHIodFtvXSxlW2FdKTw9MD90W28rK106ZVthKytdKTpzLnB1c2gobzxuP3RbbysrXTplW2ErK10pO3JldHVybiBzfSxOdj1qdixVdj1rdC5tYXRjaCgvZmlyZWZveFwvKFxkKykvaSksRnY9ISFVdiYmK1V2WzFdLER2PS9NU0lFfFRyaWRlbnQvLnRlc3Qoa3QpLHF2PWt0Lm1hdGNoKC9BcHBsZVdlYktpdFwvKFxkKylcLi8pLCR2PSEhcXYmJitxdlsxXSxadj12cixIdj1EdCxHdj1RdCxXdj1obixWdj1jbyxZdj1LLFh2PU52LEt2PXJmLEp2PUZ2LFF2PUR2LHRnPUl0LGVnPSR2LHJnPVtdLG5nPXJnLnNvcnQsaWc9WXYoKGZ1bmN0aW9uKCl7cmcuc29ydCh2b2lkIDApfSkpLG9nPVl2KChmdW5jdGlvbigpe3JnLnNvcnQobnVsbCl9KSksYWc9S3YoInNvcnQiKSxzZz0hWXYoKGZ1bmN0aW9uKCl7aWYodGcpcmV0dXJuIHRnPDcwO2lmKCEoSnYmJkp2PjMpKXtpZihRdilyZXR1cm4hMDtpZihlZylyZXR1cm4gZWc8NjAzO3ZhciB0LGUscixuLGk9IiI7Zm9yKHQ9NjU7dDw3Njt0Kyspe3N3aXRjaChlPVN0cmluZy5mcm9tQ2hhckNvZGUodCksdCl7Y2FzZSA2NjpjYXNlIDY5OmNhc2UgNzA6Y2FzZSA3MjpyPTM7YnJlYWs7Y2FzZSA2ODpjYXNlIDcxOnI9NDticmVhaztkZWZhdWx0OnI9Mn1mb3Iobj0wO248NDc7bisrKXJnLnB1c2goe2s6ZStuLHY6cn0pfWZvcihyZy5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiBlLnYtdC52fSkpLG49MDtuPHJnLmxlbmd0aDtuKyspZT1yZ1tuXS5rLmNoYXJBdCgwKSxpLmNoYXJBdChpLmxlbmd0aC0xKSE9PWUmJihpKz1lKTtyZXR1cm4iREdCRUZIQUNJSksiIT09aX19KSk7WnYoe3RhcmdldDoiQXJyYXkiLHByb3RvOiEwLGZvcmNlZDppZ3x8IW9nfHwhYWd8fCFzZ30se3NvcnQ6ZnVuY3Rpb24odCl7dm9pZCAwIT09dCYmSHYodCk7dmFyIGU9R3YodGhpcyk7aWYoc2cpcmV0dXJuIHZvaWQgMD09PXQ/bmcuY2FsbChlKTpuZy5jYWxsKGUsdCk7dmFyIHIsbixpPVtdLG89V3YoZS5sZW5ndGgpO2ZvcihuPTA7bjxvO24rKyluIGluIGUmJmkucHVzaChlW25dKTtmb3Iocj0oaT1YdihpLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiB2b2lkIDA9PT1yPy0xOnZvaWQgMD09PWU/MTp2b2lkIDAhPT10Pyt0KGUscil8fDA6VnYoZSk+VnYocik/MTotMX19KHQpKSkubGVuZ3RoLG49MDtuPHI7KWVbbl09aVtuKytdO2Zvcig7bjxvOylkZWxldGUgZVtuKytdO3JldHVybiBlfX0pO3ZhciB1Zz1zZigiQXJyYXkiKS5zb3J0LGZnPUFycmF5LnByb3RvdHlwZSxsZz1mdW5jdGlvbih0KXt2YXIgZT10LnNvcnQ7cmV0dXJuIHQ9PT1mZ3x8dCBpbnN0YW5jZW9mIEFycmF5JiZlPT09Zmcuc29ydD91ZzplfTt2cih7dGFyZ2V0OiJOdW1iZXIiLHN0YXQ6ITB9LHtNSU5fU0FGRV9JTlRFR0VSOi05MDA3MTk5MjU0NzQwOTkxfSk7dnIoe3RhcmdldDoiTnVtYmVyIixzdGF0OiEwfSx7TUFYX1NBRkVfSU5URUdFUjo5MDA3MTk5MjU0NzQwOTkxfSk7dmFyIGNnPVYsaGc9WSxkZz1bXS5zbGljZSxwZz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjIsaT1uP2RnLmNhbGwoYXJndW1lbnRzLDIpOnZvaWQgMDtyZXR1cm4gdChuP2Z1bmN0aW9uKCl7KGhnKGUpP2U6RnVuY3Rpb24oZSkpLmFwcGx5KHRoaXMsaSl9OmUscil9fTt2cih7Z2xvYmFsOiEwLGJpbmQ6ITAsZm9yY2VkOi9NU0lFIC5cLi8udGVzdChrdCl9LHtzZXRUaW1lb3V0OnBnKGNnLnNldFRpbWVvdXQpLHNldEludGVydmFsOnBnKGNnLnNldEludGVydmFsKX0pO3ZhciB2Zz15dC5zZXRUaW1lb3V0LGdnPUNkOyFmdW5jdGlvbih0KXt2YXIgZT1ILmV4cG9ydHM7bXIodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC50aW1lb3V0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZi5kZWZhdWx0KChmdW5jdGlvbihlKXtyZXR1cm4oMCx1LmRlZmF1bHQpKGUsdCl9KSl9LHQubG9uZ1RvTnVtYmVyPWZ1bmN0aW9uKHQpe2lmKHQuZ3JlYXRlclRoYW4ocy5kZWZhdWx0KXx8dC5sZXNzVGhhbihhLmRlZmF1bHQpKXRocm93IG5ldyBFcnJvcigiaW50ZWdlciBvdmVyZmxvdyIpO3JldHVybiB0LnRvTnVtYmVyKCl9LHQuY2hlY2tBYm9ydFNpZ25hbD1sLHQuYWJvcnRCcmVha1BvaW50PWZ1bmN0aW9uKHQpe3JldHVybiBjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdC5jYW5NZXJnZUJsb2Nrcz1oLHQubWFrZU9wdHM9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuImFib3J0ZWQiaW4gdD97c2lnbmFsOnR9OnR9LHQub3B0aW1pemVDaHVua3M9ZnVuY3Rpb24odCxlKXt2YXIgcj1bXSxvPW51bGw7aWYoMD09PXQubGVuZ3RoKXJldHVybiB0O3JldHVybigwLGkuZGVmYXVsdCkodCkuY2FsbCh0LChmdW5jdGlvbih0LGUpe3ZhciByPXQubWludi5ibG9ja1Bvc2l0aW9uLWUubWludi5ibG9ja1Bvc2l0aW9uO3JldHVybiAwIT09cj9yOnQubWludi5kYXRhUG9zaXRpb24tZS5taW52LmRhdGFQb3NpdGlvbn0pKSwoMCxuLmRlZmF1bHQpKHQpLmNhbGwodCwoZnVuY3Rpb24odCl7KCFlfHx0Lm1heHYuY29tcGFyZVRvKGUpPjApJiYobnVsbD09PW8/KHIucHVzaCh0KSxvPXQpOmgobyx0KT90Lm1heHYuY29tcGFyZVRvKG8ubWF4dik+MCYmKG8ubWF4dj10Lm1heHYpOihyLnB1c2godCksbz10KSl9KSkscn07dmFyIHI9ZShMbCksbj1lKGhmKSxpPWUobGcpLG89ZShqbC5leHBvcnRzKSxhPWUoLTkwMDcxOTkyNTQ3NDA5OTEpLHM9ZSg5MDA3MTk5MjU0NzQwOTkxKSx1PWUodmcpLGY9ZShnZyk7ZnVuY3Rpb24gbCh0KXtpZih0JiZ0LmFib3J0ZWQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgRE9NRXhjZXB0aW9uKXRocm93IG5ldyBET01FeGNlcHRpb24oImFib3J0ZWQiLCJBYm9ydEVycm9yIik7dmFyIGU9bmV3IEVycm9yKCJhYm9ydGVkIik7dGhyb3cgZS5jb2RlPSJFUlJfQUJPUlRFRCIsZX19ZnVuY3Rpb24gYygpe3JldHVybihjPSgwLG8uZGVmYXVsdCkoci5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7cmV0dXJuIHIuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC5uZXh0PTIsZi5kZWZhdWx0LnJlc29sdmUoKTtjYXNlIDI6bChlKTtjYXNlIDM6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0KX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBoKHQsZSl7cmV0dXJuIGUubWludi5ibG9ja1Bvc2l0aW9uLXQubWF4di5ibG9ja1Bvc2l0aW9uPDY1ZTMmJmUubWF4di5ibG9ja1Bvc2l0aW9uLXQubWludi5ibG9ja1Bvc2l0aW9uPDVlNn19KE12KSxmdW5jdGlvbih0KXt2YXIgZT1ILmV4cG9ydHM7bXIodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5kZWZhdWx0PXZvaWQgMDt2YXIgcj1lKCRvKSxuPWUoV28pLGk9ZShWbyksbz1lKGd1KSxhPWUocXUpLHM9ZShtciksdT1lKEd1KSxmPWUodGYpLGw9ZShoZiksYz1lKGtmKSxoPWUoT2YpLGQ9ZShCZikscD1lKE1mKSx2PWUodGwpLGc9ZShlbC5leHBvcnRzKSx5PWUoT2wuZXhwb3J0cyksYj1lKFJsKSxtPWUoTGwpLHc9ZShqbC5leHBvcnRzKSxfPWUoRGQpLHg9ZShxZC5leHBvcnRzKSxrPWUoJGQuZXhwb3J0cyksRT1lKFpkLmV4cG9ydHMpLEE9ZShZZC5leHBvcnRzKSxTPWUoUWQuZXhwb3J0cyksTz1lKGlwKSxUPUJwLEI9ZShNcCksST1lKExwKSxQPU12O2Z1bmN0aW9uIFIodCxlKXt2YXIgcztpZih2b2lkIDA9PT1vLmRlZmF1bHR8fG51bGw9PSgwLGkuZGVmYXVsdCkodCkpe2lmKCgwLG4uZGVmYXVsdCkodCl8fChzPWZ1bmN0aW9uKHQsZSl7dmFyIHI7aWYoIXQpcmV0dXJuO2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gTSh0LGUpO3ZhciBuPSgwLF8uZGVmYXVsdCkocj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpLmNhbGwociw4LC0xKTsiT2JqZWN0Ij09PW4mJnQuY29uc3RydWN0b3ImJihuPXQuY29uc3RydWN0b3IubmFtZSk7aWYoIk1hcCI9PT1ufHwiU2V0Ij09PW4pcmV0dXJuKDAsYS5kZWZhdWx0KSh0KTtpZigiQXJndW1lbnRzIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKXJldHVybiBNKHQsZSl9KHQpKXx8ZSYmdCYmIm51bWJlciI9PXR5cGVvZiB0Lmxlbmd0aCl7cyYmKHQ9cyk7dmFyIHU9MCxmPWZ1bmN0aW9uKCl7fTtyZXR1cm57czpmLG46ZnVuY3Rpb24oKXtyZXR1cm4gdT49dC5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOnRbdSsrXX19LGU6ZnVuY3Rpb24odCl7dGhyb3cgdH0sZjpmfX10aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9dmFyIGwsYz0hMCxoPSExO3JldHVybntzOmZ1bmN0aW9uKCl7cz0oMCxyLmRlZmF1bHQpKHQpfSxuOmZ1bmN0aW9uKCl7dmFyIHQ9cy5uZXh0KCk7cmV0dXJuIGM9dC5kb25lLHR9LGU6ZnVuY3Rpb24odCl7aD0hMCxsPXR9LGY6ZnVuY3Rpb24oKXt0cnl7Y3x8bnVsbD09cy5yZXR1cm58fHMucmV0dXJuKCl9ZmluYWxseXtpZihoKXRocm93IGx9fX19ZnVuY3Rpb24gTSh0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgcj0wLG49bmV3IEFycmF5KGUpO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufWZ1bmN0aW9uIEwodCxlKXt2YXIgcj0oMCxwLmRlZmF1bHQpKHQpO2lmKGQuZGVmYXVsdCl7dmFyIG49KDAsZC5kZWZhdWx0KSh0KTtlJiYobj0oMCxoLmRlZmF1bHQpKG4pLmNhbGwobiwoZnVuY3Rpb24oZSl7cmV0dXJuKDAsYy5kZWZhdWx0KSh0LGUpLmVudW1lcmFibGV9KSkpLHIucHVzaC5hcHBseShyLG4pfXJldHVybiByfWZ1bmN0aW9uIGoodCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIHIsbj1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2lmKGUlMikoMCxsLmRlZmF1bHQpKHI9TChPYmplY3QobiksITApKS5jYWxsKHIsKGZ1bmN0aW9uKGUpeygwLHkuZGVmYXVsdCkodCxlLG5bZV0pfSkpO2Vsc2UgaWYoZi5kZWZhdWx0KSgwLHUuZGVmYXVsdCkodCwoMCxmLmRlZmF1bHQpKG4pKTtlbHNle3ZhciBpOygwLGwuZGVmYXVsdCkoaT1MKE9iamVjdChuKSkpLmNhbGwoaSwoZnVuY3Rpb24oZSl7KDAscy5kZWZhdWx0KSh0LGUsKDAsYy5kZWZhdWx0KShuLGUpKX0pKX19cmV0dXJuIHR9ZnVuY3Rpb24geih0KXt2YXIgZT1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IXYuZGVmYXVsdClyZXR1cm4hMTtpZih2LmRlZmF1bHQuc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCgwLHYuZGVmYXVsdCkoRGF0ZSxbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKF9FKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj0oMCxTLmRlZmF1bHQpKHQpO2lmKGUpe3ZhciBpPSgwLFMuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7cj0oMCx2LmRlZmF1bHQpKG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4oMCxBLmRlZmF1bHQpKHRoaXMscil9fXZhciBDPTIxNTc4MDUwO2Z1bmN0aW9uIE4odCxlKXtyZXR1cm4gdC10JWV9ZnVuY3Rpb24gVSh0LGUpe3JldHVybiB0LXQlZStlfXZhciBGPWZ1bmN0aW9uKHQpeygwLEUuZGVmYXVsdCkoYSx0KTt2YXIgZSxyLG4saSxvPXooYSk7ZnVuY3Rpb24gYSgpe3JldHVybigwLHguZGVmYXVsdCkodGhpcyxhKSxvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4oMCxrLmRlZmF1bHQpKGEsW3trZXk6InBhcnNlUHNldWRvQmluIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybntsaW5lQ291bnQ6KDAsUC5sb25nVG9OdW1iZXIpKE8uZGVmYXVsdC5mcm9tQnl0ZXNMRSgoMCxfLmRlZmF1bHQpKEFycmF5LnByb3RvdHlwZSkuY2FsbCh0LGUrMTYsZSsyNCksITApKX19fSx7a2V5OiJsaW5lQ291bnQiLHZhbHVlOihpPSgwLHcuZGVmYXVsdCkobS5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHIsbixpLG8sYT1hcmd1bWVudHM7cmV0dXJuIG0uZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj1hLmxlbmd0aD4xJiZ2b2lkIDAhPT1hWzFdP2FbMV06e30sdC5uZXh0PTMsdGhpcy5wYXJzZShyKTtjYXNlIDM6aWYobj10LnNlbnQsaT1uLmluZGljZXNbZV0pe3QubmV4dD03O2JyZWFrfXJldHVybiB0LmFicnVwdCgicmV0dXJuIiwtMSk7Y2FzZSA3OnJldHVybiBvPWkuc3RhdHN8fHt9LHQuYWJydXB0KCJyZXR1cm4iLHZvaWQgMD09PW8ubGluZUNvdW50Py0xOm8ubGluZUNvdW50KTtjYXNlIDk6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0KXtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiX3BhcnNlIix2YWx1ZToobj0oMCx3LmRlZmF1bHQpKG0uZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KCl7dmFyIGUscixuLGksbyxhLHMsdSxmLGwsYyxoLGQscCx2LGcseSxiLHcsXz1hcmd1bWVudHM7cmV0dXJuIG0uZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gZT1fLmxlbmd0aD4wJiZ2b2lkIDAhPT1fWzBdP19bMF06e30scj17YmFpOiEwLG1heEJsb2NrU2l6ZTo2NTUzNn0sdC5uZXh0PTQsdGhpcy5maWxlaGFuZGxlLnJlYWRGaWxlKGUpO2Nhc2UgNDppZigobj10LnNlbnQpLnJlYWRVSW50MzJMRSgwKT09PUMpe3QubmV4dD03O2JyZWFrfXRocm93IG5ldyBFcnJvcigiTm90IGEgQkFJIGZpbGUiKTtjYXNlIDc6ci5yZWZDb3VudD1uLnJlYWRJbnQzMkxFKDQpLGk9Mzc0NDksci5pbmRpY2VzPW5ldyBBcnJheShyLnJlZkNvdW50KSxvPTgsYT0wO2Nhc2UgMTM6aWYoIShhPHIucmVmQ291bnQpKXt0Lm5leHQ9NTA7YnJlYWt9cmV0dXJuIHQubmV4dD0xNiwoMCxQLmFib3J0QnJlYWtQb2ludCkoZS5zaWduYWwpO2Nhc2UgMTY6cz1uLnJlYWRJbnQzMkxFKG8pLHU9dm9pZCAwLG8rPTQsZj17fSxsPTA7Y2FzZSAyMTppZighKGw8cykpe3QubmV4dD00MjticmVha31pZihjPW4ucmVhZFVJbnQzMkxFKG8pLG8rPTQsYyE9PWkrMSl7dC5uZXh0PTMwO2JyZWFrfW8rPTQsdT10aGlzLnBhcnNlUHNldWRvQmluKG4sbyksbys9MzIsdC5uZXh0PTM5O2JyZWFrO2Nhc2UgMzA6aWYoIShjPmkrMSkpe3QubmV4dD0zNDticmVha310aHJvdyBuZXcgRXJyb3IoImJhaSBpbmRleCBjb250YWlucyB0b28gbWFueSBiaW5zLCBwbGVhc2UgdXNlIENTSSIpO2Nhc2UgMzQ6Zm9yKGg9bi5yZWFkSW50MzJMRShvKSxvKz00LGQ9bmV3IEFycmF5KGgpLHA9MDtwPGg7cCs9MSl2PSgwLFQuZnJvbUJ5dGVzKShuLG8pLGc9KDAsVC5mcm9tQnl0ZXMpKG4sbys4KSxvKz0xNix0aGlzLl9maW5kRmlyc3REYXRhKHIsdiksZFtwXT1uZXcgQi5kZWZhdWx0KHYsZyxjKTtmW2NdPWQ7Y2FzZSAzOTpsKz0xLHQubmV4dD0yMTticmVhaztjYXNlIDQyOmZvcih5PW4ucmVhZEludDMyTEUobyksbys9NCxiPW5ldyBBcnJheSh5KSx3PTA7dzx5O3crPTEpYlt3XT0oMCxULmZyb21CeXRlcykobixvKSxvKz04LHRoaXMuX2ZpbmRGaXJzdERhdGEocixiW3ddKTtyLmluZGljZXNbYV09e2JpbkluZGV4OmYsbGluZWFySW5kZXg6YixzdGF0czp1fTtjYXNlIDQ3OmErPTEsdC5uZXh0PTEzO2JyZWFrO2Nhc2UgNTA6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHIpO2Nhc2UgNTE6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJpbmRleENvdiIsdmFsdWU6KHI9KDAsdy5kZWZhdWx0KShtLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlLHIsbil7dmFyIGksbyxhLHMsdSxmLGwsYyxoLGQscCx2LGcseSx3LF89YXJndW1lbnRzO3JldHVybiBtLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIGk9Xy5sZW5ndGg+MyYmdm9pZCAwIT09X1szXT9fWzNdOnt9LG89MTYzODQsYT12b2lkIDAhPT1yLHQubmV4dD01LHRoaXMucGFyc2UoaSk7Y2FzZSA1OmlmKHM9dC5zZW50LHU9cy5pbmRpY2VzW2VdKXt0Lm5leHQ9OTticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsW10pO2Nhc2UgOTppZihmPXUubGluZWFySW5kZXgsbD12b2lkIDA9PT1mP1tdOmYsYz11LnN0YXRzLGwubGVuZ3RoKXt0Lm5leHQ9MTI7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLFtdKTtjYXNlIDEyOmlmKGg9dm9pZCAwIT09bj9VKG4sbyk6KGwubGVuZ3RoLTEpKm8sZD12b2lkIDAhPT1yP04ocixvKTowLHA9bmV3IEFycmF5KGE/KGgtZCkvbzpsLmxlbmd0aC0xKSx2PWxbbC5sZW5ndGgtMV0uYmxvY2tQb3NpdGlvbiwhKGg+KGwubGVuZ3RoLTEpKm8pKXt0Lm5leHQ9MTg7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJxdWVyeSBvdXRzaWRlIG9mIHJhbmdlIG9mIGxpbmVhciBpbmRleCIpO2Nhc2UgMTg6Zm9yKGc9bFtkL29dLmJsb2NrUG9zaXRpb24seT1kL28sdz0wO3k8aC9vO3krKyx3KyspcFt3XT17c2NvcmU6bFt5KzFdLmJsb2NrUG9zaXRpb24tZyxzdGFydDp5Km8sZW5kOnkqbytvfSxnPWxbeSsxXS5ibG9ja1Bvc2l0aW9uO3JldHVybiB0LmFicnVwdCgicmV0dXJuIiwoMCxiLmRlZmF1bHQpKHApLmNhbGwocCwoZnVuY3Rpb24odCl7cmV0dXJuIGooaih7fSx0KSx7fSx7c2NvcmU6dC5zY29yZSpjLmxpbmVDb3VudC92fSl9KSkpO2Nhc2UgMjE6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0LGUsbil7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6InJlZzJiaW5zIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybltbMCwwXSxbMSsodD4+MjYpLDErKChlLT0xKT4+MjYpXSxbOSsodD4+MjMpLDkrKGU+PjIzKV0sWzczKyh0Pj4yMCksNzMrKGU+PjIwKV0sWzU4NSsodD4+MTcpLDU4NSsoZT4+MTcpXSxbNDY4MSsodD4+MTQpLDQ2ODErKGU+PjE0KV1dfX0se2tleToiYmxvY2tzRm9yUmFuZ2UiLHZhbHVlOihlPSgwLHcuZGVmYXVsdCkobS5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyLG4pe3ZhciBpLG8sYSxzLHUsZixsLGMsaCxkLHAsdix5LGIsdyxfLHgsayxFLEE9YXJndW1lbnRzO3JldHVybiBtLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIGk9QS5sZW5ndGg+MyYmdm9pZCAwIT09QVszXT9BWzNdOnt9LHI8MCYmKHI9MCksdC5uZXh0PTQsdGhpcy5wYXJzZShpKTtjYXNlIDQ6aWYobz10LnNlbnQpe3QubmV4dD03O2JyZWFrfXJldHVybiB0LmFicnVwdCgicmV0dXJuIixbXSk7Y2FzZSA3OmlmKGE9by5pbmRpY2VzW2VdKXt0Lm5leHQ9MTA7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLFtdKTtjYXNlIDEwOnM9dGhpcy5yZWcyYmlucyhyLG4pLHU9W10sZj1SKHMpO3RyeXtmb3IoZi5zKCk7IShsPWYubigpKS5kb25lOylmb3IoYz0oMCxnLmRlZmF1bHQpKGwudmFsdWUsMiksaD1jWzBdLGQ9Y1sxXSxwPWg7cDw9ZDtwKyspaWYoYS5iaW5JbmRleFtwXSlmb3Iodj1hLmJpbkluZGV4W3BdLHk9MDt5PHYubGVuZ3RoOysreSl1LnB1c2gobmV3IEIuZGVmYXVsdCh2W3ldLm1pbnYsdlt5XS5tYXh2LHApKX1jYXRjaChtKXtmLmUobSl9ZmluYWxseXtmLmYoKX1mb3IoYj1hLmxpbmVhckluZGV4Lmxlbmd0aCx3PW51bGwsXz1NYXRoLm1pbihyPj4xNCxiLTEpLHg9TWF0aC5taW4obj4+MTQsYi0xKSxrPV87azw9eDsrK2spKEU9YS5saW5lYXJJbmRleFtrXSkmJighd3x8RS5jb21wYXJlVG8odyk8MCkmJih3PUUpO3JldHVybiB0LmFicnVwdCgicmV0dXJuIiwoMCxQLm9wdGltaXplQ2h1bmtzKSh1LHcpKTtjYXNlIDIwOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24odCxyLG4pe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLGF9KEkuZGVmYXVsdCk7dC5kZWZhdWx0PUZ9KHdyKTt2YXIgeWc9e30sYmc9e2V4cG9ydHM6e319LG1nPXtleHBvcnRzOnt9fSx3Zz0hSygoZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pKSxfZz12cix4Zz1DcixrZz1ndCxFZz1yZSxBZz1ZZS5mLFNnPXphLE9nPVVhLFRnPXdnLEJnPSExLElnPW9lKCJtZXRhIiksUGc9MCxSZz1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxNZz1mdW5jdGlvbih0KXtBZyh0LElnLHt2YWx1ZTp7b2JqZWN0SUQ6Ik8iK1BnKyssd2Vha0RhdGE6e319fSl9LExnPW1nLmV4cG9ydHM9e2VuYWJsZTpmdW5jdGlvbigpe0xnLmVuYWJsZT1mdW5jdGlvbigpe30sQmc9ITA7dmFyIHQ9U2cuZixlPVtdLnNwbGljZSxyPXt9O3JbSWddPTEsdChyKS5sZW5ndGgmJihTZy5mPWZ1bmN0aW9uKHIpe2Zvcih2YXIgbj10KHIpLGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspaWYobltpXT09PUlnKXtlLmNhbGwobixpLDEpO2JyZWFrfXJldHVybiBufSxfZyh7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOiEwfSx7Z2V0T3duUHJvcGVydHlOYW1lczpPZy5mfSkpfSxmYXN0S2V5OmZ1bmN0aW9uKHQsZSl7aWYoIWtnKHQpKXJldHVybiJzeW1ib2wiPT10eXBlb2YgdD90Oigic3RyaW5nIj09dHlwZW9mIHQ/IlMiOiJQIikrdDtpZighRWcodCxJZykpe2lmKCFSZyh0KSlyZXR1cm4iRiI7aWYoIWUpcmV0dXJuIkUiO01nKHQpfXJldHVybiB0W0lnXS5vYmplY3RJRH0sZ2V0V2Vha0RhdGE6ZnVuY3Rpb24odCxlKXtpZighRWcodCxJZykpe2lmKCFSZyh0KSlyZXR1cm4hMDtpZighZSlyZXR1cm4hMTtNZyh0KX1yZXR1cm4gdFtJZ10ud2Vha0RhdGF9LG9uRnJlZXplOmZ1bmN0aW9uKHQpe3JldHVybiBUZyYmQmcmJlJnKHQpJiYhRWcodCxJZykmJk1nKHQpLHR9fTt4Z1tJZ109ITA7dmFyIGpnPXZyLHpnPVYsQ2c9bWcuZXhwb3J0cyxOZz1LLFVnPW9yLEZnPVpsLERnPWNjLHFnPVksJGc9Z3QsWmc9UmksSGc9WWUuZixHZz1vcy5mb3JFYWNoLFdnPUosVmc9UXIuc2V0LFlnPVFyLmdldHRlckZvcixYZz1hYyxLZz1tZy5leHBvcnRzLmdldFdlYWtEYXRhLEpnPUtlLFFnPWd0LHR5PWNjLGV5PVpsLHJ5PXJlLG55PVFyLnNldCxpeT1Rci5nZXR0ZXJGb3Isb3k9b3MuZmluZCxheT1vcy5maW5kSW5kZXgsc3k9MCx1eT1mdW5jdGlvbih0KXtyZXR1cm4gdC5mcm96ZW58fCh0LmZyb3plbj1uZXcgZnkpfSxmeT1mdW5jdGlvbigpe3RoaXMuZW50cmllcz1bXX0sbHk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gb3kodC5lbnRyaWVzLChmdW5jdGlvbih0KXtyZXR1cm4gdFswXT09PWV9KSl9O2Z5LnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKHQpe3ZhciBlPWx5KHRoaXMsdCk7aWYoZSlyZXR1cm4gZVsxXX0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhbHkodGhpcyx0KX0sc2V0OmZ1bmN0aW9uKHQsZSl7dmFyIHI9bHkodGhpcyx0KTtyP3JbMV09ZTp0aGlzLmVudHJpZXMucHVzaChbdCxlXSl9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT1heSh0aGlzLmVudHJpZXMsKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdPT09dH0pKTtyZXR1cm5+ZSYmdGhpcy5lbnRyaWVzLnNwbGljZShlLDEpLCEhfmV9fTt2YXIgY3ksaHk9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPXQoKGZ1bmN0aW9uKHQsbyl7dHkodCxpLGUpLG55KHQse3R5cGU6ZSxpZDpzeSsrLGZyb3plbjp2b2lkIDB9KSxudWxsIT1vJiZleShvLHRbbl0se3RoYXQ6dCxBU19FTlRSSUVTOnJ9KX0pKSxvPWl5KGUpLGE9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPW8odCksaT1LZyhKZyhlKSwhMCk7cmV0dXJuITA9PT1pP3V5KG4pLnNldChlLHIpOmlbbi5pZF09cix0fTtyZXR1cm4gWGcoaS5wcm90b3R5cGUse2RlbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT1vKHRoaXMpO2lmKCFRZyh0KSlyZXR1cm4hMTt2YXIgcj1LZyh0KTtyZXR1cm4hMD09PXI/dXkoZSkuZGVsZXRlKHQpOnImJnJ5KHIsZS5pZCkmJmRlbGV0ZSByW2UuaWRdfSxoYXM6ZnVuY3Rpb24odCl7dmFyIGU9byh0aGlzKTtpZighUWcodCkpcmV0dXJuITE7dmFyIHI9S2codCk7cmV0dXJuITA9PT1yP3V5KGUpLmhhcyh0KTpyJiZyeShyLGUuaWQpfX0pLFhnKGkucHJvdG90eXBlLHI/e2dldDpmdW5jdGlvbih0KXt2YXIgZT1vKHRoaXMpO2lmKFFnKHQpKXt2YXIgcj1LZyh0KTtyZXR1cm4hMD09PXI/dXkoZSkuZ2V0KHQpOnI/cltlLmlkXTp2b2lkIDB9fSxzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gYSh0aGlzLHQsZSl9fTp7YWRkOmZ1bmN0aW9uKHQpe3JldHVybiBhKHRoaXMsdCwhMCl9fSksaX19LGR5PVYscHk9YWMsdnk9bWcuZXhwb3J0cyxneT1mdW5jdGlvbih0LGUscil7dmFyIG4saT0tMSE9PXQuaW5kZXhPZigiTWFwIiksbz0tMSE9PXQuaW5kZXhPZigiV2VhayIpLGE9aT8ic2V0IjoiYWRkIixzPXpnW3RdLHU9cyYmcy5wcm90b3R5cGUsZj17fTtpZihXZyYmcWcocykmJihvfHx1LmZvckVhY2gmJiFOZygoZnVuY3Rpb24oKXsobmV3IHMpLmVudHJpZXMoKS5uZXh0KCl9KSkpKXtuPWUoKGZ1bmN0aW9uKGUscil7VmcoRGcoZSxuLHQpLHt0eXBlOnQsY29sbGVjdGlvbjpuZXcgc30pLG51bGwhPXImJkZnKHIsZVthXSx7dGhhdDplLEFTX0VOVFJJRVM6aX0pfSkpO3ZhciBsPVlnKHQpO0dnKFsiYWRkIiwiY2xlYXIiLCJkZWxldGUiLCJmb3JFYWNoIiwiZ2V0IiwiaGFzIiwic2V0Iiwia2V5cyIsInZhbHVlcyIsImVudHJpZXMiXSwoZnVuY3Rpb24odCl7dmFyIGU9ImFkZCI9PXR8fCJzZXQiPT10OyEodCBpbiB1KXx8byYmImNsZWFyIj09dHx8VWcobi5wcm90b3R5cGUsdCwoZnVuY3Rpb24ocixuKXt2YXIgaT1sKHRoaXMpLmNvbGxlY3Rpb247aWYoIWUmJm8mJiEkZyhyKSlyZXR1cm4iZ2V0Ij09dCYmdm9pZCAwO3ZhciBhPWlbdF0oMD09PXI/MDpyLG4pO3JldHVybiBlP3RoaXM6YX0pKX0pKSxvfHxIZyhuLnByb3RvdHlwZSwic2l6ZSIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbCh0aGlzKS5jb2xsZWN0aW9uLnNpemV9fSl9ZWxzZSBuPXIuZ2V0Q29uc3RydWN0b3IoZSx0LGksYSksQ2cuZW5hYmxlKCk7cmV0dXJuIFpnKG4sdCwhMSwhMCksZlt0XT1uLGpnKHtnbG9iYWw6ITAsZm9yY2VkOiEwfSxmKSxvfHxyLnNldFN0cm9uZyhuLHQsaSksbn0seXk9aHksYnk9Z3QsbXk9UXIuZW5mb3JjZSx3eT1ScixfeT0hZHkuQWN0aXZlWE9iamVjdCYmIkFjdGl2ZVhPYmplY3QiaW4gZHkseHk9T2JqZWN0LmlzRXh0ZW5zaWJsZSxreT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSxFeT1neSgiV2Vha01hcCIsa3kseXkpO2lmKHd5JiZfeSl7Y3k9eXkuZ2V0Q29uc3RydWN0b3Ioa3ksIldlYWtNYXAiLCEwKSx2eS5lbmFibGUoKTt2YXIgQXk9RXkucHJvdG90eXBlLFN5PUF5LmRlbGV0ZSxPeT1BeS5oYXMsVHk9QXkuZ2V0LEJ5PUF5LnNldDtweShBeSx7ZGVsZXRlOmZ1bmN0aW9uKHQpe2lmKGJ5KHQpJiYheHkodCkpe3ZhciBlPW15KHRoaXMpO3JldHVybiBlLmZyb3plbnx8KGUuZnJvemVuPW5ldyBjeSksU3kuY2FsbCh0aGlzLHQpfHxlLmZyb3plbi5kZWxldGUodCl9cmV0dXJuIFN5LmNhbGwodGhpcyx0KX0saGFzOmZ1bmN0aW9uKHQpe2lmKGJ5KHQpJiYheHkodCkpe3ZhciBlPW15KHRoaXMpO3JldHVybiBlLmZyb3plbnx8KGUuZnJvemVuPW5ldyBjeSksT3kuY2FsbCh0aGlzLHQpfHxlLmZyb3plbi5oYXModCl9cmV0dXJuIE95LmNhbGwodGhpcyx0KX0sZ2V0OmZ1bmN0aW9uKHQpe2lmKGJ5KHQpJiYheHkodCkpe3ZhciBlPW15KHRoaXMpO3JldHVybiBlLmZyb3plbnx8KGUuZnJvemVuPW5ldyBjeSksT3kuY2FsbCh0aGlzLHQpP1R5LmNhbGwodGhpcyx0KTplLmZyb3plbi5nZXQodCl9cmV0dXJuIFR5LmNhbGwodGhpcyx0KX0sc2V0OmZ1bmN0aW9uKHQsZSl7aWYoYnkodCkmJiF4eSh0KSl7dmFyIHI9bXkodGhpcyk7ci5mcm96ZW58fChyLmZyb3plbj1uZXcgY3kpLE95LmNhbGwodGhpcyx0KT9CeS5jYWxsKHRoaXMsdCxlKTpyLmZyb3plbi5zZXQodCxlKX1lbHNlIEJ5LmNhbGwodGhpcyx0LGUpO3JldHVybiB0aGlzfX0pfXZhciBJeT15dC5XZWFrTWFwLFB5PUtlO3ZyKHt0YXJnZXQ6IldlYWtNYXAiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOnRydWV9LHtlbXBsYWNlOmZ1bmN0aW9uKHQsZSl7dmFyIHI9UHkodGhpcyksbj1yLmhhcyh0KSYmInVwZGF0ZSJpbiBlP2UudXBkYXRlKHIuZ2V0KHQpLHQscik6ZS5pbnNlcnQodCxyKTtyZXR1cm4gci5zZXQodCxuKSxufX0pO3ZhciBSeT1EdCxNeT16ZixMeT1WZSxqeT1abDt2cih7dGFyZ2V0OiJXZWFrTWFwIixzdGF0OiEwfSx7ZnJvbTpmdW5jdGlvbih0KXt2YXIgZSxyLG4saSxvPWFyZ3VtZW50cy5sZW5ndGgsYT1vPjE/YXJndW1lbnRzWzFdOnZvaWQgMDtyZXR1cm4gTXkodGhpcyksKGU9dm9pZCAwIT09YSkmJlJ5KGEpLG51bGw9PXQ/bmV3IHRoaXM6KHI9W10sZT8obj0wLGk9THkoYSxvPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSxqeSh0LChmdW5jdGlvbih0KXtyLnB1c2goaSh0LG4rKykpfSkpKTpqeSh0LHIucHVzaCx7dGhhdDpyfSksbmV3IHRoaXMocikpfX0pO3ZyKHt0YXJnZXQ6IldlYWtNYXAiLHN0YXQ6ITB9LHtvZjpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9bmV3IEFycmF5KHQpO3QtLTspZVt0XT1hcmd1bWVudHNbdF07cmV0dXJuIG5ldyB0aGlzKGUpfX0pO3ZhciB6eT1EdCxDeT1LZSxOeT1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPUN5KHRoaXMpLHI9enkoZS5kZWxldGUpLG49ITAsaT0wLG89YXJndW1lbnRzLmxlbmd0aDtpPG87aSsrKXQ9ci5jYWxsKGUsYXJndW1lbnRzW2ldKSxuPW4mJnQ7cmV0dXJuISFufTt2cih7dGFyZ2V0OiJXZWFrTWFwIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDp0cnVlfSx7ZGVsZXRlQWxsOmZ1bmN0aW9uKCl7cmV0dXJuIE55LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTt2YXIgVXk9WSxGeT1LZTt2cih7dGFyZ2V0OiJXZWFrTWFwIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDp0cnVlfSx7dXBzZXJ0OmZ1bmN0aW9uKHQsZSl7dmFyIHIsbj1GeSh0aGlzKSxpPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwO2lmKCFVeShlKSYmIVV5KGkpKXRocm93IFR5cGVFcnJvcigiQXQgbGVhc3Qgb25lIGNhbGxiYWNrIHJlcXVpcmVkIik7cmV0dXJuIG4uaGFzKHQpPyhyPW4uZ2V0KHQpLFV5KGUpJiYocj1lKHIpLG4uc2V0KHQscikpKTpVeShpKSYmKHI9aSgpLG4uc2V0KHQscikpLHJ9fSk7dmFyIER5PUl5LHF5PXhmOyFmdW5jdGlvbih0KXt2YXIgZT1YZC5leHBvcnRzLmRlZmF1bHQscj1EeSxuPVRsLGk9cXk7ZnVuY3Rpb24gbyh0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgcilyZXR1cm4gbnVsbDt2YXIgZT1uZXcgcixuPW5ldyByO3JldHVybihvPWZ1bmN0aW9uKHQpe3JldHVybiB0P246ZX0pKHQpfXQuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2lmKCFyJiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7aWYobnVsbD09PXR8fCJvYmplY3QiIT09ZSh0KSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpcmV0dXJue2RlZmF1bHQ6dH07dmFyIGE9byhyKTtpZihhJiZhLmhhcyh0KSlyZXR1cm4gYS5nZXQodCk7dmFyIHM9e30sdT1uJiZpO2Zvcih2YXIgZiBpbiB0KWlmKCJkZWZhdWx0IiE9PWYmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGYpKXt2YXIgbD11P2kodCxmKTpudWxsO2wmJihsLmdldHx8bC5zZXQpP24ocyxmLGwpOnNbZl09dFtmXX1yZXR1cm4gcy5kZWZhdWx0PXQsYSYmYS5zZXQodCxzKSxzfSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KGJnKTt2YXIgJHk9SixaeT1LLEh5PUluLEd5PVphLFd5PVEsVnk9UXQsWXk9bHQsWHk9T2JqZWN0LmFzc2lnbixLeT1PYmplY3QuZGVmaW5lUHJvcGVydHksSnk9IVh5fHxaeSgoZnVuY3Rpb24oKXtpZigkeSYmMSE9PVh5KHtiOjF9LFh5KEt5KHt9LCJhIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtLeSh0aGlzLCJiIix7dmFsdWU6MyxlbnVtZXJhYmxlOiExfSl9fSkse2I6Mn0pKS5iKXJldHVybiEwO3ZhciB0PXt9LGU9e30scj1TeW1ib2woKSxuPSJhYmNkZWZnaGlqa2xtbm9wcXJzdCI7cmV0dXJuIHRbcl09NyxuLnNwbGl0KCIiKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlW3RdPXR9KSksNyE9WHkoe30sdClbcl18fEh5KFh5KHt9LGUpKS5qb2luKCIiKSE9bn0pKT9mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj1WeSh0KSxuPWFyZ3VtZW50cy5sZW5ndGgsaT0xLG89R3kuZixhPVd5LmY7bj5pOylmb3IodmFyIHMsdT1ZeShhcmd1bWVudHNbaSsrXSksZj1vP0h5KHUpLmNvbmNhdChvKHUpKTpIeSh1KSxsPWYubGVuZ3RoLGM9MDtsPmM7KXM9ZltjKytdLCR5JiYhYS5jYWxsKHUscyl8fChyW3NdPXVbc10pO3JldHVybiByfTpYeTt2cih7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOk9iamVjdC5hc3NpZ24hPT1KeX0se2Fzc2lnbjpKeX0pO3ZhciBReT15dC5PYmplY3QuYXNzaWduLHRiPXtleHBvcnRzOnt9fSxlYj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0fSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KGViKTt2YXIgcmI9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgcj1udWxsPT10P251bGw6InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnRbU3ltYm9sLml0ZXJhdG9yXXx8dFsiQEBpdGVyYXRvciJdO2lmKG51bGwhPXIpe3ZhciBuLGksbz1bXSxhPSEwLHM9ITE7dHJ5e2ZvcihyPXIuY2FsbCh0KTshKGE9KG49ci5uZXh0KCkpLmRvbmUpJiYoby5wdXNoKG4udmFsdWUpLCFlfHxvLmxlbmd0aCE9PWUpO2E9ITApO31jYXRjaCh1KXtzPSEwLGk9dX1maW5hbGx5e3RyeXthfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKX1maW5hbGx5e2lmKHMpdGhyb3cgaX19cmV0dXJuIG99fSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KHJiKTt2YXIgbmI9e2V4cG9ydHM6e319LGliPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciByPTAsbj1uZXcgQXJyYXkoZSk7cjxlO3IrKyluW3JdPXRbcl07cmV0dXJuIG59LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oaWIpLGZ1bmN0aW9uKHQpe3ZhciBlPWliLmV4cG9ydHM7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7aWYodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiBlKHQscik7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKHQpOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/ZSh0LHIpOnZvaWQgMH19LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0obmIpO3ZhciBvYj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3QuZXhwb3J0cz1mdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0ob2IpLGZ1bmN0aW9uKHQpe3ZhciBlPWViLmV4cG9ydHMscj1yYi5leHBvcnRzLG49bmIuZXhwb3J0cyxpPW9iLmV4cG9ydHM7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbyl7cmV0dXJuIGUodCl8fHIodCxvKXx8bih0LG8pfHxpKCl9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0odGIpO3ZhciBhYj1NbC5leHBvcnRzLHNiPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUscixuLGksbyxhKXt0cnl7dmFyIHM9dFtvXShhKSx1PXMudmFsdWV9Y2F0Y2god0Upe3JldHVybiB2b2lkIHIod0UpfXMuZG9uZT9lKHUpOlByb21pc2UucmVzb2x2ZSh1KS50aGVuKG4saSl9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciByPXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihpLG8pe3ZhciBhPXQuYXBwbHkocixuKTtmdW5jdGlvbiBzKHQpe2UoYSxpLG8scyx1LCJuZXh0Iix0KX1mdW5jdGlvbiB1KHQpe2UoYSxpLG8scyx1LCJ0aHJvdyIsdCl9cyh2b2lkIDApfSkpfX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShzYik7dmFyIHViPXt9OyFmdW5jdGlvbih0KXt2YXIgZT0idW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXkmJiJ1bmRlZmluZWQiIT10eXBlb2YgVWludDE2QXJyYXkmJiJ1bmRlZmluZWQiIT10eXBlb2YgSW50MzJBcnJheTtmdW5jdGlvbiByKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfXQuYXNzaWduPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7ZS5sZW5ndGg7KXt2YXIgbj1lLnNoaWZ0KCk7aWYobil7aWYoIm9iamVjdCIhPXR5cGVvZiBuKXRocm93IG5ldyBUeXBlRXJyb3IobisibXVzdCBiZSBub24tb2JqZWN0Iik7Zm9yKHZhciBpIGluIG4pcihuLGkpJiYodFtpXT1uW2ldKX19cmV0dXJuIHR9LHQuc2hyaW5rQnVmPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubGVuZ3RoPT09ZT90OnQuc3ViYXJyYXk/dC5zdWJhcnJheSgwLGUpOih0Lmxlbmd0aD1lLHQpfTt2YXIgbj17YXJyYXlTZXQ6ZnVuY3Rpb24odCxlLHIsbixpKXtpZihlLnN1YmFycmF5JiZ0LnN1YmFycmF5KXQuc2V0KGUuc3ViYXJyYXkocixyK24pLGkpO2Vsc2UgZm9yKHZhciBvPTA7bzxuO28rKyl0W2krb109ZVtyK29dfSxmbGF0dGVuQ2h1bmtzOmZ1bmN0aW9uKHQpe3ZhciBlLHIsbixpLG8sYTtmb3Iobj0wLGU9MCxyPXQubGVuZ3RoO2U8cjtlKyspbis9dFtlXS5sZW5ndGg7Zm9yKGE9bmV3IFVpbnQ4QXJyYXkobiksaT0wLGU9MCxyPXQubGVuZ3RoO2U8cjtlKyspbz10W2VdLGEuc2V0KG8saSksaSs9by5sZW5ndGg7cmV0dXJuIGF9fSxpPXthcnJheVNldDpmdW5jdGlvbih0LGUscixuLGkpe2Zvcih2YXIgbz0wO288bjtvKyspdFtpK29dPWVbcitvXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbih0KXtyZXR1cm5bXS5jb25jYXQuYXBwbHkoW10sdCl9fTt0LnNldFR5cGVkPWZ1bmN0aW9uKGUpe2U/KHQuQnVmOD1VaW50OEFycmF5LHQuQnVmMTY9VWludDE2QXJyYXksdC5CdWYzMj1JbnQzMkFycmF5LHQuYXNzaWduKHQsbikpOih0LkJ1Zjg9QXJyYXksdC5CdWYxNj1BcnJheSx0LkJ1ZjMyPUFycmF5LHQuYXNzaWduKHQsaSkpfSx0LnNldFR5cGVkKGUpfSh1Yik7dmFyIGZiPXt9LGxiPXt9LGNiPXt9LGhiPXViO2Z1bmN0aW9uIGRiKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH12YXIgcGI9MjU2LHZiPTI4NixnYj0zMCx5Yj0xNSxiYj1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSxtYj1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sd2I9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwzLDddLF9iPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSx4Yj1uZXcgQXJyYXkoNTc2KTtkYih4Yik7dmFyIGtiPW5ldyBBcnJheSg2MCk7ZGIoa2IpO3ZhciBFYj1uZXcgQXJyYXkoNTEyKTtkYihFYik7dmFyIEFiPW5ldyBBcnJheSgyNTYpO2RiKEFiKTt2YXIgU2I9bmV3IEFycmF5KDI5KTtkYihTYik7dmFyIE9iLFRiLEJiLEliPW5ldyBBcnJheShnYik7ZnVuY3Rpb24gUGIodCxlLHIsbixpKXt0aGlzLnN0YXRpY190cmVlPXQsdGhpcy5leHRyYV9iaXRzPWUsdGhpcy5leHRyYV9iYXNlPXIsdGhpcy5lbGVtcz1uLHRoaXMubWF4X2xlbmd0aD1pLHRoaXMuaGFzX3N0cmVlPXQmJnQubGVuZ3RofWZ1bmN0aW9uIFJiKHQsZSl7dGhpcy5keW5fdHJlZT10LHRoaXMubWF4X2NvZGU9MCx0aGlzLnN0YXRfZGVzYz1lfWZ1bmN0aW9uIE1iKHQpe3JldHVybiB0PDI1Nj9FYlt0XTpFYlsyNTYrKHQ+Pj43KV19ZnVuY3Rpb24gTGIodCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTV9ZnVuY3Rpb24gamIodCxlLHIpe3QuYmlfdmFsaWQ+MTYtcj8odC5iaV9idWZ8PWU8PHQuYmlfdmFsaWQmNjU1MzUsTGIodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+MTYtdC5iaV92YWxpZCx0LmJpX3ZhbGlkKz1yLTE2KToodC5iaV9idWZ8PWU8PHQuYmlfdmFsaWQmNjU1MzUsdC5iaV92YWxpZCs9cil9ZnVuY3Rpb24gemIodCxlLHIpe2piKHQsclsyKmVdLHJbMiplKzFdKX1mdW5jdGlvbiBDYih0LGUpe3ZhciByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfWZ1bmN0aW9uIE5iKHQsZSxyKXt2YXIgbixpLG89bmV3IEFycmF5KDE2KSxhPTA7Zm9yKG49MTtuPD15YjtuKyspb1tuXT1hPWErcltuLTFdPDwxO2ZvcihpPTA7aTw9ZTtpKyspe3ZhciBzPXRbMippKzFdOzAhPT1zJiYodFsyKmldPUNiKG9bc10rKyxzKSl9fWZ1bmN0aW9uIFViKHQpe3ZhciBlO2ZvcihlPTA7ZTx2YjtlKyspdC5keW5fbHRyZWVbMiplXT0wO2ZvcihlPTA7ZTxnYjtlKyspdC5keW5fZHRyZWVbMiplXT0wO2ZvcihlPTA7ZTwxOTtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVs1MTJdPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQubGFzdF9saXQ9dC5tYXRjaGVzPTB9ZnVuY3Rpb24gRmIodCl7dC5iaV92YWxpZD44P0xiKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH1mdW5jdGlvbiBEYih0LGUscixuKXt2YXIgaT0yKmUsbz0yKnI7cmV0dXJuIHRbaV08dFtvXXx8dFtpXT09PXRbb10mJm5bZV08PW5bcl19ZnVuY3Rpb24gcWIodCxlLHIpe2Zvcih2YXIgbj10LmhlYXBbcl0saT1yPDwxO2k8PXQuaGVhcF9sZW4mJihpPHQuaGVhcF9sZW4mJkRiKGUsdC5oZWFwW2krMV0sdC5oZWFwW2ldLHQuZGVwdGgpJiZpKyssIURiKGUsbix0LmhlYXBbaV0sdC5kZXB0aCkpOyl0LmhlYXBbcl09dC5oZWFwW2ldLHI9aSxpPDw9MTt0LmhlYXBbcl09bn1mdW5jdGlvbiAkYih0LGUscil7dmFyIG4saSxvLGEscz0wO2lmKDAhPT10Lmxhc3RfbGl0KWRve249dC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqc108PDh8dC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqcysxXSxpPXQucGVuZGluZ19idWZbdC5sX2J1ZitzXSxzKyssMD09PW4/emIodCxpLGUpOih6Yih0LChvPUFiW2ldKStwYisxLGUpLDAhPT0oYT1iYltvXSkmJmpiKHQsaS09U2Jbb10sYSksemIodCxvPU1iKC0tbiksciksMCE9PShhPW1iW29dKSYmamIodCxuLT1JYltvXSxhKSl9d2hpbGUoczx0Lmxhc3RfbGl0KTt6Yih0LDI1NixlKX1mdW5jdGlvbiBaYih0LGUpe3ZhciByLG4saSxvPWUuZHluX3RyZWUsYT1lLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxzPWUuc3RhdF9kZXNjLmhhc19zdHJlZSx1PWUuc3RhdF9kZXNjLmVsZW1zLGY9LTE7Zm9yKHQuaGVhcF9sZW49MCx0LmhlYXBfbWF4PTU3MyxyPTA7cjx1O3IrKykwIT09b1syKnJdPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1mPXIsdC5kZXB0aFtyXT0wKTpvWzIqcisxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOylvWzIqKGk9dC5oZWFwWysrdC5oZWFwX2xlbl09ZjwyPysrZjowKV09MSx0LmRlcHRoW2ldPTAsdC5vcHRfbGVuLS0scyYmKHQuc3RhdGljX2xlbi09YVsyKmkrMV0pO2ZvcihlLm1heF9jb2RlPWYscj10LmhlYXBfbGVuPj4xO3I+PTE7ci0tKXFiKHQsbyxyKTtpPXU7ZG97cj10LmhlYXBbMV0sdC5oZWFwWzFdPXQuaGVhcFt0LmhlYXBfbGVuLS1dLHFiKHQsbywxKSxuPXQuaGVhcFsxXSx0LmhlYXBbLS10LmhlYXBfbWF4XT1yLHQuaGVhcFstLXQuaGVhcF9tYXhdPW4sb1syKmldPW9bMipyXStvWzIqbl0sdC5kZXB0aFtpXT0odC5kZXB0aFtyXT49dC5kZXB0aFtuXT90LmRlcHRoW3JdOnQuZGVwdGhbbl0pKzEsb1syKnIrMV09b1syKm4rMV09aSx0LmhlYXBbMV09aSsrLHFiKHQsbywxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sZnVuY3Rpb24odCxlKXt2YXIgcixuLGksbyxhLHMsdT1lLmR5bl90cmVlLGY9ZS5tYXhfY29kZSxsPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLGM9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLGg9ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxkPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UscD1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoLHY9MDtmb3Iobz0wO288PXliO28rKyl0LmJsX2NvdW50W29dPTA7Zm9yKHVbMip0LmhlYXBbdC5oZWFwX21heF0rMV09MCxyPXQuaGVhcF9tYXgrMTtyPDU3MztyKyspKG89dVsyKnVbMioobj10LmhlYXBbcl0pKzFdKzFdKzEpPnAmJihvPXAsdisrKSx1WzIqbisxXT1vLG4+Znx8KHQuYmxfY291bnRbb10rKyxhPTAsbj49ZCYmKGE9aFtuLWRdKSxzPXVbMipuXSx0Lm9wdF9sZW4rPXMqKG8rYSksYyYmKHQuc3RhdGljX2xlbis9cyoobFsyKm4rMV0rYSkpKTtpZigwIT09dil7ZG97Zm9yKG89cC0xOzA9PT10LmJsX2NvdW50W29dOylvLS07dC5ibF9jb3VudFtvXS0tLHQuYmxfY291bnRbbysxXSs9Mix0LmJsX2NvdW50W3BdLS0sdi09Mn13aGlsZSh2PjApO2ZvcihvPXA7MCE9PW87by0tKWZvcihuPXQuYmxfY291bnRbb107MCE9PW47KShpPXQuaGVhcFstLXJdKT5mfHwodVsyKmkrMV0hPT1vJiYodC5vcHRfbGVuKz0oby11WzIqaSsxXSkqdVsyKmldLHVbMippKzFdPW8pLG4tLSl9fSh0LGUpLE5iKG8sZix0LmJsX2NvdW50KX1mdW5jdGlvbiBIYih0LGUscil7dmFyIG4saSxvPS0xLGE9ZVsxXSxzPTAsdT03LGY9NDtmb3IoMD09PWEmJih1PTEzOCxmPTMpLGVbMioocisxKSsxXT02NTUzNSxuPTA7bjw9cjtuKyspaT1hLGE9ZVsyKihuKzEpKzFdLCsrczx1JiZpPT09YXx8KHM8Zj90LmJsX3RyZWVbMippXSs9czowIT09aT8oaSE9PW8mJnQuYmxfdHJlZVsyKmldKyssdC5ibF90cmVlWzMyXSsrKTpzPD0xMD90LmJsX3RyZWVbMzRdKys6dC5ibF90cmVlWzM2XSsrLHM9MCxvPWksMD09PWE/KHU9MTM4LGY9Myk6aT09PWE/KHU9NixmPTMpOih1PTcsZj00KSl9ZnVuY3Rpb24gR2IodCxlLHIpe3ZhciBuLGksbz0tMSxhPWVbMV0scz0wLHU9NyxmPTQ7Zm9yKDA9PT1hJiYodT0xMzgsZj0zKSxuPTA7bjw9cjtuKyspaWYoaT1hLGE9ZVsyKihuKzEpKzFdLCEoKytzPHUmJmk9PT1hKSl7aWYoczxmKWRve3piKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tcyk7ZWxzZSAwIT09aT8oaSE9PW8mJih6Yih0LGksdC5ibF90cmVlKSxzLS0pLHpiKHQsMTYsdC5ibF90cmVlKSxqYih0LHMtMywyKSk6czw9MTA/KHpiKHQsMTcsdC5ibF90cmVlKSxqYih0LHMtMywzKSk6KHpiKHQsMTgsdC5ibF90cmVlKSxqYih0LHMtMTEsNykpO3M9MCxvPWksMD09PWE/KHU9MTM4LGY9Myk6aT09PWE/KHU9NixmPTMpOih1PTcsZj00KX19ZGIoSWIpO3ZhciBXYj0hMTtmdW5jdGlvbiBWYih0LGUscixuKXtqYih0LDArKG4/MTowKSwzKSxmdW5jdGlvbih0LGUscixuKXtGYih0KSxuJiYoTGIodCxyKSxMYih0LH5yKSksaGIuYXJyYXlTZXQodC5wZW5kaW5nX2J1Zix0LndpbmRvdyxlLHIsdC5wZW5kaW5nKSx0LnBlbmRpbmcrPXJ9KHQsZSxyLCEwKX1jYi5fdHJfaW5pdD1mdW5jdGlvbih0KXtXYnx8KCFmdW5jdGlvbigpe3ZhciB0LGUscixuLGksbz1uZXcgQXJyYXkoMTYpO2ZvcihyPTAsbj0wO248Mjg7bisrKWZvcihTYltuXT1yLHQ9MDt0PDE8PGJiW25dO3QrKylBYltyKytdPW47Zm9yKEFiW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihJYltuXT1pLHQ9MDt0PDE8PG1iW25dO3QrKylFYltpKytdPW47Zm9yKGk+Pj03O248Z2I7bisrKWZvcihJYltuXT1pPDw3LHQ9MDt0PDE8PG1iW25dLTc7dCsrKUViWzI1NitpKytdPW47Zm9yKGU9MDtlPD15YjtlKyspb1tlXT0wO2Zvcih0PTA7dDw9MTQzOyl4YlsyKnQrMV09OCx0Kyssb1s4XSsrO2Zvcig7dDw9MjU1Oyl4YlsyKnQrMV09OSx0Kyssb1s5XSsrO2Zvcig7dDw9Mjc5Oyl4YlsyKnQrMV09Nyx0Kyssb1s3XSsrO2Zvcig7dDw9Mjg3Oyl4YlsyKnQrMV09OCx0Kyssb1s4XSsrO2ZvcihOYih4YiwyODcsbyksdD0wO3Q8Z2I7dCsrKWtiWzIqdCsxXT01LGtiWzIqdF09Q2IodCw1KTtPYj1uZXcgUGIoeGIsYmIsMjU3LHZiLHliKSxUYj1uZXcgUGIoa2IsbWIsMCxnYix5YiksQmI9bmV3IFBiKG5ldyBBcnJheSgwKSx3YiwwLDE5LDcpfSgpLFdiPSEwKSx0LmxfZGVzYz1uZXcgUmIodC5keW5fbHRyZWUsT2IpLHQuZF9kZXNjPW5ldyBSYih0LmR5bl9kdHJlZSxUYiksdC5ibF9kZXNjPW5ldyBSYih0LmJsX3RyZWUsQmIpLHQuYmlfYnVmPTAsdC5iaV92YWxpZD0wLFViKHQpfSxjYi5fdHJfc3RvcmVkX2Jsb2NrPVZiLGNiLl90cl9mbHVzaF9ibG9jaz1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvLGE9MDt0LmxldmVsPjA/KDI9PT10LnN0cm0uZGF0YV90eXBlJiYodC5zdHJtLmRhdGFfdHlwZT1mdW5jdGlvbih0KXt2YXIgZSxyPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKysscj4+Pj0xKWlmKDEmciYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIDA7aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gMTtmb3IoZT0zMjtlPHBiO2UrKylpZigwIT09dC5keW5fbHRyZWVbMiplXSlyZXR1cm4gMTtyZXR1cm4gMH0odCkpLFpiKHQsdC5sX2Rlc2MpLFpiKHQsdC5kX2Rlc2MpLGE9ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKEhiKHQsdC5keW5fbHRyZWUsdC5sX2Rlc2MubWF4X2NvZGUpLEhiKHQsdC5keW5fZHRyZWUsdC5kX2Rlc2MubWF4X2NvZGUpLFpiKHQsdC5ibF9kZXNjKSxlPTE4O2U+PTMmJjA9PT10LmJsX3RyZWVbMipfYltlXSsxXTtlLS0pO3JldHVybiB0Lm9wdF9sZW4rPTMqKGUrMSkrNSs1KzQsZX0odCksaT10Lm9wdF9sZW4rMys3Pj4+Mywobz10LnN0YXRpY19sZW4rMys3Pj4+Myk8PWkmJihpPW8pKTppPW89cis1LHIrNDw9aSYmLTEhPT1lP1ZiKHQsZSxyLG4pOjQ9PT10LnN0cmF0ZWd5fHxvPT09aT8oamIodCwyKyhuPzE6MCksMyksJGIodCx4YixrYikpOihqYih0LDQrKG4/MTowKSwzKSxmdW5jdGlvbih0LGUscixuKXt2YXIgaTtmb3IoamIodCxlLTI1Nyw1KSxqYih0LHItMSw1KSxqYih0LG4tNCw0KSxpPTA7aTxuO2krKylqYih0LHQuYmxfdHJlZVsyKl9iW2ldKzFdLDMpO0diKHQsdC5keW5fbHRyZWUsZS0xKSxHYih0LHQuZHluX2R0cmVlLHItMSl9KHQsdC5sX2Rlc2MubWF4X2NvZGUrMSx0LmRfZGVzYy5tYXhfY29kZSsxLGErMSksJGIodCx0LmR5bl9sdHJlZSx0LmR5bl9kdHJlZSkpLFViKHQpLG4mJkZiKHQpfSxjYi5fdHJfdGFsbHk9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKEFiW3JdK3BiKzEpXSsrLHQuZHluX2R0cmVlWzIqTWIoZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTF9LGNiLl90cl9hbGlnbj1mdW5jdGlvbih0KXtqYih0LDIsMyksemIodCwyNTYseGIpLGZ1bmN0aW9uKHQpezE2PT09dC5iaV92YWxpZD8oTGIodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfSh0KX07dmFyIFliPWZ1bmN0aW9uKHQsZSxyLG4pe2Zvcih2YXIgaT02NTUzNSZ0fDAsbz10Pj4+MTYmNjU1MzV8MCxhPTA7MCE9PXI7KXtyLT1hPXI+MmUzPzJlMzpyO2Rve289bysoaT1pK2VbbisrXXwwKXwwfXdoaWxlKC0tYSk7aSU9NjU1MjEsbyU9NjU1MjF9cmV0dXJuIGl8bzw8MTZ8MH07dmFyIFhiPWZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9W10scj0wO3I8MjU2O3IrKyl7dD1yO2Zvcih2YXIgbj0wO248ODtuKyspdD0xJnQ/Mzk4ODI5MjM4NF50Pj4+MTp0Pj4+MTtlW3JdPXR9cmV0dXJuIGV9KCk7dmFyIEtiLEpiPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPVhiLG89bityO3RePS0xO2Zvcih2YXIgYT1uO2E8bzthKyspdD10Pj4+OF5pWzI1NSYodF5lW2FdKV07cmV0dXJuLTFedH0sUWI9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSx0bT11YixlbT1jYixybT1ZYixubT1KYixpbT1RYixvbT0tMixhbT0yNTgsc209MjYyLHVtPTEwMyxmbT0xMTMsbG09NjY2O2Z1bmN0aW9uIGNtKHQsZSl7cmV0dXJuIHQubXNnPWltW2VdLGV9ZnVuY3Rpb24gaG0odCl7cmV0dXJuKHQ8PDEpLSh0PjQ/OTowKX1mdW5jdGlvbiBkbSh0KXtmb3IodmFyIGU9dC5sZW5ndGg7LS1lPj0wOyl0W2VdPTB9ZnVuY3Rpb24gcG0odCl7dmFyIGU9dC5zdGF0ZSxyPWUucGVuZGluZztyPnQuYXZhaWxfb3V0JiYocj10LmF2YWlsX291dCksMCE9PXImJih0bS5hcnJheVNldCh0Lm91dHB1dCxlLnBlbmRpbmdfYnVmLGUucGVuZGluZ19vdXQscix0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX1mdW5jdGlvbiB2bSh0LGUpe2VtLl90cl9mbHVzaF9ibG9jayh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LHBtKHQuc3RybSl9ZnVuY3Rpb24gZ20odCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lfWZ1bmN0aW9uIHltKHQsZSl7dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZT4+PjgmMjU1LHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlfWZ1bmN0aW9uIGJtKHQsZSl7dmFyIHIsbixpPXQubWF4X2NoYWluX2xlbmd0aCxvPXQuc3Ryc3RhcnQsYT10LnByZXZfbGVuZ3RoLHM9dC5uaWNlX21hdGNoLHU9dC5zdHJzdGFydD50Lndfc2l6ZS1zbT90LnN0cnN0YXJ0LSh0Lndfc2l6ZS1zbSk6MCxmPXQud2luZG93LGw9dC53X21hc2ssYz10LnByZXYsaD10LnN0cnN0YXJ0K2FtLGQ9ZltvK2EtMV0scD1mW28rYV07dC5wcmV2X2xlbmd0aD49dC5nb29kX21hdGNoJiYoaT4+PTIpLHM+dC5sb29rYWhlYWQmJihzPXQubG9va2FoZWFkKTtkb3tpZihmWyhyPWUpK2FdPT09cCYmZltyK2EtMV09PT1kJiZmW3JdPT09ZltvXSYmZlsrK3JdPT09ZltvKzFdKXtvKz0yLHIrKztkb3t9d2hpbGUoZlsrK29dPT09ZlsrK3JdJiZmWysrb109PT1mWysrcl0mJmZbKytvXT09PWZbKytyXSYmZlsrK29dPT09ZlsrK3JdJiZmWysrb109PT1mWysrcl0mJmZbKytvXT09PWZbKytyXSYmZlsrK29dPT09ZlsrK3JdJiZmWysrb109PT1mWysrcl0mJm88aCk7aWYobj1hbS0oaC1vKSxvPWgtYW0sbj5hKXtpZih0Lm1hdGNoX3N0YXJ0PWUsYT1uLG4+PXMpYnJlYWs7ZD1mW28rYS0xXSxwPWZbbythXX19fXdoaWxlKChlPWNbZSZsXSk+dSYmMCE9LS1pKTtyZXR1cm4gYTw9dC5sb29rYWhlYWQ/YTp0Lmxvb2thaGVhZH1mdW5jdGlvbiBtbSh0KXt2YXIgZSxyLG4saSxvLGEscyx1LGYsbCxjPXQud19zaXplO2Rve2lmKGk9dC53aW5kb3dfc2l6ZS10Lmxvb2thaGVhZC10LnN0cnN0YXJ0LHQuc3Ryc3RhcnQ+PWMrKGMtc20pKXt0bS5hcnJheVNldCh0LndpbmRvdyx0LndpbmRvdyxjLGMsMCksdC5tYXRjaF9zdGFydC09Yyx0LnN0cnN0YXJ0LT1jLHQuYmxvY2tfc3RhcnQtPWMsZT1yPXQuaGFzaF9zaXplO2Rve249dC5oZWFkWy0tZV0sdC5oZWFkW2VdPW4+PWM/bi1jOjB9d2hpbGUoLS1yKTtlPXI9Yztkb3tuPXQucHJldlstLWVdLHQucHJldltlXT1uPj1jP24tYzowfXdoaWxlKC0tcik7aSs9Y31pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKGE9dC5zdHJtLHM9dC53aW5kb3csdT10LnN0cnN0YXJ0K3QubG9va2FoZWFkLGY9aSxsPXZvaWQgMCwobD1hLmF2YWlsX2luKT5mJiYobD1mKSxyPTA9PT1sPzA6KGEuYXZhaWxfaW4tPWwsdG0uYXJyYXlTZXQocyxhLmlucHV0LGEubmV4dF9pbixsLHUpLDE9PT1hLnN0YXRlLndyYXA/YS5hZGxlcj1ybShhLmFkbGVyLHMsbCx1KToyPT09YS5zdGF0ZS53cmFwJiYoYS5hZGxlcj1ubShhLmFkbGVyLHMsbCx1KSksYS5uZXh0X2luKz1sLGEudG90YWxfaW4rPWwsbCksdC5sb29rYWhlYWQrPXIsdC5sb29rYWhlYWQrdC5pbnNlcnQ+PTMpZm9yKG89dC5zdHJzdGFydC10Lmluc2VydCx0Lmluc19oPXQud2luZG93W29dLHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1tvKzFdKSZ0Lmhhc2hfbWFzazt0Lmluc2VydCYmKHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1tvKzMtMV0pJnQuaGFzaF9tYXNrLHQucHJldltvJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPW8sbysrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDwzKSk7KTt9d2hpbGUodC5sb29rYWhlYWQ8c20mJjAhPT10LnN0cm0uYXZhaWxfaW4pfWZ1bmN0aW9uIHdtKHQsZSl7Zm9yKHZhciByLG47Oyl7aWYodC5sb29rYWhlYWQ8c20pe2lmKG1tKHQpLHQubG9va2FoZWFkPHNtJiYwPT09ZSlyZXR1cm4gMTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj0zJiYodC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W3Quc3Ryc3RhcnQrMy0xXSkmdC5oYXNoX21hc2sscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KSwwIT09ciYmdC5zdHJzdGFydC1yPD10Lndfc2l6ZS1zbSYmKHQubWF0Y2hfbGVuZ3RoPWJtKHQscikpLHQubWF0Y2hfbGVuZ3RoPj0zKWlmKG49ZW0uX3RyX3RhbGx5KHQsdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoLTMpLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aDw9dC5tYXhfbGF6eV9tYXRjaCYmdC5sb29rYWhlYWQ+PTMpe3QubWF0Y2hfbGVuZ3RoLS07ZG97dC5zdHJzdGFydCsrLHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1t0LnN0cnN0YXJ0KzMtMV0pJnQuaGFzaF9tYXNrLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydH13aGlsZSgwIT0tLXQubWF0Y2hfbGVuZ3RoKTt0LnN0cnN0YXJ0Kyt9ZWxzZSB0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wLHQuaW5zX2g9dC53aW5kb3dbdC5zdHJzdGFydF0sdC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W3Quc3Ryc3RhcnQrMV0pJnQuaGFzaF9tYXNrO2Vsc2Ugbj1lbS5fdHJfdGFsbHkodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKztpZihuJiYodm0odCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiAxfXJldHVybiB0Lmluc2VydD10LnN0cnN0YXJ0PDI/dC5zdHJzdGFydDoyLDQ9PT1lPyh2bSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD8zOjQpOnQubGFzdF9saXQmJih2bSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCk/MToyfWZ1bmN0aW9uIF9tKHQsZSl7Zm9yKHZhciByLG4saTs7KXtpZih0Lmxvb2thaGVhZDxzbSl7aWYobW0odCksdC5sb29rYWhlYWQ8c20mJjA9PT1lKXJldHVybiAxO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PTMmJih0Lmluc19oPSh0Lmluc19oPDx0Lmhhc2hfc2hpZnRedC53aW5kb3dbdC5zdHJzdGFydCszLTFdKSZ0Lmhhc2hfbWFzayxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpLHQucHJldl9sZW5ndGg9dC5tYXRjaF9sZW5ndGgsdC5wcmV2X21hdGNoPXQubWF0Y2hfc3RhcnQsdC5tYXRjaF9sZW5ndGg9MiwwIT09ciYmdC5wcmV2X2xlbmd0aDx0Lm1heF9sYXp5X21hdGNoJiZ0LnN0cnN0YXJ0LXI8PXQud19zaXplLXNtJiYodC5tYXRjaF9sZW5ndGg9Ym0odCxyKSx0Lm1hdGNoX2xlbmd0aDw9NSYmKDE9PT10LnN0cmF0ZWd5fHwzPT09dC5tYXRjaF9sZW5ndGgmJnQuc3Ryc3RhcnQtdC5tYXRjaF9zdGFydD40MDk2KSYmKHQubWF0Y2hfbGVuZ3RoPTIpKSx0LnByZXZfbGVuZ3RoPj0zJiZ0Lm1hdGNoX2xlbmd0aDw9dC5wcmV2X2xlbmd0aCl7aT10LnN0cnN0YXJ0K3QubG9va2FoZWFkLTMsbj1lbS5fdHJfdGFsbHkodCx0LnN0cnN0YXJ0LTEtdC5wcmV2X21hdGNoLHQucHJldl9sZW5ndGgtMyksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9aSYmKHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1t0LnN0cnN0YXJ0KzMtMV0pJnQuaGFzaF9tYXNrLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPTIsdC5zdHJzdGFydCsrLG4mJih2bSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDF9ZWxzZSBpZih0Lm1hdGNoX2F2YWlsYWJsZSl7aWYoKG49ZW0uX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0LTFdKSkmJnZtKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiAxfWVsc2UgdC5tYXRjaF9hdmFpbGFibGU9MSx0LnN0cnN0YXJ0KyssdC5sb29rYWhlYWQtLX1yZXR1cm4gdC5tYXRjaF9hdmFpbGFibGUmJihuPWVtLl90cl90YWxseSh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDwyP3Quc3Ryc3RhcnQ6Miw0PT09ZT8odm0odCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/Mzo0KTp0Lmxhc3RfbGl0JiYodm0odCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpPzE6Mn1mdW5jdGlvbiB4bSh0LGUscixuLGkpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWl9ZnVuY3Rpb24ga20oKXt0aGlzLnN0cm09bnVsbCx0aGlzLnN0YXR1cz0wLHRoaXMucGVuZGluZ19idWY9bnVsbCx0aGlzLnBlbmRpbmdfYnVmX3NpemU9MCx0aGlzLnBlbmRpbmdfb3V0PTAsdGhpcy5wZW5kaW5nPTAsdGhpcy53cmFwPTAsdGhpcy5nemhlYWQ9bnVsbCx0aGlzLmd6aW5kZXg9MCx0aGlzLm1ldGhvZD04LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyB0bS5CdWYxNigxMTQ2KSx0aGlzLmR5bl9kdHJlZT1uZXcgdG0uQnVmMTYoMTIyKSx0aGlzLmJsX3RyZWU9bmV3IHRtLkJ1ZjE2KDc4KSxkbSh0aGlzLmR5bl9sdHJlZSksZG0odGhpcy5keW5fZHRyZWUpLGRtKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IHRtLkJ1ZjE2KDE2KSx0aGlzLmhlYXA9bmV3IHRtLkJ1ZjE2KDU3MyksZG0odGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IHRtLkJ1ZjE2KDU3MyksZG0odGhpcy5kZXB0aCksdGhpcy5sX2J1Zj0wLHRoaXMubGl0X2J1ZnNpemU9MCx0aGlzLmxhc3RfbGl0PTAsdGhpcy5kX2J1Zj0wLHRoaXMub3B0X2xlbj0wLHRoaXMuc3RhdGljX2xlbj0wLHRoaXMubWF0Y2hlcz0wLHRoaXMuaW5zZXJ0PTAsdGhpcy5iaV9idWY9MCx0aGlzLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gRW0odCl7dmFyIGU7cmV0dXJuIHQmJnQuc3RhdGU/KHQudG90YWxfaW49dC50b3RhbF9vdXQ9MCx0LmRhdGFfdHlwZT0yLChlPXQuc3RhdGUpLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwPzQyOmZtLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPTAsZW0uX3RyX2luaXQoZSksMCk6Y20odCxvbSl9ZnVuY3Rpb24gQW0odCl7dmFyIGUscj1FbSh0KTtyZXR1cm4gMD09PXImJigoZT10LnN0YXRlKS53aW5kb3dfc2l6ZT0yKmUud19zaXplLGRtKGUuaGVhZCksZS5tYXhfbGF6eV9tYXRjaD1LYltlLmxldmVsXS5tYXhfbGF6eSxlLmdvb2RfbWF0Y2g9S2JbZS5sZXZlbF0uZ29vZF9sZW5ndGgsZS5uaWNlX21hdGNoPUtiW2UubGV2ZWxdLm5pY2VfbGVuZ3RoLGUubWF4X2NoYWluX2xlbmd0aD1LYltlLmxldmVsXS5tYXhfY2hhaW4sZS5zdHJzdGFydD0wLGUuYmxvY2tfc3RhcnQ9MCxlLmxvb2thaGVhZD0wLGUuaW5zZXJ0PTAsZS5tYXRjaF9sZW5ndGg9ZS5wcmV2X2xlbmd0aD0yLGUubWF0Y2hfYXZhaWxhYmxlPTAsZS5pbnNfaD0wKSxyfWZ1bmN0aW9uIFNtKHQsZSxyLG4saSxvKXtpZighdClyZXR1cm4gb207dmFyIGE9MTtpZigtMT09PWUmJihlPTYpLG48MD8oYT0wLG49LW4pOm4+MTUmJihhPTIsbi09MTYpLGk8MXx8aT45fHw4IT09cnx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8bzwwfHxvPjQpcmV0dXJuIGNtKHQsb20pOzg9PT1uJiYobj05KTt2YXIgcz1uZXcga207cmV0dXJuIHQuc3RhdGU9cyxzLnN0cm09dCxzLndyYXA9YSxzLmd6aGVhZD1udWxsLHMud19iaXRzPW4scy53X3NpemU9MTw8cy53X2JpdHMscy53X21hc2s9cy53X3NpemUtMSxzLmhhc2hfYml0cz1pKzcscy5oYXNoX3NpemU9MTw8cy5oYXNoX2JpdHMscy5oYXNoX21hc2s9cy5oYXNoX3NpemUtMSxzLmhhc2hfc2hpZnQ9fn4oKHMuaGFzaF9iaXRzKzMtMSkvMykscy53aW5kb3c9bmV3IHRtLkJ1ZjgoMipzLndfc2l6ZSkscy5oZWFkPW5ldyB0bS5CdWYxNihzLmhhc2hfc2l6ZSkscy5wcmV2PW5ldyB0bS5CdWYxNihzLndfc2l6ZSkscy5saXRfYnVmc2l6ZT0xPDxpKzYscy5wZW5kaW5nX2J1Zl9zaXplPTQqcy5saXRfYnVmc2l6ZSxzLnBlbmRpbmdfYnVmPW5ldyB0bS5CdWY4KHMucGVuZGluZ19idWZfc2l6ZSkscy5kX2J1Zj0xKnMubGl0X2J1ZnNpemUscy5sX2J1Zj0zKnMubGl0X2J1ZnNpemUscy5sZXZlbD1lLHMuc3RyYXRlZ3k9byxzLm1ldGhvZD1yLEFtKHQpfUtiPVtuZXcgeG0oMCwwLDAsMCwoZnVuY3Rpb24odCxlKXt2YXIgcj02NTUzNTtmb3Iocj50LnBlbmRpbmdfYnVmX3NpemUtNSYmKHI9dC5wZW5kaW5nX2J1Zl9zaXplLTUpOzspe2lmKHQubG9va2FoZWFkPD0xKXtpZihtbSh0KSwwPT09dC5sb29rYWhlYWQmJjA9PT1lKXJldHVybiAxO2lmKDA9PT10Lmxvb2thaGVhZClicmVha310LnN0cnN0YXJ0Kz10Lmxvb2thaGVhZCx0Lmxvb2thaGVhZD0wO3ZhciBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bix2bSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDE7aWYodC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0Pj10Lndfc2l6ZS1zbSYmKHZtKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gMX1yZXR1cm4gdC5pbnNlcnQ9MCw0PT09ZT8odm0odCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/Mzo0KToodC5zdHJzdGFydD50LmJsb2NrX3N0YXJ0JiYodm0odCwhMSksdC5zdHJtLmF2YWlsX291dCksMSl9KSksbmV3IHhtKDQsNCw4LDQsd20pLG5ldyB4bSg0LDUsMTYsOCx3bSksbmV3IHhtKDQsNiwzMiwzMix3bSksbmV3IHhtKDQsNCwxNiwxNixfbSksbmV3IHhtKDgsMTYsMzIsMzIsX20pLG5ldyB4bSg4LDE2LDEyOCwxMjgsX20pLG5ldyB4bSg4LDMyLDEyOCwyNTYsX20pLG5ldyB4bSgzMiwxMjgsMjU4LDEwMjQsX20pLG5ldyB4bSgzMiwyNTgsMjU4LDQwOTYsX20pXSxsYi5kZWZsYXRlSW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiBTbSh0LGUsOCwxNSw4LDApfSxsYi5kZWZsYXRlSW5pdDI9U20sbGIuZGVmbGF0ZVJlc2V0PUFtLGxiLmRlZmxhdGVSZXNldEtlZXA9RW0sbGIuZGVmbGF0ZVNldEhlYWRlcj1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0LnN0YXRlPzIhPT10LnN0YXRlLndyYXA/b206KHQuc3RhdGUuZ3poZWFkPWUsMCk6b219LGxiLmRlZmxhdGU9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGksbztpZighdHx8IXQuc3RhdGV8fGU+NXx8ZTwwKXJldHVybiB0P2NtKHQsb20pOm9tO2lmKG49dC5zdGF0ZSwhdC5vdXRwdXR8fCF0LmlucHV0JiYwIT09dC5hdmFpbF9pbnx8bi5zdGF0dXM9PT1sbSYmNCE9PWUpcmV0dXJuIGNtKHQsMD09PXQuYXZhaWxfb3V0Py01Om9tKTtpZihuLnN0cm09dCxyPW4ubGFzdF9mbHVzaCxuLmxhc3RfZmx1c2g9ZSw0Mj09PW4uc3RhdHVzKWlmKDI9PT1uLndyYXApdC5hZGxlcj0wLGdtKG4sMzEpLGdtKG4sMTM5KSxnbShuLDgpLG4uZ3poZWFkPyhnbShuLChuLmd6aGVhZC50ZXh0PzE6MCkrKG4uZ3poZWFkLmhjcmM/MjowKSsobi5nemhlYWQuZXh0cmE/NDowKSsobi5nemhlYWQubmFtZT84OjApKyhuLmd6aGVhZC5jb21tZW50PzE2OjApKSxnbShuLDI1NSZuLmd6aGVhZC50aW1lKSxnbShuLG4uZ3poZWFkLnRpbWU+PjgmMjU1KSxnbShuLG4uZ3poZWFkLnRpbWU+PjE2JjI1NSksZ20obixuLmd6aGVhZC50aW1lPj4yNCYyNTUpLGdtKG4sOT09PW4ubGV2ZWw/MjpuLnN0cmF0ZWd5Pj0yfHxuLmxldmVsPDI/NDowKSxnbShuLDI1NSZuLmd6aGVhZC5vcyksbi5nemhlYWQuZXh0cmEmJm4uZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGdtKG4sMjU1Jm4uZ3poZWFkLmV4dHJhLmxlbmd0aCksZ20obixuLmd6aGVhZC5leHRyYS5sZW5ndGg+PjgmMjU1KSksbi5nemhlYWQuaGNyYyYmKHQuYWRsZXI9bm0odC5hZGxlcixuLnBlbmRpbmdfYnVmLG4ucGVuZGluZywwKSksbi5nemluZGV4PTAsbi5zdGF0dXM9NjkpOihnbShuLDApLGdtKG4sMCksZ20obiwwKSxnbShuLDApLGdtKG4sMCksZ20obiw5PT09bi5sZXZlbD8yOm4uc3RyYXRlZ3k+PTJ8fG4ubGV2ZWw8Mj80OjApLGdtKG4sMyksbi5zdGF0dXM9Zm0pO2Vsc2V7dmFyIGE9OCsobi53X2JpdHMtODw8NCk8PDg7YXw9KG4uc3RyYXRlZ3k+PTJ8fG4ubGV2ZWw8Mj8wOm4ubGV2ZWw8Nj8xOjY9PT1uLmxldmVsPzI6Myk8PDYsMCE9PW4uc3Ryc3RhcnQmJihhfD0zMiksYSs9MzEtYSUzMSxuLnN0YXR1cz1mbSx5bShuLGEpLDAhPT1uLnN0cnN0YXJ0JiYoeW0obix0LmFkbGVyPj4+MTYpLHltKG4sNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZig2OT09PW4uc3RhdHVzKWlmKG4uZ3poZWFkLmV4dHJhKXtmb3IoaT1uLnBlbmRpbmc7bi5nemluZGV4PCg2NTUzNSZuLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYobi5wZW5kaW5nIT09bi5wZW5kaW5nX2J1Zl9zaXplfHwobi5nemhlYWQuaGNyYyYmbi5wZW5kaW5nPmkmJih0LmFkbGVyPW5tKHQuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmctaSxpKSkscG0odCksaT1uLnBlbmRpbmcsbi5wZW5kaW5nIT09bi5wZW5kaW5nX2J1Zl9zaXplKSk7KWdtKG4sMjU1Jm4uZ3poZWFkLmV4dHJhW24uZ3ppbmRleF0pLG4uZ3ppbmRleCsrO24uZ3poZWFkLmhjcmMmJm4ucGVuZGluZz5pJiYodC5hZGxlcj1ubSh0LmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLG4uZ3ppbmRleD09PW4uZ3poZWFkLmV4dHJhLmxlbmd0aCYmKG4uZ3ppbmRleD0wLG4uc3RhdHVzPTczKX1lbHNlIG4uc3RhdHVzPTczO2lmKDczPT09bi5zdGF0dXMpaWYobi5nemhlYWQubmFtZSl7aT1uLnBlbmRpbmc7ZG97aWYobi5wZW5kaW5nPT09bi5wZW5kaW5nX2J1Zl9zaXplJiYobi5nemhlYWQuaGNyYyYmbi5wZW5kaW5nPmkmJih0LmFkbGVyPW5tKHQuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmctaSxpKSkscG0odCksaT1uLnBlbmRpbmcsbi5wZW5kaW5nPT09bi5wZW5kaW5nX2J1Zl9zaXplKSl7bz0xO2JyZWFrfW89bi5nemluZGV4PG4uZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZuLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQobi5nemluZGV4KyspOjAsZ20obixvKX13aGlsZSgwIT09byk7bi5nemhlYWQuaGNyYyYmbi5wZW5kaW5nPmkmJih0LmFkbGVyPW5tKHQuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmctaSxpKSksMD09PW8mJihuLmd6aW5kZXg9MCxuLnN0YXR1cz05MSl9ZWxzZSBuLnN0YXR1cz05MTtpZig5MT09PW4uc3RhdHVzKWlmKG4uZ3poZWFkLmNvbW1lbnQpe2k9bi5wZW5kaW5nO2Rve2lmKG4ucGVuZGluZz09PW4ucGVuZGluZ19idWZfc2l6ZSYmKG4uZ3poZWFkLmhjcmMmJm4ucGVuZGluZz5pJiYodC5hZGxlcj1ubSh0LmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLHBtKHQpLGk9bi5wZW5kaW5nLG4ucGVuZGluZz09PW4ucGVuZGluZ19idWZfc2l6ZSkpe289MTticmVha31vPW4uZ3ppbmRleDxuLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmbi5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KG4uZ3ppbmRleCsrKTowLGdtKG4sbyl9d2hpbGUoMCE9PW8pO24uZ3poZWFkLmhjcmMmJm4ucGVuZGluZz5pJiYodC5hZGxlcj1ubSh0LmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLDA9PT1vJiYobi5zdGF0dXM9dW0pfWVsc2Ugbi5zdGF0dXM9dW07aWYobi5zdGF0dXM9PT11bSYmKG4uZ3poZWFkLmhjcmM/KG4ucGVuZGluZysyPm4ucGVuZGluZ19idWZfc2l6ZSYmcG0odCksbi5wZW5kaW5nKzI8PW4ucGVuZGluZ19idWZfc2l6ZSYmKGdtKG4sMjU1JnQuYWRsZXIpLGdtKG4sdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxuLnN0YXR1cz1mbSkpOm4uc3RhdHVzPWZtKSwwIT09bi5wZW5kaW5nKXtpZihwbSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIG4ubGFzdF9mbHVzaD0tMSwwfWVsc2UgaWYoMD09PXQuYXZhaWxfaW4mJmhtKGUpPD1obShyKSYmNCE9PWUpcmV0dXJuIGNtKHQsLTUpO2lmKG4uc3RhdHVzPT09bG0mJjAhPT10LmF2YWlsX2luKXJldHVybiBjbSh0LC01KTtpZigwIT09dC5hdmFpbF9pbnx8MCE9PW4ubG9va2FoZWFkfHwwIT09ZSYmbi5zdGF0dXMhPT1sbSl7dmFyIHM9Mj09PW4uc3RyYXRlZ3k/ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYobW0odCksMD09PXQubG9va2FoZWFkKSl7aWYoMD09PWUpcmV0dXJuIDE7YnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCxyPWVtLl90cl90YWxseSh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrLHImJih2bSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDF9cmV0dXJuIHQuaW5zZXJ0PTAsND09PWU/KHZtKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0PzM6NCk6dC5sYXN0X2xpdCYmKHZtKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT8xOjJ9KG4sZSk6Mz09PW4uc3RyYXRlZ3k/ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbixpLG8sYT10LndpbmRvdzs7KXtpZih0Lmxvb2thaGVhZDw9YW0pe2lmKG1tKHQpLHQubG9va2FoZWFkPD1hbSYmMD09PWUpcmV0dXJuIDE7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHQubWF0Y2hfbGVuZ3RoPTAsdC5sb29rYWhlYWQ+PTMmJnQuc3Ryc3RhcnQ+MCYmKG49YVtpPXQuc3Ryc3RhcnQtMV0pPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldKXtvPXQuc3Ryc3RhcnQrYW07ZG97fXdoaWxlKG49PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0mJmk8byk7dC5tYXRjaF9sZW5ndGg9YW0tKG8taSksdC5tYXRjaF9sZW5ndGg+dC5sb29rYWhlYWQmJih0Lm1hdGNoX2xlbmd0aD10Lmxvb2thaGVhZCl9aWYodC5tYXRjaF9sZW5ndGg+PTM/KHI9ZW0uX3RyX3RhbGx5KHQsMSx0Lm1hdGNoX2xlbmd0aC0zKSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5zdHJzdGFydCs9dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg9MCk6KHI9ZW0uX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0KyspLHImJih2bSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDF9cmV0dXJuIHQuaW5zZXJ0PTAsND09PWU/KHZtKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0PzM6NCk6dC5sYXN0X2xpdCYmKHZtKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT8xOjJ9KG4sZSk6S2Jbbi5sZXZlbF0uZnVuYyhuLGUpO2lmKDMhPT1zJiY0IT09c3x8KG4uc3RhdHVzPWxtKSwxPT09c3x8Mz09PXMpcmV0dXJuIDA9PT10LmF2YWlsX291dCYmKG4ubGFzdF9mbHVzaD0tMSksMDtpZigyPT09cyYmKDE9PT1lP2VtLl90cl9hbGlnbihuKTo1IT09ZSYmKGVtLl90cl9zdG9yZWRfYmxvY2sobiwwLDAsITEpLDM9PT1lJiYoZG0obi5oZWFkKSwwPT09bi5sb29rYWhlYWQmJihuLnN0cnN0YXJ0PTAsbi5ibG9ja19zdGFydD0wLG4uaW5zZXJ0PTApKSkscG0odCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gbi5sYXN0X2ZsdXNoPS0xLDB9cmV0dXJuIDQhPT1lPzA6bi53cmFwPD0wPzE6KDI9PT1uLndyYXA/KGdtKG4sMjU1JnQuYWRsZXIpLGdtKG4sdC5hZGxlcj4+OCYyNTUpLGdtKG4sdC5hZGxlcj4+MTYmMjU1KSxnbShuLHQuYWRsZXI+PjI0JjI1NSksZ20obiwyNTUmdC50b3RhbF9pbiksZ20obix0LnRvdGFsX2luPj44JjI1NSksZ20obix0LnRvdGFsX2luPj4xNiYyNTUpLGdtKG4sdC50b3RhbF9pbj4+MjQmMjU1KSk6KHltKG4sdC5hZGxlcj4+PjE2KSx5bShuLDY1NTM1JnQuYWRsZXIpKSxwbSh0KSxuLndyYXA+MCYmKG4ud3JhcD0tbi53cmFwKSwwIT09bi5wZW5kaW5nPzA6MSl9LGxiLmRlZmxhdGVFbmQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHQmJnQuc3RhdGU/NDIhPT0oZT10LnN0YXRlLnN0YXR1cykmJjY5IT09ZSYmNzMhPT1lJiY5MSE9PWUmJmUhPT11bSYmZSE9PWZtJiZlIT09bG0/Y20odCxvbSk6KHQuc3RhdGU9bnVsbCxlPT09Zm0/Y20odCwtMyk6MCk6b219LGxiLmRlZmxhdGVTZXREaWN0aW9uYXJ5PWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLG8sYSxzLHUsZixsPWUubGVuZ3RoO2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gb207aWYoMj09PShvPShyPXQuc3RhdGUpLndyYXApfHwxPT09byYmNDIhPT1yLnN0YXR1c3x8ci5sb29rYWhlYWQpcmV0dXJuIG9tO2ZvcigxPT09byYmKHQuYWRsZXI9cm0odC5hZGxlcixlLGwsMCkpLHIud3JhcD0wLGw+PXIud19zaXplJiYoMD09PW8mJihkbShyLmhlYWQpLHIuc3Ryc3RhcnQ9MCxyLmJsb2NrX3N0YXJ0PTAsci5pbnNlcnQ9MCksZj1uZXcgdG0uQnVmOChyLndfc2l6ZSksdG0uYXJyYXlTZXQoZixlLGwtci53X3NpemUsci53X3NpemUsMCksZT1mLGw9ci53X3NpemUpLGE9dC5hdmFpbF9pbixzPXQubmV4dF9pbix1PXQuaW5wdXQsdC5hdmFpbF9pbj1sLHQubmV4dF9pbj0wLHQuaW5wdXQ9ZSxtbShyKTtyLmxvb2thaGVhZD49Mzspe249ci5zdHJzdGFydCxpPXIubG9va2FoZWFkLTI7ZG97ci5pbnNfaD0oci5pbnNfaDw8ci5oYXNoX3NoaWZ0XnIud2luZG93W24rMy0xXSkmci5oYXNoX21hc2ssci5wcmV2W24mci53X21hc2tdPXIuaGVhZFtyLmluc19oXSxyLmhlYWRbci5pbnNfaF09bixuKyt9d2hpbGUoLS1pKTtyLnN0cnN0YXJ0PW4sci5sb29rYWhlYWQ9MixtbShyKX1yZXR1cm4gci5zdHJzdGFydCs9ci5sb29rYWhlYWQsci5ibG9ja19zdGFydD1yLnN0cnN0YXJ0LHIuaW5zZXJ0PXIubG9va2FoZWFkLHIubG9va2FoZWFkPTAsci5tYXRjaF9sZW5ndGg9ci5wcmV2X2xlbmd0aD0yLHIubWF0Y2hfYXZhaWxhYmxlPTAsdC5uZXh0X2luPXMsdC5pbnB1dD11LHQuYXZhaWxfaW49YSxyLndyYXA9bywwfSxsYi5kZWZsYXRlSW5mbz0icGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSI7dmFyIE9tPXt9LFRtPXViLEJtPSEwLEltPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsWzBdKX1jYXRjaCh4RSl7Qm09ITF9dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSgxKSl9Y2F0Y2goeEUpe0ltPSExfWZvcih2YXIgUG09bmV3IFRtLkJ1ZjgoMjU2KSxSbT0wO1JtPDI1NjtSbSsrKVBtW1JtXT1SbT49MjUyPzY6Um0+PTI0OD81OlJtPj0yNDA/NDpSbT49MjI0PzM6Um0+PTE5Mj8yOjE7ZnVuY3Rpb24gTW0odCxlKXtpZihlPDY1NTM0JiYodC5zdWJhcnJheSYmSW18fCF0LnN1YmFycmF5JiZCbSkpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxUbS5zaHJpbmtCdWYodCxlKSk7Zm9yKHZhciByPSIiLG49MDtuPGU7bisrKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUodFtuXSk7cmV0dXJuIHJ9UG1bMjU0XT1QbVsyNTRdPTEsT20uc3RyaW5nMmJ1Zj1mdW5jdGlvbih0KXt2YXIgZSxyLG4saSxvLGE9dC5sZW5ndGgscz0wO2ZvcihpPTA7aTxhO2krKyk1NTI5Nj09KDY0NTEyJihyPXQuY2hhckNvZGVBdChpKSkpJiZpKzE8YSYmNTYzMjA9PSg2NDUxMiYobj10LmNoYXJDb2RlQXQoaSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspLHMrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IFRtLkJ1Zjgocyksbz0wLGk9MDtvPHM7aSsrKTU1Mjk2PT0oNjQ1MTImKHI9dC5jaGFyQ29kZUF0KGkpKSkmJmkrMTxhJiY1NjMyMD09KDY0NTEyJihuPXQuY2hhckNvZGVBdChpKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykscjwxMjg/ZVtvKytdPXI6cjwyMDQ4PyhlW28rK109MTkyfHI+Pj42LGVbbysrXT0xMjh8NjMmcik6cjw2NTUzNj8oZVtvKytdPTIyNHxyPj4+MTIsZVtvKytdPTEyOHxyPj4+NiY2MyxlW28rK109MTI4fDYzJnIpOihlW28rK109MjQwfHI+Pj4xOCxlW28rK109MTI4fHI+Pj4xMiY2MyxlW28rK109MTI4fHI+Pj42JjYzLGVbbysrXT0xMjh8NjMmcik7cmV0dXJuIGV9LE9tLmJ1ZjJiaW5zdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIE1tKHQsdC5sZW5ndGgpfSxPbS5iaW5zdHJpbmcyYnVmPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgVG0uQnVmOCh0Lmxlbmd0aCkscj0wLG49ZS5sZW5ndGg7cjxuO3IrKyllW3JdPXQuY2hhckNvZGVBdChyKTtyZXR1cm4gZX0sT20uYnVmMnN0cmluZz1mdW5jdGlvbih0LGUpe3ZhciByLG4saSxvLGE9ZXx8dC5sZW5ndGgscz1uZXcgQXJyYXkoMiphKTtmb3Iobj0wLHI9MDtyPGE7KWlmKChpPXRbcisrXSk8MTI4KXNbbisrXT1pO2Vsc2UgaWYoKG89UG1baV0pPjQpc1tuKytdPTY1NTMzLHIrPW8tMTtlbHNle2ZvcihpJj0yPT09bz8zMTozPT09bz8xNTo3O28+MSYmcjxhOylpPWk8PDZ8NjMmdFtyKytdLG8tLTtvPjE/c1tuKytdPTY1NTMzOmk8NjU1MzY/c1tuKytdPWk6KGktPTY1NTM2LHNbbisrXT01NTI5NnxpPj4xMCYxMDIzLHNbbisrXT01NjMyMHwxMDIzJmkpfXJldHVybiBNbShzLG4pfSxPbS51dGY4Ym9yZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI7Zm9yKChlPWV8fHQubGVuZ3RoKT50Lmxlbmd0aCYmKGU9dC5sZW5ndGgpLHI9ZS0xO3I+PTAmJjEyOD09KDE5MiZ0W3JdKTspci0tO3JldHVybiByPDB8fDA9PT1yP2U6citQbVt0W3JdXT5lP3I6ZX07dmFyIExtPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dD1udWxsLHRoaXMubmV4dF9pbj0wLHRoaXMuYXZhaWxfaW49MCx0aGlzLnRvdGFsX2luPTAsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLm5leHRfb3V0PTAsdGhpcy5hdmFpbF9vdXQ9MCx0aGlzLnRvdGFsX291dD0wLHRoaXMubXNnPSIiLHRoaXMuc3RhdGU9bnVsbCx0aGlzLmRhdGFfdHlwZT0yLHRoaXMuYWRsZXI9MH0sam09bGIsem09dWIsQ209T20sTm09UWIsVW09TG0sRm09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBEbSh0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBEbSkpcmV0dXJuIG5ldyBEbSh0KTt0aGlzLm9wdGlvbnM9em0uYXNzaWduKHtsZXZlbDotMSxtZXRob2Q6OCxjaHVua1NpemU6MTYzODQsd2luZG93Qml0czoxNSxtZW1MZXZlbDo4LHN0cmF0ZWd5OjAsdG86IiJ9LHR8fHt9KTt2YXIgZT10aGlzLm9wdGlvbnM7ZS5yYXcmJmUud2luZG93Qml0cz4wP2Uud2luZG93Qml0cz0tZS53aW5kb3dCaXRzOmUuZ3ppcCYmZS53aW5kb3dCaXRzPjAmJmUud2luZG93Qml0czwxNiYmKGUud2luZG93Qml0cys9MTYpLHRoaXMuZXJyPTAsdGhpcy5tc2c9IiIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IFVtLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDt2YXIgcj1qbS5kZWZsYXRlSW5pdDIodGhpcy5zdHJtLGUubGV2ZWwsZS5tZXRob2QsZS53aW5kb3dCaXRzLGUubWVtTGV2ZWwsZS5zdHJhdGVneSk7aWYoMCE9PXIpdGhyb3cgbmV3IEVycm9yKE5tW3JdKTtpZihlLmhlYWRlciYmam0uZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7dmFyIG47aWYobj0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9DbS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUZtLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSwwIT09KHI9am0uZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLG4pKSl0aHJvdyBuZXcgRXJyb3IoTm1bcl0pO3RoaXMuX2RpY3Rfc2V0PSEwfX1mdW5jdGlvbiBxbSh0LGUpe3ZhciByPW5ldyBEbShlKTtpZihyLnB1c2godCwhMCksci5lcnIpdGhyb3cgci5tc2d8fE5tW3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9RG0ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGk9dGhpcy5zdHJtLG89dGhpcy5vcHRpb25zLmNodW5rU2l6ZTtpZih0aGlzLmVuZGVkKXJldHVybiExO249ZT09PX5+ZT9lOiEwPT09ZT80OjAsInN0cmluZyI9PXR5cGVvZiB0P2kuaW5wdXQ9Q20uc3RyaW5nMmJ1Zih0KToiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09Rm0uY2FsbCh0KT9pLmlucHV0PW5ldyBVaW50OEFycmF5KHQpOmkuaW5wdXQ9dCxpLm5leHRfaW49MCxpLmF2YWlsX2luPWkuaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1pLmF2YWlsX291dCYmKGkub3V0cHV0PW5ldyB6bS5CdWY4KG8pLGkubmV4dF9vdXQ9MCxpLmF2YWlsX291dD1vKSwxIT09KHI9am0uZGVmbGF0ZShpLG4pKSYmMCE9PXIpcmV0dXJuIHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCwhMTswIT09aS5hdmFpbF9vdXQmJigwIT09aS5hdmFpbF9pbnx8NCE9PW4mJjIhPT1uKXx8KCJzdHJpbmciPT09dGhpcy5vcHRpb25zLnRvP3RoaXMub25EYXRhKENtLmJ1ZjJiaW5zdHJpbmcoem0uc2hyaW5rQnVmKGkub3V0cHV0LGkubmV4dF9vdXQpKSk6dGhpcy5vbkRhdGEoem0uc2hyaW5rQnVmKGkub3V0cHV0LGkubmV4dF9vdXQpKSl9d2hpbGUoKGkuYXZhaWxfaW4+MHx8MD09PWkuYXZhaWxfb3V0KSYmMSE9PXIpO3JldHVybiA0PT09bj8ocj1qbS5kZWZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChyKSx0aGlzLmVuZGVkPSEwLDA9PT1yKToyIT09bnx8KHRoaXMub25FbmQoMCksaS5hdmFpbF9vdXQ9MCwhMCl9LERtLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5jaHVua3MucHVzaCh0KX0sRG0ucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKHQpezA9PT10JiYoInN0cmluZyI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5yZXN1bHQ9dGhpcy5jaHVua3Muam9pbigiIik6dGhpcy5yZXN1bHQ9em0uZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPXQsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sZmIuRGVmbGF0ZT1EbSxmYi5kZWZsYXRlPXFtLGZiLmRlZmxhdGVSYXc9ZnVuY3Rpb24odCxlKXtyZXR1cm4oZT1lfHx7fSkucmF3PSEwLHFtKHQsZSl9LGZiLmd6aXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4oZT1lfHx7fSkuZ3ppcD0hMCxxbSh0LGUpfTt2YXIgJG09e30sWm09e30sSG09dWIsR209MTUsV209WzMsNCw1LDYsNyw4LDksMTAsMTEsMTMsMTUsMTcsMTksMjMsMjcsMzEsMzUsNDMsNTEsNTksNjcsODMsOTksMTE1LDEzMSwxNjMsMTk1LDIyNywyNTgsMCwwXSxWbT1bMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTcsMTcsMTcsMTcsMTgsMTgsMTgsMTgsMTksMTksMTksMTksMjAsMjAsMjAsMjAsMjEsMjEsMjEsMjEsMTYsNzIsNzhdLFltPVsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzcsMCwwXSxYbT1bMTYsMTYsMTYsMTYsMTcsMTcsMTgsMTgsMTksMTksMjAsMjAsMjEsMjEsMjIsMjIsMjMsMjMsMjQsMjQsMjUsMjUsMjYsMjYsMjcsMjcsMjgsMjgsMjksMjksNjQsNjRdLEttPXViLEptPVliLFFtPUpiLHR3PWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLG8sYSxzLHUsZixsLGMsaCxkLHAsdixnLHksYixtLHcsXyx4LGssRSxBLFM7cj10LnN0YXRlLG49dC5uZXh0X2luLEE9dC5pbnB1dCxpPW4rKHQuYXZhaWxfaW4tNSksbz10Lm5leHRfb3V0LFM9dC5vdXRwdXQsYT1vLShlLXQuYXZhaWxfb3V0KSxzPW8rKHQuYXZhaWxfb3V0LTI1NyksdT1yLmRtYXgsZj1yLndzaXplLGw9ci53aGF2ZSxjPXIud25leHQsaD1yLndpbmRvdyxkPXIuaG9sZCxwPXIuYml0cyx2PXIubGVuY29kZSxnPXIuZGlzdGNvZGUseT0oMTw8ci5sZW5iaXRzKS0xLGI9KDE8PHIuZGlzdGJpdHMpLTE7dDpkb3twPDE1JiYoZCs9QVtuKytdPDxwLHArPTgsZCs9QVtuKytdPDxwLHArPTgpLG09dltkJnldO2U6Zm9yKDs7KXtpZihkPj4+PXc9bT4+PjI0LHAtPXcsMD09PSh3PW0+Pj4xNiYyNTUpKVNbbysrXT02NTUzNSZtO2Vsc2V7aWYoISgxNiZ3KSl7aWYoMD09KDY0JncpKXttPXZbKDY1NTM1Jm0pKyhkJigxPDx3KS0xKV07Y29udGludWUgZX1pZigzMiZ3KXtyLm1vZGU9MTI7YnJlYWsgdH10Lm1zZz0iaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIixyLm1vZGU9MzA7YnJlYWsgdH1fPTY1NTM1Jm0sKHcmPTE1KSYmKHA8dyYmKGQrPUFbbisrXTw8cCxwKz04KSxfKz1kJigxPDx3KS0xLGQ+Pj49dyxwLT13KSxwPDE1JiYoZCs9QVtuKytdPDxwLHArPTgsZCs9QVtuKytdPDxwLHArPTgpLG09Z1tkJmJdO3I6Zm9yKDs7KXtpZihkPj4+PXc9bT4+PjI0LHAtPXcsISgxNiYodz1tPj4+MTYmMjU1KSkpe2lmKDA9PSg2NCZ3KSl7bT1nWyg2NTUzNSZtKSsoZCYoMTw8dyktMSldO2NvbnRpbnVlIHJ9dC5tc2c9ImludmFsaWQgZGlzdGFuY2UgY29kZSIsci5tb2RlPTMwO2JyZWFrIHR9aWYoeD02NTUzNSZtLHA8KHcmPTE1KSYmKGQrPUFbbisrXTw8cCwocCs9OCk8dyYmKGQrPUFbbisrXTw8cCxwKz04KSksKHgrPWQmKDE8PHcpLTEpPnUpe3QubXNnPSJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsci5tb2RlPTMwO2JyZWFrIHR9aWYoZD4+Pj13LHAtPXcseD4odz1vLWEpKXtpZigodz14LXcpPmwmJnIuc2FuZSl7dC5tc2c9ImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIixyLm1vZGU9MzA7YnJlYWsgdH1pZihrPTAsRT1oLDA9PT1jKXtpZihrKz1mLXcsdzxfKXtfLT13O2Rve1NbbysrXT1oW2srK119d2hpbGUoLS13KTtrPW8teCxFPVN9fWVsc2UgaWYoYzx3KXtpZihrKz1mK2Mtdywody09Yyk8Xyl7Xy09dztkb3tTW28rK109aFtrKytdfXdoaWxlKC0tdyk7aWYoaz0wLGM8Xyl7Xy09dz1jO2Rve1NbbysrXT1oW2srK119d2hpbGUoLS13KTtrPW8teCxFPVN9fX1lbHNlIGlmKGsrPWMtdyx3PF8pe18tPXc7ZG97U1tvKytdPWhbaysrXX13aGlsZSgtLXcpO2s9by14LEU9U31mb3IoO18+MjspU1tvKytdPUVbaysrXSxTW28rK109RVtrKytdLFNbbysrXT1FW2srK10sXy09MztfJiYoU1tvKytdPUVbaysrXSxfPjEmJihTW28rK109RVtrKytdKSl9ZWxzZXtrPW8teDtkb3tTW28rK109U1trKytdLFNbbysrXT1TW2srK10sU1tvKytdPVNbaysrXSxfLT0zfXdoaWxlKF8+Mik7XyYmKFNbbysrXT1TW2srK10sXz4xJiYoU1tvKytdPVNbaysrXSkpfWJyZWFrfX1icmVha319d2hpbGUobjxpJiZvPHMpO24tPV89cD4+MyxkJj0oMTw8KHAtPV88PDMpKS0xLHQubmV4dF9pbj1uLHQubmV4dF9vdXQ9byx0LmF2YWlsX2luPW48aT9pLW4rNTo1LShuLWkpLHQuYXZhaWxfb3V0PW88cz9zLW8rMjU3OjI1Ny0oby1zKSxyLmhvbGQ9ZCxyLmJpdHM9cH0sZXc9ZnVuY3Rpb24odCxlLHIsbixpLG8sYSxzKXt2YXIgdSxmLGwsYyxoLGQscCx2LGcseT1zLmJpdHMsYj0wLG09MCx3PTAsXz0wLHg9MCxrPTAsRT0wLEE9MCxTPTAsTz0wLFQ9bnVsbCxCPTAsST1uZXcgSG0uQnVmMTYoMTYpLFA9bmV3IEhtLkJ1ZjE2KDE2KSxSPW51bGwsTT0wO2ZvcihiPTA7Yjw9R207YisrKUlbYl09MDtmb3IobT0wO208bjttKyspSVtlW3IrbV1dKys7Zm9yKHg9eSxfPUdtO18+PTEmJjA9PT1JW19dO18tLSk7aWYoeD5fJiYoeD1fKSwwPT09XylyZXR1cm4gaVtvKytdPTIwOTcxNTIwLGlbbysrXT0yMDk3MTUyMCxzLmJpdHM9MSwwO2Zvcih3PTE7dzxfJiYwPT09SVt3XTt3KyspO2Zvcih4PHcmJih4PXcpLEE9MSxiPTE7Yjw9R207YisrKWlmKEE8PD0xLChBLT1JW2JdKTwwKXJldHVybi0xO2lmKEE+MCYmKDA9PT10fHwxIT09XykpcmV0dXJuLTE7Zm9yKFBbMV09MCxiPTE7YjxHbTtiKyspUFtiKzFdPVBbYl0rSVtiXTtmb3IobT0wO208bjttKyspMCE9PWVbcittXSYmKGFbUFtlW3IrbV1dKytdPW0pO2lmKDA9PT10PyhUPVI9YSxkPTE5KToxPT09dD8oVD1XbSxCLT0yNTcsUj1WbSxNLT0yNTcsZD0yNTYpOihUPVltLFI9WG0sZD0tMSksTz0wLG09MCxiPXcsaD1vLGs9eCxFPTAsbD0tMSxjPShTPTE8PHgpLTEsMT09PXQmJlM+ODUyfHwyPT09dCYmUz41OTIpcmV0dXJuIDE7Zm9yKDs7KXtwPWItRSxhW21dPGQ/KHY9MCxnPWFbbV0pOmFbbV0+ZD8odj1SW00rYVttXV0sZz1UW0IrYVttXV0pOih2PTk2LGc9MCksdT0xPDxiLUUsdz1mPTE8PGs7ZG97aVtoKyhPPj5FKSsoZi09dSldPXA8PDI0fHY8PDE2fGd8MH13aGlsZSgwIT09Zik7Zm9yKHU9MTw8Yi0xO08mdTspdT4+PTE7aWYoMCE9PXU/KE8mPXUtMSxPKz11KTpPPTAsbSsrLDA9PS0tSVtiXSl7aWYoYj09PV8pYnJlYWs7Yj1lW3IrYVttXV19aWYoYj54JiYoTyZjKSE9PWwpe2ZvcigwPT09RSYmKEU9eCksaCs9dyxBPTE8PChrPWItRSk7aytFPF8mJiEoKEEtPUlbaytFXSk8PTApOylrKyssQTw8PTE7aWYoUys9MTw8aywxPT09dCYmUz44NTJ8fDI9PT10JiZTPjU5MilyZXR1cm4gMTtpW2w9TyZjXT14PDwyNHxrPDwxNnxoLW98MH19cmV0dXJuIDAhPT1PJiYoaVtoK09dPWItRTw8MjR8NjQ8PDE2fDApLHMuYml0cz14LDB9LHJ3PS0yLG53PTEyLGl3PTMwO2Z1bmN0aW9uIG93KHQpe3JldHVybih0Pj4+MjQmMjU1KSsodD4+PjgmNjUyODApKygoNjUyODAmdCk8PDgpKygoMjU1JnQpPDwyNCl9ZnVuY3Rpb24gYXcoKXt0aGlzLm1vZGU9MCx0aGlzLmxhc3Q9ITEsdGhpcy53cmFwPTAsdGhpcy5oYXZlZGljdD0hMSx0aGlzLmZsYWdzPTAsdGhpcy5kbWF4PTAsdGhpcy5jaGVjaz0wLHRoaXMudG90YWw9MCx0aGlzLmhlYWQ9bnVsbCx0aGlzLndiaXRzPTAsdGhpcy53c2l6ZT0wLHRoaXMud2hhdmU9MCx0aGlzLnduZXh0PTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLmhvbGQ9MCx0aGlzLmJpdHM9MCx0aGlzLmxlbmd0aD0wLHRoaXMub2Zmc2V0PTAsdGhpcy5leHRyYT0wLHRoaXMubGVuY29kZT1udWxsLHRoaXMuZGlzdGNvZGU9bnVsbCx0aGlzLmxlbmJpdHM9MCx0aGlzLmRpc3RiaXRzPTAsdGhpcy5uY29kZT0wLHRoaXMubmxlbj0wLHRoaXMubmRpc3Q9MCx0aGlzLmhhdmU9MCx0aGlzLm5leHQ9bnVsbCx0aGlzLmxlbnM9bmV3IEttLkJ1ZjE2KDMyMCksdGhpcy53b3JrPW5ldyBLbS5CdWYxNigyODgpLHRoaXMubGVuZHluPW51bGwsdGhpcy5kaXN0ZHluPW51bGwsdGhpcy5zYW5lPTAsdGhpcy5iYWNrPTAsdGhpcy53YXM9MH1mdW5jdGlvbiBzdyh0KXt2YXIgZTtyZXR1cm4gdCYmdC5zdGF0ZT8oZT10LnN0YXRlLHQudG90YWxfaW49dC50b3RhbF9vdXQ9ZS50b3RhbD0wLHQubXNnPSIiLGUud3JhcCYmKHQuYWRsZXI9MSZlLndyYXApLGUubW9kZT0xLGUubGFzdD0wLGUuaGF2ZWRpY3Q9MCxlLmRtYXg9MzI3NjgsZS5oZWFkPW51bGwsZS5ob2xkPTAsZS5iaXRzPTAsZS5sZW5jb2RlPWUubGVuZHluPW5ldyBLbS5CdWYzMig4NTIpLGUuZGlzdGNvZGU9ZS5kaXN0ZHluPW5ldyBLbS5CdWYzMig1OTIpLGUuc2FuZT0xLGUuYmFjaz0tMSwwKTpyd31mdW5jdGlvbiB1dyh0KXt2YXIgZTtyZXR1cm4gdCYmdC5zdGF0ZT8oKGU9dC5zdGF0ZSkud3NpemU9MCxlLndoYXZlPTAsZS53bmV4dD0wLHN3KHQpKTpyd31mdW5jdGlvbiBmdyh0LGUpe3ZhciByLG47cmV0dXJuIHQmJnQuc3RhdGU/KG49dC5zdGF0ZSxlPDA/KHI9MCxlPS1lKToocj0xKyhlPj40KSxlPDQ4JiYoZSY9MTUpKSxlJiYoZTw4fHxlPjE1KT9ydzoobnVsbCE9PW4ud2luZG93JiZuLndiaXRzIT09ZSYmKG4ud2luZG93PW51bGwpLG4ud3JhcD1yLG4ud2JpdHM9ZSx1dyh0KSkpOnJ3fWZ1bmN0aW9uIGx3KHQsZSl7dmFyIHIsbjtyZXR1cm4gdD8obj1uZXcgYXcsdC5zdGF0ZT1uLG4ud2luZG93PW51bGwsMCE9PShyPWZ3KHQsZSkpJiYodC5zdGF0ZT1udWxsKSxyKTpyd312YXIgY3csaHcsZHc9ITA7ZnVuY3Rpb24gcHcodCl7aWYoZHcpe3ZhciBlO2Zvcihjdz1uZXcgS20uQnVmMzIoNTEyKSxodz1uZXcgS20uQnVmMzIoMzIpLGU9MDtlPDE0NDspdC5sZW5zW2UrK109ODtmb3IoO2U8MjU2Oyl0LmxlbnNbZSsrXT05O2Zvcig7ZTwyODA7KXQubGVuc1tlKytdPTc7Zm9yKDtlPDI4ODspdC5sZW5zW2UrK109ODtmb3IoZXcoMSx0LmxlbnMsMCwyODgsY3csMCx0Lndvcmsse2JpdHM6OX0pLGU9MDtlPDMyOyl0LmxlbnNbZSsrXT01O2V3KDIsdC5sZW5zLDAsMzIsaHcsMCx0Lndvcmsse2JpdHM6NX0pLGR3PSExfXQubGVuY29kZT1jdyx0LmxlbmJpdHM9OSx0LmRpc3Rjb2RlPWh3LHQuZGlzdGJpdHM9NX1mdW5jdGlvbiB2dyh0LGUscixuKXt2YXIgaSxvPXQuc3RhdGU7cmV0dXJuIG51bGw9PT1vLndpbmRvdyYmKG8ud3NpemU9MTw8by53Yml0cyxvLnduZXh0PTAsby53aGF2ZT0wLG8ud2luZG93PW5ldyBLbS5CdWY4KG8ud3NpemUpKSxuPj1vLndzaXplPyhLbS5hcnJheVNldChvLndpbmRvdyxlLHItby53c2l6ZSxvLndzaXplLDApLG8ud25leHQ9MCxvLndoYXZlPW8ud3NpemUpOigoaT1vLndzaXplLW8ud25leHQpPm4mJihpPW4pLEttLmFycmF5U2V0KG8ud2luZG93LGUsci1uLGksby53bmV4dCksKG4tPWkpPyhLbS5hcnJheVNldChvLndpbmRvdyxlLHItbixuLDApLG8ud25leHQ9bixvLndoYXZlPW8ud3NpemUpOihvLnduZXh0Kz1pLG8ud25leHQ9PT1vLndzaXplJiYoby53bmV4dD0wKSxvLndoYXZlPG8ud3NpemUmJihvLndoYXZlKz1pKSkpLDB9Wm0uaW5mbGF0ZVJlc2V0PXV3LFptLmluZmxhdGVSZXNldDI9ZncsWm0uaW5mbGF0ZVJlc2V0S2VlcD1zdyxabS5pbmZsYXRlSW5pdD1mdW5jdGlvbih0KXtyZXR1cm4gbHcodCwxNSl9LFptLmluZmxhdGVJbml0Mj1sdyxabS5pbmZsYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLG8sYSxzLHUsZixsLGMsaCxkLHAsdixnLHksYixtLHcsXyx4LGssRSxBLFM9MCxPPW5ldyBLbS5CdWY4KDQpLFQ9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdO2lmKCF0fHwhdC5zdGF0ZXx8IXQub3V0cHV0fHwhdC5pbnB1dCYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIHJ3OyhyPXQuc3RhdGUpLm1vZGU9PT1udyYmKHIubW9kZT0xMyksYT10Lm5leHRfb3V0LGk9dC5vdXRwdXQsdT10LmF2YWlsX291dCxvPXQubmV4dF9pbixuPXQuaW5wdXQscz10LmF2YWlsX2luLGY9ci5ob2xkLGw9ci5iaXRzLGM9cyxoPXUsaz0wO3Q6Zm9yKDs7KXN3aXRjaChyLm1vZGUpe2Nhc2UgMTppZigwPT09ci53cmFwKXtyLm1vZGU9MTM7YnJlYWt9Zm9yKDtsPDE2Oyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9aWYoMiZyLndyYXAmJjM1NjE1PT09Zil7ci5jaGVjaz0wLE9bMF09MjU1JmYsT1sxXT1mPj4+OCYyNTUsci5jaGVjaz1RbShyLmNoZWNrLE8sMiwwKSxmPTAsbD0wLHIubW9kZT0yO2JyZWFrfWlmKHIuZmxhZ3M9MCxyLmhlYWQmJihyLmhlYWQuZG9uZT0hMSksISgxJnIud3JhcCl8fCgoKDI1NSZmKTw8OCkrKGY+PjgpKSUzMSl7dC5tc2c9ImluY29ycmVjdCBoZWFkZXIgY2hlY2siLHIubW9kZT1pdzticmVha31pZig4IT0oMTUmZikpe3QubXNnPSJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCIsci5tb2RlPWl3O2JyZWFrfWlmKGwtPTQseD04KygxNSYoZj4+Pj00KSksMD09PXIud2JpdHMpci53Yml0cz14O2Vsc2UgaWYoeD5yLndiaXRzKXt0Lm1zZz0iaW52YWxpZCB3aW5kb3cgc2l6ZSIsci5tb2RlPWl3O2JyZWFrfXIuZG1heD0xPDx4LHQuYWRsZXI9ci5jaGVjaz0xLHIubW9kZT01MTImZj8xMDpudyxmPTAsbD0wO2JyZWFrO2Nhc2UgMjpmb3IoO2w8MTY7KXtpZigwPT09cylicmVhayB0O3MtLSxmKz1uW28rK108PGwsbCs9OH1pZihyLmZsYWdzPWYsOCE9KDI1NSZyLmZsYWdzKSl7dC5tc2c9InVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIixyLm1vZGU9aXc7YnJlYWt9aWYoNTczNDQmci5mbGFncyl7dC5tc2c9InVua25vd24gaGVhZGVyIGZsYWdzIHNldCIsci5tb2RlPWl3O2JyZWFrfXIuaGVhZCYmKHIuaGVhZC50ZXh0PWY+PjgmMSksNTEyJnIuZmxhZ3MmJihPWzBdPTI1NSZmLE9bMV09Zj4+PjgmMjU1LHIuY2hlY2s9UW0oci5jaGVjayxPLDIsMCkpLGY9MCxsPTAsci5tb2RlPTM7Y2FzZSAzOmZvcig7bDwzMjspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fXIuaGVhZCYmKHIuaGVhZC50aW1lPWYpLDUxMiZyLmZsYWdzJiYoT1swXT0yNTUmZixPWzFdPWY+Pj44JjI1NSxPWzJdPWY+Pj4xNiYyNTUsT1szXT1mPj4+MjQmMjU1LHIuY2hlY2s9UW0oci5jaGVjayxPLDQsMCkpLGY9MCxsPTAsci5tb2RlPTQ7Y2FzZSA0OmZvcig7bDwxNjspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fXIuaGVhZCYmKHIuaGVhZC54ZmxhZ3M9MjU1JmYsci5oZWFkLm9zPWY+PjgpLDUxMiZyLmZsYWdzJiYoT1swXT0yNTUmZixPWzFdPWY+Pj44JjI1NSxyLmNoZWNrPVFtKHIuY2hlY2ssTywyLDApKSxmPTAsbD0wLHIubW9kZT01O2Nhc2UgNTppZigxMDI0JnIuZmxhZ3Mpe2Zvcig7bDwxNjspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fXIubGVuZ3RoPWYsci5oZWFkJiYoci5oZWFkLmV4dHJhX2xlbj1mKSw1MTImci5mbGFncyYmKE9bMF09MjU1JmYsT1sxXT1mPj4+OCYyNTUsci5jaGVjaz1RbShyLmNoZWNrLE8sMiwwKSksZj0wLGw9MH1lbHNlIHIuaGVhZCYmKHIuaGVhZC5leHRyYT1udWxsKTtyLm1vZGU9NjtjYXNlIDY6aWYoMTAyNCZyLmZsYWdzJiYoKGQ9ci5sZW5ndGgpPnMmJihkPXMpLGQmJihyLmhlYWQmJih4PXIuaGVhZC5leHRyYV9sZW4tci5sZW5ndGgsci5oZWFkLmV4dHJhfHwoci5oZWFkLmV4dHJhPW5ldyBBcnJheShyLmhlYWQuZXh0cmFfbGVuKSksS20uYXJyYXlTZXQoci5oZWFkLmV4dHJhLG4sbyxkLHgpKSw1MTImci5mbGFncyYmKHIuY2hlY2s9UW0oci5jaGVjayxuLGQsbykpLHMtPWQsbys9ZCxyLmxlbmd0aC09ZCksci5sZW5ndGgpKWJyZWFrIHQ7ci5sZW5ndGg9MCxyLm1vZGU9NztjYXNlIDc6aWYoMjA0OCZyLmZsYWdzKXtpZigwPT09cylicmVhayB0O2Q9MDtkb3t4PW5bbytkKytdLHIuaGVhZCYmeCYmci5sZW5ndGg8NjU1MzYmJihyLmhlYWQubmFtZSs9U3RyaW5nLmZyb21DaGFyQ29kZSh4KSl9d2hpbGUoeCYmZDxzKTtpZig1MTImci5mbGFncyYmKHIuY2hlY2s9UW0oci5jaGVjayxuLGQsbykpLHMtPWQsbys9ZCx4KWJyZWFrIHR9ZWxzZSByLmhlYWQmJihyLmhlYWQubmFtZT1udWxsKTtyLmxlbmd0aD0wLHIubW9kZT04O2Nhc2UgODppZig0MDk2JnIuZmxhZ3Mpe2lmKDA9PT1zKWJyZWFrIHQ7ZD0wO2Rve3g9bltvK2QrK10sci5oZWFkJiZ4JiZyLmxlbmd0aDw2NTUzNiYmKHIuaGVhZC5jb21tZW50Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHgpKX13aGlsZSh4JiZkPHMpO2lmKDUxMiZyLmZsYWdzJiYoci5jaGVjaz1RbShyLmNoZWNrLG4sZCxvKSkscy09ZCxvKz1kLHgpYnJlYWsgdH1lbHNlIHIuaGVhZCYmKHIuaGVhZC5jb21tZW50PW51bGwpO3IubW9kZT05O2Nhc2UgOTppZig1MTImci5mbGFncyl7Zm9yKDtsPDE2Oyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9aWYoZiE9PSg2NTUzNSZyLmNoZWNrKSl7dC5tc2c9ImhlYWRlciBjcmMgbWlzbWF0Y2giLHIubW9kZT1pdzticmVha31mPTAsbD0wfXIuaGVhZCYmKHIuaGVhZC5oY3JjPXIuZmxhZ3M+PjkmMSxyLmhlYWQuZG9uZT0hMCksdC5hZGxlcj1yLmNoZWNrPTAsci5tb2RlPW53O2JyZWFrO2Nhc2UgMTA6Zm9yKDtsPDMyOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9dC5hZGxlcj1yLmNoZWNrPW93KGYpLGY9MCxsPTAsci5tb2RlPTExO2Nhc2UgMTE6aWYoMD09PXIuaGF2ZWRpY3QpcmV0dXJuIHQubmV4dF9vdXQ9YSx0LmF2YWlsX291dD11LHQubmV4dF9pbj1vLHQuYXZhaWxfaW49cyxyLmhvbGQ9ZixyLmJpdHM9bCwyO3QuYWRsZXI9ci5jaGVjaz0xLHIubW9kZT1udztjYXNlIG53OmlmKDU9PT1lfHw2PT09ZSlicmVhayB0O2Nhc2UgMTM6aWYoci5sYXN0KXtmPj4+PTcmbCxsLT03Jmwsci5tb2RlPTI3O2JyZWFrfWZvcig7bDwzOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9c3dpdGNoKHIubGFzdD0xJmYsbC09MSwzJihmPj4+PTEpKXtjYXNlIDA6ci5tb2RlPTE0O2JyZWFrO2Nhc2UgMTppZihwdyhyKSxyLm1vZGU9MjAsNj09PWUpe2Y+Pj49MixsLT0yO2JyZWFrIHR9YnJlYWs7Y2FzZSAyOnIubW9kZT0xNzticmVhaztjYXNlIDM6dC5tc2c9ImludmFsaWQgYmxvY2sgdHlwZSIsci5tb2RlPWl3fWY+Pj49MixsLT0yO2JyZWFrO2Nhc2UgMTQ6Zm9yKGY+Pj49NyZsLGwtPTcmbDtsPDMyOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9aWYoKDY1NTM1JmYpIT0oZj4+PjE2XjY1NTM1KSl7dC5tc2c9ImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMiLHIubW9kZT1pdzticmVha31pZihyLmxlbmd0aD02NTUzNSZmLGY9MCxsPTAsci5tb2RlPTE1LDY9PT1lKWJyZWFrIHQ7Y2FzZSAxNTpyLm1vZGU9MTY7Y2FzZSAxNjppZihkPXIubGVuZ3RoKXtpZihkPnMmJihkPXMpLGQ+dSYmKGQ9dSksMD09PWQpYnJlYWsgdDtLbS5hcnJheVNldChpLG4sbyxkLGEpLHMtPWQsbys9ZCx1LT1kLGErPWQsci5sZW5ndGgtPWQ7YnJlYWt9ci5tb2RlPW53O2JyZWFrO2Nhc2UgMTc6Zm9yKDtsPDE0Oyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9aWYoci5ubGVuPTI1NysoMzEmZiksZj4+Pj01LGwtPTUsci5uZGlzdD0xKygzMSZmKSxmPj4+PTUsbC09NSxyLm5jb2RlPTQrKDE1JmYpLGY+Pj49NCxsLT00LHIubmxlbj4yODZ8fHIubmRpc3Q+MzApe3QubXNnPSJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scyIsci5tb2RlPWl3O2JyZWFrfXIuaGF2ZT0wLHIubW9kZT0xODtjYXNlIDE4OmZvcig7ci5oYXZlPHIubmNvZGU7KXtmb3IoO2w8Mzspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fXIubGVuc1tUW3IuaGF2ZSsrXV09NyZmLGY+Pj49MyxsLT0zfWZvcig7ci5oYXZlPDE5OylyLmxlbnNbVFtyLmhhdmUrK11dPTA7aWYoci5sZW5jb2RlPXIubGVuZHluLHIubGVuYml0cz03LEU9e2JpdHM6ci5sZW5iaXRzfSxrPWV3KDAsci5sZW5zLDAsMTksci5sZW5jb2RlLDAsci53b3JrLEUpLHIubGVuYml0cz1FLmJpdHMsayl7dC5tc2c9ImludmFsaWQgY29kZSBsZW5ndGhzIHNldCIsci5tb2RlPWl3O2JyZWFrfXIuaGF2ZT0wLHIubW9kZT0xOTtjYXNlIDE5OmZvcig7ci5oYXZlPHIubmxlbityLm5kaXN0Oyl7Zm9yKDt5PShTPXIubGVuY29kZVtmJigxPDxyLmxlbmJpdHMpLTFdKT4+PjE2JjI1NSxiPTY1NTM1JlMsISgoZz1TPj4+MjQpPD1sKTspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fWlmKGI8MTYpZj4+Pj1nLGwtPWcsci5sZW5zW3IuaGF2ZSsrXT1iO2Vsc2V7aWYoMTY9PT1iKXtmb3IoQT1nKzI7bDxBOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9aWYoZj4+Pj1nLGwtPWcsMD09PXIuaGF2ZSl7dC5tc2c9ImludmFsaWQgYml0IGxlbmd0aCByZXBlYXQiLHIubW9kZT1pdzticmVha314PXIubGVuc1tyLmhhdmUtMV0sZD0zKygzJmYpLGY+Pj49MixsLT0yfWVsc2UgaWYoMTc9PT1iKXtmb3IoQT1nKzM7bDxBOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9bC09Zyx4PTAsZD0zKyg3JihmPj4+PWcpKSxmPj4+PTMsbC09M31lbHNle2ZvcihBPWcrNztsPEE7KXtpZigwPT09cylicmVhayB0O3MtLSxmKz1uW28rK108PGwsbCs9OH1sLT1nLHg9MCxkPTExKygxMjcmKGY+Pj49ZykpLGY+Pj49NyxsLT03fWlmKHIuaGF2ZStkPnIubmxlbityLm5kaXN0KXt0Lm1zZz0iaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCIsci5tb2RlPWl3O2JyZWFrfWZvcig7ZC0tOylyLmxlbnNbci5oYXZlKytdPXh9fWlmKHIubW9kZT09PWl3KWJyZWFrO2lmKDA9PT1yLmxlbnNbMjU2XSl7dC5tc2c9ImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayIsci5tb2RlPWl3O2JyZWFrfWlmKHIubGVuYml0cz05LEU9e2JpdHM6ci5sZW5iaXRzfSxrPWV3KDEsci5sZW5zLDAsci5ubGVuLHIubGVuY29kZSwwLHIud29yayxFKSxyLmxlbmJpdHM9RS5iaXRzLGspe3QubXNnPSJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQiLHIubW9kZT1pdzticmVha31pZihyLmRpc3RiaXRzPTYsci5kaXN0Y29kZT1yLmRpc3RkeW4sRT17Yml0czpyLmRpc3RiaXRzfSxrPWV3KDIsci5sZW5zLHIubmxlbixyLm5kaXN0LHIuZGlzdGNvZGUsMCxyLndvcmssRSksci5kaXN0Yml0cz1FLmJpdHMsayl7dC5tc2c9ImludmFsaWQgZGlzdGFuY2VzIHNldCIsci5tb2RlPWl3O2JyZWFrfWlmKHIubW9kZT0yMCw2PT09ZSlicmVhayB0O2Nhc2UgMjA6ci5tb2RlPTIxO2Nhc2UgMjE6aWYocz49NiYmdT49MjU4KXt0Lm5leHRfb3V0PWEsdC5hdmFpbF9vdXQ9dSx0Lm5leHRfaW49byx0LmF2YWlsX2luPXMsci5ob2xkPWYsci5iaXRzPWwsdHcodCxoKSxhPXQubmV4dF9vdXQsaT10Lm91dHB1dCx1PXQuYXZhaWxfb3V0LG89dC5uZXh0X2luLG49dC5pbnB1dCxzPXQuYXZhaWxfaW4sZj1yLmhvbGQsbD1yLmJpdHMsci5tb2RlPT09bncmJihyLmJhY2s9LTEpO2JyZWFrfWZvcihyLmJhY2s9MDt5PShTPXIubGVuY29kZVtmJigxPDxyLmxlbmJpdHMpLTFdKT4+PjE2JjI1NSxiPTY1NTM1JlMsISgoZz1TPj4+MjQpPD1sKTspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fWlmKHkmJjA9PSgyNDAmeSkpe2ZvcihtPWcsdz15LF89Yjt5PShTPXIubGVuY29kZVtfKygoZiYoMTw8bSt3KS0xKT4+bSldKT4+PjE2JjI1NSxiPTY1NTM1JlMsIShtKyhnPVM+Pj4yNCk8PWwpOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9Zj4+Pj1tLGwtPW0sci5iYWNrKz1tfWlmKGY+Pj49ZyxsLT1nLHIuYmFjays9ZyxyLmxlbmd0aD1iLDA9PT15KXtyLm1vZGU9MjY7YnJlYWt9aWYoMzImeSl7ci5iYWNrPS0xLHIubW9kZT1udzticmVha31pZig2NCZ5KXt0Lm1zZz0iaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIixyLm1vZGU9aXc7YnJlYWt9ci5leHRyYT0xNSZ5LHIubW9kZT0yMjtjYXNlIDIyOmlmKHIuZXh0cmEpe2ZvcihBPXIuZXh0cmE7bDxBOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9ci5sZW5ndGgrPWYmKDE8PHIuZXh0cmEpLTEsZj4+Pj1yLmV4dHJhLGwtPXIuZXh0cmEsci5iYWNrKz1yLmV4dHJhfXIud2FzPXIubGVuZ3RoLHIubW9kZT0yMztjYXNlIDIzOmZvcig7eT0oUz1yLmRpc3Rjb2RlW2YmKDE8PHIuZGlzdGJpdHMpLTFdKT4+PjE2JjI1NSxiPTY1NTM1JlMsISgoZz1TPj4+MjQpPD1sKTspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fWlmKDA9PSgyNDAmeSkpe2ZvcihtPWcsdz15LF89Yjt5PShTPXIuZGlzdGNvZGVbXysoKGYmKDE8PG0rdyktMSk+Pm0pXSk+Pj4xNiYyNTUsYj02NTUzNSZTLCEobSsoZz1TPj4+MjQpPD1sKTspe2lmKDA9PT1zKWJyZWFrIHQ7cy0tLGYrPW5bbysrXTw8bCxsKz04fWY+Pj49bSxsLT1tLHIuYmFjays9bX1pZihmPj4+PWcsbC09ZyxyLmJhY2srPWcsNjQmeSl7dC5tc2c9ImludmFsaWQgZGlzdGFuY2UgY29kZSIsci5tb2RlPWl3O2JyZWFrfXIub2Zmc2V0PWIsci5leHRyYT0xNSZ5LHIubW9kZT0yNDtjYXNlIDI0OmlmKHIuZXh0cmEpe2ZvcihBPXIuZXh0cmE7bDxBOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZis9bltvKytdPDxsLGwrPTh9ci5vZmZzZXQrPWYmKDE8PHIuZXh0cmEpLTEsZj4+Pj1yLmV4dHJhLGwtPXIuZXh0cmEsci5iYWNrKz1yLmV4dHJhfWlmKHIub2Zmc2V0PnIuZG1heCl7dC5tc2c9ImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIixyLm1vZGU9aXc7YnJlYWt9ci5tb2RlPTI1O2Nhc2UgMjU6aWYoMD09PXUpYnJlYWsgdDtpZihkPWgtdSxyLm9mZnNldD5kKXtpZigoZD1yLm9mZnNldC1kKT5yLndoYXZlJiZyLnNhbmUpe3QubXNnPSJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsci5tb2RlPWl3O2JyZWFrfWQ+ci53bmV4dD8oZC09ci53bmV4dCxwPXIud3NpemUtZCk6cD1yLnduZXh0LWQsZD5yLmxlbmd0aCYmKGQ9ci5sZW5ndGgpLHY9ci53aW5kb3d9ZWxzZSB2PWkscD1hLXIub2Zmc2V0LGQ9ci5sZW5ndGg7ZD51JiYoZD11KSx1LT1kLHIubGVuZ3RoLT1kO2Rve2lbYSsrXT12W3ArK119d2hpbGUoLS1kKTswPT09ci5sZW5ndGgmJihyLm1vZGU9MjEpO2JyZWFrO2Nhc2UgMjY6aWYoMD09PXUpYnJlYWsgdDtpW2ErK109ci5sZW5ndGgsdS0tLHIubW9kZT0yMTticmVhaztjYXNlIDI3OmlmKHIud3JhcCl7Zm9yKDtsPDMyOyl7aWYoMD09PXMpYnJlYWsgdDtzLS0sZnw9bltvKytdPDxsLGwrPTh9aWYoaC09dSx0LnRvdGFsX291dCs9aCxyLnRvdGFsKz1oLGgmJih0LmFkbGVyPXIuY2hlY2s9ci5mbGFncz9RbShyLmNoZWNrLGksaCxhLWgpOkptKHIuY2hlY2ssaSxoLGEtaCkpLGg9dSwoci5mbGFncz9mOm93KGYpKSE9PXIuY2hlY2spe3QubXNnPSJpbmNvcnJlY3QgZGF0YSBjaGVjayIsci5tb2RlPWl3O2JyZWFrfWY9MCxsPTB9ci5tb2RlPTI4O2Nhc2UgMjg6aWYoci53cmFwJiZyLmZsYWdzKXtmb3IoO2w8MzI7KXtpZigwPT09cylicmVhayB0O3MtLSxmKz1uW28rK108PGwsbCs9OH1pZihmIT09KDQyOTQ5NjcyOTUmci50b3RhbCkpe3QubXNnPSJpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrIixyLm1vZGU9aXc7YnJlYWt9Zj0wLGw9MH1yLm1vZGU9Mjk7Y2FzZSAyOTprPTE7YnJlYWsgdDtjYXNlIGl3Oms9LTM7YnJlYWsgdDtjYXNlIDMxOnJldHVybi00O2Nhc2UgMzI6ZGVmYXVsdDpyZXR1cm4gcnd9cmV0dXJuIHQubmV4dF9vdXQ9YSx0LmF2YWlsX291dD11LHQubmV4dF9pbj1vLHQuYXZhaWxfaW49cyxyLmhvbGQ9ZixyLmJpdHM9bCwoci53c2l6ZXx8aCE9PXQuYXZhaWxfb3V0JiZyLm1vZGU8aXcmJihyLm1vZGU8Mjd8fDQhPT1lKSkmJnZ3KHQsdC5vdXRwdXQsdC5uZXh0X291dCxoLXQuYXZhaWxfb3V0KSxjLT10LmF2YWlsX2luLGgtPXQuYXZhaWxfb3V0LHQudG90YWxfaW4rPWMsdC50b3RhbF9vdXQrPWgsci50b3RhbCs9aCxyLndyYXAmJmgmJih0LmFkbGVyPXIuY2hlY2s9ci5mbGFncz9RbShyLmNoZWNrLGksaCx0Lm5leHRfb3V0LWgpOkptKHIuY2hlY2ssaSxoLHQubmV4dF9vdXQtaCkpLHQuZGF0YV90eXBlPXIuYml0cysoci5sYXN0PzY0OjApKyhyLm1vZGU9PT1udz8xMjg6MCkrKDIwPT09ci5tb2RlfHwxNT09PXIubW9kZT8yNTY6MCksKDA9PT1jJiYwPT09aHx8ND09PWUpJiYwPT09ayYmKGs9LTUpLGt9LFptLmluZmxhdGVFbmQ9ZnVuY3Rpb24odCl7aWYoIXR8fCF0LnN0YXRlKXJldHVybiBydzt2YXIgZT10LnN0YXRlO3JldHVybiBlLndpbmRvdyYmKGUud2luZG93PW51bGwpLHQuc3RhdGU9bnVsbCwwfSxabS5pbmZsYXRlR2V0SGVhZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI7cmV0dXJuIHQmJnQuc3RhdGU/MD09KDImKHI9dC5zdGF0ZSkud3JhcCk/cnc6KHIuaGVhZD1lLGUuZG9uZT0hMSwwKTpyd30sWm0uaW5mbGF0ZVNldERpY3Rpb25hcnk9ZnVuY3Rpb24odCxlKXt2YXIgcixuPWUubGVuZ3RoO3JldHVybiB0JiZ0LnN0YXRlPzAhPT0ocj10LnN0YXRlKS53cmFwJiYxMSE9PXIubW9kZT9ydzoxMT09PXIubW9kZSYmSm0oMSxlLG4sMCkhPT1yLmNoZWNrPy0zOnZ3KHQsZSxuLG4pPyhyLm1vZGU9MzEsLTQpOihyLmhhdmVkaWN0PTEsMCk6cnd9LFptLmluZmxhdGVJbmZvPSJwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIjt2YXIgZ3c9e1pfTk9fRkxVU0g6MCxaX1BBUlRJQUxfRkxVU0g6MSxaX1NZTkNfRkxVU0g6MixaX0ZVTExfRkxVU0g6MyxaX0ZJTklTSDo0LFpfQkxPQ0s6NSxaX1RSRUVTOjYsWl9PSzowLFpfU1RSRUFNX0VORDoxLFpfTkVFRF9ESUNUOjIsWl9FUlJOTzotMSxaX1NUUkVBTV9FUlJPUjotMixaX0RBVEFfRVJST1I6LTMsWl9CVUZfRVJST1I6LTUsWl9OT19DT01QUkVTU0lPTjowLFpfQkVTVF9TUEVFRDoxLFpfQkVTVF9DT01QUkVTU0lPTjo5LFpfREVGQVVMVF9DT01QUkVTU0lPTjotMSxaX0ZJTFRFUkVEOjEsWl9IVUZGTUFOX09OTFk6MixaX1JMRTozLFpfRklYRUQ6NCxaX0RFRkFVTFRfU1RSQVRFR1k6MCxaX0JJTkFSWTowLFpfVEVYVDoxLFpfVU5LTk9XTjoyLFpfREVGTEFURUQ6OH07dmFyIHl3PVptLGJ3PXViLG13PU9tLHd3PWd3LF93PVFiLHh3PUxtLGt3PWZ1bmN0aW9uKCl7dGhpcy50ZXh0PTAsdGhpcy50aW1lPTAsdGhpcy54ZmxhZ3M9MCx0aGlzLm9zPTAsdGhpcy5leHRyYT1udWxsLHRoaXMuZXh0cmFfbGVuPTAsdGhpcy5uYW1lPSIiLHRoaXMuY29tbWVudD0iIix0aGlzLmhjcmM9MCx0aGlzLmRvbmU9ITF9LEV3PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZnVuY3Rpb24gQXcodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgQXcpKXJldHVybiBuZXcgQXcodCk7dGhpcy5vcHRpb25zPWJ3LmFzc2lnbih7Y2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MCx0bzoiIn0sdHx8e30pO3ZhciBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPj0wJiZlLndpbmRvd0JpdHM8MTYmJihlLndpbmRvd0JpdHM9LWUud2luZG93Qml0cywwPT09ZS53aW5kb3dCaXRzJiYoZS53aW5kb3dCaXRzPS0xNSkpLCEoZS53aW5kb3dCaXRzPj0wJiZlLndpbmRvd0JpdHM8MTYpfHx0JiZ0LndpbmRvd0JpdHN8fChlLndpbmRvd0JpdHMrPTMyKSxlLndpbmRvd0JpdHM+MTUmJmUud2luZG93Qml0czw0OCYmMD09KDE1JmUud2luZG93Qml0cykmJihlLndpbmRvd0JpdHN8PTE1KSx0aGlzLmVycj0wLHRoaXMubXNnPSIiLHRoaXMuZW5kZWQ9ITEsdGhpcy5jaHVua3M9W10sdGhpcy5zdHJtPW5ldyB4dyx0aGlzLnN0cm0uYXZhaWxfb3V0PTA7dmFyIHI9eXcuaW5mbGF0ZUluaXQyKHRoaXMuc3RybSxlLndpbmRvd0JpdHMpO2lmKHIhPT13dy5aX09LKXRocm93IG5ldyBFcnJvcihfd1tyXSk7aWYodGhpcy5oZWFkZXI9bmV3IGt3LHl3LmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLHRoaXMuaGVhZGVyKSxlLmRpY3Rpb25hcnkmJigic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9lLmRpY3Rpb25hcnk9bXcuc3RyaW5nMmJ1ZihlLmRpY3Rpb25hcnkpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1Fdy5jYWxsKGUuZGljdGlvbmFyeSkmJihlLmRpY3Rpb25hcnk9bmV3IFVpbnQ4QXJyYXkoZS5kaWN0aW9uYXJ5KSksZS5yYXcmJihyPXl3LmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxlLmRpY3Rpb25hcnkpKSE9PXd3LlpfT0spKXRocm93IG5ldyBFcnJvcihfd1tyXSl9ZnVuY3Rpb24gU3codCxlKXt2YXIgcj1uZXcgQXcoZSk7aWYoci5wdXNoKHQsITApLHIuZXJyKXRocm93IHIubXNnfHxfd1tyLmVycl07cmV0dXJuIHIucmVzdWx0fUF3LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLG8sYSxzPXRoaXMuc3RybSx1PXRoaXMub3B0aW9ucy5jaHVua1NpemUsZj10aGlzLm9wdGlvbnMuZGljdGlvbmFyeSxsPSExO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7bj1lPT09fn5lP2U6ITA9PT1lP3d3LlpfRklOSVNIOnd3LlpfTk9fRkxVU0gsInN0cmluZyI9PXR5cGVvZiB0P3MuaW5wdXQ9bXcuYmluc3RyaW5nMmJ1Zih0KToiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09RXcuY2FsbCh0KT9zLmlucHV0PW5ldyBVaW50OEFycmF5KHQpOnMuaW5wdXQ9dCxzLm5leHRfaW49MCxzLmF2YWlsX2luPXMuaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1zLmF2YWlsX291dCYmKHMub3V0cHV0PW5ldyBidy5CdWY4KHUpLHMubmV4dF9vdXQ9MCxzLmF2YWlsX291dD11KSwocj15dy5pbmZsYXRlKHMsd3cuWl9OT19GTFVTSCkpPT09d3cuWl9ORUVEX0RJQ1QmJmYmJihyPXl3LmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxmKSkscj09PXd3LlpfQlVGX0VSUk9SJiYhMD09PWwmJihyPXd3LlpfT0ssbD0hMSksciE9PXd3LlpfU1RSRUFNX0VORCYmciE9PXd3LlpfT0spcmV0dXJuIHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCwhMTtzLm5leHRfb3V0JiYoMCE9PXMuYXZhaWxfb3V0JiZyIT09d3cuWl9TVFJFQU1fRU5EJiYoMCE9PXMuYXZhaWxfaW58fG4hPT13dy5aX0ZJTklTSCYmbiE9PXd3LlpfU1lOQ19GTFVTSCl8fCgic3RyaW5nIj09PXRoaXMub3B0aW9ucy50bz8oaT1tdy51dGY4Ym9yZGVyKHMub3V0cHV0LHMubmV4dF9vdXQpLG89cy5uZXh0X291dC1pLGE9bXcuYnVmMnN0cmluZyhzLm91dHB1dCxpKSxzLm5leHRfb3V0PW8scy5hdmFpbF9vdXQ9dS1vLG8mJmJ3LmFycmF5U2V0KHMub3V0cHV0LHMub3V0cHV0LGksbywwKSx0aGlzLm9uRGF0YShhKSk6dGhpcy5vbkRhdGEoYncuc2hyaW5rQnVmKHMub3V0cHV0LHMubmV4dF9vdXQpKSkpLDA9PT1zLmF2YWlsX2luJiYwPT09cy5hdmFpbF9vdXQmJihsPSEwKX13aGlsZSgocy5hdmFpbF9pbj4wfHwwPT09cy5hdmFpbF9vdXQpJiZyIT09d3cuWl9TVFJFQU1fRU5EKTtyZXR1cm4gcj09PXd3LlpfU1RSRUFNX0VORCYmKG49d3cuWl9GSU5JU0gpLG49PT13dy5aX0ZJTklTSD8ocj15dy5pbmZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChyKSx0aGlzLmVuZGVkPSEwLHI9PT13dy5aX09LKTpuIT09d3cuWl9TWU5DX0ZMVVNIfHwodGhpcy5vbkVuZCh3dy5aX09LKSxzLmF2YWlsX291dD0wLCEwKX0sQXcucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt0aGlzLmNodW5rcy5wdXNoKHQpfSxBdy5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24odCl7dD09PXd3LlpfT0smJigic3RyaW5nIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKCIiKTp0aGlzLnJlc3VsdD1idy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9dCx0aGlzLm1zZz10aGlzLnN0cm0ubXNnfSwkbS5JbmZsYXRlPUF3LCRtLmluZmxhdGU9U3csJG0uaW5mbGF0ZVJhdz1mdW5jdGlvbih0LGUpe3JldHVybihlPWV8fHt9KS5yYXc9ITAsU3codCxlKX0sJG0udW5nemlwPVN3O3ZhciBPdz17fTsoMCx1Yi5hc3NpZ24pKE93LGZiLCRtLGd3KTt2YXIgVHc9T3csQnc9enAuZXhwb3J0cyxJdz1CdyhhYiksUHc9Qncoc2IuZXhwb3J0cyksUnc9VHcuWl9TWU5DX0ZMVVNILE13PVR3LkluZmxhdGU7ZnVuY3Rpb24gTHcodCl7cmV0dXJuIGp3LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBqdygpe3JldHVybihqdz0oMCxQdy5kZWZhdWx0KShJdy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHIsbixpLG8sYSxzLHU7cmV0dXJuIEl3LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6dC5wcmV2PTAsbj0wLGk9MCxvPVtdO2Nhc2UgNDppZihzPWUuc2xpY2UobiksYT1uZXcgTXcscj1hLnN0cm0sYS5wdXNoKHMsUncpLCFhLmVycil7dC5uZXh0PTExO2JyZWFrfXRocm93IG5ldyBFcnJvcihhLm1zZyk7Y2FzZSAxMTpuKz1yLm5leHRfaW4sb1tpXT1CdWZmZXIuZnJvbShhLnJlc3VsdCksaSs9MTtjYXNlIDE0OmlmKHIuYXZhaWxfaW4pe3QubmV4dD00O2JyZWFrfWNhc2UgMTU6cmV0dXJuIHU9QnVmZmVyLmNvbmNhdChvKSx0LmFicnVwdCgicmV0dXJuIix1KTtjYXNlIDE5OmlmKHQucHJldj0xOSx0LnQwPXQuY2F0Y2goMCksIXQudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKXt0Lm5leHQ9MjM7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJwcm9ibGVtIGRlY29tcHJlc3NpbmcgYmxvY2s6IGluY29ycmVjdCBnemlwIGhlYWRlciBjaGVjayIpO2Nhc2UgMjM6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LG51bGwsW1swLDE5XV0pfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIHp3KCl7cmV0dXJuKHp3PSgwLFB3LmRlZmF1bHQpKEl3LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuLGksbyxhLHMsdSxmLGwsYztyZXR1cm4gSXcuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDp0LnByZXY9MCxuPTAsaT0wLG89W10sYT1bXSxzPVtdO2Nhc2UgNjppZih1PWUuc2xpY2UobiksZj1uZXcgTXcscj1mLnN0cm0sZi5wdXNoKHUsUncpLCFmLmVycil7dC5uZXh0PTEyO2JyZWFrfXRocm93IG5ldyBFcnJvcihmLm1zZyk7Y2FzZSAxMjpsPUJ1ZmZlci5mcm9tKGYucmVzdWx0KSxvLnB1c2gobCksYS5wdXNoKG4pLHMucHVzaChpKSxuKz1yLm5leHRfaW4saSs9bC5sZW5ndGg7Y2FzZSAxODppZihyLmF2YWlsX2luKXt0Lm5leHQ9NjticmVha31jYXNlIDE5OnJldHVybiBjPUJ1ZmZlci5jb25jYXQobyksdC5hYnJ1cHQoInJldHVybiIse2J1ZmZlcjpjLGNwb3NpdGlvbnM6YSxkcG9zaXRpb25zOnN9KTtjYXNlIDIzOmlmKHQucHJldj0yMyx0LnQwPXQuY2F0Y2goMCksIXQudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKXt0Lm5leHQ9Mjc7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJwcm9ibGVtIGRlY29tcHJlc3NpbmcgYmxvY2s6IGluY29ycmVjdCBnemlwIGhlYWRlciBjaGVjayIpO2Nhc2UgMjc6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LG51bGwsW1swLDIzXV0pfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEN3KCl7cmV0dXJuKEN3PSgwLFB3LmRlZmF1bHQpKEl3LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlLHIpe3ZhciBuLGksbyxhLHMsdSxmLGwsYyxoLGQscDtyZXR1cm4gSXcuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDp0LnByZXY9MCxpPXIubWludi5ibG9ja1Bvc2l0aW9uLG89ci5taW52LmRhdGFQb3NpdGlvbixhPVtdLHM9W10sdT1bXTtjYXNlIDY6aWYoZj1lLnNsaWNlKGktci5taW52LmJsb2NrUG9zaXRpb24pLGw9bmV3IE13LG49bC5zdHJtLGwucHVzaChmLFJ3KSwhbC5lcnIpe3QubmV4dD0xMjticmVha310aHJvdyBuZXcgRXJyb3IobC5tc2cpO2Nhc2UgMTI6aWYoYz1CdWZmZXIuZnJvbShsLnJlc3VsdCksYS5wdXNoKGMpLGg9Yy5sZW5ndGgscy5wdXNoKGkpLHUucHVzaChvKSwxPT09YS5sZW5ndGgmJnIubWludi5kYXRhUG9zaXRpb24mJihhWzBdPWFbMF0uc2xpY2Uoci5taW52LmRhdGFQb3NpdGlvbiksaD1hWzBdLmxlbmd0aCksZD1pLGkrPW4ubmV4dF9pbixvKz1oLCEoZD49ci5tYXh2LmJsb2NrUG9zaXRpb24pKXt0Lm5leHQ9MjY7YnJlYWt9cmV0dXJuIGFbYS5sZW5ndGgtMV09YVthLmxlbmd0aC0xXS5zbGljZSgwLHIubWF4di5ibG9ja1Bvc2l0aW9uPT09ci5taW52LmJsb2NrUG9zaXRpb24/ci5tYXh2LmRhdGFQb3NpdGlvbi1yLm1pbnYuZGF0YVBvc2l0aW9uKzE6ci5tYXh2LmRhdGFQb3NpdGlvbisxKSxzLnB1c2goaSksdS5wdXNoKG8pLHQuYWJydXB0KCJicmVhayIsMjcpO2Nhc2UgMjY6aWYobi5hdmFpbF9pbil7dC5uZXh0PTY7YnJlYWt9Y2FzZSAyNzpyZXR1cm4gcD1CdWZmZXIuY29uY2F0KGEpLHQuYWJydXB0KCJyZXR1cm4iLHtidWZmZXI6cCxjcG9zaXRpb25zOnMsZHBvc2l0aW9uczp1fSk7Y2FzZSAzMTppZih0LnByZXY9MzEsdC50MD10LmNhdGNoKDApLCF0LnQwLm1lc3NhZ2UubWF0Y2goL2luY29ycmVjdCBoZWFkZXIgY2hlY2svKSl7dC5uZXh0PTM1O2JyZWFrfXRocm93IG5ldyBFcnJvcigicHJvYmxlbSBkZWNvbXByZXNzaW5nIGJsb2NrOiBpbmNvcnJlY3QgZ3ppcCBoZWFkZXIgY2hlY2siKTtjYXNlIDM1OnRocm93IHQudDA7Y2FzZSAzNjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsbnVsbCxbWzAsMzFdXSl9KSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIE53PXt1bnppcDpMdyx1bnppcENodW5rOmZ1bmN0aW9uKHQpe3JldHVybiB6dy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHVuemlwQ2h1bmtTbGljZTpmdW5jdGlvbih0LGUpe3JldHVybiBDdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHBha29VbnppcDpMdyxub2RlVW56aXA6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIm5vZGVVbnppcCBub3QgaW1wbGVtZW50ZWQuIil9fSxVdz1FKE9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGRlZmF1bHQ6e319KSksRnc9enAuZXhwb3J0cyxEdz1GdyhhYikscXc9Rncoc2IuZXhwb3J0cyksJHc9RncoVXAuZXhwb3J0cyksWnc9RncoRnAuZXhwb3J0cyksSHc9VXcsR3c9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpeygwLCR3LmRlZmF1bHQpKHRoaXMsdCksdGhpcy5mZFByb21pc2U9SHcub3BlbihlLCJyIiksdGhpcy5wYXRoPWV9dmFyIGUscjtyZXR1cm4oMCxady5kZWZhdWx0KSh0LFt7a2V5OiJyZWFkIix2YWx1ZToocj0oMCxxdy5kZWZhdWx0KShEdy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyLG4saSl7dmFyIG8sYTtyZXR1cm4gRHcuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC5uZXh0PTIsdGhpcy5mZFByb21pc2U7Y2FzZSAyOnJldHVybiBvPXQuc2VudCx0Lm5leHQ9NSxIdy5yZWFkKG8sZSxyLG4saSk7Y2FzZSA1OnJldHVybiBhPXQuc2VudCx0LmFicnVwdCgicmV0dXJuIixhKTtjYXNlIDc6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToic3RhdCIsdmFsdWU6KGU9KDAscXcuZGVmYXVsdCkoRHcuZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KCl7dmFyIGU7cmV0dXJuIER3LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQubmV4dD0yLHRoaXMuZmRQcm9taXNlO2Nhc2UgMjpyZXR1cm4gZT10LnNlbnQsdC5hYnJ1cHQoInJldHVybiIsSHcuZnN0YXQoZSkpO2Nhc2UgNDpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksdH0oKSxXdz16cC5leHBvcnRzLFZ3PVd3KGFiKSxZdz1XdyhzYi5leHBvcnRzKSxYdz1XdyhVcC5leHBvcnRzKSxLdz1XdyhGcC5leHBvcnRzKSxKdz1pcCxRdz1Hdyx0Xz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9ZS5maWxlaGFuZGxlLG49ZS5wYXRoO2lmKCgwLFh3LmRlZmF1bHQpKHRoaXMsdCkscil0aGlzLmZpbGVoYW5kbGU9cjtlbHNle2lmKCFuKXRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBmaWxlaGFuZGxlIG9yIHBhdGggbXVzdCBiZSBkZWZpbmVkIik7dGhpcy5maWxlaGFuZGxlPW5ldyBRdyhuKX19dmFyIGUscixuO3JldHVybigwLEt3LmRlZmF1bHQpKHQsW3trZXk6Il9yZWFkTG9uZ1dpdGhPdmVyZmxvdyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAscj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLG49SncuZnJvbUJ5dGVzTEUodC5zbGljZShlLGUrOCkscik7aWYobi5ncmVhdGVyVGhhbihOdW1iZXIuTUFYX1NBRkVfSU5URUdFUil8fG4ubGVzc1RoYW4oTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpKXRocm93IG5ldyBUeXBlRXJyb3IoImludGVnZXIgb3ZlcmZsb3ciKTtyZXR1cm4gbi50b051bWJlcigpfX0se2tleToiX2dldEluZGV4Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fHwodGhpcy5pbmRleD10aGlzLl9yZWFkSW5kZXgoKSksdGhpcy5pbmRleH19LHtrZXk6Il9yZWFkSW5kZXgiLHZhbHVlOihuPSgwLFl3LmRlZmF1bHQpKFZ3LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdCgpe3ZhciBlLHIsbixpLG8sYSxzO3JldHVybiBWdy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiBlPUJ1ZmZlci5hbGxvY1Vuc2FmZSg4KSx0Lm5leHQ9Myx0aGlzLmZpbGVoYW5kbGUucmVhZChlLDAsOCwwKTtjYXNlIDM6aWYocj10aGlzLl9yZWFkTG9uZ1dpdGhPdmVyZmxvdyhlLDAsITApKXt0Lm5leHQ9NjticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsW1swLDBdXSk7Y2FzZSA2OmlmKChuPW5ldyBBcnJheShyKzEpKVswXT1bMCwwXSwhKChpPTE2KnIpPk51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSl7dC5uZXh0PTExO2JyZWFrfXRocm93IG5ldyBUeXBlRXJyb3IoImludGVnZXIgb3ZlcmZsb3ciKTtjYXNlIDExOnJldHVybiBlPUJ1ZmZlci5hbGxvY1Vuc2FmZShpKSx0Lm5leHQ9MTQsdGhpcy5maWxlaGFuZGxlLnJlYWQoZSwwLGksOCk7Y2FzZSAxNDpmb3Iobz0wO288cjtvKz0xKWE9dGhpcy5fcmVhZExvbmdXaXRoT3ZlcmZsb3coZSwxNipvKSxzPXRoaXMuX3JlYWRMb25nV2l0aE92ZXJmbG93KGUsMTYqbys4KSxuW28rMV09W2Esc107cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLG4pO2Nhc2UgMTY6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJnZXRMYXN0QmxvY2siLHZhbHVlOihyPSgwLFl3LmRlZmF1bHQpKFZ3LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdCgpe3ZhciBlO3JldHVybiBWdy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0Lm5leHQ9Mix0aGlzLl9nZXRJbmRleCgpO2Nhc2UgMjppZigoZT10LnNlbnQpLmxlbmd0aCl7dC5uZXh0PTU7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHZvaWQgMCk7Y2FzZSA1OnJldHVybiB0LmFicnVwdCgicmV0dXJuIixlW2UubGVuZ3RoLTFdKTtjYXNlIDY6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJnZXRSZWxldmFudEJsb2Nrc0ZvclJlYWQiLHZhbHVlOihlPSgwLFl3LmRlZmF1bHQpKFZ3LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlLHIpe3ZhciBuLGksbyxhLHMsdSxmLGwsYztyZXR1cm4gVncuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihuPXIrZSwwIT09ZSl7dC5uZXh0PTM7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLFtdKTtjYXNlIDM6cmV0dXJuIHQubmV4dD01LHRoaXMuX2dldEluZGV4KCk7Y2FzZSA1OmZvcihpPXQuc2VudCxvPVtdLGE9ZnVuY3Rpb24odCxlKXt2YXIgbj10WzFdLGk9ZT9lWzFdOjEvMDtyZXR1cm4gbjw9ciYmaT5yPzA6bjxyPy0xOjF9LHM9MCx1PWkubGVuZ3RoLTEsZj1NYXRoLmZsb29yKGkubGVuZ3RoLzIpLGw9YShpW2ZdLGlbZisxXSk7MCE9PWw7KWw+MD91PWYtMTpsPDAmJihzPWYrMSksZj1NYXRoLmNlaWwoKHUtcykvMikrcyxsPWEoaVtmXSxpW2YrMV0pO28ucHVzaChpW2ZdKSxjPWYrMTtjYXNlIDE1OmlmKCEoYzxpLmxlbmd0aCkpe3QubmV4dD0yMjticmVha31pZihvLnB1c2goaVtjXSksIShpW2NdWzFdPj1uKSl7dC5uZXh0PTE5O2JyZWFrfXJldHVybiB0LmFicnVwdCgiYnJlYWsiLDIyKTtjYXNlIDE5OmMrPTEsdC5uZXh0PTE1O2JyZWFrO2Nhc2UgMjI6cmV0dXJuIG9bby5sZW5ndGgtMV1bMV08biYmby5wdXNoKFtdKSx0LmFicnVwdCgicmV0dXJuIixvKTtjYXNlIDI0OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSx0fSgpLGVfPXpwLmV4cG9ydHMscl89ZV8odGIuZXhwb3J0cyksbl89ZV8oYWIpLGlfPWVfKHNiLmV4cG9ydHMpLG9fPWVfKFVwLmV4cG9ydHMpLGFfPWVfKEZwLmV4cG9ydHMpLHNfPU53LnVuemlwLHVfPUd3LGZfPXRfLGxfPXtCZ3pmRmlsZWhhbmRsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9ZS5maWxlaGFuZGxlLG49ZS5wYXRoLGk9ZS5nemlGaWxlaGFuZGxlLG89ZS5nemlQYXRoO2lmKCgwLG9fLmRlZmF1bHQpKHRoaXMsdCkscil0aGlzLmZpbGVoYW5kbGU9cjtlbHNle2lmKCFuKXRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBmaWxlaGFuZGxlIG9yIHBhdGggbXVzdCBiZSBkZWZpbmVkIik7dGhpcy5maWxlaGFuZGxlPW5ldyB1XyhuKX1pZighaSYmIW8mJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBnemlGaWxlaGFuZGxlIG9yIGd6aVBhdGggbXVzdCBiZSBkZWZpbmVkIik7dGhpcy5nemk9bmV3IGZfKHtmaWxlaGFuZGxlOmkscGF0aDppfHxvfHwhbj8iIi5jb25jYXQobiwiLmd6aSIpOm99KX12YXIgZSxyLG4saTtyZXR1cm4oMCxhXy5kZWZhdWx0KSh0LFt7a2V5OiJzdGF0Iix2YWx1ZTooaT0oMCxpXy5kZWZhdWx0KShuXy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoKXt2YXIgZTtyZXR1cm4gbl8uZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC5uZXh0PTIsdGhpcy5maWxlaGFuZGxlLnN0YXQoKTtjYXNlIDI6cmV0dXJuIGU9dC5zZW50LHQudDA9T2JqZWN0LHQudDE9ZSx0Lm5leHQ9Nyx0aGlzLmdldFVuY29tcHJlc3NlZEZpbGVTaXplKCk7Y2FzZSA3OnJldHVybiB0LnQyPXQuc2VudCx0LnQzPXZvaWQgMCx0LnQ0PXZvaWQgMCx0LnQ1PXtzaXplOnQudDIsYmxvY2tzOnQudDMsYmxrc2l6ZTp0LnQ0fSx0LmFicnVwdCgicmV0dXJuIix0LnQwLmFzc2lnbi5jYWxsKHQudDAsdC50MSx0LnQ1KSk7Y2FzZSAxMjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImdldFVuY29tcHJlc3NlZEZpbGVTaXplIix2YWx1ZToobj0oMCxpXy5kZWZhdWx0KShuXy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoKXt2YXIgZSxyLG4saSxvLGEscztyZXR1cm4gbl8uZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC5uZXh0PTIsdGhpcy5nemkuZ2V0TGFzdEJsb2NrKCk7Y2FzZSAyOnJldHVybiBlPXQuc2VudCxyPSgwLHJfLmRlZmF1bHQpKGUsMiksbj1yWzFdLHQubmV4dD03LHRoaXMuZmlsZWhhbmRsZS5zdGF0KCk7Y2FzZSA3OnJldHVybiBpPXQuc2VudCxvPWkuc2l6ZSxhPUJ1ZmZlci5hbGxvY1Vuc2FmZSg0KSx0Lm5leHQ9MTIsdGhpcy5maWxlaGFuZGxlLnJlYWQoYSwwLDQsby0yOC00KTtjYXNlIDEyOmlmKDQ9PT10LnNlbnQuYnl0ZXNSZWFkKXt0Lm5leHQ9MTY7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJyZWFkIGVycm9yIik7Y2FzZSAxNjpyZXR1cm4gcz1hLnJlYWRVSW50MzJMRSgwKSx0LmFicnVwdCgicmV0dXJuIixuK3MpO2Nhc2UgMTg6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJfcmVhZEFuZFVuY29tcHJlc3NCbG9jayIsdmFsdWU6KHI9KDAsaV8uZGVmYXVsdCkobl8uZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KGUscixuKXt2YXIgaSxvLGEscyx1LGYsbDtyZXR1cm4gbl8uZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihpPSgwLHJfLmRlZmF1bHQpKHIsMSksbz1pWzBdLGE9KDAscl8uZGVmYXVsdCkobiwxKSxzPWFbMF0sdT1zKXt0Lm5leHQ9NzticmVha31yZXR1cm4gdC5uZXh0PTYsdGhpcy5maWxlaGFuZGxlLnN0YXQoKTtjYXNlIDY6dT10LnNlbnQuc2l6ZTtjYXNlIDc6cmV0dXJuIGY9dS1vLHQubmV4dD0xMCx0aGlzLmZpbGVoYW5kbGUucmVhZChlLDAsZixvKTtjYXNlIDEwOnJldHVybiB0Lm5leHQ9MTIsc18oZS5zbGljZSgwLGYpKTtjYXNlIDEyOnJldHVybiBsPXQuc2VudCx0LmFicnVwdCgicmV0dXJuIixsKTtjYXNlIDE0OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24odCxlLG4pe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJyZWFkIix2YWx1ZTooZT0oMCxpXy5kZWZhdWx0KShuXy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyLG4saSl7dmFyIG8sYSxzLHUsZixsLGMsaCxkLHA7cmV0dXJuIG5fLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQubmV4dD0yLHRoaXMuZ3ppLmdldFJlbGV2YW50QmxvY2tzRm9yUmVhZChuLGkpO2Nhc2UgMjpvPXQuc2VudCxhPUJ1ZmZlci5hbGxvY1Vuc2FmZSg2NTUzNikscz1yLHU9MCxmPTA7Y2FzZSA3OmlmKCEoZjxvLmxlbmd0aC0xKSl7dC5uZXh0PTE4O2JyZWFrfXJldHVybiB0Lm5leHQ9MTAsdGhpcy5fcmVhZEFuZFVuY29tcHJlc3NCbG9jayhhLG9bZl0sb1tmKzFdKTtjYXNlIDEwOmw9dC5zZW50LGM9KDAscl8uZGVmYXVsdCkob1tmXSwyKSxoPWNbMV0sZD1oPj1pPzA6aS1oLHA9TWF0aC5taW4oaStuLGgrbC5sZW5ndGgpLWgsZD49MCYmZDxsLmxlbmd0aCYmKGwuY29weShlLHMsZCxwKSxzKz1wLWQsdSs9cC1kKTtjYXNlIDE1OmYrPTEsdC5uZXh0PTc7YnJlYWs7Y2FzZSAxODpyZXR1cm4gdC5hYnJ1cHQoInJldHVybiIse2J5dGVzUmVhZDp1LGJ1ZmZlcjplfSk7Y2FzZSAxOTpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQscixuLGkpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLHR9KCksdW56aXA6TncudW56aXAsdW56aXBDaHVuazpOdy51bnppcENodW5rLHVuemlwQ2h1bmtTbGljZTpOdy51bnppcENodW5rU2xpY2V9OyFmdW5jdGlvbih0KXt2YXIgZT1iZy5leHBvcnRzLHI9SC5leHBvcnRzO21yKHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZGVmYXVsdD12b2lkIDA7dmFyIG49cigkbyksaT1yKFdvKSxvPXIoVm8pLGE9cihndSkscz1yKHF1KSx1PXIodGwpLGY9cihScCksbD1yKGVsLmV4cG9ydHMpLGM9cihEZCksaD1yKFF5KSxkPXIoTGwpLHA9cihqbC5leHBvcnRzKSx2PXIocWQuZXhwb3J0cyksZz1yKCRkLmV4cG9ydHMpLHk9cihKZC5leHBvcnRzKSxiPXIoWmQuZXhwb3J0cyksbT1yKFlkLmV4cG9ydHMpLHc9cihRZC5leHBvcnRzKSxfPXIoT2wuZXhwb3J0cykseD1yKGlwKSxrPWxfLEU9ZShCcCksQT1yKE1wKSxTPU12LE89cihMcCk7ZnVuY3Rpb24gVCh0LGUpe3ZhciByO2lmKHZvaWQgMD09PWEuZGVmYXVsdHx8bnVsbD09KDAsby5kZWZhdWx0KSh0KSl7aWYoKDAsaS5kZWZhdWx0KSh0KXx8KHI9ZnVuY3Rpb24odCxlKXt2YXIgcjtpZighdClyZXR1cm47aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiBCKHQsZSk7dmFyIG49KDAsYy5kZWZhdWx0KShyPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSkuY2FsbChyLDgsLTEpOyJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKTtpZigiTWFwIj09PW58fCJTZXQiPT09bilyZXR1cm4oMCxzLmRlZmF1bHQpKHQpO2lmKCJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpcmV0dXJuIEIodCxlKX0odCkpfHxlJiZ0JiYibnVtYmVyIj09dHlwZW9mIHQubGVuZ3RoKXtyJiYodD1yKTt2YXIgdT0wLGY9ZnVuY3Rpb24oKXt9O3JldHVybntzOmYsbjpmdW5jdGlvbigpe3JldHVybiB1Pj10Lmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6dFt1KytdfX0sZTpmdW5jdGlvbih0KXt0aHJvdyB0fSxmOmZ9fXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX12YXIgbCxoPSEwLGQ9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtyPSgwLG4uZGVmYXVsdCkodCl9LG46ZnVuY3Rpb24oKXt2YXIgdD1yLm5leHQoKTtyZXR1cm4gaD10LmRvbmUsdH0sZTpmdW5jdGlvbih0KXtkPSEwLGw9dH0sZjpmdW5jdGlvbigpe3RyeXtofHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKX1maW5hbGx5e2lmKGQpdGhyb3cgbH19fX1mdW5jdGlvbiBCKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciByPTAsbj1uZXcgQXJyYXkoZSk7cjxlO3IrKyluW3JdPXRbcl07cmV0dXJuIG59ZnVuY3Rpb24gSSh0KXt2YXIgZT1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IXUuZGVmYXVsdClyZXR1cm4hMTtpZih1LmRlZmF1bHQuc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCgwLHUuZGVmYXVsdCkoRGF0ZSxbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKF9FKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj0oMCx3LmRlZmF1bHQpKHQpO2lmKGUpe3ZhciBpPSgwLHcuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7cj0oMCx1LmRlZmF1bHQpKG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4oMCxtLmRlZmF1bHQpKHRoaXMscil9fWZ1bmN0aW9uIFAodCxlKXtyZXR1cm4gTWF0aC5mbG9vcih0L01hdGgucG93KDIsZSkpfXZhciBSPWZ1bmN0aW9uKHQpeygwLGIuZGVmYXVsdCkoYSx0KTt2YXIgZSxyLG4saSxvPUkoYSk7ZnVuY3Rpb24gYSh0KXt2YXIgZTtyZXR1cm4oMCx2LmRlZmF1bHQpKHRoaXMsYSksZT1vLmNhbGwodGhpcyx0KSwoMCxfLmRlZmF1bHQpKCgwLHkuZGVmYXVsdCkoZSksIm1heEJpbk51bWJlciIsdm9pZCAwKSwoMCxfLmRlZmF1bHQpKCgwLHkuZGVmYXVsdCkoZSksImRlcHRoIix2b2lkIDApLCgwLF8uZGVmYXVsdCkoKDAseS5kZWZhdWx0KShlKSwibWluU2hpZnQiLHZvaWQgMCksZS5tYXhCaW5OdW1iZXI9MCxlLmRlcHRoPTAsZS5taW5TaGlmdD0wLGV9cmV0dXJuKDAsZy5kZWZhdWx0KShhLFt7a2V5OiJsaW5lQ291bnQiLHZhbHVlOihpPSgwLHAuZGVmYXVsdCkoZC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHIsbjtyZXR1cm4gZC5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0Lm5leHQ9Mix0aGlzLnBhcnNlKCk7Y2FzZSAyOmlmKHI9dC5zZW50KXt0Lm5leHQ9NTticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsLTEpO2Nhc2UgNTppZihyLmluZGljZXNbZV0pe3QubmV4dD04O2JyZWFrfXJldHVybiB0LmFicnVwdCgicmV0dXJuIiwtMSk7Y2FzZSA4OmlmKCEobj1yLmluZGljZXNbZV0uc3RhdHMpKXt0Lm5leHQ9MTE7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLG4ubGluZUNvdW50KTtjYXNlIDExOnJldHVybiB0LmFicnVwdCgicmV0dXJuIiwtMSk7Y2FzZSAxMjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJpbmRleENvdiIsdmFsdWU6KG49KDAscC5kZWZhdWx0KShkLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdCgpe3JldHVybiBkLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLFtdKTtjYXNlIDE6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0KX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToicGFyc2VBdXhEYXRhIix2YWx1ZTpmdW5jdGlvbih0LGUscil7aWYocjwzMClyZXR1cm57fTt2YXIgbj17fTtpZihuLmZvcm1hdEZsYWdzPXQucmVhZEludDMyTEUoZSksbi5jb29yZGluYXRlVHlwZT02NTUzNiZuLmZvcm1hdEZsYWdzPyJ6ZXJvLWJhc2VkLWhhbGYtb3BlbiI6IjEtYmFzZWQtY2xvc2VkIixuLmZvcm1hdD17MDoiZ2VuZXJpYyIsMToiU0FNIiwyOiJWQ0YifVsxNSZuLmZvcm1hdEZsYWdzXSwhbi5mb3JtYXQpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIFRhYml4IHByZXNldCBmb3JtYXQgZmxhZ3MgIi5jb25jYXQobi5mb3JtYXRGbGFncykpO24uY29sdW1uTnVtYmVycz17cmVmOnQucmVhZEludDMyTEUoZSs0KSxzdGFydDp0LnJlYWRJbnQzMkxFKGUrOCksZW5kOnQucmVhZEludDMyTEUoZSsxMil9LG4ubWV0YVZhbHVlPXQucmVhZEludDMyTEUoZSsxNiksbi5tZXRhQ2hhcj1uLm1ldGFWYWx1ZT9TdHJpbmcuZnJvbUNoYXJDb2RlKG4ubWV0YVZhbHVlKToiIixuLnNraXBMaW5lcz10LnJlYWRJbnQzMkxFKGUrMjApO3ZhciBpPXQucmVhZEludDMyTEUoZSsyNCk7cmV0dXJuKDAsaC5kZWZhdWx0KShuLHRoaXMuX3BhcnNlTmFtZUJ5dGVzKCgwLGMuZGVmYXVsdCkodCkuY2FsbCh0LGUrMjgsZSsyOCtpKSkpLG59fSx7a2V5OiJfcGFyc2VOYW1lQnl0ZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9MCxuPVtdLGk9e30sbz0wO288dC5sZW5ndGg7bys9MSlpZighdFtvXSl7aWYocjxvKXt2YXIgYT10LnRvU3RyaW5nKCJ1dGY4IixyLG8pO2E9dGhpcy5yZW5hbWVSZWZTZXEoYSksbltlXT1hLGlbYV09ZX1yPW8rMSxlKz0xfXJldHVybntyZWZOYW1lVG9JZDppLHJlZklkVG9OYW1lOm59fX0se2tleToiX3BhcnNlIix2YWx1ZToocj0oMCxwLmRlZmF1bHQpKGQuZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLG4saSxvLGEscyx1LGYsbCxjLHAsdixnLHksYixtLHc7cmV0dXJuIGQuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj17Y3NpOiEwLG1heEJsb2NrU2l6ZTo2NTUzNn0sdC5uZXh0PTMsdGhpcy5maWxlaGFuZGxlLnJlYWRGaWxlKGUpO2Nhc2UgMzpyZXR1cm4gbj10LnNlbnQsdC5uZXh0PTYsKDAsay51bnppcCkobik7Y2FzZSA2OmlmKDIxNTgyNjU5IT09KGk9dC5zZW50KS5yZWFkVUludDMyTEUoMCkpe3QubmV4dD0xMTticmVha31yLmNzaVZlcnNpb249MSx0Lm5leHQ9MTY7YnJlYWs7Y2FzZSAxMTppZigzODM1OTg3NSE9PWkucmVhZFVJbnQzMkxFKDApKXt0Lm5leHQ9MTU7YnJlYWt9ci5jc2lWZXJzaW9uPTIsdC5uZXh0PTE2O2JyZWFrO2Nhc2UgMTU6dGhyb3cgbmV3IEVycm9yKCJOb3QgYSBDU0kgZmlsZSIpO2Nhc2UgMTY6dGhpcy5taW5TaGlmdD1pLnJlYWRJbnQzMkxFKDQpLHRoaXMuZGVwdGg9aS5yZWFkSW50MzJMRSg4KSx0aGlzLm1heEJpbk51bWJlcj0oKDE8PDMqKHRoaXMuZGVwdGgrMSkpLTEpLzcsKG89aS5yZWFkSW50MzJMRSgxMikpJiYoMCxoLmRlZmF1bHQpKHIsdGhpcy5wYXJzZUF1eERhdGEoaSwxNixvKSksci5yZWZDb3VudD1pLnJlYWRJbnQzMkxFKDE2K28pLHIuaW5kaWNlcz1uZXcgQXJyYXkoci5yZWZDb3VudCksYT0xNitvKzQscz0wO2Nhc2UgMjU6aWYoIShzPHIucmVmQ291bnQpKXt0Lm5leHQ9Mzc7YnJlYWt9cmV0dXJuIHQubmV4dD0yOCwoMCxTLmFib3J0QnJlYWtQb2ludCkoZS5zaWduYWwpO2Nhc2UgMjg6Zm9yKHU9aS5yZWFkSW50MzJMRShhKSxhKz00LGY9e30sbD12b2lkIDAsYz0wO2M8dTtjKz0xKWlmKChwPWkucmVhZFVJbnQzMkxFKGEpKT50aGlzLm1heEJpbk51bWJlcilsPXRoaXMucGFyc2VQc2V1ZG9CaW4oaSxhKzQpLGErPTQ4O2Vsc2V7Zm9yKHY9KDAsRS5mcm9tQnl0ZXMpKGksYSs0KSx0aGlzLl9maW5kRmlyc3REYXRhKHIsdiksZz1pLnJlYWRJbnQzMkxFKGErMTIpLGErPTE2LHk9bmV3IEFycmF5KGcpLGI9MDtiPGc7Yis9MSltPSgwLEUuZnJvbUJ5dGVzKShpLGEpLHc9KDAsRS5mcm9tQnl0ZXMpKGksYSs4KSxhKz0xNix5W2JdPW5ldyBBLmRlZmF1bHQobSx3LHApO2ZbcF09eX1yLmluZGljZXNbc109e2JpbkluZGV4OmYsc3RhdHM6bH07Y2FzZSAzNDpzKz0xLHQubmV4dD0yNTticmVhaztjYXNlIDM3OnJldHVybiB0LmFicnVwdCgicmV0dXJuIixyKTtjYXNlIDM4OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24odCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6InBhcnNlUHNldWRvQmluIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybntsaW5lQ291bnQ6KDAsUy5sb25nVG9OdW1iZXIpKHguZGVmYXVsdC5mcm9tQnl0ZXNMRSgoMCxjLmRlZmF1bHQpKEFycmF5LnByb3RvdHlwZSkuY2FsbCh0LGUrMjgsZSszNiksITApKX19fSx7a2V5OiJibG9ja3NGb3JSYW5nZSIsdmFsdWU6KGU9KDAscC5kZWZhdWx0KShkLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlLHIsbil7dmFyIGksbyxhLHMsdSxmLGMsaCxwLHYsZyx5LGIsbT1hcmd1bWVudHM7cmV0dXJuIGQuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gaT1tLmxlbmd0aD4zJiZ2b2lkIDAhPT1tWzNdP21bM106e30scjwwJiYocj0wKSx0Lm5leHQ9NCx0aGlzLnBhcnNlKGkpO2Nhc2UgNDppZihvPXQuc2VudCl7dC5uZXh0PTc7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLFtdKTtjYXNlIDc6aWYoYT1vLmluZGljZXNbZV0pe3QubmV4dD0xMDticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsW10pO2Nhc2UgMTA6cz10aGlzLnJlZzJiaW5zKHIsbiksdT1bXSxmPVQocyk7dHJ5e2ZvcihmLnMoKTshKGM9Zi5uKCkpLmRvbmU7KWZvcihoPSgwLGwuZGVmYXVsdCkoYy52YWx1ZSwyKSxwPWhbMF0sdj1oWzFdLGc9cDtnPD12O2crKylpZihhLmJpbkluZGV4W2ddKWZvcih5PWEuYmluSW5kZXhbZ10sYj0wO2I8eS5sZW5ndGg7KytiKXUucHVzaChuZXcgQS5kZWZhdWx0KHlbYl0ubWludix5W2JdLm1heHYsZykpfWNhdGNoKGQpe2YuZShkKX1maW5hbGx5e2YuZigpfXJldHVybiB0LmFicnVwdCgicmV0dXJuIiwoMCxTLm9wdGltaXplQ2h1bmtzKSh1LG5ldyBFLmRlZmF1bHQoMCwwKSkpO2Nhc2UgMTU6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6InJlZzJiaW5zIix2YWx1ZTpmdW5jdGlvbih0LGUpeyh0LT0xKTwxJiYodD0xKSxlPk1hdGgucG93KDIsNTApJiYoZT1NYXRoLnBvdygyLDM0KSksZS09MTtmb3IodmFyIHIsbj0wLGk9MCxvPXRoaXMubWluU2hpZnQrMyp0aGlzLmRlcHRoLGE9W107bjw9dGhpcy5kZXB0aDtvLT0zLGkrPShyPTMqbiwxKk1hdGgucG93KDIscikpLG4rPTEpe3ZhciBzLHUsbCxjPWkrUCh0LG8pLGg9aStQKGUsbyk7aWYoaC1jK2EubGVuZ3RoPnRoaXMubWF4QmluTnVtYmVyKXRocm93IG5ldyBFcnJvcigoMCxmLmRlZmF1bHQpKHM9KDAsZi5kZWZhdWx0KSh1PSgwLGYuZGVmYXVsdCkobD0icXVlcnkgIi5jb25jYXQodCwiLSIpKS5jYWxsKGwsZSwiIGlzIHRvbyBsYXJnZSBmb3IgY3VycmVudCBiaW5uaW5nIHNjaGVtZSAoc2hpZnQgIikpLmNhbGwodSx0aGlzLm1pblNoaWZ0LCIsIGRlcHRoICIpKS5jYWxsKHMsdGhpcy5kZXB0aCwiKSwgdHJ5IGEgc21hbGxlciBxdWVyeSBvciBhIGNvYXJzZXIgaW5kZXggYmlubmluZyBzY2hlbWUiKSk7YS5wdXNoKFtjLGhdKX1yZXR1cm4gYX19XSksYX0oTy5kZWZhdWx0KTt0LmRlZmF1bHQ9Un0oeWcpO3ZhciBjXz17fTt2cih7dGFyZ2V0OiJEYXRlIixzdGF0OiEwfSx7bm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSk7dmFyIGhfPXl0LkRhdGUubm93LGRfPUR0LHBfPVF0LHZfPWx0LGdfPWhuLHlfPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIsbixpKXtkXyhyKTt2YXIgbz1wXyhlKSxhPXZfKG8pLHM9Z18oby5sZW5ndGgpLHU9dD9zLTE6MCxmPXQ/LTE6MTtpZihuPDIpZm9yKDs7KXtpZih1IGluIGEpe2k9YVt1XSx1Kz1mO2JyZWFrfWlmKHUrPWYsdD91PDA6czw9dSl0aHJvdyBUeXBlRXJyb3IoIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKX1mb3IoO3Q/dT49MDpzPnU7dSs9Zil1IGluIGEmJihpPXIoaSxhW3VdLHUsbykpO3JldHVybiBpfX0sYl89e2xlZnQ6eV8oITEpLHJpZ2h0OnlfKCEwKX0ubGVmdCxtXz1JdCx3Xz15Yzt2cih7dGFyZ2V0OiJBcnJheSIscHJvdG86ITAsZm9yY2VkOiFyZigicmVkdWNlIil8fCF3XyYmbV8+NzkmJm1fPDgzfSx7cmVkdWNlOmZ1bmN0aW9uKHQpe3JldHVybiBiXyh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIF9fPXNmKCJBcnJheSIpLnJlZHVjZSx4Xz1BcnJheS5wcm90b3R5cGUsa189ZnVuY3Rpb24odCl7dmFyIGU9dC5yZWR1Y2U7cmV0dXJuIHQ9PT14X3x8dCBpbnN0YW5jZW9mIEFycmF5JiZlPT09eF8ucmVkdWNlP19fOmV9O3ZyKHt0YXJnZXQ6IkZ1bmN0aW9uIixwcm90bzohMH0se2JpbmQ6cWZ9KTt2YXIgRV89c2YoIkZ1bmN0aW9uIikuYmluZCxBXz1GdW5jdGlvbi5wcm90b3R5cGUsU189ZnVuY3Rpb24odCl7dmFyIGU9dC5iaW5kO3JldHVybiB0PT09QV98fHQgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZT09PUFfLmJpbmQ/RV86ZX0sT189e2V4cG9ydHM6e319LFRfPXtleHBvcnRzOnt9fSxCXz1IYS5mKCJhc3luY0l0ZXJhdG9yIiksSV89e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dGhpcy53cmFwcGVkPXR9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oSV8pLGZ1bmN0aW9uKHQpe3ZhciBlPUZkLHI9b2wsbj1CXyxpPUlfLmV4cG9ydHM7ZnVuY3Rpb24gbyh0KXt2YXIgcixuO2Z1bmN0aW9uIG8ocixuKXt0cnl7dmFyIHM9dFtyXShuKSx1PXMudmFsdWUsZj11IGluc3RhbmNlb2YgaTtlLnJlc29sdmUoZj91LndyYXBwZWQ6dSkudGhlbigoZnVuY3Rpb24odCl7Zj9vKCJyZXR1cm4iPT09cj8icmV0dXJuIjoibmV4dCIsdCk6YShzLmRvbmU/InJldHVybiI6Im5vcm1hbCIsdCl9KSwoZnVuY3Rpb24odCl7bygidGhyb3ciLHQpfSkpfWNhdGNoKGwpe2EoInRocm93IixsKX19ZnVuY3Rpb24gYSh0LGUpe3N3aXRjaCh0KXtjYXNlInJldHVybiI6ci5yZXNvbHZlKHt2YWx1ZTplLGRvbmU6ITB9KTticmVhaztjYXNlInRocm93IjpyLnJlamVjdChlKTticmVhaztkZWZhdWx0OnIucmVzb2x2ZSh7dmFsdWU6ZSxkb25lOiExfSl9KHI9ci5uZXh0KT9vKHIua2V5LHIuYXJnKTpuPW51bGx9dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyBlKChmdW5jdGlvbihlLGEpe3ZhciBzPXtrZXk6dCxhcmc6aSxyZXNvbHZlOmUscmVqZWN0OmEsbmV4dDpudWxsfTtuP249bi5uZXh0PXM6KHI9bj1zLG8odCxpKSl9KSl9LCJmdW5jdGlvbiIhPXR5cGVvZiB0LnJldHVybiYmKHRoaXMucmV0dXJuPXZvaWQgMCl9by5wcm90b3R5cGVbImZ1bmN0aW9uIj09dHlwZW9mIHImJm58fCJAQGFzeW5jSXRlcmF0b3IiXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxvLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoIm5leHQiLHQpfSxvLnByb3RvdHlwZS50aHJvdz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKCJ0aHJvdyIsdCl9LG8ucHJvdG90eXBlLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKCJyZXR1cm4iLHQpfSx0LmV4cG9ydHM9byx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KFRfKSxmdW5jdGlvbih0KXt2YXIgZT1UXy5leHBvcnRzO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShPXyk7dmFyIFBfPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dmFyIGU9SV8uZXhwb3J0czt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KFBfKTt2YXIgUl89e2V4cG9ydHM6e319OyFmdW5jdGlvbih0KXt2YXIgZT1GZCxyPW9sLG49S2Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsaSl7dmFyIG89e30sYT0hMTtmdW5jdGlvbiBzKHIsbil7cmV0dXJuIGE9ITAsbj1uZXcgZSgoZnVuY3Rpb24oZSl7ZSh0W3JdKG4pKX0pKSx7ZG9uZTohMSx2YWx1ZTppKG4pfX1yZXR1cm4gb1t2b2lkIDAhPT1yJiZufHwiQEBpdGVyYXRvciJdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LG8ubmV4dD1mdW5jdGlvbih0KXtyZXR1cm4gYT8oYT0hMSx0KTpzKCJuZXh0Iix0KX0sImZ1bmN0aW9uIj09dHlwZW9mIHQudGhyb3cmJihvLnRocm93PWZ1bmN0aW9uKHQpe2lmKGEpdGhyb3cgYT0hMSx0O3JldHVybiBzKCJ0aHJvdyIsdCl9KSwiZnVuY3Rpb24iPT10eXBlb2YgdC5yZXR1cm4mJihvLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gYT8oYT0hMSx0KTpzKCJyZXR1cm4iLHQpfSksb30sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShSXyk7dmFyIE1fPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dmFyIGU9b2wscj1CXyxuPUtkLGk9Vm87dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBvO2lmKHZvaWQgMCE9PWUmJihyJiYobz10W3JdKSxudWxsPT1vJiZuJiYobz1pKHQpKSksbnVsbD09byYmKG89dFsiQEBhc3luY0l0ZXJhdG9yIl0pLG51bGw9PW8mJihvPXRbIkBAaXRlcmF0b3IiXSksbnVsbD09byl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QgaXMgbm90IGFzeW5jIGl0ZXJhYmxlIik7cmV0dXJuIG8uY2FsbCh0KX0sdC5leHBvcnRzLmRlZmF1bHQ9dC5leHBvcnRzLHQuZXhwb3J0cy5fX2VzTW9kdWxlPSEwfShNXyk7Zm9yKHZhciBMXz17fSxqXz17Ynl0ZUxlbmd0aDpmdW5jdGlvbih0KXt2YXIgZT1xXyh0KSxyPWVbMF0sbj1lWzFdO3JldHVybiAzKihyK24pLzQtbn0sdG9CeXRlQXJyYXk6ZnVuY3Rpb24odCl7dmFyIGUscixuPXFfKHQpLGk9blswXSxvPW5bMV0sYT1uZXcgTl8oZnVuY3Rpb24odCxlLHIpe3JldHVybiAzKihlK3IpLzQtcn0oMCxpLG8pKSxzPTAsdT1vPjA/aS00Omk7Zm9yKHI9MDtyPHU7cis9NCllPUNfW3QuY2hhckNvZGVBdChyKV08PDE4fENfW3QuY2hhckNvZGVBdChyKzEpXTw8MTJ8Q19bdC5jaGFyQ29kZUF0KHIrMildPDw2fENfW3QuY2hhckNvZGVBdChyKzMpXSxhW3MrK109ZT4+MTYmMjU1LGFbcysrXT1lPj44JjI1NSxhW3MrK109MjU1JmU7Mj09PW8mJihlPUNfW3QuY2hhckNvZGVBdChyKV08PDJ8Q19bdC5jaGFyQ29kZUF0KHIrMSldPj40LGFbcysrXT0yNTUmZSk7MT09PW8mJihlPUNfW3QuY2hhckNvZGVBdChyKV08PDEwfENfW3QuY2hhckNvZGVBdChyKzEpXTw8NHxDX1t0LmNoYXJDb2RlQXQocisyKV0+PjIsYVtzKytdPWU+PjgmMjU1LGFbcysrXT0yNTUmZSk7cmV0dXJuIGF9LGZyb21CeXRlQXJyYXk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9dC5sZW5ndGgsbj1yJTMsaT1bXSxvPTE2MzgzLGE9MCxzPXItbjthPHM7YSs9bylpLnB1c2goJF8odCxhLGErbz5zP3M6YStvKSk7MT09PW4/KGU9dFtyLTFdLGkucHVzaCh6X1tlPj4yXSt6X1tlPDw0JjYzXSsiPT0iKSk6Mj09PW4mJihlPSh0W3ItMl08PDgpK3Rbci0xXSxpLnB1c2goel9bZT4+MTBdK3pfW2U+PjQmNjNdK3pfW2U8PDImNjNdKyI9IikpO3JldHVybiBpLmpvaW4oIiIpfX0sel89W10sQ189W10sTl89InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXksVV89IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLEZfPTAsRF89VV8ubGVuZ3RoO0ZfPERfOysrRl8pel9bRl9dPVVfW0ZfXSxDX1tVXy5jaGFyQ29kZUF0KEZfKV09Rl87ZnVuY3Rpb24gcV8odCl7dmFyIGU9dC5sZW5ndGg7aWYoZSU0PjApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Iik7dmFyIHI9dC5pbmRleE9mKCI9Iik7cmV0dXJuLTE9PT1yJiYocj1lKSxbcixyPT09ZT8wOjQtciU0XX1mdW5jdGlvbiAkXyh0LGUscil7Zm9yKHZhciBuLGksbz1bXSxhPWU7YTxyO2ErPTMpbj0odFthXTw8MTYmMTY3MTE2ODApKyh0W2ErMV08PDgmNjUyODApKygyNTUmdFthKzJdKSxvLnB1c2goel9bKGk9bik+PjE4JjYzXSt6X1tpPj4xMiY2M10rel9baT4+NiY2M10rel9bNjMmaV0pO3JldHVybiBvLmpvaW4oIiIpfUNfWyItIi5jaGFyQ29kZUF0KDApXT02MixDX1siXyIuY2hhckNvZGVBdCgwKV09NjM7dmFyIFpfPXsKLyohIGllZWU3NTQuIEJTRC0zLUNsYXVzZSBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi8KcmVhZDpmdW5jdGlvbih0LGUscixuLGkpe3ZhciBvLGEscz04Kmktbi0xLHU9KDE8PHMpLTEsZj11Pj4xLGw9LTcsYz1yP2ktMTowLGg9cj8tMToxLGQ9dFtlK2NdO2ZvcihjKz1oLG89ZCYoMTw8LWwpLTEsZD4+PS1sLGwrPXM7bD4wO289MjU2Km8rdFtlK2NdLGMrPWgsbC09OCk7Zm9yKGE9byYoMTw8LWwpLTEsbz4+PS1sLGwrPW47bD4wO2E9MjU2KmErdFtlK2NdLGMrPWgsbC09OCk7aWYoMD09PW8pbz0xLWY7ZWxzZXtpZihvPT09dSlyZXR1cm4gYT9OYU46MS8wKihkPy0xOjEpO2ErPU1hdGgucG93KDIsbiksby09Zn1yZXR1cm4oZD8tMToxKSphKk1hdGgucG93KDIsby1uKX0sd3JpdGU6ZnVuY3Rpb24odCxlLHIsbixpLG8pe3ZhciBhLHMsdSxmPTgqby1pLTEsbD0oMTw8ZiktMSxjPWw+PjEsaD0yMz09PWk/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowLGQ9bj8wOm8tMSxwPW4/MTotMSx2PWU8MHx8MD09PWUmJjEvZTwwPzE6MDtmb3IoZT1NYXRoLmFicyhlKSxpc05hTihlKXx8ZT09PTEvMD8ocz1pc05hTihlKT8xOjAsYT1sKTooYT1NYXRoLmZsb29yKE1hdGgubG9nKGUpL01hdGguTE4yKSxlKih1PU1hdGgucG93KDIsLWEpKTwxJiYoYS0tLHUqPTIpLChlKz1hK2M+PTE/aC91OmgqTWF0aC5wb3coMiwxLWMpKSp1Pj0yJiYoYSsrLHUvPTIpLGErYz49bD8ocz0wLGE9bCk6YStjPj0xPyhzPShlKnUtMSkqTWF0aC5wb3coMixpKSxhKz1jKToocz1lKk1hdGgucG93KDIsYy0xKSpNYXRoLnBvdygyLGkpLGE9MCkpO2k+PTg7dFtyK2RdPTI1NSZzLGQrPXAscy89MjU2LGktPTgpO2ZvcihhPWE8PGl8cyxmKz1pO2Y+MDt0W3IrZF09MjU1JmEsZCs9cCxhLz0yNTYsZi09OCk7dFtyK2QtcF18PTEyOCp2fX07Ci8qIQogICAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLgogICAqCiAgICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz4KICAgKiBAbGljZW5zZSAgTUlUCiAgICovCiFmdW5jdGlvbih0KXtjb25zdCBlPWpfLHI9Wl8sbj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sLmZvcj9TeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpOm51bGw7dC5CdWZmZXI9YSx0LlNsb3dCdWZmZXI9ZnVuY3Rpb24odCl7K3QhPXQmJih0PTApO3JldHVybiBhLmFsbG9jKCt0KX0sdC5JTlNQRUNUX01BWF9CWVRFUz01MDtjb25zdCBpPTIxNDc0ODM2NDc7ZnVuY3Rpb24gbyh0KXtpZih0PmkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSAiJyt0KyciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKTtjb25zdCBlPW5ldyBVaW50OEFycmF5KHQpO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxhLnByb3RvdHlwZSksZX1mdW5jdGlvbiBhKHQsZSxyKXtpZigibnVtYmVyIj09dHlwZW9mIHQpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInN0cmluZyIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKTtyZXR1cm4gZih0KX1yZXR1cm4gcyh0LGUscil9ZnVuY3Rpb24gcyh0LGUscil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiBmdW5jdGlvbih0LGUpeyJzdHJpbmciPT10eXBlb2YgZSYmIiIhPT1lfHwoZT0idXRmOCIpO2lmKCFhLmlzRW5jb2RpbmcoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitlKTtjb25zdCByPTB8ZCh0LGUpO2xldCBuPW8ocik7Y29uc3QgaT1uLndyaXRlKHQsZSk7aSE9PXImJihuPW4uc2xpY2UoMCxpKSk7cmV0dXJuIG59KHQsZSk7aWYoQXJyYXlCdWZmZXIuaXNWaWV3KHQpKXJldHVybiBmdW5jdGlvbih0KXtpZihXKHQsVWludDhBcnJheSkpe2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkodCk7cmV0dXJuIGMoZS5idWZmZXIsZS5ieXRlT2Zmc2V0LGUuYnl0ZUxlbmd0aCl9cmV0dXJuIGwodCl9KHQpO2lmKG51bGw9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgIit0eXBlb2YgdCk7aWYoVyh0LEFycmF5QnVmZmVyKXx8dCYmVyh0LmJ1ZmZlcixBcnJheUJ1ZmZlcikpcmV0dXJuIGModCxlLHIpO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXImJihXKHQsU2hhcmVkQXJyYXlCdWZmZXIpfHx0JiZXKHQuYnVmZmVyLFNoYXJlZEFycmF5QnVmZmVyKSkpcmV0dXJuIGModCxlLHIpO2lmKCJudW1iZXIiPT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKTtjb25zdCBuPXQudmFsdWVPZiYmdC52YWx1ZU9mKCk7aWYobnVsbCE9biYmbiE9PXQpcmV0dXJuIGEuZnJvbShuLGUscik7Y29uc3QgaT1mdW5jdGlvbih0KXtpZihhLmlzQnVmZmVyKHQpKXtjb25zdCBlPTB8aCh0Lmxlbmd0aCkscj1vKGUpO3JldHVybiAwPT09ci5sZW5ndGh8fHQuY29weShyLDAsMCxlKSxyfWlmKHZvaWQgMCE9PXQubGVuZ3RoKXJldHVybiJudW1iZXIiIT10eXBlb2YgdC5sZW5ndGh8fFYodC5sZW5ndGgpP28oMCk6bCh0KTtpZigiQnVmZmVyIj09PXQudHlwZSYmQXJyYXkuaXNBcnJheSh0LmRhdGEpKXJldHVybiBsKHQuZGF0YSl9KHQpO2lmKGkpcmV0dXJuIGk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPVN5bWJvbC50b1ByaW1pdGl2ZSYmImZ1bmN0aW9uIj09dHlwZW9mIHRbU3ltYm9sLnRvUHJpbWl0aXZlXSlyZXR1cm4gYS5mcm9tKHRbU3ltYm9sLnRvUHJpbWl0aXZlXSgic3RyaW5nIiksZSxyKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAiK3R5cGVvZiB0KX1mdW5jdGlvbiB1KHQpe2lmKCJudW1iZXIiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpO2lmKHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInK3QrJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICJzaXplIicpfWZ1bmN0aW9uIGYodCl7cmV0dXJuIHUodCksbyh0PDA/MDowfGgodCkpfWZ1bmN0aW9uIGwodCl7Y29uc3QgZT10Lmxlbmd0aDwwPzA6MHxoKHQubGVuZ3RoKSxyPW8oZSk7Zm9yKGxldCBuPTA7bjxlO24rPTEpcltuXT0yNTUmdFtuXTtyZXR1cm4gcn1mdW5jdGlvbiBjKHQsZSxyKXtpZihlPDB8fHQuYnl0ZUxlbmd0aDxlKXRocm93IG5ldyBSYW5nZUVycm9yKCcib2Zmc2V0IiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKTtpZih0LmJ5dGVMZW5ndGg8ZSsocnx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJsZW5ndGgiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpO2xldCBuO3JldHVybiBuPXZvaWQgMD09PWUmJnZvaWQgMD09PXI/bmV3IFVpbnQ4QXJyYXkodCk6dm9pZCAwPT09cj9uZXcgVWludDhBcnJheSh0LGUpOm5ldyBVaW50OEFycmF5KHQsZSxyKSxPYmplY3Quc2V0UHJvdG90eXBlT2YobixhLnByb3RvdHlwZSksbn1mdW5jdGlvbiBoKHQpe2lmKHQ+PWkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHgiK2kudG9TdHJpbmcoMTYpKyIgYnl0ZXMiKTtyZXR1cm4gMHx0fWZ1bmN0aW9uIGQodCxlKXtpZihhLmlzQnVmZmVyKHQpKXJldHVybiB0Lmxlbmd0aDtpZihBcnJheUJ1ZmZlci5pc1ZpZXcodCl8fFcodCxBcnJheUJ1ZmZlcikpcmV0dXJuIHQuYnl0ZUxlbmd0aDtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJzdHJpbmciIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIG9yIEFycmF5QnVmZmVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIHQpO2NvbnN0IHI9dC5sZW5ndGgsbj1hcmd1bWVudHMubGVuZ3RoPjImJiEwPT09YXJndW1lbnRzWzJdO2lmKCFuJiYwPT09cilyZXR1cm4gMDtsZXQgaT0hMTtmb3IoOzspc3dpdGNoKGUpe2Nhc2UiYXNjaWkiOmNhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIHI7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gWih0KS5sZW5ndGg7Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiAyKnI7Y2FzZSJoZXgiOnJldHVybiByPj4+MTtjYXNlImJhc2U2NCI6cmV0dXJuIEgodCkubGVuZ3RoO2RlZmF1bHQ6aWYoaSlyZXR1cm4gbj8tMTpaKHQpLmxlbmd0aDtlPSgiIitlKS50b0xvd2VyQ2FzZSgpLGk9ITB9fWZ1bmN0aW9uIHAodCxlLHIpe2xldCBuPSExO2lmKCh2b2lkIDA9PT1lfHxlPDApJiYoZT0wKSxlPnRoaXMubGVuZ3RoKXJldHVybiIiO2lmKCh2b2lkIDA9PT1yfHxyPnRoaXMubGVuZ3RoKSYmKHI9dGhpcy5sZW5ndGgpLHI8PTApcmV0dXJuIiI7aWYoKHI+Pj49MCk8PShlPj4+PTApKXJldHVybiIiO2Zvcih0fHwodD0idXRmOCIpOzspc3dpdGNoKHQpe2Nhc2UiaGV4IjpyZXR1cm4gVCh0aGlzLGUscik7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gRSh0aGlzLGUscik7Y2FzZSJhc2NpaSI6cmV0dXJuIFModGhpcyxlLHIpO2Nhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIE8odGhpcyxlLHIpO2Nhc2UiYmFzZTY0IjpyZXR1cm4gayh0aGlzLGUscik7Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiBCKHRoaXMsZSxyKTtkZWZhdWx0OmlmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIit0KTt0PSh0KyIiKS50b0xvd2VyQ2FzZSgpLG49ITB9fWZ1bmN0aW9uIHYodCxlLHIpe2NvbnN0IG49dFtlXTt0W2VdPXRbcl0sdFtyXT1ufWZ1bmN0aW9uIGcodCxlLHIsbixpKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuLTE7aWYoInN0cmluZyI9PXR5cGVvZiByPyhuPXIscj0wKTpyPjIxNDc0ODM2NDc/cj0yMTQ3NDgzNjQ3OnI8LTIxNDc0ODM2NDgmJihyPS0yMTQ3NDgzNjQ4KSxWKHI9K3IpJiYocj1pPzA6dC5sZW5ndGgtMSkscjwwJiYocj10Lmxlbmd0aCtyKSxyPj10Lmxlbmd0aCl7aWYoaSlyZXR1cm4tMTtyPXQubGVuZ3RoLTF9ZWxzZSBpZihyPDApe2lmKCFpKXJldHVybi0xO3I9MH1pZigic3RyaW5nIj09dHlwZW9mIGUmJihlPWEuZnJvbShlLG4pKSxhLmlzQnVmZmVyKGUpKXJldHVybiAwPT09ZS5sZW5ndGg/LTE6eSh0LGUscixuLGkpO2lmKCJudW1iZXIiPT10eXBlb2YgZSlyZXR1cm4gZSY9MjU1LCJmdW5jdGlvbiI9PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP2k/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQsZSxyKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKHQsZSxyKTp5KHQsW2VdLHIsbixpKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXIiKX1mdW5jdGlvbiB5KHQsZSxyLG4saSl7bGV0IG8sYT0xLHM9dC5sZW5ndGgsdT1lLmxlbmd0aDtpZih2b2lkIDAhPT1uJiYoInVjczIiPT09KG49U3RyaW5nKG4pLnRvTG93ZXJDYXNlKCkpfHwidWNzLTIiPT09bnx8InV0ZjE2bGUiPT09bnx8InV0Zi0xNmxlIj09PW4pKXtpZih0Lmxlbmd0aDwyfHxlLmxlbmd0aDwyKXJldHVybi0xO2E9MixzLz0yLHUvPTIsci89Mn1mdW5jdGlvbiBmKHQsZSl7cmV0dXJuIDE9PT1hP3RbZV06dC5yZWFkVUludDE2QkUoZSphKX1pZihpKXtsZXQgbj0tMTtmb3Iobz1yO288cztvKyspaWYoZih0LG8pPT09ZihlLC0xPT09bj8wOm8tbikpe2lmKC0xPT09biYmKG49byksby1uKzE9PT11KXJldHVybiBuKmF9ZWxzZS0xIT09biYmKG8tPW8tbiksbj0tMX1lbHNlIGZvcihyK3U+cyYmKHI9cy11KSxvPXI7bz49MDtvLS0pe2xldCByPSEwO2ZvcihsZXQgbj0wO248dTtuKyspaWYoZih0LG8rbikhPT1mKGUsbikpe3I9ITE7YnJlYWt9aWYocilyZXR1cm4gb31yZXR1cm4tMX1mdW5jdGlvbiBiKHQsZSxyLG4pe3I9TnVtYmVyKHIpfHwwO2NvbnN0IGk9dC5sZW5ndGgtcjtuPyhuPU51bWJlcihuKSk+aSYmKG49aSk6bj1pO2NvbnN0IG89ZS5sZW5ndGg7bGV0IGE7Zm9yKG4+by8yJiYobj1vLzIpLGE9MDthPG47KythKXtjb25zdCBuPXBhcnNlSW50KGUuc3Vic3RyKDIqYSwyKSwxNik7aWYoVihuKSlyZXR1cm4gYTt0W3IrYV09bn1yZXR1cm4gYX1mdW5jdGlvbiBtKHQsZSxyLG4pe3JldHVybiBHKFooZSx0Lmxlbmd0aC1yKSx0LHIsbil9ZnVuY3Rpb24gdyh0LGUscixuKXtyZXR1cm4gRyhmdW5jdGlvbih0KXtjb25zdCBlPVtdO2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7KytyKWUucHVzaCgyNTUmdC5jaGFyQ29kZUF0KHIpKTtyZXR1cm4gZX0oZSksdCxyLG4pfWZ1bmN0aW9uIF8odCxlLHIsbil7cmV0dXJuIEcoSChlKSx0LHIsbil9ZnVuY3Rpb24geCh0LGUscixuKXtyZXR1cm4gRyhmdW5jdGlvbih0LGUpe2xldCByLG4saTtjb25zdCBvPVtdO2ZvcihsZXQgYT0wO2E8dC5sZW5ndGgmJiEoKGUtPTIpPDApOysrYSlyPXQuY2hhckNvZGVBdChhKSxuPXI+PjgsaT1yJTI1NixvLnB1c2goaSksby5wdXNoKG4pO3JldHVybiBvfShlLHQubGVuZ3RoLXIpLHQscixuKX1mdW5jdGlvbiBrKHQscixuKXtyZXR1cm4gMD09PXImJm49PT10Lmxlbmd0aD9lLmZyb21CeXRlQXJyYXkodCk6ZS5mcm9tQnl0ZUFycmF5KHQuc2xpY2UocixuKSl9ZnVuY3Rpb24gRSh0LGUscil7cj1NYXRoLm1pbih0Lmxlbmd0aCxyKTtjb25zdCBuPVtdO2xldCBpPWU7Zm9yKDtpPHI7KXtjb25zdCBlPXRbaV07bGV0IG89bnVsbCxhPWU+MjM5PzQ6ZT4yMjM/MzplPjE5MT8yOjE7aWYoaSthPD1yKXtsZXQgcixuLHMsdTtzd2l0Y2goYSl7Y2FzZSAxOmU8MTI4JiYobz1lKTticmVhaztjYXNlIDI6cj10W2krMV0sMTI4PT0oMTkyJnIpJiYodT0oMzEmZSk8PDZ8NjMmcix1PjEyNyYmKG89dSkpO2JyZWFrO2Nhc2UgMzpyPXRbaSsxXSxuPXRbaSsyXSwxMjg9PSgxOTImcikmJjEyOD09KDE5MiZuKSYmKHU9KDE1JmUpPDwxMnwoNjMmcik8PDZ8NjMmbix1PjIwNDcmJih1PDU1Mjk2fHx1PjU3MzQzKSYmKG89dSkpO2JyZWFrO2Nhc2UgNDpyPXRbaSsxXSxuPXRbaSsyXSxzPXRbaSszXSwxMjg9PSgxOTImcikmJjEyOD09KDE5MiZuKSYmMTI4PT0oMTkyJnMpJiYodT0oMTUmZSk8PDE4fCg2MyZyKTw8MTJ8KDYzJm4pPDw2fDYzJnMsdT42NTUzNSYmdTwxMTE0MTEyJiYobz11KSl9fW51bGw9PT1vPyhvPTY1NTMzLGE9MSk6bz42NTUzNSYmKG8tPTY1NTM2LG4ucHVzaChvPj4+MTAmMTAyM3w1NTI5Niksbz01NjMyMHwxMDIzJm8pLG4ucHVzaChvKSxpKz1hfXJldHVybiBmdW5jdGlvbih0KXtjb25zdCBlPXQubGVuZ3RoO2lmKGU8PUEpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHQpO2xldCByPSIiLG49MDtmb3IoO248ZTspcis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdC5zbGljZShuLG4rPUEpKTtyZXR1cm4gcn0obil9dC5rTWF4TGVuZ3RoPWksYS5UWVBFRF9BUlJBWV9TVVBQT1JUPWZ1bmN0aW9uKCl7dHJ5e2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoMSksZT17Zm9vOmZ1bmN0aW9uKCl7cmV0dXJuIDQyfX07cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihlLFVpbnQ4QXJyYXkucHJvdG90eXBlKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKSw0Mj09PXQuZm9vKCl9Y2F0Y2goX0Upe3JldHVybiExfX0oKSxhLlRZUEVEX0FSUkFZX1NVUFBPUlR8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIGNvbnNvbGUuZXJyb3J8fGNvbnNvbGUuZXJyb3IoIlRoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSBgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LiIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSwicGFyZW50Iix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtpZihhLmlzQnVmZmVyKHRoaXMpKXJldHVybiB0aGlzLmJ1ZmZlcn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsIm9mZnNldCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7aWYoYS5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdGhpcy5ieXRlT2Zmc2V0fX0pLGEucG9vbFNpemU9ODE5MixhLmZyb209ZnVuY3Rpb24odCxlLHIpe3JldHVybiBzKHQsZSxyKX0sT2JqZWN0LnNldFByb3RvdHlwZU9mKGEucHJvdG90eXBlLFVpbnQ4QXJyYXkucHJvdG90eXBlKSxPYmplY3Quc2V0UHJvdG90eXBlT2YoYSxVaW50OEFycmF5KSxhLmFsbG9jPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZnVuY3Rpb24odCxlLHIpe3JldHVybiB1KHQpLHQ8PTA/byh0KTp2b2lkIDAhPT1lPyJzdHJpbmciPT10eXBlb2Ygcj9vKHQpLmZpbGwoZSxyKTpvKHQpLmZpbGwoZSk6byh0KX0odCxlLHIpfSxhLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKHQpe3JldHVybiBmKHQpfSxhLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbih0KXtyZXR1cm4gZih0KX0sYS5pc0J1ZmZlcj1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmITA9PT10Ll9pc0J1ZmZlciYmdCE9PWEucHJvdG90eXBlfSxhLmNvbXBhcmU9ZnVuY3Rpb24odCxlKXtpZihXKHQsVWludDhBcnJheSkmJih0PWEuZnJvbSh0LHQub2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLFcoZSxVaW50OEFycmF5KSYmKGU9YS5mcm9tKGUsZS5vZmZzZXQsZS5ieXRlTGVuZ3RoKSksIWEuaXNCdWZmZXIodCl8fCFhLmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAiYnVmMSIsICJidWYyIiBhcmd1bWVudHMgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheScpO2lmKHQ9PT1lKXJldHVybiAwO2xldCByPXQubGVuZ3RoLG49ZS5sZW5ndGg7Zm9yKGxldCBpPTAsbz1NYXRoLm1pbihyLG4pO2k8bzsrK2kpaWYodFtpXSE9PWVbaV0pe3I9dFtpXSxuPWVbaV07YnJlYWt9cmV0dXJuIHI8bj8tMTpuPHI/MTowfSxhLmlzRW5jb2Rpbmc9ZnVuY3Rpb24odCl7c3dpdGNoKFN0cmluZyh0KS50b0xvd2VyQ2FzZSgpKXtjYXNlImhleCI6Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpjYXNlImFzY2lpIjpjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOmNhc2UiYmFzZTY0IjpjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGEuY29uY2F0PWZ1bmN0aW9uKHQsZSl7aWYoIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gYS5hbGxvYygwKTtsZXQgcjtpZih2b2lkIDA9PT1lKWZvcihlPTAscj0wO3I8dC5sZW5ndGg7KytyKWUrPXRbcl0ubGVuZ3RoO2NvbnN0IG49YS5hbGxvY1Vuc2FmZShlKTtsZXQgaT0wO2ZvcihyPTA7cjx0Lmxlbmd0aDsrK3Ipe2xldCBlPXRbcl07aWYoVyhlLFVpbnQ4QXJyYXkpKWkrZS5sZW5ndGg+bi5sZW5ndGg/KGEuaXNCdWZmZXIoZSl8fChlPWEuZnJvbShlKSksZS5jb3B5KG4saSkpOlVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKG4sZSxpKTtlbHNle2lmKCFhLmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtlLmNvcHkobixpKX1pKz1lLmxlbmd0aH1yZXR1cm4gbn0sYS5ieXRlTGVuZ3RoPWQsYS5wcm90b3R5cGUuX2lzQnVmZmVyPSEwLGEucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7aWYodCUyIT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpO2ZvcihsZXQgZT0wO2U8dDtlKz0yKXYodGhpcyxlLGUrMSk7cmV0dXJuIHRoaXN9LGEucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7aWYodCU0IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cyIpO2ZvcihsZXQgZT0wO2U8dDtlKz00KXYodGhpcyxlLGUrMyksdih0aGlzLGUrMSxlKzIpO3JldHVybiB0aGlzfSxhLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMubGVuZ3RoO2lmKHQlOCE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMiKTtmb3IobGV0IGU9MDtlPHQ7ZSs9OCl2KHRoaXMsZSxlKzcpLHYodGhpcyxlKzEsZSs2KSx2KHRoaXMsZSsyLGUrNSksdih0aGlzLGUrMyxlKzQpO3JldHVybiB0aGlzfSxhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7cmV0dXJuIDA9PT10PyIiOjA9PT1hcmd1bWVudHMubGVuZ3RoP0UodGhpcywwLHQpOnAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZz1hLnByb3RvdHlwZS50b1N0cmluZyxhLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7aWYoIWEuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3JldHVybiB0aGlzPT09dHx8MD09PWEuY29tcGFyZSh0aGlzLHQpfSxhLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7bGV0IGU9IiI7Y29uc3Qgcj10LklOU1BFQ1RfTUFYX0JZVEVTO3JldHVybiBlPXRoaXMudG9TdHJpbmcoImhleCIsMCxyKS5yZXBsYWNlKC8oLnsyfSkvZywiJDEgIikudHJpbSgpLHRoaXMubGVuZ3RoPnImJihlKz0iIC4uLiAiKSwiPEJ1ZmZlciAiK2UrIj4ifSxuJiYoYS5wcm90b3R5cGVbbl09YS5wcm90b3R5cGUuaW5zcGVjdCksYS5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbih0LGUscixuLGkpe2lmKFcodCxVaW50OEFycmF5KSYmKHQ9YS5mcm9tKHQsdC5vZmZzZXQsdC5ieXRlTGVuZ3RoKSksIWEuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJ0YXJnZXQiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXkuIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgdCk7aWYodm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09ciYmKHI9dD90Lmxlbmd0aDowKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1pJiYoaT10aGlzLmxlbmd0aCksZTwwfHxyPnQubGVuZ3RofHxuPDB8fGk+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm91dCBvZiByYW5nZSBpbmRleCIpO2lmKG4+PWkmJmU+PXIpcmV0dXJuIDA7aWYobj49aSlyZXR1cm4tMTtpZihlPj1yKXJldHVybiAxO2lmKHRoaXM9PT10KXJldHVybiAwO2xldCBvPShpPj4+PTApLShuPj4+PTApLHM9KHI+Pj49MCktKGU+Pj49MCk7Y29uc3QgdT1NYXRoLm1pbihvLHMpLGY9dGhpcy5zbGljZShuLGkpLGw9dC5zbGljZShlLHIpO2ZvcihsZXQgYT0wO2E8dTsrK2EpaWYoZlthXSE9PWxbYV0pe289ZlthXSxzPWxbYV07YnJlYWt9cmV0dXJuIG88cz8tMTpzPG8/MTowfSxhLnByb3RvdHlwZS5pbmNsdWRlcz1mdW5jdGlvbih0LGUscil7cmV0dXJuLTEhPT10aGlzLmluZGV4T2YodCxlLHIpfSxhLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZyh0aGlzLHQsZSxyLCEwKX0sYS5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBnKHRoaXMsdCxlLHIsITEpfSxhLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0LGUscixuKXtpZih2b2lkIDA9PT1lKW49InV0ZjgiLHI9dGhpcy5sZW5ndGgsZT0wO2Vsc2UgaWYodm9pZCAwPT09ciYmInN0cmluZyI9PXR5cGVvZiBlKW49ZSxyPXRoaXMubGVuZ3RoLGU9MDtlbHNle2lmKCFpc0Zpbml0ZShlKSl0aHJvdyBuZXcgRXJyb3IoIkJ1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkIik7ZT4+Pj0wLGlzRmluaXRlKHIpPyhyPj4+PTAsdm9pZCAwPT09biYmKG49InV0ZjgiKSk6KG49cixyPXZvaWQgMCl9Y29uc3QgaT10aGlzLmxlbmd0aC1lO2lmKCh2b2lkIDA9PT1yfHxyPmkpJiYocj1pKSx0Lmxlbmd0aD4wJiYocjwwfHxlPDApfHxlPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpO258fChuPSJ1dGY4Iik7bGV0IG89ITE7Zm9yKDs7KXN3aXRjaChuKXtjYXNlImhleCI6cmV0dXJuIGIodGhpcyx0LGUscik7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gbSh0aGlzLHQsZSxyKTtjYXNlImFzY2lpIjpjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiB3KHRoaXMsdCxlLHIpO2Nhc2UiYmFzZTY0IjpyZXR1cm4gXyh0aGlzLHQsZSxyKTtjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuIHgodGhpcyx0LGUscik7ZGVmYXVsdDppZihvKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrbik7bj0oIiIrbikudG9Mb3dlckNhc2UoKSxvPSEwfX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6IkJ1ZmZlciIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTtjb25zdCBBPTQwOTY7ZnVuY3Rpb24gUyh0LGUscil7bGV0IG49IiI7cj1NYXRoLm1pbih0Lmxlbmd0aCxyKTtmb3IobGV0IGk9ZTtpPHI7KytpKW4rPVN0cmluZy5mcm9tQ2hhckNvZGUoMTI3JnRbaV0pO3JldHVybiBufWZ1bmN0aW9uIE8odCxlLHIpe2xldCBuPSIiO3I9TWF0aC5taW4odC5sZW5ndGgscik7Zm9yKGxldCBpPWU7aTxyOysraSluKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbaV0pO3JldHVybiBufWZ1bmN0aW9uIFQodCxlLHIpe2NvbnN0IG49dC5sZW5ndGg7KCFlfHxlPDApJiYoZT0wKSwoIXJ8fHI8MHx8cj5uKSYmKHI9bik7bGV0IGk9IiI7Zm9yKGxldCBvPWU7bzxyOysrbylpKz1ZW3Rbb11dO3JldHVybiBpfWZ1bmN0aW9uIEIodCxlLHIpe2NvbnN0IG49dC5zbGljZShlLHIpO2xldCBpPSIiO2ZvcihsZXQgbz0wO288bi5sZW5ndGgtMTtvKz0yKWkrPVN0cmluZy5mcm9tQ2hhckNvZGUobltvXSsyNTYqbltvKzFdKTtyZXR1cm4gaX1mdW5jdGlvbiBJKHQsZSxyKXtpZih0JTEhPTB8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7aWYodCtlPnIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKX1mdW5jdGlvbiBQKHQsZSxyLG4saSxvKXtpZighYS5pc0J1ZmZlcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYoZT5pfHxlPG8pdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKHIrbj50Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIil9ZnVuY3Rpb24gUih0LGUscixuLGkpe0YoZSxuLGksdCxyLDcpO2xldCBvPU51bWJlcihlJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7dFtyKytdPW8sbz4+PTgsdFtyKytdPW8sbz4+PTgsdFtyKytdPW8sbz4+PTgsdFtyKytdPW87bGV0IGE9TnVtYmVyKGU+PkJpZ0ludCgzMikmQmlnSW50KDQyOTQ5NjcyOTUpKTtyZXR1cm4gdFtyKytdPWEsYT4+PTgsdFtyKytdPWEsYT4+PTgsdFtyKytdPWEsYT4+PTgsdFtyKytdPWEscn1mdW5jdGlvbiBNKHQsZSxyLG4saSl7RihlLG4saSx0LHIsNyk7bGV0IG89TnVtYmVyKGUmQmlnSW50KDQyOTQ5NjcyOTUpKTt0W3IrN109byxvPj49OCx0W3IrNl09byxvPj49OCx0W3IrNV09byxvPj49OCx0W3IrNF09bztsZXQgYT1OdW1iZXIoZT4+QmlnSW50KDMyKSZCaWdJbnQoNDI5NDk2NzI5NSkpO3JldHVybiB0W3IrM109YSxhPj49OCx0W3IrMl09YSxhPj49OCx0W3IrMV09YSxhPj49OCx0W3JdPWEscis4fWZ1bmN0aW9uIEwodCxlLHIsbixpLG8pe2lmKHIrbj50Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7aWYocjwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiBqKHQsZSxuLGksbyl7cmV0dXJuIGU9K2Usbj4+Pj0wLG98fEwodCwwLG4sNCksci53cml0ZSh0LGUsbixpLDIzLDQpLG4rNH1mdW5jdGlvbiB6KHQsZSxuLGksbyl7cmV0dXJuIGU9K2Usbj4+Pj0wLG98fEwodCwwLG4sOCksci53cml0ZSh0LGUsbixpLDUyLDgpLG4rOH1hLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe2NvbnN0IHI9dGhpcy5sZW5ndGg7KHQ9fn50KTwwPyh0Kz1yKTwwJiYodD0wKTp0PnImJih0PXIpLChlPXZvaWQgMD09PWU/cjp+fmUpPDA/KGUrPXIpPDAmJihlPTApOmU+ciYmKGU9ciksZTx0JiYoZT10KTtjb25zdCBuPXRoaXMuc3ViYXJyYXkodCxlKTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sYS5wcm90b3R5cGUpLG59LGEucHJvdG90eXBlLnJlYWRVaW50TEU9YS5wcm90b3R5cGUucmVhZFVJbnRMRT1mdW5jdGlvbih0LGUscil7dD4+Pj0wLGU+Pj49MCxyfHxJKHQsZSx0aGlzLmxlbmd0aCk7bGV0IG49dGhpc1t0XSxpPTEsbz0wO2Zvcig7KytvPGUmJihpKj0yNTYpOyluKz10aGlzW3Qrb10qaTtyZXR1cm4gbn0sYS5wcm90b3R5cGUucmVhZFVpbnRCRT1hLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKHQsZSxyKXt0Pj4+PTAsZT4+Pj0wLHJ8fEkodCxlLHRoaXMubGVuZ3RoKTtsZXQgbj10aGlzW3QrLS1lXSxpPTE7Zm9yKDtlPjAmJihpKj0yNTYpOyluKz10aGlzW3QrLS1lXSppO3JldHVybiBufSxhLnByb3RvdHlwZS5yZWFkVWludDg9YS5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsMSx0aGlzLmxlbmd0aCksdGhpc1t0XX0sYS5wcm90b3R5cGUucmVhZFVpbnQxNkxFPWEucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8SSh0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF18dGhpc1t0KzFdPDw4fSxhLnByb3RvdHlwZS5yZWFkVWludDE2QkU9YS5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsMix0aGlzLmxlbmd0aCksdGhpc1t0XTw8OHx0aGlzW3QrMV19LGEucHJvdG90eXBlLnJlYWRVaW50MzJMRT1hLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEkodCw0LHRoaXMubGVuZ3RoKSwodGhpc1t0XXx0aGlzW3QrMV08PDh8dGhpc1t0KzJdPDwxNikrMTY3NzcyMTYqdGhpc1t0KzNdfSxhLnByb3RvdHlwZS5yZWFkVWludDMyQkU9YS5wcm90b3R5cGUucmVhZFVJbnQzMkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsNCx0aGlzLmxlbmd0aCksMTY3NzcyMTYqdGhpc1t0XSsodGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdKX0sYS5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NExFPVgoKGZ1bmN0aW9uKHQpe0QodD4+Pj0wLCJvZmZzZXQiKTtjb25zdCBlPXRoaXNbdF0scj10aGlzW3QrN107dm9pZCAwIT09ZSYmdm9pZCAwIT09cnx8cSh0LHRoaXMubGVuZ3RoLTgpO2NvbnN0IG49ZSsyNTYqdGhpc1srK3RdKzY1NTM2KnRoaXNbKyt0XSt0aGlzWysrdF0qMioqMjQsaT10aGlzWysrdF0rMjU2KnRoaXNbKyt0XSs2NTUzNip0aGlzWysrdF0rcioyKioyNDtyZXR1cm4gQmlnSW50KG4pKyhCaWdJbnQoaSk8PEJpZ0ludCgzMikpfSkpLGEucHJvdG90eXBlLnJlYWRCaWdVSW50NjRCRT1YKChmdW5jdGlvbih0KXtEKHQ+Pj49MCwib2Zmc2V0Iik7Y29uc3QgZT10aGlzW3RdLHI9dGhpc1t0KzddO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PXJ8fHEodCx0aGlzLmxlbmd0aC04KTtjb25zdCBuPWUqMioqMjQrNjU1MzYqdGhpc1srK3RdKzI1Nip0aGlzWysrdF0rdGhpc1srK3RdLGk9dGhpc1srK3RdKjIqKjI0KzY1NTM2KnRoaXNbKyt0XSsyNTYqdGhpc1srK3RdK3I7cmV0dXJuKEJpZ0ludChuKTw8QmlnSW50KDMyKSkrQmlnSW50KGkpfSkpLGEucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbih0LGUscil7dD4+Pj0wLGU+Pj49MCxyfHxJKHQsZSx0aGlzLmxlbmd0aCk7bGV0IG49dGhpc1t0XSxpPTEsbz0wO2Zvcig7KytvPGUmJihpKj0yNTYpOyluKz10aGlzW3Qrb10qaTtyZXR1cm4gaSo9MTI4LG4+PWkmJihuLT1NYXRoLnBvdygyLDgqZSkpLG59LGEucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbih0LGUscil7dD4+Pj0wLGU+Pj49MCxyfHxJKHQsZSx0aGlzLmxlbmd0aCk7bGV0IG49ZSxpPTEsbz10aGlzW3QrLS1uXTtmb3IoO24+MCYmKGkqPTI1Nik7KW8rPXRoaXNbdCstLW5dKmk7cmV0dXJuIGkqPTEyOCxvPj1pJiYoby09TWF0aC5wb3coMiw4KmUpKSxvfSxhLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8SSh0LDEsdGhpcy5sZW5ndGgpLDEyOCZ0aGlzW3RdPy0xKigyNTUtdGhpc1t0XSsxKTp0aGlzW3RdfSxhLnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbih0LGUpe3Q+Pj49MCxlfHxJKHQsMix0aGlzLmxlbmd0aCk7Y29uc3Qgcj10aGlzW3RdfHRoaXNbdCsxXTw8ODtyZXR1cm4gMzI3Njgmcj80Mjk0OTAxNzYwfHI6cn0sYS5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24odCxlKXt0Pj4+PTAsZXx8SSh0LDIsdGhpcy5sZW5ndGgpO2NvbnN0IHI9dGhpc1t0KzFdfHRoaXNbdF08PDg7cmV0dXJuIDMyNzY4JnI/NDI5NDkwMTc2MHxyOnJ9LGEucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsNCx0aGlzLmxlbmd0aCksdGhpc1t0XXx0aGlzW3QrMV08PDh8dGhpc1t0KzJdPDwxNnx0aGlzW3QrM108PDI0fSxhLnByb3RvdHlwZS5yZWFkSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8SSh0LDQsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDI0fHRoaXNbdCsxXTw8MTZ8dGhpc1t0KzJdPDw4fHRoaXNbdCszXX0sYS5wcm90b3R5cGUucmVhZEJpZ0ludDY0TEU9WCgoZnVuY3Rpb24odCl7RCh0Pj4+PTAsIm9mZnNldCIpO2NvbnN0IGU9dGhpc1t0XSxyPXRoaXNbdCs3XTt2b2lkIDAhPT1lJiZ2b2lkIDAhPT1yfHxxKHQsdGhpcy5sZW5ndGgtOCk7Y29uc3Qgbj10aGlzW3QrNF0rMjU2KnRoaXNbdCs1XSs2NTUzNip0aGlzW3QrNl0rKHI8PDI0KTtyZXR1cm4oQmlnSW50KG4pPDxCaWdJbnQoMzIpKStCaWdJbnQoZSsyNTYqdGhpc1srK3RdKzY1NTM2KnRoaXNbKyt0XSt0aGlzWysrdF0qMioqMjQpfSkpLGEucHJvdG90eXBlLnJlYWRCaWdJbnQ2NEJFPVgoKGZ1bmN0aW9uKHQpe0QodD4+Pj0wLCJvZmZzZXQiKTtjb25zdCBlPXRoaXNbdF0scj10aGlzW3QrN107dm9pZCAwIT09ZSYmdm9pZCAwIT09cnx8cSh0LHRoaXMubGVuZ3RoLTgpO2NvbnN0IG49KGU8PDI0KSs2NTUzNip0aGlzWysrdF0rMjU2KnRoaXNbKyt0XSt0aGlzWysrdF07cmV0dXJuKEJpZ0ludChuKTw8QmlnSW50KDMyKSkrQmlnSW50KHRoaXNbKyt0XSoyKioyNCs2NTUzNip0aGlzWysrdF0rMjU2KnRoaXNbKyt0XStyKX0pKSxhLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8SSh0LDQsdGhpcy5sZW5ndGgpLHIucmVhZCh0aGlzLHQsITAsMjMsNCl9LGEucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsNCx0aGlzLmxlbmd0aCksci5yZWFkKHRoaXMsdCwhMSwyMyw0KX0sYS5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsOCx0aGlzLmxlbmd0aCksci5yZWFkKHRoaXMsdCwhMCw1Miw4KX0sYS5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxJKHQsOCx0aGlzLmxlbmd0aCksci5yZWFkKHRoaXMsdCwhMSw1Miw4KX0sYS5wcm90b3R5cGUud3JpdGVVaW50TEU9YS5wcm90b3R5cGUud3JpdGVVSW50TEU9ZnVuY3Rpb24odCxlLHIsbil7aWYodD0rdCxlPj4+PTAscj4+Pj0wLCFuKXtQKHRoaXMsdCxlLHIsTWF0aC5wb3coMiw4KnIpLTEsMCl9bGV0IGk9MSxvPTA7Zm9yKHRoaXNbZV09MjU1JnQ7KytvPHImJihpKj0yNTYpOyl0aGlzW2Urb109dC9pJjI1NTtyZXR1cm4gZStyfSxhLnByb3RvdHlwZS53cml0ZVVpbnRCRT1hLnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbih0LGUscixuKXtpZih0PSt0LGU+Pj49MCxyPj4+PTAsIW4pe1AodGhpcyx0LGUscixNYXRoLnBvdygyLDgqciktMSwwKX1sZXQgaT1yLTEsbz0xO2Zvcih0aGlzW2UraV09MjU1JnQ7LS1pPj0wJiYobyo9MjU2KTspdGhpc1tlK2ldPXQvbyYyNTU7cmV0dXJuIGUrcn0sYS5wcm90b3R5cGUud3JpdGVVaW50OD1hLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSwxLDI1NSwwKSx0aGlzW2VdPTI1NSZ0LGUrMX0sYS5wcm90b3R5cGUud3JpdGVVaW50MTZMRT1hLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSwyLDY1NTM1LDApLHRoaXNbZV09MjU1JnQsdGhpc1tlKzFdPXQ+Pj44LGUrMn0sYS5wcm90b3R5cGUud3JpdGVVaW50MTZCRT1hLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSwyLDY1NTM1LDApLHRoaXNbZV09dD4+PjgsdGhpc1tlKzFdPTI1NSZ0LGUrMn0sYS5wcm90b3R5cGUud3JpdGVVaW50MzJMRT1hLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSw0LDQyOTQ5NjcyOTUsMCksdGhpc1tlKzNdPXQ+Pj4yNCx0aGlzW2UrMl09dD4+PjE2LHRoaXNbZSsxXT10Pj4+OCx0aGlzW2VdPTI1NSZ0LGUrNH0sYS5wcm90b3R5cGUud3JpdGVVaW50MzJCRT1hLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSw0LDQyOTQ5NjcyOTUsMCksdGhpc1tlXT10Pj4+MjQsdGhpc1tlKzFdPXQ+Pj4xNix0aGlzW2UrMl09dD4+PjgsdGhpc1tlKzNdPTI1NSZ0LGUrNH0sYS5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRMRT1YKChmdW5jdGlvbih0LGU9MCl7cmV0dXJuIFIodGhpcyx0LGUsQmlnSW50KDApLEJpZ0ludCgiMHhmZmZmZmZmZmZmZmZmZmZmIikpfSkpLGEucHJvdG90eXBlLndyaXRlQmlnVUludDY0QkU9WCgoZnVuY3Rpb24odCxlPTApe3JldHVybiBNKHRoaXMsdCxlLEJpZ0ludCgwKSxCaWdJbnQoIjB4ZmZmZmZmZmZmZmZmZmZmZiIpKX0pKSxhLnByb3RvdHlwZS53cml0ZUludExFPWZ1bmN0aW9uKHQsZSxyLG4pe2lmKHQ9K3QsZT4+Pj0wLCFuKXtjb25zdCBuPU1hdGgucG93KDIsOCpyLTEpO1AodGhpcyx0LGUscixuLTEsLW4pfWxldCBpPTAsbz0xLGE9MDtmb3IodGhpc1tlXT0yNTUmdDsrK2k8ciYmKG8qPTI1Nik7KXQ8MCYmMD09PWEmJjAhPT10aGlzW2UraS0xXSYmKGE9MSksdGhpc1tlK2ldPSh0L28+PjApLWEmMjU1O3JldHVybiBlK3J9LGEucHJvdG90eXBlLndyaXRlSW50QkU9ZnVuY3Rpb24odCxlLHIsbil7aWYodD0rdCxlPj4+PTAsIW4pe2NvbnN0IG49TWF0aC5wb3coMiw4KnItMSk7UCh0aGlzLHQsZSxyLG4tMSwtbil9bGV0IGk9ci0xLG89MSxhPTA7Zm9yKHRoaXNbZStpXT0yNTUmdDstLWk+PTAmJihvKj0yNTYpOyl0PDAmJjA9PT1hJiYwIT09dGhpc1tlK2krMV0mJihhPTEpLHRoaXNbZStpXT0odC9vPj4wKS1hJjI1NTtyZXR1cm4gZStyfSxhLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PSt0LGU+Pj49MCxyfHxQKHRoaXMsdCxlLDEsMTI3LC0xMjgpLHQ8MCYmKHQ9MjU1K3QrMSksdGhpc1tlXT0yNTUmdCxlKzF9LGEucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHQ9K3QsZT4+Pj0wLHJ8fFAodGhpcyx0LGUsMiwzMjc2NywtMzI3NjgpLHRoaXNbZV09MjU1JnQsdGhpc1tlKzFdPXQ+Pj44LGUrMn0sYS5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSwyLDMyNzY3LC0zMjc2OCksdGhpc1tlXT10Pj4+OCx0aGlzW2UrMV09MjU1JnQsZSsyfSxhLnByb3RvdHlwZS53cml0ZUludDMyTEU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PSt0LGU+Pj49MCxyfHxQKHRoaXMsdCxlLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksdGhpc1tlXT0yNTUmdCx0aGlzW2UrMV09dD4+PjgsdGhpc1tlKzJdPXQ+Pj4xNix0aGlzW2UrM109dD4+PjI0LGUrNH0sYS5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlPj4+PTAscnx8UCh0aGlzLHQsZSw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLHQ8MCYmKHQ9NDI5NDk2NzI5NSt0KzEpLHRoaXNbZV09dD4+PjI0LHRoaXNbZSsxXT10Pj4+MTYsdGhpc1tlKzJdPXQ+Pj44LHRoaXNbZSszXT0yNTUmdCxlKzR9LGEucHJvdG90eXBlLndyaXRlQmlnSW50NjRMRT1YKChmdW5jdGlvbih0LGU9MCl7cmV0dXJuIFIodGhpcyx0LGUsLUJpZ0ludCgiMHg4MDAwMDAwMDAwMDAwMDAwIiksQmlnSW50KCIweDdmZmZmZmZmZmZmZmZmZmYiKSl9KSksYS5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFPVgoKGZ1bmN0aW9uKHQsZT0wKXtyZXR1cm4gTSh0aGlzLHQsZSwtQmlnSW50KCIweDgwMDAwMDAwMDAwMDAwMDAiKSxCaWdJbnQoIjB4N2ZmZmZmZmZmZmZmZmZmZiIpKX0pKSxhLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBqKHRoaXMsdCxlLCEwLHIpfSxhLnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBqKHRoaXMsdCxlLCExLHIpfSxhLnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4geih0aGlzLHQsZSwhMCxyKX0sYS5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHoodGhpcyx0LGUsITEscil9LGEucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCxlLHIsbil7aWYoIWEuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiYXJndW1lbnQgc2hvdWxkIGJlIGEgQnVmZmVyIik7aWYocnx8KHI9MCksbnx8MD09PW58fChuPXRoaXMubGVuZ3RoKSxlPj10Lmxlbmd0aCYmKGU9dC5sZW5ndGgpLGV8fChlPTApLG4+MCYmbjxyJiYobj1yKSxuPT09cilyZXR1cm4gMDtpZigwPT09dC5sZW5ndGh8fDA9PT10aGlzLmxlbmd0aClyZXR1cm4gMDtpZihlPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMiKTtpZihyPDB8fHI+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTtpZihuPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoInNvdXJjZUVuZCBvdXQgb2YgYm91bmRzIik7bj50aGlzLmxlbmd0aCYmKG49dGhpcy5sZW5ndGgpLHQubGVuZ3RoLWU8bi1yJiYobj10Lmxlbmd0aC1lK3IpO2NvbnN0IGk9bi1yO3JldHVybiB0aGlzPT09dCYmImZ1bmN0aW9uIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4/dGhpcy5jb3B5V2l0aGluKGUscixuKTpVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCh0LHRoaXMuc3ViYXJyYXkocixuKSxlKSxpfSxhLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKHQsZSxyLG4pe2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoInN0cmluZyI9PXR5cGVvZiBlPyhuPWUsZT0wLHI9dGhpcy5sZW5ndGgpOiJzdHJpbmciPT10eXBlb2YgciYmKG49cixyPXRoaXMubGVuZ3RoKSx2b2lkIDAhPT1uJiYic3RyaW5nIiE9dHlwZW9mIG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZyIpO2lmKCJzdHJpbmciPT10eXBlb2YgbiYmIWEuaXNFbmNvZGluZyhuKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK24pO2lmKDE9PT10Lmxlbmd0aCl7Y29uc3QgZT10LmNoYXJDb2RlQXQoMCk7KCJ1dGY4Ij09PW4mJmU8MTI4fHwibGF0aW4xIj09PW4pJiYodD1lKX19ZWxzZSJudW1iZXIiPT10eXBlb2YgdD90Jj0yNTU6ImJvb2xlYW4iPT10eXBlb2YgdCYmKHQ9TnVtYmVyKHQpKTtpZihlPDB8fHRoaXMubGVuZ3RoPGV8fHRoaXMubGVuZ3RoPHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk91dCBvZiByYW5nZSBpbmRleCIpO2lmKHI8PWUpcmV0dXJuIHRoaXM7bGV0IGk7aWYoZT4+Pj0wLHI9dm9pZCAwPT09cj90aGlzLmxlbmd0aDpyPj4+MCx0fHwodD0wKSwibnVtYmVyIj09dHlwZW9mIHQpZm9yKGk9ZTtpPHI7KytpKXRoaXNbaV09dDtlbHNle2NvbnN0IG89YS5pc0J1ZmZlcih0KT90OmEuZnJvbSh0LG4pLHM9by5sZW5ndGg7aWYoMD09PXMpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHZhbHVlICInK3QrJyIgaXMgaW52YWxpZCBmb3IgYXJndW1lbnQgInZhbHVlIicpO2ZvcihpPTA7aTxyLWU7KytpKXRoaXNbaStlXT1vW2klc119cmV0dXJuIHRoaXN9O2NvbnN0IEM9e307ZnVuY3Rpb24gTih0LGUscil7Q1t0XT1jbGFzcyBleHRlbmRzIHJ7Y29uc3RydWN0b3IoKXtzdXBlcigpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJtZXNzYWdlIix7dmFsdWU6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdGhpcy5uYW1lPWAke3RoaXMubmFtZX0gWyR7dH1dYCx0aGlzLnN0YWNrLGRlbGV0ZSB0aGlzLm5hbWV9Z2V0IGNvZGUoKXtyZXR1cm4gdH1zZXQgY29kZSh0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiY29kZSIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOnQsd3JpdGFibGU6ITB9KX10b1N0cmluZygpe3JldHVybmAke3RoaXMubmFtZX0gWyR7dH1dOiAke3RoaXMubWVzc2FnZX1gfX19ZnVuY3Rpb24gVSh0KXtsZXQgZT0iIixyPXQubGVuZ3RoO2NvbnN0IG49Ii0iPT09dFswXT8xOjA7Zm9yKDtyPj1uKzQ7ci09MyllPWBfJHt0LnNsaWNlKHItMyxyKX0ke2V9YDtyZXR1cm5gJHt0LnNsaWNlKDAscil9JHtlfWB9ZnVuY3Rpb24gRih0LGUscixuLGksbyl7aWYodD5yfHx0PGUpe2NvbnN0IG49ImJpZ2ludCI9PXR5cGVvZiBlPyJuIjoiIjtsZXQgaTt0aHJvdyBpPW8+Mz8wPT09ZXx8ZT09PUJpZ0ludCgwKT9gPj0gMCR7bn0gYW5kIDwgMiR7bn0gKiogJHs4KihvKzEpfSR7bn1gOmA+PSAtKDIke259ICoqICR7OCoobysxKS0xfSR7bn0pIGFuZCA8IDIgKiogJHs4KihvKzEpLTF9JHtufWA6YD49ICR7ZX0ke259IGFuZCA8PSAke3J9JHtufWAsbmV3IEMuRVJSX09VVF9PRl9SQU5HRSgidmFsdWUiLGksdCl9IWZ1bmN0aW9uKHQsZSxyKXtEKGUsIm9mZnNldCIpLHZvaWQgMCE9PXRbZV0mJnZvaWQgMCE9PXRbZStyXXx8cShlLHQubGVuZ3RoLShyKzEpKX0obixpLG8pfWZ1bmN0aW9uIEQodCxlKXtpZigibnVtYmVyIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEMuRVJSX0lOVkFMSURfQVJHX1RZUEUoZSwibnVtYmVyIix0KX1mdW5jdGlvbiBxKHQsZSxyKXtpZihNYXRoLmZsb29yKHQpIT09dCl0aHJvdyBEKHQsciksbmV3IEMuRVJSX09VVF9PRl9SQU5HRShyfHwib2Zmc2V0IiwiYW4gaW50ZWdlciIsdCk7aWYoZTwwKXRocm93IG5ldyBDLkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EUzt0aHJvdyBuZXcgQy5FUlJfT1VUX09GX1JBTkdFKHJ8fCJvZmZzZXQiLGA+PSAke3I/MTowfSBhbmQgPD0gJHtlfWAsdCl9TigiRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQ/YCR7dH0gaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzYDoiQXR0ZW1wdCB0byBhY2Nlc3MgbWVtb3J5IG91dHNpZGUgYnVmZmVyIGJvdW5kcyJ9KSxSYW5nZUVycm9yKSxOKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsKGZ1bmN0aW9uKHQsZSl7cmV0dXJuYFRoZSAiJHt0fSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSAke3R5cGVvZiBlfWB9KSxUeXBlRXJyb3IpLE4oIkVSUl9PVVRfT0ZfUkFOR0UiLChmdW5jdGlvbih0LGUscil7bGV0IG49YFRoZSB2YWx1ZSBvZiAiJHt0fSIgaXMgb3V0IG9mIHJhbmdlLmAsaT1yO3JldHVybiBOdW1iZXIuaXNJbnRlZ2VyKHIpJiZNYXRoLmFicyhyKT4yKiozMj9pPVUoU3RyaW5nKHIpKToiYmlnaW50Ij09dHlwZW9mIHImJihpPVN0cmluZyhyKSwocj5CaWdJbnQoMikqKkJpZ0ludCgzMil8fHI8LShCaWdJbnQoMikqKkJpZ0ludCgzMikpKSYmKGk9VShpKSksaSs9Im4iKSxuKz1gIEl0IG11c3QgYmUgJHtlfS4gUmVjZWl2ZWQgJHtpfWAsbn0pLFJhbmdlRXJyb3IpO2NvbnN0ICQ9L1teKy8wLTlBLVphLXotX10vZztmdW5jdGlvbiBaKHQsZSl7bGV0IHI7ZT1lfHwxLzA7Y29uc3Qgbj10Lmxlbmd0aDtsZXQgaT1udWxsO2NvbnN0IG89W107Zm9yKGxldCBhPTA7YTxuOysrYSl7aWYocj10LmNoYXJDb2RlQXQoYSkscj41NTI5NSYmcjw1NzM0NCl7aWYoIWkpe2lmKHI+NTYzMTkpeyhlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1pZihhKzE9PT1uKXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aT1yO2NvbnRpbnVlfWlmKHI8NTYzMjApeyhlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KSxpPXI7Y29udGludWV9cj02NTUzNisoaS01NTI5Njw8MTB8ci01NjMyMCl9ZWxzZSBpJiYoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7aWYoaT1udWxsLHI8MTI4KXtpZigoZS09MSk8MClicmVhaztvLnB1c2gocil9ZWxzZSBpZihyPDIwNDgpe2lmKChlLT0yKTwwKWJyZWFrO28ucHVzaChyPj42fDE5Miw2MyZyfDEyOCl9ZWxzZSBpZihyPDY1NTM2KXtpZigoZS09Myk8MClicmVhaztvLnB1c2gocj4+MTJ8MjI0LHI+PjYmNjN8MTI4LDYzJnJ8MTI4KX1lbHNle2lmKCEocjwxMTE0MTEyKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgY29kZSBwb2ludCIpO2lmKChlLT00KTwwKWJyZWFrO28ucHVzaChyPj4xOHwyNDAscj4+MTImNjN8MTI4LHI+PjYmNjN8MTI4LDYzJnJ8MTI4KX19cmV0dXJuIG99ZnVuY3Rpb24gSCh0KXtyZXR1cm4gZS50b0J5dGVBcnJheShmdW5jdGlvbih0KXtpZigodD0odD10LnNwbGl0KCI9IilbMF0pLnRyaW0oKS5yZXBsYWNlKCQsIiIpKS5sZW5ndGg8MilyZXR1cm4iIjtmb3IoO3QubGVuZ3RoJTQhPTA7KXQrPSI9IjtyZXR1cm4gdH0odCkpfWZ1bmN0aW9uIEcodCxlLHIsbil7bGV0IGk7Zm9yKGk9MDtpPG4mJiEoaStyPj1lLmxlbmd0aHx8aT49dC5sZW5ndGgpOysraSllW2krcl09dFtpXTtyZXR1cm4gaX1mdW5jdGlvbiBXKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfHxudWxsIT10JiZudWxsIT10LmNvbnN0cnVjdG9yJiZudWxsIT10LmNvbnN0cnVjdG9yLm5hbWUmJnQuY29uc3RydWN0b3IubmFtZT09PWUubmFtZX1mdW5jdGlvbiBWKHQpe3JldHVybiB0IT10fWNvbnN0IFk9ZnVuY3Rpb24oKXtjb25zdCB0PSIwMTIzNDU2Nzg5YWJjZGVmIixlPW5ldyBBcnJheSgyNTYpO2ZvcihsZXQgcj0wO3I8MTY7KytyKXtjb25zdCBuPTE2KnI7Zm9yKGxldCBpPTA7aTwxNjsrK2kpZVtuK2ldPXRbcl0rdFtpXX1yZXR1cm4gZX0oKTtmdW5jdGlvbiBYKHQpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgQmlnSW50P0s6dH1mdW5jdGlvbiBLKCl7dGhyb3cgbmV3IEVycm9yKCJCaWdJbnQgbm90IHN1cHBvcnRlZCIpfX0oTF8pO3ZhciBIXz1MXy5CdWZmZXIsR189WzAsMTk5Njk1OTg5NCwzOTkzOTE5Nzg4LDI1Njc1MjQ3OTQsMTI0NjM0MTM3LDE4ODYwNTc2MTUsMzkxNTYyMTY4NSwyNjU3MzkyMDM1LDI0OTI2ODI3NCwyMDQ0NTA4MzI0LDM3NzIxMTUyMzAsMjU0NzE3Nzg2NCwxNjI5NDE5OTUsMjEyNTU2MTAyMSwzODg3NjA3MDQ3LDI0Mjg0NDQwNDksNDk4NTM2NTQ4LDE3ODk5Mjc2NjYsNDA4OTAxNjY0OCwyMjI3MDYxMjE0LDQ1MDU0ODg2MSwxODQzMjU4NjAzLDQxMDc1ODA3NTMsMjIxMTY3NzYzOSwzMjU4ODM5OTAsMTY4NDc3NzE1Miw0MjUxMTIyMDQyLDIzMjE5MjY2MzYsMzM1NjMzNDg3LDE2NjEzNjU0NjUsNDE5NTMwMjc1NSwyMzY2MTE1MzE3LDk5NzA3MzA5NiwxMjgxOTUzODg2LDM1Nzk4NTUzMzIsMjcyNDY4ODI0MiwxMDA2ODg4MTQ1LDEyNTg2MDc2ODcsMzUyNDEwMTYyOSwyNzY4OTQyNDQzLDkwMTA5NzcyMiwxMTE5MDAwNjg0LDM2ODY1MTcyMDYsMjg5ODA2NTcyOCw4NTMwNDQ0NTEsMTE3MjI2NjEwMSwzNzA1MDE1NzU5LDI4ODI2MTY2NjUsNjUxNzY3OTgwLDEzNzM1MDM1NDYsMzM2OTU1NDMwNCwzMjE4MTA0NTk4LDU2NTUwNzI1MywxNDU0NjIxNzMxLDM0ODUxMTE3MDUsMzA5OTQzNjMwMyw2NzEyNjY5NzQsMTU5NDE5ODAyNCwzMzIyNzMwOTMwLDI5NzAzNDc4MTIsNzk1ODM1NTI3LDE0ODMyMzAyMjUsMzI0NDM2NzI3NSwzMDYwMTQ5NTY1LDE5OTQxNDYxOTIsMzExNTg1MzQsMjU2MzkwNzc3Miw0MDIzNzE3OTMwLDE5MDc0NTk0NjUsMTEyNjM3MjE1LDI2ODAxNTMyNTMsMzkwNDQyNzA1OSwyMDEzNzc2MjkwLDI1MTcyMjAzNiwyNTE3MjE1Mzc0LDM3NzU4MzAwNDAsMjEzNzY1Njc2MywxNDEzNzY4MTMsMjQzOTI3NzcxOSwzODY1MjcxMjk3LDE4MDIxOTU0NDQsNDc2ODY0ODY2LDIyMzgwMDEzNjgsNDA2NjUwODg3OCwxODEyMzcwOTI1LDQ1MzA5MjczMSwyMTgxNjI1MDI1LDQxMTE0NTEyMjMsMTcwNjA4ODkwMiwzMTQwNDI3MDQsMjM0NDUzMjIwMiw0MjQwMDE3NTMyLDE2NTg2NTgyNzEsMzY2NjE5OTc3LDIzNjI2NzAzMjMsNDIyNDk5NDQwNSwxMzAzNTM1OTYwLDk4NDk2MTQ4NiwyNzQ3MDA3MDkyLDM1NjkwMzc1MzgsMTI1NjE3MDgxNywxMDM3NjA0MzExLDI3NjUyMTA3MzMsMzU1NDA3OTk5NSwxMTMxMDE0NTA2LDg3OTY3OTk5NiwyOTA5MjQzNDYyLDM2NjM3NzE4NTYsMTE0MTEyNDQ2Nyw4NTU4NDIyNzcsMjg1MjgwMTYzMSwzNzA4NjQ4NjQ5LDEzNDI1MzM5NDgsNjU0NDU5MzA2LDMxODgzOTYwNDgsMzM3MzAxNTE3NCwxNDY2NDc5OTA5LDU0NDE3OTYzNSwzMTEwNTIzOTEzLDM0NjI1MjIwMTUsMTU5MTY3MTA1NCw3MDIxMzg3NzYsMjk2NjQ2MDQ1MCwzMzUyNzk5NDEyLDE1MDQ5MTg4MDcsNzgzNTUxODczLDMwODI2NDA0NDMsMzIzMzQ0Mjk4OSwzOTg4MjkyMzg0LDI1OTYyNTQ2NDYsNjIzMTcwNjgsMTk1NzgxMDg0MiwzOTM5ODQ1OTQ1LDI2NDc4MTYxMTEsODE0NzA5OTcsMTk0MzgwMzUyMywzODE0OTE4OTMwLDI0ODk1OTY4MDQsMjI1Mjc0NDMwLDIwNTM3OTAzNzYsMzgyNjE3NTc1NSwyNDY2OTA2MDEzLDE2NzgxNjc0MywyMDk3NjUxMzc3LDQwMjc1NTI1ODAsMjI2NTQ5MDM4Niw1MDM0NDQwNzIsMTc2MjA1MDgxNCw0MTUwNDE3MjQ1LDIxNTQxMjkzNTUsNDI2NTIyMjI1LDE4NTI1MDc4NzksNDI3NTMxMzUyNiwyMzEyMzE3OTIwLDI4Mjc1MzYyNiwxNzQyNTU1ODUyLDQxODk3MDgxNDMsMjM5NDg3Nzk0NSwzOTc5MTc3NjMsMTYyMjE4MzYzNywzNjA0MzkwODg4LDI3MTQ4NjY1NTgsOTUzNzI5NzMyLDEzNDAwNzY2MjYsMzUxODcxOTk4NSwyNzk3MzYwOTk5LDEwNjg4MjgzODEsMTIxOTYzODg1OSwzNjI0NzQxODUwLDI5MzY2NzUxNDgsOTA2MTg1NDYyLDEwOTA4MTI1MTIsMzc0NzY3MjAwMywyODI1Mzc5NjY5LDgyOTMyOTEzNSwxMTgxMzM1MTYxLDM0MTIxNzc4MDQsMzE2MDgzNDg0Miw2MjgwODU0MDgsMTM4MjYwNTM2NiwzNDIzMzY5MTA5LDMxMzgwNzg0NjcsNTcwNTYyMjMzLDE0MjY0MDA4MTUsMzMxNzMxNjU0MiwyOTk4NzMzNjA4LDczMzIzOTk1NCwxNTU1MjYxOTU2LDMyNjg5MzU1OTEsMzA1MDM2MDYyNSw3NTI0NTk0MDMsMTU0MTMyMDIyMSwyNjA3MDcxOTIwLDM5NjU5NzMwMzAsMTk2OTkyMjk3Miw0MDczNTQ5OCwyNjE3ODM3MjI1LDM5NDM1NzcxNTEsMTkxMzA4Nzg3Nyw4MzkwODM3MSwyNTEyMzQxNjM0LDM4MDM3NDA2OTIsMjA3NTIwODYyMiwyMTMyNjExMTIsMjQ2MzI3MjYwMywzODU1OTkwMjg1LDIwOTQ4NTQwNzEsMTk4OTU4ODgxLDIyNjIwMjkwMTIsNDA1NzI2MDYxMCwxNzU5MzU5OTkyLDUzNDQxNDE5MCwyMTc2NzE4NTQxLDQxMzkzMjkxMTUsMTg3MzgzNjAwMSw0MTQ2NjQ1NjcsMjI4MjI0ODkzNCw0Mjc5MjAwMzY4LDE3MTE2ODQ1NTQsMjg1MjgxMTE2LDI0MDU4MDE3MjcsNDE2NzIxNjc0NSwxNjM0NDY3Nzk1LDM3NjIyOTcwMSwyNjg1MDY3ODk2LDM2MDgwMDc0MDYsMTMwODkxODYxMiw5NTY1NDM5MzgsMjgwODU1NTEwNSwzNDk1OTU4MjYzLDEyMzE2MzYzMDEsMTA0NzQyNzAzNSwyOTMyOTU5ODE4LDM2NTQ3MDM4MzYsMTA4ODM1OTI3MCw5MzY5MThlMywyODQ3NzE0ODk5LDM3MzY4Mzc4MjksMTIwMjkwMDg2Myw4MTcyMzM4OTcsMzE4MzM0MjEwOCwzNDAxMjM3MTMwLDE0MDQyNzc1NTIsNjE1ODE4MTUwLDMxMzQyMDc0OTMsMzQ1MzQyMTIwMywxNDIzODU3NDQ5LDYwMTQ1MDQzMSwzMDA5ODM3NjE0LDMyOTQ3MTA0NTYsMTU2NzEwMzc0Niw3MTE5Mjg3MjQsMzAyMDY2ODQ3MSwzMjcyMzgwMDY1LDE1MTAzMzQyMzUsNzU1MTY3MTE3XTtmdW5jdGlvbiBXXyh0KXtpZihIXy5pc0J1ZmZlcih0KSlyZXR1cm4gdDt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgSF8uYWxsb2MmJiJmdW5jdGlvbiI9PXR5cGVvZiBIXy5mcm9tO2lmKCJudW1iZXIiPT10eXBlb2YgdClyZXR1cm4gZT9IXy5hbGxvYyh0KTpuZXcgSF8odCk7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiBlP0hfLmZyb20odCk6bmV3IEhfKHQpO3Rocm93IG5ldyBFcnJvcigiaW5wdXQgbXVzdCBiZSBidWZmZXIsIG51bWJlciwgb3Igc3RyaW5nLCByZWNlaXZlZCAiK3R5cGVvZiB0KX1mdW5jdGlvbiBWXyh0KXt2YXIgZT1XXyg0KTtyZXR1cm4gZS53cml0ZUludDMyQkUodCwwKSxlfWZ1bmN0aW9uIFlfKHQsZSl7dD1XXyh0KSxIXy5pc0J1ZmZlcihlKSYmKGU9ZS5yZWFkVUludDMyQkUoMCkpO2Zvcih2YXIgcj0tMV5+fmUsbj0wO248dC5sZW5ndGg7bisrKXI9R19bMjU1JihyXnRbbl0pXV5yPj4+ODtyZXR1cm4tMV5yfWZ1bmN0aW9uIFhfKCl7cmV0dXJuIFZfKFlfLmFwcGx5KG51bGwsYXJndW1lbnRzKSl9InVuZGVmaW5lZCIhPXR5cGVvZiBJbnQzMkFycmF5JiYoR189bmV3IEludDMyQXJyYXkoR18pKSxYXy5zaWduZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gWV8uYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYXy51bnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiBZXy5hcHBseShudWxsLGFyZ3VtZW50cyk+Pj4wfTt2YXIgS189WF8sSl89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LFFfPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0LGUpfTt2YXIgdHg9ZnVuY3Rpb24odCl7aWYobnVsbD09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QiKTt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdClKXyh0LHIpJiZRXyh0LHIpJiZlLnB1c2goW3IsdFtyXV0pO3JldHVybiBlfSxleD0iZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmVudHJpZXM/T2JqZWN0LmVudHJpZXM6dHgscng9e30sbng9e30saXg9enAuZXhwb3J0cztPYmplY3QuZGVmaW5lUHJvcGVydHkobngsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLG54LmRlZmF1bHQ9dm9pZCAwO3ZhciBveD1peChhYiksYXg9aXgoc2IuZXhwb3J0cyksc3g9aXgoVXAuZXhwb3J0cyksdXg9aXgoRnAuZXhwb3J0cyksZng9aXgoRHAuZXhwb3J0cyksbHg9aXgoVXcpLGN4PXJ4O2Z1bmN0aW9uIGh4KHQsZSl7dmFyIHI9T2JqZWN0LmtleXModCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtlJiYobj1uLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKS5lbnVtZXJhYmxlfSkpKSxyLnB1c2guYXBwbHkocixuKX1yZXR1cm4gcn1mdW5jdGlvbiBkeCh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgcj1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj9oeChPYmplY3QociksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpeygwLGZ4LmRlZmF1bHQpKHQsZSxyW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHIpKTpoeChPYmplY3QocikpLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGUpKX0pKX1yZXR1cm4gdH12YXIgcHg9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOntmZXRjaDp2b2lkIDB9LHZ4PWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4saSxvO2Z1bmN0aW9uIGEodCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKCgwLHN4LmRlZmF1bHQpKHRoaXMsYSksKDAsZnguZGVmYXVsdCkodGhpcywidXJsIix2b2lkIDApLCgwLGZ4LmRlZmF1bHQpKHRoaXMsIl9zdGF0Iix2b2lkIDApLCgwLGZ4LmRlZmF1bHQpKHRoaXMsImZldGNoSW1wbGVtZW50YXRpb24iLHZvaWQgMCksKDAsZnguZGVmYXVsdCkodGhpcywiYmFzZU92ZXJyaWRlcyIse30pLHRoaXMudXJsPXQsdC5zdGFydHNXaXRoKCJmaWxlOi8vIikpe3ZhciByPSgwLGx4LmRlZmF1bHQpKHQpO2lmKCFyKXRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgZmlsZSB1cmwiKTt2YXIgbj1uZXcgY3guTG9jYWxGaWxlKHIpO3JldHVybiB0aGlzLnJlYWQ9bi5yZWFkLmJpbmQobiksdGhpcy5yZWFkRmlsZT1uLnJlYWRGaWxlLmJpbmQobiksdGhpcy5zdGF0PW4uc3RhdC5iaW5kKG4pLHZvaWQodGhpcy5mZXRjaEltcGxlbWVudGF0aW9uPWZ1bmN0aW9uKCl7fSl9dmFyIGk9ZS5mZXRjaHx8cHguZmV0Y2gmJnB4LmZldGNoLmJpbmQocHgpO2lmKCFpKXRocm93IG5ldyBUeXBlRXJyb3IoIm5vIGZldGNoIGZ1bmN0aW9uIHN1cHBsaWVkLCBhbmQgbm9uZSBmb3VuZCBpbiBnbG9iYWwgZW52aXJvbm1lbnQiKTtlLm92ZXJyaWRlcyYmKHRoaXMuYmFzZU92ZXJyaWRlcz1lLm92ZXJyaWRlcyksdGhpcy5mZXRjaEltcGxlbWVudGF0aW9uPWl9cmV0dXJuKDAsdXguZGVmYXVsdCkoYSxbe2tleToiZ2V0QnVmZmVyRnJvbVJlc3BvbnNlIix2YWx1ZToodD0oMCxheC5kZWZhdWx0KShveC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHI7cmV0dXJuIG94LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUuYnVmZmVyKXt0Lm5leHQ9NDticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsZS5idWZmZXIoKSk7Y2FzZSA0OmlmKCJmdW5jdGlvbiIhPXR5cGVvZiBlLmFycmF5QnVmZmVyKXt0Lm5leHQ9MTE7YnJlYWt9cmV0dXJuIHQubmV4dD03LGUuYXJyYXlCdWZmZXIoKTtjYXNlIDc6cmV0dXJuIHI9dC5zZW50LHQuYWJydXB0KCJyZXR1cm4iLEJ1ZmZlci5mcm9tKHIpKTtjYXNlIDExOnRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgSFRUUCByZXNwb25zZSBvYmplY3QsIGhhcyBubyBidWZmZXIgbWV0aG9kLCBhbmQgbm8gYXJyYXlCdWZmZXIgbWV0aG9kIik7Y2FzZSAxMjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpKSxmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSwoMCx1eC5kZWZhdWx0KShhLFt7a2V5OiJmZXRjaCIsdmFsdWU6KG89KDAsYXguZGVmYXVsdCkob3guZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KGUscil7dmFyIG47cmV0dXJuIG94LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQucHJldj0wLHQubmV4dD0zLHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbihlLHIpO2Nhc2UgMzpuPXQuc2VudCx0Lm5leHQ9MTY7YnJlYWs7Y2FzZSA2OmlmKHQucHJldj02LHQudDA9dC5jYXRjaCgwKSwiRmFpbGVkIHRvIGZldGNoIiE9PXQudDAubWVzc2FnZSl7dC5uZXh0PTE1O2JyZWFrfXJldHVybiBjb25zb2xlLndhcm4oImdlbmVyaWMtZmlsZWhhbmRsZTogcmVmZXRjaGluZyAiLmNvbmNhdChlLCIgdG8gYXR0ZW1wdCB0byB3b3JrIGFyb3VuZCBjaHJvbWUgQ09SUyBoZWFkZXIgY2FjaGluZyBidWciKSksdC5uZXh0PTEyLHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbihlLGR4KGR4KHt9LHIpLHt9LHtjYWNoZToicmVsb2FkIn0pKTtjYXNlIDEyOm49dC5zZW50LHQubmV4dD0xNjticmVhaztjYXNlIDE1OnRocm93IHQudDA7Y2FzZSAxNjpyZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsbik7Y2FzZSAxNzpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyxbWzAsNl1dKX0pKSksZnVuY3Rpb24odCxlKXtyZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToicmVhZCIsdmFsdWU6KGk9KDAsYXguZGVmYXVsdCkob3guZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLG4saSxvLGEscyx1LGYsbCxjLGgsZCxwLHYsZyx5PWFyZ3VtZW50cztyZXR1cm4gb3guZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj15Lmxlbmd0aD4xJiZ2b2lkIDAhPT15WzFdP3lbMV06MCxuPXkubGVuZ3RoPjI/eVsyXTp2b2lkIDAsaT15Lmxlbmd0aD4zJiZ2b2lkIDAhPT15WzNdP3lbM106MCxvPXkubGVuZ3RoPjQmJnZvaWQgMCE9PXlbNF0/eVs0XTp7fSxhPW8uaGVhZGVycyxzPXZvaWQgMD09PWE/e306YSx1PW8uc2lnbmFsLGY9by5vdmVycmlkZXMsbD12b2lkIDA9PT1mP3t9OmYsbjwxLzA/cy5yYW5nZT0iYnl0ZXM9Ii5jb25jYXQoaSwiLSIpLmNvbmNhdChpK24pOm49PT0xLzAmJjAhPT1pJiYocy5yYW5nZT0iYnl0ZXM9Ii5jb25jYXQoaSwiLSIpKSxjPWR4KGR4KGR4KHt9LHRoaXMuYmFzZU92ZXJyaWRlcyksbCkse30se2hlYWRlcnM6ZHgoZHgoZHgoe30scyksbC5oZWFkZXJzKSx0aGlzLmJhc2VPdmVycmlkZXMuaGVhZGVycyksbWV0aG9kOiJHRVQiLHJlZGlyZWN0OiJmb2xsb3ciLG1vZGU6ImNvcnMiLHNpZ25hbDp1fSksdC5uZXh0PTksdGhpcy5mZXRjaCh0aGlzLnVybCxjKTtjYXNlIDk6aWYoKGg9dC5zZW50KS5vayl7dC5uZXh0PTEyO2JyZWFrfXRocm93IG5ldyBFcnJvcigiSFRUUCAiLmNvbmNhdChoLnN0YXR1cywiICIpLmNvbmNhdChoLnN0YXR1c1RleHQpKTtjYXNlIDEyOmlmKCgyMDAhPT1oLnN0YXR1c3x8MCE9PWkpJiYyMDYhPT1oLnN0YXR1cyl7dC5uZXh0PTIxO2JyZWFrfXJldHVybiB0Lm5leHQ9MTUsdGhpcy5nZXRCdWZmZXJGcm9tUmVzcG9uc2UoaCk7Y2FzZSAxNTpyZXR1cm4gZD10LnNlbnQscD1kLmNvcHkoZSxyLDAsTWF0aC5taW4obixkLmxlbmd0aCkpLHY9aC5oZWFkZXJzLmdldCgiY29udGVudC1yYW5nZSIpLChnPS9cLyhcZCspJC8uZXhlYyh2fHwiIikpJiZnWzFdJiYodGhpcy5fc3RhdD17c2l6ZTpwYXJzZUludChnWzFdLDEwKX0pLHQuYWJydXB0KCJyZXR1cm4iLHtieXRlc1JlYWQ6cCxidWZmZXI6ZX0pO2Nhc2UgMjE6aWYoMjAwIT09aC5zdGF0dXMpe3QubmV4dD0yMzticmVha310aHJvdyBuZXcgRXJyb3IoIiR7dGhpcy51cmx9IGZldGNoIHJldHVybmVkIHN0YXR1cyAyMDAsIGV4cGVjdGVkIDIwNiIpO2Nhc2UgMjM6dGhyb3cgbmV3IEVycm9yKCJIVFRQICIuY29uY2F0KGguc3RhdHVzLCIgZmV0Y2hpbmcgIikuY29uY2F0KHRoaXMudXJsKSk7Y2FzZSAyNDpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJyZWFkRmlsZSIsdmFsdWU6KG49KDAsYXguZGVmYXVsdCkob3guZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KCl7dmFyIGUscixuLGksbyxhLHMsdSxmLGwsYyxoPWFyZ3VtZW50cztyZXR1cm4gb3guZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4ic3RyaW5nIj09dHlwZW9mKGU9aC5sZW5ndGg+MCYmdm9pZCAwIT09aFswXT9oWzBdOnt9KT8ocj1lLG49e30pOihyPWUuZW5jb2RpbmcsZGVsZXRlKG49ZSkuZW5jb2RpbmcpLG89KGk9bikuaGVhZGVycyxhPXZvaWQgMD09PW8/e306byxzPWkuc2lnbmFsLHU9aS5vdmVycmlkZXMsZj12b2lkIDA9PT11P3t9OnUsbD1keChkeCh7aGVhZGVyczphLG1ldGhvZDoiR0VUIixyZWRpcmVjdDoiZm9sbG93Iixtb2RlOiJjb3JzIixzaWduYWw6c30sdGhpcy5iYXNlT3ZlcnJpZGVzKSxmKSx0Lm5leHQ9Nix0aGlzLmZldGNoKHRoaXMudXJsLGwpO2Nhc2UgNjppZihjPXQuc2VudCl7dC5uZXh0PTk7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJnZW5lcmljLWZpbGVoYW5kbGUgZmFpbGVkIHRvIGZldGNoIik7Y2FzZSA5OmlmKDIwMD09PWMuc3RhdHVzKXt0Lm5leHQ9MTE7YnJlYWt9dGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoIkhUVFAgIi5jb25jYXQoYy5zdGF0dXMsIiBmZXRjaGluZyAiKS5jb25jYXQodGhpcy51cmwpKSx7c3RhdHVzOmMuc3RhdHVzfSk7Y2FzZSAxMTppZigidXRmOCIhPT1yKXt0Lm5leHQ9MTM7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLGMudGV4dCgpKTtjYXNlIDEzOmlmKCFyKXt0Lm5leHQ9MTU7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCBlbmNvZGluZzogIi5jb25jYXQocikpO2Nhc2UgMTU6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHRoaXMuZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKGMpKTtjYXNlIDE2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToic3RhdCIsdmFsdWU6KHI9KDAsYXguZGVmYXVsdCkob3guZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KCl7dmFyIGU7cmV0dXJuIG94LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aWYodGhpcy5fc3RhdCl7dC5uZXh0PTY7YnJlYWt9cmV0dXJuIGU9QnVmZmVyLmFsbG9jVW5zYWZlKDEwKSx0Lm5leHQ9NCx0aGlzLnJlYWQoZSwwLDEwLDApO2Nhc2UgNDppZih0aGlzLl9zdGF0KXt0Lm5leHQ9NjticmVha310aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBkZXRlcm1pbmUgc2l6ZSBvZiBmaWxlIGF0ICIuY29uY2F0KHRoaXMudXJsKSk7Y2FzZSA2OnJldHVybiB0LmFicnVwdCgicmV0dXJuIix0aGlzLl9zdGF0KTtjYXNlIDc6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJjbG9zZSIsdmFsdWU6KGU9KDAsYXguZGVmYXVsdCkob3guZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KCl7cmV0dXJuIG94LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iKTtjYXNlIDE6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0KX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxhfSgpO254LmRlZmF1bHQ9dng7dmFyIGd4PXt9LHl4PXpwLmV4cG9ydHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KGd4LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxneC5kZWZhdWx0PXZvaWQgMDt2YXIgYng9eXgoYWIpLG14PXl4KHNiLmV4cG9ydHMpLHd4PXl4KFVwLmV4cG9ydHMpLF94PXl4KEZwLmV4cG9ydHMpLHh4PXl4KERwLmV4cG9ydHMpO2Z1bmN0aW9uIGt4KHQpe3ZhciBlPW5ldyBGaWxlUmVhZGVyO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocixuKXtlLm9uZXJyb3I9ZnVuY3Rpb24oKXtlLmFib3J0KCksbihuZXcgRXJyb3IoInByb2JsZW0gcmVhZGluZyBibG9iIikpfSxlLm9uYWJvcnQ9ZnVuY3Rpb24oKXtuKG5ldyBFcnJvcigiYmxvYiByZWFkaW5nIHdhcyBhYm9ydGVkIikpfSxlLm9ubG9hZD1mdW5jdGlvbigpe2UucmVzdWx0JiYic3RyaW5nIiE9dHlwZW9mIGUucmVzdWx0P3IoZS5yZXN1bHQpOm4obmV3IEVycm9yKCJ1bmtub3duIGVycm9yIHJlYWRpbmcgYmxvYiIpKX0sZS5yZWFkQXNBcnJheUJ1ZmZlcih0KX0pKX1mdW5jdGlvbiBFeCh0KXt2YXIgZT1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIsbil7ZS5vbmVycm9yPWZ1bmN0aW9uKCl7ZS5hYm9ydCgpLG4obmV3IEVycm9yKCJwcm9ibGVtIHJlYWRpbmcgYmxvYiIpKX0sZS5vbmFib3J0PWZ1bmN0aW9uKCl7bihuZXcgRXJyb3IoImJsb2IgcmVhZGluZyB3YXMgYWJvcnRlZCIpKX0sZS5vbmxvYWQ9ZnVuY3Rpb24oKXtlLnJlc3VsdCYmInN0cmluZyI9PXR5cGVvZiBlLnJlc3VsdD9yKGUucmVzdWx0KTpuKG5ldyBFcnJvcigidW5rbm93biBlcnJvciByZWFkaW5nIGJsb2IiKSl9LGUucmVhZEFzVGV4dCh0KX0pKX12YXIgQXg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpeygwLHd4LmRlZmF1bHQpKHRoaXMsdCksKDAseHguZGVmYXVsdCkodGhpcywiYmxvYiIsdm9pZCAwKSwoMCx4eC5kZWZhdWx0KSh0aGlzLCJzaXplIix2b2lkIDApLHRoaXMuYmxvYj1lLHRoaXMuc2l6ZT1lLnNpemV9dmFyIGUscixuLGk7cmV0dXJuKDAsX3guZGVmYXVsdCkodCxbe2tleToicmVhZCIsdmFsdWU6KGk9KDAsbXguZGVmYXVsdCkoYnguZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLG4saSxvLGEscyx1LGYsbD1hcmd1bWVudHM7cmV0dXJuIGJ4LmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aWYocj1sLmxlbmd0aD4xJiZ2b2lkIDAhPT1sWzFdP2xbMV06MCxuPWwubGVuZ3RoPjI/bFsyXTp2b2lkIDAsaT1sLmxlbmd0aD4zJiZ2b2lkIDAhPT1sWzNdP2xbM106MCxuKXt0Lm5leHQ9NTticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIse2J5dGVzUmVhZDowLGJ1ZmZlcjplfSk7Y2FzZSA1OnJldHVybiBhPShvPWkpK24sdC5uZXh0PTksa3godGhpcy5ibG9iLnNsaWNlKG8sYSkpO2Nhc2UgOTpyZXR1cm4gcz10LnNlbnQsdT1CdWZmZXIuZnJvbShzKSxmPXUuY29weShlLHIpLHQuYWJydXB0KCJyZXR1cm4iLHtieXRlc1JlYWQ6ZixidWZmZXI6dX0pO2Nhc2UgMTM6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0KXtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToicmVhZEZpbGUiLHZhbHVlOihuPSgwLG14LmRlZmF1bHQpKGJ4LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuO3JldHVybiBieC5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKCJ1dGY4IiE9PShyPSJzdHJpbmciPT10eXBlb2YgZT9lOmUmJmUuZW5jb2RpbmcpKXt0Lm5leHQ9MzticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsRXgodGhpcy5ibG9iKSk7Y2FzZSAzOmlmKCFyKXt0Lm5leHQ9NTticmVha310aHJvdyBuZXcgRXJyb3IoInVuc3VwcG9ydGVkIGVuY29kaW5nOiAiLmNvbmNhdChyKSk7Y2FzZSA1OnJldHVybiB0Lm5leHQ9NyxreCh0aGlzLmJsb2IpO2Nhc2UgNzpyZXR1cm4gbj10LnNlbnQsdC5hYnJ1cHQoInJldHVybiIsQnVmZmVyLmZyb20obikpO2Nhc2UgOTpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJzdGF0Iix2YWx1ZToocj0oMCxteC5kZWZhdWx0KShieC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoKXtyZXR1cm4gYnguZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC5hYnJ1cHQoInJldHVybiIse3NpemU6dGhpcy5zaXplfSk7Y2FzZSAxOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiY2xvc2UiLHZhbHVlOihlPSgwLG14LmRlZmF1bHQpKGJ4LmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdCgpe3JldHVybiBieC5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0LmFicnVwdCgicmV0dXJuIik7Y2FzZSAxOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksdH0oKTtneC5kZWZhdWx0PUF4O3ZhciBTeD1FKE9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsfSkpOyFmdW5jdGlvbih0KXt2YXIgZT16cC5leHBvcnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj17b3BlbjohMCxmcm9tVXJsOiEwLExvY2FsRmlsZTohMCxSZW1vdGVGaWxlOiEwLEJsb2JGaWxlOiEwfTt0Lm9wZW49ZnVuY3Rpb24odCxlLHIpe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTp7fTtpZih2b2lkIDAhPT1yKXJldHVybiByO2lmKHZvaWQgMCE9PXQpcmV0dXJuIHModCxpKTtpZih2b2lkIDAhPT1lKXJldHVybiBuZXcgbi5kZWZhdWx0KGUsaSk7dGhyb3cgbmV3IEVycm9yKCJubyB1cmwsIHBhdGgsIG9yIGZpbGVoYW5kbGUgcHJvdmlkZWQsIGNhbm5vdCBvcGVuIil9LHQuZnJvbVVybD1zLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJMb2NhbEZpbGUiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLmRlZmF1bHR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIlJlbW90ZUZpbGUiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLmRlZmF1bHR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIkJsb2JGaWxlIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5kZWZhdWx0fX0pO3ZhciBuPWUoVXcpLGk9ZShueCksbz1lKGd4KSxhPVN4O2Z1bmN0aW9uIHModCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBuZXcgaS5kZWZhdWx0KHQsZSl9T2JqZWN0LmtleXMoYSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ImRlZmF1bHQiIT09ZSYmIl9fZXNNb2R1bGUiIT09ZSYmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBhW2VdfX0pKX0pKX0ocngpO3ZhciBPeD17fSxUeD1LZSxCeD1mdW5jdGlvbigpe3ZhciB0PVR4KHRoaXMpLGU9IiI7cmV0dXJuIHQuZ2xvYmFsJiYoZSs9ImciKSx0Lmlnbm9yZUNhc2UmJihlKz0iaSIpLHQubXVsdGlsaW5lJiYoZSs9Im0iKSx0LmRvdEFsbCYmKGUrPSJzIiksdC51bmljb2RlJiYoZSs9InUiKSx0LnN0aWNreSYmKGUrPSJ5IiksZX0sSXg9ZnVuY3Rpb24odCl7cmV0dXJuIEJ4LmNhbGwodCl9LFB4PVJlZ0V4cC5wcm90b3R5cGUsUng9ZnVuY3Rpb24odCl7cmV0dXJuKHQ9PT1QeHx8dCBpbnN0YW5jZW9mIFJlZ0V4cCkmJiEoImZsYWdzImluIHQpP0l4KHQpOnQuZmxhZ3N9LE14PSJcdFxuXHZcZlxyIMKg4ZqA4oCA4oCB4oCC4oCD4oCE4oCF4oCG4oCH4oCI4oCJ4oCK4oCv4oGf44CAXHUyMDI4XHUyMDI5XHVmZWZmIixMeD1jdCxqeD1jbyx6eD0iW1x0XG5cdlxmXHIgwqDhmoDigIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIBcdTIwMjhcdTIwMjlcdWZlZmZdIixDeD1SZWdFeHAoIl4iK3p4K3p4KyIqIiksTng9UmVnRXhwKHp4K3p4KyIqJCIpLFV4PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj1qeChMeChlKSk7cmV0dXJuIDEmdCYmKHI9ci5yZXBsYWNlKEN4LCIiKSksMiZ0JiYocj1yLnJlcGxhY2UoTngsIiIpKSxyfX0sRng9e3N0YXJ0OlV4KDEpLGVuZDpVeCgyKSx0cmltOlV4KDMpfSxEeD1WLHF4PUssJHg9Y28sWng9RngudHJpbSxIeD1NeCxHeD1EeC5wYXJzZUludCxXeD1EeC5TeW1ib2wsVng9V3gmJld4Lml0ZXJhdG9yLFl4PS9eWystXT8wW1h4XS8sWHg9OCE9PUd4KEh4KyIwOCIpfHwyMiE9PUd4KEh4KyIweDE2Iil8fFZ4JiYhcXgoKGZ1bmN0aW9uKCl7R3goT2JqZWN0KFZ4KSl9KSk/ZnVuY3Rpb24odCxlKXt2YXIgcj1aeCgkeCh0KSk7cmV0dXJuIEd4KHIsZT4+PjB8fChZeC50ZXN0KHIpPzE2OjEwKSl9Okd4O3ZyKHtnbG9iYWw6ITAsZm9yY2VkOnBhcnNlSW50IT1YeH0se3BhcnNlSW50Olh4fSk7dmFyIEt4PXl0LnBhcnNlSW50LEp4PXt9OyFmdW5jdGlvbih0KXttcih0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmRlZmF1bHQ9dm9pZCAwO3QuZGVmYXVsdD17QkFNX0ZQQUlSRUQ6MSxCQU1fRlBST1BFUl9QQUlSOjIsQkFNX0ZVTk1BUDo0LEJBTV9GTVVOTUFQOjgsQkFNX0ZSRVZFUlNFOjE2LEJBTV9GTVJFVkVSU0U6MzIsQkFNX0ZSRUFEMTo2NCxCQU1fRlJFQUQyOjEyOCxCQU1fRlNFQ09OREFSWToyNTYsQkFNX0ZRQ0ZBSUw6NTEyLEJBTV9GRFVQOjEwMjQsQkFNX0ZTVVBQTEVNRU5UQVJZOjIwNDh9fShKeCksZnVuY3Rpb24odCl7dmFyIGU9SC5leHBvcnRzO21yKHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZGVmYXVsdD12b2lkIDA7dmFyIHIsbj1lKFJ4KSxpPWUoS3gpLG89ZShPZiksYT1lKE1mKSxzPWUoaGYpLHU9ZShScCksZj1lKHFkLmV4cG9ydHMpLGw9ZSgkZC5leHBvcnRzKSxjPWUoT2wuZXhwb3J0cyksaD1lKFJsKSxkPWUoSngpLHA9KDAsaC5kZWZhdWx0KShyPSI9QUNNR1JTVlRXWUhLREJOIi5zcGxpdCgiIikpLmNhbGwociwoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhckNvZGVBdCgwKX0pKSx2PSJNSUROU0hQPVg/Pz8/Pz8/Ii5zcGxpdCgiIiksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7KDAsZi5kZWZhdWx0KSh0aGlzLHQpLCgwLGMuZGVmYXVsdCkodGhpcywiZGF0YSIsdm9pZCAwKSwoMCxjLmRlZmF1bHQpKHRoaXMsImJ5dGVzIix2b2lkIDApLCgwLGMuZGVmYXVsdCkodGhpcywiZmxhZ3MiLHZvaWQgMCksKDAsYy5kZWZhdWx0KSh0aGlzLCJfaWQiLHZvaWQgMCksKDAsYy5kZWZhdWx0KSh0aGlzLCJfcmVmSUQiLHZvaWQgMCksKDAsYy5kZWZhdWx0KSh0aGlzLCJfdGFnT2Zmc2V0Iix2b2lkIDApLCgwLGMuZGVmYXVsdCkodGhpcywiX3RhZ0xpc3QiLFtdKSwoMCxjLmRlZmF1bHQpKHRoaXMsIl9hbGxUYWdzUGFyc2VkIiwhMSksdGhpcy5kYXRhPXt9LHRoaXMuYnl0ZXM9e3N0YXJ0OmUuYnl0ZXMuc3RhcnQsZW5kOmUuYnl0ZXMuZW5kLGJ5dGVBcnJheTplLmJ5dGVzLmJ5dGVBcnJheX0sdGhpcy5faWQ9ZS5maWxlT2Zmc2V0O3ZhciByPXRoaXMuYnl0ZXMsbj1yLnN0YXJ0LGk9ci5ieXRlQXJyYXk7dGhpcy5fcmVmSUQ9aS5yZWFkSW50MzJMRShuKzQpLHRoaXMuZGF0YS5zdGFydD1pLnJlYWRJbnQzMkxFKG4rOCksdGhpcy5mbGFncz0oNDI5NDkwMTc2MCZpLnJlYWRJbnQzMkxFKG4rMTYpKT4+MTZ9cmV0dXJuKDAsbC5kZWZhdWx0KSh0LFt7a2V5OiJnZXQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3RdPyh0aGlzLmRhdGFbdF18fCh0aGlzLmRhdGFbdF09dGhpc1t0XSgpKSx0aGlzLmRhdGFbdF0pOnRoaXMuX2dldCh0LnRvTG93ZXJDYXNlKCkpfX0se2tleToiZW5kIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgic3RhcnQiKSsodGhpcy5nZXQoImxlbmd0aF9vbl9yZWYiKXx8dGhpcy5nZXQoInNlcV9sZW5ndGgiKXx8dm9pZCAwKX19LHtrZXk6InNlcV9pZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVmSUR9fSx7a2V5OiJfZ2V0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbiB0aGlzLmRhdGF8fCh0aGlzLmRhdGFbdF09dGhpcy5fcGFyc2VUYWcodCkpLHRoaXMuZGF0YVt0XX19LHtrZXk6Il90YWdzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpczt0aGlzLl9wYXJzZUFsbFRhZ3MoKTt2YXIgcj1bInNlcSJdO3RoaXMuaXNTZWdtZW50VW5tYXBwZWQoKXx8ci5wdXNoKCJzdGFydCIsImVuZCIsInN0cmFuZCIsInNjb3JlIiwicXVhbCIsIk1RIiwiQ0lHQVIiLCJsZW5ndGhfb25fcmVmIiwidGVtcGxhdGVfbGVuZ3RoIiksdGhpcy5pc1BhaXJlZCgpJiZyLnB1c2goIm5leHRfc2VnbWVudF9wb3NpdGlvbiIsInBhaXJfb3JpZW50YXRpb24iKSxyPSgwLHUuZGVmYXVsdCkocikuY2FsbChyLHRoaXMuX3RhZ0xpc3R8fFtdKSwoMCxzLmRlZmF1bHQpKHQ9KDAsYS5kZWZhdWx0KSh0aGlzLmRhdGEpKS5jYWxsKHQsKGZ1bmN0aW9uKHQpeyJfIiE9PXRbMF0mJiJuZXh0X3NlcV9pZCIhPT10JiZyLnB1c2godCl9KSk7dmFyIG49e307cmV0dXJuIHI9KDAsby5kZWZhdWx0KShyKS5jYWxsKHIsKGZ1bmN0aW9uKHQpe2lmKHQgaW4gZS5kYXRhJiZ2b2lkIDA9PT1lLmRhdGFbdF18fCJDRyI9PT10fHwiY2ciPT09dClyZXR1cm4hMTt2YXIgcj10LnRvTG93ZXJDYXNlKCksaT1uW3JdO3JldHVybiBuW3JdPSEwLCFpfSkpfX0se2tleToicGFyZW50Iix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6ImNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgic3ViZmVhdHVyZXMiKX19LHtrZXk6ImlkIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH19LHtrZXk6Im1xIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PSg2NTI4MCZ0aGlzLmdldCgiX2Jpbl9tcV9ubCIpKT4+ODtyZXR1cm4gMjU1PT09dD92b2lkIDA6dH19LHtrZXk6InNjb3JlIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgibXEiKX19LHtrZXk6InF1YWwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLnF1YWxSYXcoKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuam9pbigiICIpfX0se2tleToicXVhbFJhdyIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc1NlZ21lbnRVbm1hcHBlZCgpKXtmb3IodmFyIHQ9dGhpcy5ieXRlcy5ieXRlQXJyYXksZT10aGlzLmJ5dGVzLnN0YXJ0KzM2K3RoaXMuZ2V0KCJfbF9yZWFkX25hbWUiKSs0KnRoaXMuZ2V0KCJfbl9jaWdhcl9vcCIpK3RoaXMuZ2V0KCJfc2VxX2J5dGVzIikscj10aGlzLmdldCgic2VxX2xlbmd0aCIpLG49QnVmZmVyLmFsbG9jVW5zYWZlKHIpLGk9MDtpPHI7KytpKW5baV09dFtlK2ldO3JldHVybiBufX19LHtrZXk6InN0cmFuZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1JldmVyc2VDb21wbGVtZW50ZWQoKT8tMToxfX0se2tleToibXVsdGlfc2VnbWVudF9uZXh0X3NlZ21lbnRfc3RyYW5kIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmlzTWF0ZVVubWFwcGVkKCkpcmV0dXJuIHRoaXMuaXNNYXRlUmV2ZXJzZUNvbXBsZW1lbnRlZCgpPy0xOjF9fSx7a2V5OiJuYW1lIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgiX3JlYWRfbmFtZSIpfX0se2tleToiX3JlYWRfbmFtZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldCgiX2xfcmVhZF9uYW1lIik7cmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnRvU3RyaW5nKCJhc2NpaSIsdGhpcy5ieXRlcy5zdGFydCszNix0aGlzLmJ5dGVzLnN0YXJ0KzM2K3QtMSl9fSx7a2V5OiJfcGFyc2VUYWciLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9hbGxUYWdzUGFyc2VkKXtmb3IodmFyIGUscj10aGlzLmJ5dGVzLmJ5dGVBcnJheSxuPXRoaXMuX3RhZ09mZnNldHx8dGhpcy5ieXRlcy5zdGFydCszNit0aGlzLmdldCgiX2xfcmVhZF9uYW1lIikrNCp0aGlzLmdldCgiX25fY2lnYXJfb3AiKSt0aGlzLmdldCgiX3NlcV9ieXRlcyIpK3RoaXMuZ2V0KCJzZXFfbGVuZ3RoIiksaT10aGlzLmJ5dGVzLmVuZDtuPGkmJmUhPT10Oyl7dmFyIG89U3RyaW5nLmZyb21DaGFyQ29kZShyW25dLHJbbisxXSk7ZT1vLnRvTG93ZXJDYXNlKCk7dmFyIGE9U3RyaW5nLmZyb21DaGFyQ29kZShyW24rMl0pO24rPTM7dmFyIHM9dm9pZCAwO3N3aXRjaChhKXtjYXNlIkEiOnM9U3RyaW5nLmZyb21DaGFyQ29kZShyW25dKSxuKz0xO2JyZWFrO2Nhc2UiaSI6cz1yLnJlYWRJbnQzMkxFKG4pLG4rPTQ7YnJlYWs7Y2FzZSJJIjpzPXIucmVhZFVJbnQzMkxFKG4pLG4rPTQ7YnJlYWs7Y2FzZSJjIjpzPXIucmVhZEludDgobiksbis9MTticmVhaztjYXNlIkMiOnM9ci5yZWFkVUludDgobiksbis9MTticmVhaztjYXNlInMiOnM9ci5yZWFkSW50MTZMRShuKSxuKz0yO2JyZWFrO2Nhc2UiUyI6cz1yLnJlYWRVSW50MTZMRShuKSxuKz0yO2JyZWFrO2Nhc2UiZiI6cz1yLnJlYWRGbG9hdExFKG4pLG4rPTQ7YnJlYWs7Y2FzZSJaIjpjYXNlIkgiOmZvcihzPSIiO248PWk7KXt2YXIgdT1yW24rK107aWYoMD09PXUpYnJlYWs7cys9U3RyaW5nLmZyb21DaGFyQ29kZSh1KX1icmVhaztjYXNlIkIiOnM9IiI7dmFyIGY9cltuKytdLGw9U3RyaW5nLmZyb21DaGFyQ29kZShmKSxjPXIucmVhZEludDMyTEUobik7aWYobis9NCwiaSI9PT1sKWlmKCJDRyI9PT1vKWZvcih2YXIgaD0wO2g8YztoKyspe3ZhciBkPXIucmVhZEludDMyTEUobik7cys9KGQ+PjQpK3ZbMTUmZF0sbis9NH1lbHNlIGZvcih2YXIgcD0wO3A8YztwKyspcys9ci5yZWFkSW50MzJMRShuKSxwKzE8YyYmKHMrPSIsIiksbis9NDtpZigiSSI9PT1sKWlmKCJDRyI9PT1vKWZvcih2YXIgZz0wO2c8YztnKyspe3ZhciB5PXIucmVhZFVJbnQzMkxFKG4pO3MrPSh5Pj40KSt2WzE1JnldLG4rPTR9ZWxzZSBmb3IodmFyIGI9MDtiPGM7YisrKXMrPXIucmVhZFVJbnQzMkxFKG4pLGIrMTxjJiYocys9IiwiKSxuKz00O2lmKCJzIj09PWwpZm9yKHZhciBtPTA7bTxjO20rKylzKz1yLnJlYWRJbnQxNkxFKG4pLG0rMTxjJiYocys9IiwiKSxuKz0yO2lmKCJTIj09PWwpZm9yKHZhciB3PTA7dzxjO3crKylzKz1yLnJlYWRVSW50MTZMRShuKSx3KzE8YyYmKHMrPSIsIiksbis9MjtpZigiYyI9PT1sKWZvcih2YXIgXz0wO188YztfKyspcys9ci5yZWFkSW50OChuKSxfKzE8YyYmKHMrPSIsIiksbis9MTtpZigiQyI9PT1sKWZvcih2YXIgeD0wO3g8Yzt4Kyspcys9ci5yZWFkVUludDgobikseCsxPGMmJihzKz0iLCIpLG4rPTE7aWYoImYiPT09bClmb3IodmFyIGs9MDtrPGM7aysrKXMrPXIucmVhZEZsb2F0TEUobiksaysxPGMmJihzKz0iLCIpLG4rPTQ7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oIlVua25vd24gQkFNIHRhZyB0eXBlICciLmNvbmNhdChhLCInLCB0YWdzIG1heSBiZSBpbmNvbXBsZXRlIikpLHM9dm9pZCAwLG49aX1pZih0aGlzLl90YWdPZmZzZXQ9bix0aGlzLl90YWdMaXN0LnB1c2gobyksZT09PXQpcmV0dXJuIHM7dGhpcy5kYXRhW2VdPXN9dGhpcy5fYWxsVGFnc1BhcnNlZD0hMH19fSx7a2V5OiJfcGFyc2VBbGxUYWdzIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3BhcnNlVGFnKCIiKX19LHtrZXk6Il9wYXJzZUNpZ2FyIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4oMCxoLmRlZmF1bHQpKGU9dC5tYXRjaCgvXGQrXEQvZykpLmNhbGwoZSwoZnVuY3Rpb24odCl7cmV0dXJuW3QubWF0Y2goL1xELylbMF0udG9VcHBlckNhc2UoKSwoMCxpLmRlZmF1bHQpKHQsMTApXX0pKX19LHtrZXk6ImlzUGFpcmVkIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhKCgwLG4uZGVmYXVsdCkodGhpcykmZC5kZWZhdWx0LkJBTV9GUEFJUkVEKX19LHtrZXk6ImlzUHJvcGVybHlQYWlyZWQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISEoKDAsbi5kZWZhdWx0KSh0aGlzKSZkLmRlZmF1bHQuQkFNX0ZQUk9QRVJfUEFJUil9fSx7a2V5OiJpc1NlZ21lbnRVbm1hcHBlZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hISgoMCxuLmRlZmF1bHQpKHRoaXMpJmQuZGVmYXVsdC5CQU1fRlVOTUFQKX19LHtrZXk6ImlzTWF0ZVVubWFwcGVkIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhKCgwLG4uZGVmYXVsdCkodGhpcykmZC5kZWZhdWx0LkJBTV9GTVVOTUFQKX19LHtrZXk6ImlzUmV2ZXJzZUNvbXBsZW1lbnRlZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hISgoMCxuLmRlZmF1bHQpKHRoaXMpJmQuZGVmYXVsdC5CQU1fRlJFVkVSU0UpfX0se2tleToiaXNNYXRlUmV2ZXJzZUNvbXBsZW1lbnRlZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hISgoMCxuLmRlZmF1bHQpKHRoaXMpJmQuZGVmYXVsdC5CQU1fRk1SRVZFUlNFKX19LHtrZXk6ImlzUmVhZDEiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISEoKDAsbi5kZWZhdWx0KSh0aGlzKSZkLmRlZmF1bHQuQkFNX0ZSRUFEMSl9fSx7a2V5OiJpc1JlYWQyIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhKCgwLG4uZGVmYXVsdCkodGhpcykmZC5kZWZhdWx0LkJBTV9GUkVBRDIpfX0se2tleToiaXNTZWNvbmRhcnkiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISEoKDAsbi5kZWZhdWx0KSh0aGlzKSZkLmRlZmF1bHQuQkFNX0ZTRUNPTkRBUlkpfX0se2tleToiaXNGYWlsZWRRYyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hISgoMCxuLmRlZmF1bHQpKHRoaXMpJmQuZGVmYXVsdC5CQU1fRlFDRkFJTCl9fSx7a2V5OiJpc0R1cGxpY2F0ZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hISgoMCxuLmRlZmF1bHQpKHRoaXMpJmQuZGVmYXVsdC5CQU1fRkRVUCl9fSx7a2V5OiJpc1N1cHBsZW1lbnRhcnkiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISEoKDAsbi5kZWZhdWx0KSh0aGlzKSZkLmRlZmF1bHQuQkFNX0ZTVVBQTEVNRU5UQVJZKX19LHtrZXk6ImNpZ2FyIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmlzU2VnbWVudFVubWFwcGVkKCkpe3ZhciB0PXRoaXMuYnl0ZXMsZT10LmJ5dGVBcnJheSxyPXQuc3RhcnQsbj10aGlzLmdldCgiX25fY2lnYXJfb3AiKSxpPXIrMzYrdGhpcy5nZXQoIl9sX3JlYWRfbmFtZSIpLG89dGhpcy5nZXQoInNlcV9sZW5ndGgiKSxhPSIiLHM9MCx1PWUucmVhZEludDMyTEUoaSksZj11Pj40LGw9dlsxNSZ1XTtpZigiUyI9PT1sJiZmPT09bylyZXR1cm4gaSs9NCxmPSh1PWUucmVhZEludDMyTEUoaSkpPj40LCJOIiE9PShsPXZbMTUmdV0pJiZjb25zb2xlLndhcm4oIkNHIHRhZyB3aXRoIG5vIE4gdGFnIiksdGhpcy5kYXRhLmxlbmd0aF9vbl9yZWY9Zix0aGlzLmdldCgiQ0ciKTtmb3IodmFyIGM9MDtjPG47KytjKWErPShmPSh1PWUucmVhZEludDMyTEUoaSkpPj40KSsobD12WzE1JnVdKSwiSCIhPT1sJiYiUyIhPT1sJiYiSSIhPT1sJiYocys9ZiksaSs9NDtyZXR1cm4gdGhpcy5kYXRhLmxlbmd0aF9vbl9yZWY9cyxhfX19LHtrZXk6Il9mbGFncyIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OiJsZW5ndGhfb25fcmVmIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgiY2lnYXIiKSx0aGlzLmRhdGEubGVuZ3RoX29uX3JlZn19LHtrZXk6Il9uX2NpZ2FyX29wIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiA2NTUzNSZ0aGlzLmdldCgiX2ZsYWdfbmMiKX19LHtrZXk6Il9sX3JlYWRfbmFtZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMjU1JnRoaXMuZ2V0KCJfYmluX21xX25sIil9fSx7a2V5OiJfc2VxX2J5dGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgic2VxX2xlbmd0aCIpKzE+PjF9fSx7a2V5OiJnZXRSZWFkQmFzZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VxKCl9fSx7a2V5OiJzZXEiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuYnl0ZXMuYnl0ZUFycmF5LGU9dGhpcy5ieXRlcy5zdGFydCszNit0aGlzLmdldCgiX2xfcmVhZF9uYW1lIikrNCp0aGlzLmdldCgiX25fY2lnYXJfb3AiKSxyPXRoaXMuZ2V0KCJfc2VxX2J5dGVzIiksbj10aGlzLmdldCgic2VxX2xlbmd0aCIpLGk9IiIsbz0wLGE9MDthPHI7KythKXt2YXIgcz10W2UrYV07aSs9U3RyaW5nLmZyb21DaGFyQ29kZShwWygyNDAmcyk+PjRdKSwrK288biYmKGkrPVN0cmluZy5mcm9tQ2hhckNvZGUocFsxNSZzXSksbysrKX1yZXR1cm4gaX19LHtrZXk6ImdldFBhaXJPcmllbnRhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc1NlZ21lbnRVbm1hcHBlZCgpJiYhdGhpcy5pc01hdGVVbm1hcHBlZCgpJiZ0aGlzLl9yZWZJRD09PXRoaXMuX25leHRfcmVmaWQoKSl7dmFyIHQ9dGhpcy5pc1JldmVyc2VDb21wbGVtZW50ZWQoKT8iUiI6IkYiLGU9dGhpcy5pc01hdGVSZXZlcnNlQ29tcGxlbWVudGVkKCk/IlIiOiJGIixyPSIgIixuPSIgIjt0aGlzLmlzUmVhZDEoKT8ocj0iMSIsbj0iMiIpOnRoaXMuaXNSZWFkMigpJiYocj0iMiIsbj0iMSIpO3ZhciBpPVtdO3JldHVybiB0aGlzLnRlbXBsYXRlX2xlbmd0aCgpPjA/KGlbMF09dCxpWzFdPXIsaVsyXT1lLGlbM109bik6KGlbMl09dCxpWzNdPXIsaVswXT1lLGlbMV09biksaS5qb2luKCIiKX1yZXR1cm4gbnVsbH19LHtrZXk6Il9iaW5fbXFfbmwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQrMTIpfX0se2tleToiX2ZsYWdfbmMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQrMTYpfX0se2tleToic2VxX2xlbmd0aCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ieXRlcy5ieXRlQXJyYXkucmVhZEludDMyTEUodGhpcy5ieXRlcy5zdGFydCsyMCl9fSx7a2V5OiJfbmV4dF9yZWZpZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ieXRlcy5ieXRlQXJyYXkucmVhZEludDMyTEUodGhpcy5ieXRlcy5zdGFydCsyNCl9fSx7a2V5OiJfbmV4dF9wb3MiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQrMjgpfX0se2tleToidGVtcGxhdGVfbGVuZ3RoIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ5dGVzLmJ5dGVBcnJheS5yZWFkSW50MzJMRSh0aGlzLmJ5dGVzLnN0YXJ0KzMyKX19LHtrZXk6InRvSlNPTiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMscj17fTtyZXR1cm4oMCxzLmRlZmF1bHQpKHQ9KDAsYS5kZWZhdWx0KSh0aGlzKSkuY2FsbCh0LChmdW5jdGlvbih0KXsiXyIhPT10LmNoYXJBdCgwKSYmImJ5dGVzIiE9PXQmJihyW3RdPWVbdF0pfSkpLHJ9fV0pLHR9KCk7dC5kZWZhdWx0PWd9KE94KTt2YXIgUXg9e30sdGs9e2V4cG9ydHM6e319LGVrPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCl7dmFyIGU9b2wscj1WbyxuPUVsO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDAhPT1lJiZudWxsIT1yKHQpfHxudWxsIT10WyJAQGl0ZXJhdG9yIl0pcmV0dXJuIG4odCl9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0oZWspLGZ1bmN0aW9uKHQpe3ZhciBlPXJsLmV4cG9ydHMscj1lay5leHBvcnRzLG49YWwuZXhwb3J0cyxpPVNsLmV4cG9ydHM7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfHxyKHQpfHxuKHQpfHxpKCl9LHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0cyx0LmV4cG9ydHMuX19lc01vZHVsZT0hMH0odGspLGZ1bmN0aW9uKHQpe3ZhciBlPUguZXhwb3J0czttcih0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnBhcnNlSGVhZGVyVGV4dD1mdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KC9ccj9cbi8pLHM9W107cmV0dXJuKDAsYS5kZWZhdWx0KShlKS5jYWxsKGUsKGZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoL1x0LyksYT0oMCxvLmRlZmF1bHQpKGUpLHU9YVswXSxmPSgwLGkuZGVmYXVsdCkoYSkuY2FsbChhLDEpLGw9KDAsbi5kZWZhdWx0KShmKS5jYWxsKGYsKGZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoIjoiLDIpLG49KDAsci5kZWZhdWx0KShlLDIpO3JldHVybnt0YWc6blswXSx2YWx1ZTpuWzFdfX0pKTt1JiZzLnB1c2goe3RhZzp1LnN1YnN0cigxKSxkYXRhOmx9KX0pKSxzfTt2YXIgcj1lKGVsLmV4cG9ydHMpLG49ZShSbCksaT1lKERkKSxvPWUodGsuZXhwb3J0cyksYT1lKGhmKX0oUXgpLGZ1bmN0aW9uKHQpe3ZhciBlPUguZXhwb3J0czttcih0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmRlZmF1bHQ9dC5CQU1fTUFHSUM9dm9pZCAwO3ZhciByPWUoaF8pLG49ZShsZyksaT1lKE9mKSxvPWUoZWwuZXhwb3J0cyksYT1lKGhmKSxzPWUoZ2cpLHU9ZShSbCksZj1lKGtfKSxsPWUoUnApLGM9ZShMbCksaD1lKERkKSxkPWUoamwuZXhwb3J0cykscD1lKFNfKSx2PWUocWQuZXhwb3J0cyksZz1lKCRkLmV4cG9ydHMpLHk9ZShPbC5leHBvcnRzKSxiPWUoT18uZXhwb3J0cyksbT1lKFBfLmV4cG9ydHMpLHc9ZShSXy5leHBvcnRzKSxfPWUoTV8uZXhwb3J0cykseD1lKGpwKSxrPWUod3IpLEU9ZSh5ZyksQT1lKEtfKSxTPWxfLE89ZShleCksVD1lKFJ2KSxCPXJ4LEk9ZShPeCksUD1ReCxSPU12LE09MjE4NDAxOTQ7dC5CQU1fTUFHSUM9TTt2YXIgTD02NTUzNixqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcixuPWUuYmFtRmlsZWhhbmRsZSxpPWUuYmFtUGF0aCxvPWUuYmFtVXJsLGE9ZS5iYWlQYXRoLHM9ZS5iYWlGaWxlaGFuZGxlLHU9ZS5iYWlVcmwsZj1lLmNzaVBhdGgsbD1lLmNzaUZpbGVoYW5kbGUsYz1lLmNzaVVybCxoPWUuY2FjaGVTaXplLGQ9ZS5mZXRjaFNpemVMaW1pdCxnPWUuY2h1bmtTaXplTGltaXQsYj1lLnlpZWxkVGhyZWFkVGltZSxtPXZvaWQgMD09PWI/MTAwOmIsdz1lLnJlbmFtZVJlZlNlcXMsXz12b2lkIDA9PT13P2Z1bmN0aW9uKHQpe3JldHVybiB0fTp3O2lmKCgwLHYuZGVmYXVsdCkodGhpcyx0KSwoMCx5LmRlZmF1bHQpKHRoaXMsInJlbmFtZVJlZlNlcSIsdm9pZCAwKSwoMCx5LmRlZmF1bHQpKHRoaXMsImJhbSIsdm9pZCAwKSwoMCx5LmRlZmF1bHQpKHRoaXMsImluZGV4Iix2b2lkIDApLCgwLHkuZGVmYXVsdCkodGhpcywiY2h1bmtTaXplTGltaXQiLHZvaWQgMCksKDAseS5kZWZhdWx0KSh0aGlzLCJmZXRjaFNpemVMaW1pdCIsdm9pZCAwKSwoMCx5LmRlZmF1bHQpKHRoaXMsImhlYWRlciIsdm9pZCAwKSwoMCx5LmRlZmF1bHQpKHRoaXMsImZlYXR1cmVDYWNoZSIsdm9pZCAwKSwoMCx5LmRlZmF1bHQpKHRoaXMsImNoclRvSW5kZXgiLHZvaWQgMCksKDAseS5kZWZhdWx0KSh0aGlzLCJpbmRleFRvQ2hyIix2b2lkIDApLCgwLHkuZGVmYXVsdCkodGhpcywieWllbGRUaHJlYWRUaW1lIix2b2lkIDApLHRoaXMucmVuYW1lUmVmU2VxPV8sbil0aGlzLmJhbT1uO2Vsc2UgaWYoaSl0aGlzLmJhbT1uZXcgQi5Mb2NhbEZpbGUoaSk7ZWxzZXtpZighbyl0aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBpbml0aWFsaXplIGJhbSIpO3RoaXMuYmFtPW5ldyBCLlJlbW90ZUZpbGUobyl9aWYobCl0aGlzLmluZGV4PW5ldyBFLmRlZmF1bHQoe2ZpbGVoYW5kbGU6bH0pO2Vsc2UgaWYoZil0aGlzLmluZGV4PW5ldyBFLmRlZmF1bHQoe2ZpbGVoYW5kbGU6bmV3IEIuTG9jYWxGaWxlKGYpfSk7ZWxzZSBpZihjKXRoaXMuaW5kZXg9bmV3IEUuZGVmYXVsdCh7ZmlsZWhhbmRsZTpuZXcgQi5SZW1vdGVGaWxlKGMpfSk7ZWxzZSBpZihzKXRoaXMuaW5kZXg9bmV3IGsuZGVmYXVsdCh7ZmlsZWhhbmRsZTpzfSk7ZWxzZSBpZihhKXRoaXMuaW5kZXg9bmV3IGsuZGVmYXVsdCh7ZmlsZWhhbmRsZTpuZXcgQi5Mb2NhbEZpbGUoYSl9KTtlbHNlIGlmKHUpdGhpcy5pbmRleD1uZXcgay5kZWZhdWx0KHtmaWxlaGFuZGxlOm5ldyBCLlJlbW90ZUZpbGUodSl9KTtlbHNlIGlmKGkpdGhpcy5pbmRleD1uZXcgay5kZWZhdWx0KHtmaWxlaGFuZGxlOm5ldyBCLkxvY2FsRmlsZSgiIi5jb25jYXQoaSwiLmJhaSIpKX0pO2Vsc2V7aWYoIW8pdGhyb3cgbmV3IEVycm9yKCJ1bmFibGUgdG8gaW5mZXIgaW5kZXggZm9ybWF0Iik7dGhpcy5pbmRleD1uZXcgay5kZWZhdWx0KHtmaWxlaGFuZGxlOm5ldyBCLlJlbW90ZUZpbGUoIiIuY29uY2F0KG8sIi5iYWkiKSl9KX10aGlzLmZlYXR1cmVDYWNoZT1uZXcgeC5kZWZhdWx0KHtjYWNoZTpuZXcgVC5kZWZhdWx0KHttYXhTaXplOnZvaWQgMCE9PWg/aDo1MH0pLGZpbGw6KDAscC5kZWZhdWx0KShyPXRoaXMuX3JlYWRDaHVuaykuY2FsbChyLHRoaXMpfSksdGhpcy5mZXRjaFNpemVMaW1pdD1kfHw1ZTgsdGhpcy5jaHVua1NpemVMaW1pdD1nfHwzZTgsdGhpcy55aWVsZFRocmVhZFRpbWU9bX12YXIgZSxqLHosQyxOLFUsRixELHEsJDtyZXR1cm4oMCxnLmRlZmF1bHQpKHQsW3trZXk6ImdldEhlYWRlciIsdmFsdWU6KCQ9KDAsZC5kZWZhdWx0KShjLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdCgpe3ZhciBlLHIsbixpLG8sYSxzLHUsZixsLGQscCx2PWFyZ3VtZW50cztyZXR1cm4gYy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiBlPXYubGVuZ3RoPjAmJnZvaWQgMCE9PXZbMF0/dlswXTp7fSxyPSgwLFIubWFrZU9wdHMpKGUpLHQubmV4dD00LHRoaXMuaW5kZXgucGFyc2Uocik7Y2FzZSA0OmlmKG49dC5zZW50LCEoaT1uLmZpcnN0RGF0YUxpbmU/bi5maXJzdERhdGFMaW5lLmJsb2NrUG9zaXRpb24rNjU1MzU6dm9pZCAwKSl7dC5uZXh0PTE3O2JyZWFrfXJldHVybiB0Lm5leHQ9OSx0aGlzLmJhbS5yZWFkKEJ1ZmZlci5hbGxvYyhpK0wpLDAsaStMLDAscik7Y2FzZSA5OmlmKGE9dC5zZW50LHM9YS5ieXRlc1JlYWQsbz1hLmJ1ZmZlcixzKXt0Lm5leHQ9MTQ7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJFcnJvciByZWFkaW5nIGhlYWRlciIpO2Nhc2UgMTQ6bz1zPGk/KDAsaC5kZWZhdWx0KShvKS5jYWxsKG8sMCxzKTooMCxoLmRlZmF1bHQpKG8pLmNhbGwobywwLGkpLHQubmV4dD0yMDticmVhaztjYXNlIDE3OnJldHVybiB0Lm5leHQ9MTksdGhpcy5iYW0ucmVhZEZpbGUocik7Y2FzZSAxOTpvPXQuc2VudDtjYXNlIDIwOnJldHVybiB0Lm5leHQ9MjIsKDAsUy51bnppcCkobyk7Y2FzZSAyMjppZigodT10LnNlbnQpLnJlYWRJbnQzMkxFKDApPT09TSl7dC5uZXh0PTI1O2JyZWFrfXRocm93IG5ldyBFcnJvcigiTm90IGEgQkFNIGZpbGUiKTtjYXNlIDI1OnJldHVybiBmPXUucmVhZEludDMyTEUoNCksdGhpcy5oZWFkZXI9dS50b1N0cmluZygidXRmOCIsOCw4K2YpLHQubmV4dD0yOSx0aGlzLl9yZWFkUmVmU2VxcyhmKzgsNjU1MzUscik7Y2FzZSAyOTpyZXR1cm4gbD10LnNlbnQsZD1sLmNoclRvSW5kZXgscD1sLmluZGV4VG9DaHIsdGhpcy5jaHJUb0luZGV4PWQsdGhpcy5pbmRleFRvQ2hyPXAsdC5hYnJ1cHQoInJldHVybiIsKDAsUC5wYXJzZUhlYWRlclRleHQpKHRoaXMuaGVhZGVyKSk7Y2FzZSAzNTpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuICQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImdldEhlYWRlclRleHQiLHZhbHVlOihxPSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoKXt2YXIgZSxyPWFyZ3VtZW50cztyZXR1cm4gYy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiBlPXIubGVuZ3RoPjAmJnZvaWQgMCE9PXJbMF0/clswXTp7fSx0Lm5leHQ9Myx0aGlzLmdldEhlYWRlcihlKTtjYXNlIDM6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHRoaXMuaGVhZGVyKTtjYXNlIDQ6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiBxLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJfcmVhZFJlZlNlcXMiLHZhbHVlOihEPSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyKXt2YXIgbixpLG8sYSxzLHUsZixsLGQscCx2LGcseSxiPWFyZ3VtZW50cztyZXR1cm4gYy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKG49Yi5sZW5ndGg+MiYmdm9pZCAwIT09YlsyXT9iWzJdOnt9LCEoZT5yKSl7dC5uZXh0PTM7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHRoaXMuX3JlYWRSZWZTZXFzKGUsMipyLG4pKTtjYXNlIDM6cmV0dXJuIHQubmV4dD01LHRoaXMuYmFtLnJlYWQoQnVmZmVyLmFsbG9jKHIrTCksMCxyLDAsbik7Y2FzZSA1OmlmKGk9dC5zZW50LG89aS5ieXRlc1JlYWQsYT1pLmJ1ZmZlcixvKXt0Lm5leHQ9MTA7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJFcnJvciByZWFkaW5nIHJlZnNlcXMgZnJvbSBoZWFkZXIiKTtjYXNlIDEwOnJldHVybiBhPW88cj8oMCxoLmRlZmF1bHQpKGEpLmNhbGwoYSwwLG8pOigwLGguZGVmYXVsdCkoYSkuY2FsbChhLDAsciksdC5uZXh0PTEzLCgwLFMudW56aXApKGEpO2Nhc2UgMTM6cz10LnNlbnQsdT1zLnJlYWRJbnQzMkxFKGUpLGY9ZSs0LGw9e30sZD1bXSxwPTA7Y2FzZSAxOTppZighKHA8dSkpe3QubmV4dD0zNTticmVha31yZXR1cm4gdC5uZXh0PTIyLCgwLFIuYWJvcnRCcmVha1BvaW50KShuLnNpZ25hbCk7Y2FzZSAyMjppZih2PXMucmVhZEludDMyTEUoZiksZz1zLnRvU3RyaW5nKCJ1dGY4IixmKzQsZis0K3YtMSksZz10aGlzLnJlbmFtZVJlZlNlcShnKSx5PXMucmVhZEludDMyTEUoZit2KzQpLGxbZ109cCxkLnB1c2goe3JlZk5hbWU6ZyxsZW5ndGg6eX0pLCEoKGY9Zis4K3YpPnMubGVuZ3RoKSl7dC5uZXh0PTMyO2JyZWFrfXJldHVybiBjb25zb2xlLndhcm4oIkJBTSBoZWFkZXIgaXMgdmVyeSBiaWcuICBSZS1mZXRjaGluZyAiLmNvbmNhdChyLCIgYnl0ZXMuIikpLHQuYWJydXB0KCJyZXR1cm4iLHRoaXMuX3JlYWRSZWZTZXFzKGUsMipyLG4pKTtjYXNlIDMyOnArPTEsdC5uZXh0PTE5O2JyZWFrO2Nhc2UgMzU6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHtjaHJUb0luZGV4OmwsaW5kZXhUb0NocjpkfSk7Y2FzZSAzNjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImdldFJlY29yZHNGb3JSYW5nZSIsdmFsdWU6KEY9KDAsZC5kZWZhdWx0KShjLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlLHIsbil7dmFyIGksbyxhLHMsdSxmLGgsZCxwLHY9YXJndW1lbnRzO3JldHVybiBjLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aT12Lmxlbmd0aD4zJiZ2b2lkIDAhPT12WzNdP3ZbM106e3ZpZXdBc1BhaXJzOiExLHBhaXJBY3Jvc3NDaHI6ITEsbWF4SW5zZXJ0U2l6ZToyZTV9LG89W10sYT0hMCxzPSExLHQucHJldj00LGY9KDAsXy5kZWZhdWx0KSh0aGlzLnN0cmVhbVJlY29yZHNGb3JSYW5nZShlLHIsbixpKSk7Y2FzZSA2OnJldHVybiB0Lm5leHQ9OCxmLm5leHQoKTtjYXNlIDg6cmV0dXJuIGg9dC5zZW50LGE9aC5kb25lLHQubmV4dD0xMixoLnZhbHVlO2Nhc2UgMTI6aWYoZD10LnNlbnQsYSl7dC5uZXh0PTE5O2JyZWFrfXA9ZCxvPSgwLGwuZGVmYXVsdCkobykuY2FsbChvLHApO2Nhc2UgMTY6YT0hMCx0Lm5leHQ9NjticmVhaztjYXNlIDE5OnQubmV4dD0yNTticmVhaztjYXNlIDIxOnQucHJldj0yMSx0LnQwPXQuY2F0Y2goNCkscz0hMCx1PXQudDA7Y2FzZSAyNTppZih0LnByZXY9MjUsdC5wcmV2PTI2LGF8fG51bGw9PWYucmV0dXJuKXt0Lm5leHQ9MzA7YnJlYWt9cmV0dXJuIHQubmV4dD0zMCxmLnJldHVybigpO2Nhc2UgMzA6aWYodC5wcmV2PTMwLCFzKXt0Lm5leHQ9MzM7YnJlYWt9dGhyb3cgdTtjYXNlIDMzOnJldHVybiB0LmZpbmlzaCgzMCk7Y2FzZSAzNDpyZXR1cm4gdC5maW5pc2goMjUpO2Nhc2UgMzU6cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLG8pO2Nhc2UgMzY6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMsW1s0LDIxLDI1LDM1XSxbMjYsLDMwLDM0XV0pfSkpKSxmdW5jdGlvbih0LGUscil7cmV0dXJuIEYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6InN0cmVhbVJlY29yZHNGb3JSYW5nZSIsdmFsdWU6ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106e3ZpZXdBc1BhaXJzOiExLHBhaXJBY3Jvc3NDaHI6ITEsbWF4SW5zZXJ0U2l6ZToyZTV9O3JldHVybigwLGIuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIG8oKXt2YXIgYSxzLGgsZCxwLHYsZyx5O3JldHVybiBjLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24obyl7Zm9yKDs7KXN3aXRjaChvLnByZXY9by5uZXh0KXtjYXNlIDA6aWYoaS52aWV3QXNQYWlycz1pLnZpZXdBc1BhaXJzfHwhMSxpLnBhaXJBY3Jvc3NDaHI9aS5wYWlyQWNyb3NzQ2hyfHwhMSxpLm1heEluc2VydFNpemU9dm9pZCAwIT09aS5tYXhJbnNlcnRTaXplP2kubWF4SW5zZXJ0U2l6ZToyZTUsKHM9bi5jaHJUb0luZGV4JiZuLmNoclRvSW5kZXhbdF0pPj0wKXtvLm5leHQ9ODticmVha31oPVtdLG8ubmV4dD0xMzticmVhaztjYXNlIDg6cmV0dXJuIG8ubmV4dD0xMCwoMCxtLmRlZmF1bHQpKG4uaW5kZXguYmxvY2tzRm9yUmFuZ2UocyxlLTEscixpKSk7Y2FzZSAxMDppZihoPW8uc2VudCl7by5uZXh0PTEzO2JyZWFrfXRocm93IG5ldyBFcnJvcigiRXJyb3IgaW4gaW5kZXggZmV0Y2giKTtjYXNlIDEzOmQ9MDtjYXNlIDE0OmlmKCEoZDxoLmxlbmd0aCkpe28ubmV4dD0yMzticmVha31yZXR1cm4gby5uZXh0PTE3LCgwLG0uZGVmYXVsdCkoKDAsUi5hYm9ydEJyZWFrUG9pbnQpKGkuc2lnbmFsKSk7Y2FzZSAxNzppZighKChwPWhbZF0uZmV0Y2hlZFNpemUoKSk+bi5jaHVua1NpemVMaW1pdCkpe28ubmV4dD0yMDticmVha310aHJvdyBuZXcgRXJyb3IoKDAsbC5kZWZhdWx0KSh2PSJUb28gbWFueSBCQU0gZmVhdHVyZXMuIEJBTSBjaHVuayBzaXplICIuY29uY2F0KHAsIiBieXRlcyBleGNlZWRzIGNodW5rU2l6ZUxpbWl0IG9mICIpKS5jYWxsKHYsbi5jaHVua1NpemVMaW1pdCkpO2Nhc2UgMjA6ZCs9MSxvLm5leHQ9MTQ7YnJlYWs7Y2FzZSAyMzppZighKChnPSgwLGYuZGVmYXVsdCkoYT0oMCx1LmRlZmF1bHQpKGgpLmNhbGwoaCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuZmV0Y2hlZFNpemUoKX0pKSkuY2FsbChhLChmdW5jdGlvbih0LGUpe3JldHVybiB0K2V9KSwwKSk+bi5mZXRjaFNpemVMaW1pdCkpe28ubmV4dD0yNjticmVha310aHJvdyBuZXcgRXJyb3IoKDAsbC5kZWZhdWx0KSh5PSJkYXRhIHNpemUgb2YgIi5jb25jYXQoZy50b0xvY2FsZVN0cmluZygpLCIgYnl0ZXMgZXhjZWVkZWQgZmV0Y2ggc2l6ZSBsaW1pdCBvZiAiKSkuY2FsbCh5LG4uZmV0Y2hTaXplTGltaXQudG9Mb2NhbGVTdHJpbmcoKSwiIGJ5dGVzIikpO2Nhc2UgMjY6cmV0dXJuIG8uZGVsZWdhdGVZaWVsZCgoMCx3LmRlZmF1bHQpKCgwLF8uZGVmYXVsdCkobi5fZmV0Y2hDaHVua0ZlYXR1cmVzKGgscyxlLHIsaSkpLG0uZGVmYXVsdCksInQwIiwyNyk7Y2FzZSAyNzpjYXNlImVuZCI6cmV0dXJuIG8uc3RvcCgpfX0pLG8pfSkpKSgpfX0se2tleToiX2ZldGNoQ2h1bmtGZWF0dXJlcyIsdmFsdWU6ZnVuY3Rpb24odCxlLHIsbixpKXt2YXIgbz10aGlzO3JldHVybigwLGIuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIGEoKXt2YXIgcyx1LGYsbCxoLGQscCx2LGcseSxiO3JldHVybiBjLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24oYSl7Zm9yKDs7KXN3aXRjaChhLnByZXY9YS5uZXh0KXtjYXNlIDA6cz1bXSx1PSExLGY9MDtjYXNlIDM6aWYoIShmPHQubGVuZ3RoKSl7YS5uZXh0PTIxO2JyZWFrfXJldHVybiBsPXRbZl0sYS5uZXh0PTcsKDAsbS5kZWZhdWx0KShvLmZlYXR1cmVDYWNoZS5nZXQobC50b1N0cmluZygpLHtjaHVuazpsLG9wdHM6aX0saS5zaWduYWwpKTtjYXNlIDc6cmV0dXJuIGg9YS5zZW50LGQ9aC5kYXRhLHA9aC5jcG9zaXRpb25zLHY9aC5kcG9zaXRpb25zLGc9aC5jaHVuayx5PW8ucmVhZEJhbUZlYXR1cmVzKGQscCx2LGcpLnRoZW4oKGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1bXSxvPTA7bzx0Lmxlbmd0aDtvKz0xKXt2YXIgYT10W29dO2lmKGEuc2VxX2lkKCk9PT1lKXtpZihhLmdldCgic3RhcnQiKT49bil7dT0hMDticmVha31hLmdldCgiZW5kIik+PXImJmkucHVzaChhKX19cmV0dXJuIGl9KSkscy5wdXNoKHkpLGEubmV4dD0xNiwoMCxtLmRlZmF1bHQpKHkpO2Nhc2UgMTY6aWYoIXUpe2EubmV4dD0xODticmVha31yZXR1cm4gYS5hYnJ1cHQoImJyZWFrIiwyMSk7Y2FzZSAxODpmKyssYS5uZXh0PTM7YnJlYWs7Y2FzZSAyMTooMCxSLmNoZWNrQWJvcnRTaWduYWwpKGkuc2lnbmFsKSxiPTA7Y2FzZSAyMzppZighKGI8cy5sZW5ndGgpKXthLm5leHQ9Mjk7YnJlYWt9cmV0dXJuIGEubmV4dD0yNixzW2JdO2Nhc2UgMjY6YisrLGEubmV4dD0yMzticmVhaztjYXNlIDI5OmlmKCgwLFIuY2hlY2tBYm9ydFNpZ25hbCkoaS5zaWduYWwpLCFpLnZpZXdBc1BhaXJzKXthLm5leHQ9MzM7YnJlYWt9cmV0dXJuIGEubmV4dD0zMyxvLmZldGNoUGFpcnMoZSxzLGkpO2Nhc2UgMzM6Y2FzZSJlbmQiOnJldHVybiBhLnN0b3AoKX19KSxhKX0pKSkoKX19LHtrZXk6ImZldGNoUGFpcnMiLHZhbHVlOihVPSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyLGgpe3ZhciBwLHYsZyx5LGIsbSx3LF8seCxrLEUsQSxTLFQsQj10aGlzO3JldHVybiBjLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIGc9e30seT17fSx0Lm5leHQ9NCxzLmRlZmF1bHQuYWxsKCgwLHUuZGVmYXVsdCkocikuY2FsbChyLGZ1bmN0aW9uKCl7dmFyIHQ9KDAsZC5kZWZhdWx0KShjLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuLGkscyx1LGY7cmV0dXJuIGMuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC5uZXh0PTIsZTtjYXNlIDI6Zm9yKG49dC5zZW50LGk9e30scz0wO3M8bi5sZW5ndGg7cysrKXU9bltzXS5uYW1lKCksZj1uW3NdLmlkKCksaVt1XXx8KGlbdV09MCksaVt1XSsrLHlbZl09MTsoMCxhLmRlZmF1bHQpKHI9KDAsTy5kZWZhdWx0KShpKSkuY2FsbChyLChmdW5jdGlvbih0KXt2YXIgZT0oMCxvLmRlZmF1bHQpKHQsMikscj1lWzBdOzE9PT1lWzFdJiYoZ1tyXT0hMCl9KSk7Y2FzZSA2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpKSk7Y2FzZSA0OnJldHVybiBiPVtdLHQubmV4dD03LHMuZGVmYXVsdC5hbGwoKDAsdS5kZWZhdWx0KShyKS5jYWxsKHIsZnVuY3Rpb24oKXt2YXIgdD0oMCxkLmRlZmF1bHQpKGMuZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KHIpe3ZhciBuLGksbztyZXR1cm4gYy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0Lm5leHQ9MixyO2Nhc2UgMjpmb3Iobj10LnNlbnQsaT0wO2k8bi5sZW5ndGg7aSsrKW89bltpXS5uYW1lKCksZ1tvXSYmKGgucGFpckFjcm9zc0Nocnx8bltpXS5fbmV4dF9yZWZpZCgpPT09ZSYmTWF0aC5hYnMobltpXS5nZXQoInN0YXJ0IiktbltpXS5fbmV4dF9wb3MoKSk8KGgubWF4SW5zZXJ0U2l6ZXx8MmU1KSkmJmIucHVzaChCLmluZGV4LmJsb2Nrc0ZvclJhbmdlKG5baV0uX25leHRfcmVmaWQoKSxuW2ldLl9uZXh0X3BvcygpLG5baV0uX25leHRfcG9zKCkrMSxoKSk7Y2FzZSA0OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpKSk7Y2FzZSA3OnJldHVybiB0Lm5leHQ9OSxzLmRlZmF1bHQuYWxsKGIpO2Nhc2UgOTpmb3IobT10LnNlbnQsdz1bXSxfPTA7XzxtLmxlbmd0aDtfKyspdz0oMCxsLmRlZmF1bHQpKHcpLmNhbGwodyxtW19dKTtpZih3PSgwLGkuZGVmYXVsdCkocD0oMCxuLmRlZmF1bHQpKHcpLmNhbGwodykpLmNhbGwocCwoZnVuY3Rpb24odCxlLHIpe3JldHVybiFlfHx0LnRvU3RyaW5nKCkhPT1yW2UtMV0udG9TdHJpbmcoKX0pKSwhKCh4PSgwLGYuZGVmYXVsdCkodj0oMCx1LmRlZmF1bHQpKHcpLmNhbGwodywoZnVuY3Rpb24odCl7cmV0dXJuIHQuZmV0Y2hlZFNpemUoKX0pKSkuY2FsbCh2LChmdW5jdGlvbih0LGUpe3JldHVybiB0K2V9KSwwKSk+dGhpcy5mZXRjaFNpemVMaW1pdCkpe3QubmV4dD0xNjticmVha310aHJvdyBuZXcgRXJyb3IoKDAsbC5kZWZhdWx0KShrPSJkYXRhIHNpemUgb2YgIi5jb25jYXQoeC50b0xvY2FsZVN0cmluZygpLCIgYnl0ZXMgZXhjZWVkZWQgZmV0Y2ggc2l6ZSBsaW1pdCBvZiAiKSkuY2FsbChrLHRoaXMuZmV0Y2hTaXplTGltaXQudG9Mb2NhbGVTdHJpbmcoKSwiIGJ5dGVzIikpO2Nhc2UgMTY6cmV0dXJuIEU9KDAsdS5kZWZhdWx0KSh3KS5jYWxsKHcsZnVuY3Rpb24oKXt2YXIgdD0oMCxkLmRlZmF1bHQpKGMuZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLG4saSxvLGEscyx1LGYsbDtyZXR1cm4gYy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0Lm5leHQ9MixCLmZlYXR1cmVDYWNoZS5nZXQoZS50b1N0cmluZygpLHtjaHVuazplLG9wdHM6aH0saC5zaWduYWwpO2Nhc2UgMjpyZXR1cm4gcj10LnNlbnQsbj1yLmRhdGEsaT1yLmNwb3NpdGlvbnMsbz1yLmRwb3NpdGlvbnMsYT1yLmNodW5rLHQubmV4dD05LEIucmVhZEJhbUZlYXR1cmVzKG4saSxvLGEpO2Nhc2UgOTpmb3Iocz10LnNlbnQsdT1bXSxmPTA7ZjxzLmxlbmd0aDtmKz0xKWw9c1tmXSxnW2wuZ2V0KCJuYW1lIildJiYheVtsLmlkKCldJiZ1LnB1c2gobCk7cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHUpO2Nhc2UgMTM6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0KX0pKSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkpLHQubmV4dD0xOSxzLmRlZmF1bHQuYWxsKEUpO2Nhc2UgMTk6cmV0dXJuIEE9dC5zZW50LFM9W10sQS5sZW5ndGgmJihUPSgwLGYuZGVmYXVsdCkoQSkuY2FsbChBLChmdW5jdGlvbih0LGUpe3JldHVybigwLGwuZGVmYXVsdCkodCkuY2FsbCh0LGUpfSkpLFM9KDAsbC5kZWZhdWx0KShTKS5jYWxsKFMsVCkpLHQuYWJydXB0KCJyZXR1cm4iLFMpO2Nhc2UgMjM6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0LGUscil7cmV0dXJuIFUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6Il9yZWFkQ2h1bmsiLHZhbHVlOihOPSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyKXt2YXIgbixpLG8sYSxzLHUsZixsLGQscCx2O3JldHVybiBjLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIG49ZS5jaHVuayxpPWUub3B0cyxhPShvPW4pLmZldGNoZWRTaXplKCksdC5uZXh0PTUsdGhpcy5iYW0ucmVhZChCdWZmZXIuYWxsb2MoYSksMCxhLG8ubWludi5ibG9ja1Bvc2l0aW9uLGkpO2Nhc2UgNTppZihzPXQuc2VudCx1PXMuYnl0ZXNSZWFkLGY9cy5idWZmZXIsKDAsUi5jaGVja0Fib3J0U2lnbmFsKShyKSx1KXt0Lm5leHQ9MTE7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLFtdKTtjYXNlIDExOnJldHVybiBmPXU8YT8oMCxoLmRlZmF1bHQpKGYpLmNhbGwoZiwwLHUpOigwLGguZGVmYXVsdCkoZikuY2FsbChmLDAsYSksdC5uZXh0PTE0LCgwLFMudW56aXBDaHVua1NsaWNlKShmLG4pO2Nhc2UgMTQ6cmV0dXJuIGw9dC5zZW50LGQ9bC5idWZmZXIscD1sLmNwb3NpdGlvbnMsdj1sLmRwb3NpdGlvbnMsKDAsUi5jaGVja0Fib3J0U2lnbmFsKShyKSx0LmFicnVwdCgicmV0dXJuIix7ZGF0YTpkLGNwb3NpdGlvbnM6cCxkcG9zaXRpb25zOnYsY2h1bms6bn0pO2Nhc2UgMjA6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0LGUpe3JldHVybiBOLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJyZWFkQmFtRmVhdHVyZXMiLHZhbHVlOihDPSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxuLGksbyl7dmFyIGEscyx1LGYsbCxkLHA7cmV0dXJuIGMuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDphPTAscz1bXSx1PTAsZj0rKDAsci5kZWZhdWx0KSgpO2Nhc2UgNDppZighKGErNDxlLmxlbmd0aCkpe3QubmV4dD0xODticmVha31pZihsPWUucmVhZEludDMyTEUoYSksZD1hKzQrbC0xLGkpe2Zvcig7YStvLm1pbnYuZGF0YVBvc2l0aW9uPj1pW3UrK107KTt1LS19aWYoIShkPGUubGVuZ3RoKSl7dC5uZXh0PTE1O2JyZWFrfWlmKHA9bmV3IEkuZGVmYXVsdCh7Ynl0ZXM6e2J5dGVBcnJheTplLHN0YXJ0OmEsZW5kOmR9LGZpbGVPZmZzZXQ6bj8yNTYqblt1XSsoYS1pW3VdKStvLm1pbnYuZGF0YVBvc2l0aW9uKzE6QS5kZWZhdWx0LnNpZ25lZCgoMCxoLmRlZmF1bHQpKGUpLmNhbGwoZSxhLGQpKX0pLHMucHVzaChwKSwhKHRoaXMueWllbGRUaHJlYWRUaW1lJiYrKDAsci5kZWZhdWx0KSgpLWY+dGhpcy55aWVsZFRocmVhZFRpbWUpKXt0Lm5leHQ9MTU7YnJlYWt9cmV0dXJuIHQubmV4dD0xNCwoMCxSLnRpbWVvdXQpKDEpO2Nhc2UgMTQ6Zj0rKDAsci5kZWZhdWx0KSgpO2Nhc2UgMTU6YT1kKzEsdC5uZXh0PTQ7YnJlYWs7Y2FzZSAxODpyZXR1cm4gdC5hYnJ1cHQoInJldHVybiIscyk7Y2FzZSAxOTpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJoYXNSZWZTZXEiLHZhbHVlOih6PSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHI7cmV0dXJuIGMuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj10aGlzLmNoclRvSW5kZXgmJnRoaXMuY2hyVG9JbmRleFtlXSx0LmFicnVwdCgicmV0dXJuIix0aGlzLmluZGV4Lmhhc1JlZlNlcShyKSk7Y2FzZSAyOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24odCl7cmV0dXJuIHouYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImxpbmVDb3VudCIsdmFsdWU6KGo9KDAsZC5kZWZhdWx0KShjLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcjtyZXR1cm4gYy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiByPXRoaXMuY2hyVG9JbmRleCYmdGhpcy5jaHJUb0luZGV4W2VdLHQuYWJydXB0KCJyZXR1cm4iLHRoaXMuaW5kZXgubGluZUNvdW50KHIpKTtjYXNlIDI6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0LHRoaXMpfSkpKSxmdW5jdGlvbih0KXtyZXR1cm4gai5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiaW5kZXhDb3YiLHZhbHVlOihlPSgwLGQuZGVmYXVsdCkoYy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyLG4pe3ZhciBpO3JldHVybiBjLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQubmV4dD0yLHRoaXMuaW5kZXgucGFyc2UoKTtjYXNlIDI6cmV0dXJuIGk9dGhpcy5jaHJUb0luZGV4JiZ0aGlzLmNoclRvSW5kZXhbZV0sdC5hYnJ1cHQoInJldHVybiIsdGhpcy5pbmRleC5pbmRleENvdihpLHIsbikpO2Nhc2UgNDpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsdGhpcyl9KSkpLGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSx0fSgpO3QuZGVmYXVsdD1qfShjXyk7dmFyIHJrPXt9LG5rPXtleHBvcnRzOnt9fSxpaz1UZixvaz12cixhaz1fbi5pbmRleE9mLHNrPXJmLHVrPVtdLmluZGV4T2YsZms9ISF1ayYmMS9bMV0uaW5kZXhPZigxLC0wKTwwLGxrPXNrKCJpbmRleE9mIik7b2soe3RhcmdldDoiQXJyYXkiLHByb3RvOiEwLGZvcmNlZDpma3x8IWxrfSx7aW5kZXhPZjpmdW5jdGlvbih0KXtyZXR1cm4gZms/dWsuYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwOmFrKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIGNrPXNmKCJBcnJheSIpLmluZGV4T2YsaGs9QXJyYXkucHJvdG90eXBlLGRrPWZ1bmN0aW9uKHQpe3ZhciBlPXQuaW5kZXhPZjtyZXR1cm4gdD09PWhrfHx0IGluc3RhbmNlb2YgQXJyYXkmJmU9PT1oay5pbmRleE9mP2NrOmV9LHBrPXtleHBvcnRzOnt9fSx2az1SZjshZnVuY3Rpb24odCl7dmFyIGU9dmsscj1kazt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtpZihudWxsPT10KXJldHVybnt9O3ZhciBpLG8sYT17fSxzPWUodCk7Zm9yKG89MDtvPHMubGVuZ3RoO28rKylpPXNbb10scihuKS5jYWxsKG4saSk+PTB8fChhW2ldPXRbaV0pO3JldHVybiBhfSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KHBrKSxmdW5jdGlvbih0KXt2YXIgZT1payxyPWRrLG49cGsuZXhwb3J0czt0LmV4cG9ydHM9ZnVuY3Rpb24odCxpKXtpZihudWxsPT10KXJldHVybnt9O3ZhciBvLGEscz1uKHQsaSk7aWYoZSl7dmFyIHU9ZSh0KTtmb3IoYT0wO2E8dS5sZW5ndGg7YSsrKW89dVthXSxyKGkpLmNhbGwoaSxvKT49MHx8T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHQsbykmJihzW29dPXRbb10pfXJldHVybiBzfSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHMsdC5leHBvcnRzLl9fZXNNb2R1bGU9ITB9KG5rKTt2YXIgZ2s9Z3QseWs9c3QsYms9dmUoIm1hdGNoIiksbWs9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGdrKHQpJiYodm9pZCAwIT09KGU9dFtia10pPyEhZToiUmVnRXhwIj09eWsodCkpfSx3az12ZSgibWF0Y2giKSxfaz12cix4az1obixraz1jbyxFaz1mdW5jdGlvbih0KXtpZihtayh0KSl0aHJvdyBUeXBlRXJyb3IoIlRoZSBtZXRob2QgZG9lc24ndCBhY2NlcHQgcmVndWxhciBleHByZXNzaW9ucyIpO3JldHVybiB0fSxBaz1jdCxTaz1mdW5jdGlvbih0KXt2YXIgZT0vLi87dHJ5eyIvLi8iW3RdKGUpfWNhdGNoKHIpe3RyeXtyZXR1cm4gZVt3a109ITEsIi8uLyJbdF0oZSl9Y2F0Y2gobil7fX1yZXR1cm4hMX0sT2s9IiIuc3RhcnRzV2l0aCxUaz1NYXRoLm1pbjtfayh7dGFyZ2V0OiJTdHJpbmciLHByb3RvOiEwLGZvcmNlZDohU2soInN0YXJ0c1dpdGgiKX0se3N0YXJ0c1dpdGg6ZnVuY3Rpb24odCl7dmFyIGU9a2soQWsodGhpcykpO0VrKHQpO3ZhciByPXhrKFRrKGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLGUubGVuZ3RoKSksbj1rayh0KTtyZXR1cm4gT2s/T2suY2FsbChlLG4scik6ZS5zbGljZShyLHIrbi5sZW5ndGgpPT09bn19KTt2YXIgQmssSWs9c2YoIlN0cmluZyIpLnN0YXJ0c1dpdGgsUGs9U3RyaW5nLnByb3RvdHlwZSxSaz1mdW5jdGlvbih0KXt2YXIgZT10LnN0YXJ0c1dpdGg7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0fHx0PT09UGt8fHQgaW5zdGFuY2VvZiBTdHJpbmcmJmU9PT1Qay5zdGFydHNXaXRoP0lrOmV9O0JrPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOngsZnVuY3Rpb24odCl7dmFyIGU9IlVSTFNlYXJjaFBhcmFtcyJpbiBCayxyPSJTeW1ib2wiaW4gQmsmJiJpdGVyYXRvciJpbiBTeW1ib2wsbj0iRmlsZVJlYWRlciJpbiBCayYmIkJsb2IiaW4gQmsmJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgQmxvYiwhMH1jYXRjaChfRSl7cmV0dXJuITF9fSgpLGk9IkZvcm1EYXRhImluIEJrLG89IkFycmF5QnVmZmVyImluIEJrO2lmKG8pdmFyIGE9WyJbb2JqZWN0IEludDhBcnJheV0iLCJbb2JqZWN0IFVpbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iLCJbb2JqZWN0IEludDE2QXJyYXldIiwiW29iamVjdCBVaW50MTZBcnJheV0iLCJbb2JqZWN0IEludDMyQXJyYXldIiwiW29iamVjdCBVaW50MzJBcnJheV0iLCJbb2JqZWN0IEZsb2F0MzJBcnJheV0iLCJbb2JqZWN0IEZsb2F0NjRBcnJheV0iXSxzPUFycmF5QnVmZmVyLmlzVmlld3x8ZnVuY3Rpb24odCl7cmV0dXJuIHQmJmEuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpPi0xfTtmdW5jdGlvbiB1KHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdCYmKHQ9U3RyaW5nKHQpKSwvW15hLXowLTlcLSMkJSYnKisuXl9gfH5dL2kudGVzdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZSIpO3JldHVybiB0LnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZih0KXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIHQmJih0PVN0cmluZyh0KSksdH1mdW5jdGlvbiBsKHQpe3ZhciBlPXtuZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dC5zaGlmdCgpO3JldHVybntkb25lOnZvaWQgMD09PWUsdmFsdWU6ZX19fTtyZXR1cm4gciYmKGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiBlfSksZX1mdW5jdGlvbiBjKHQpe3RoaXMubWFwPXt9LHQgaW5zdGFuY2VvZiBjP3QuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXt0aGlzLmFwcGVuZChlLHQpfSksdGhpcyk6QXJyYXkuaXNBcnJheSh0KT90LmZvckVhY2goKGZ1bmN0aW9uKHQpe3RoaXMuYXBwZW5kKHRbMF0sdFsxXSl9KSx0aGlzKTp0JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KS5mb3JFYWNoKChmdW5jdGlvbihlKXt0aGlzLmFwcGVuZChlLHRbZV0pfSksdGhpcyl9ZnVuY3Rpb24gaCh0KXtpZih0LmJvZHlVc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCJBbHJlYWR5IHJlYWQiKSk7dC5ib2R5VXNlZD0hMH1mdW5jdGlvbiBkKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxyKXt0Lm9ubG9hZD1mdW5jdGlvbigpe2UodC5yZXN1bHQpfSx0Lm9uZXJyb3I9ZnVuY3Rpb24oKXtyKHQuZXJyb3IpfX0pKX1mdW5jdGlvbiBwKHQpe3ZhciBlPW5ldyBGaWxlUmVhZGVyLHI9ZChlKTtyZXR1cm4gZS5yZWFkQXNBcnJheUJ1ZmZlcih0KSxyfWZ1bmN0aW9uIHYodCl7aWYodC5zbGljZSlyZXR1cm4gdC5zbGljZSgwKTt2YXIgZT1uZXcgVWludDhBcnJheSh0LmJ5dGVMZW5ndGgpO3JldHVybiBlLnNldChuZXcgVWludDhBcnJheSh0KSksZS5idWZmZXJ9ZnVuY3Rpb24gZygpe3JldHVybiB0aGlzLmJvZHlVc2VkPSExLHRoaXMuX2luaXRCb2R5PWZ1bmN0aW9uKHQpe3ZhciByO3RoaXMuX2JvZHlJbml0PXQsdD8ic3RyaW5nIj09dHlwZW9mIHQ/dGhpcy5fYm9keVRleHQ9dDpuJiZCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpP3RoaXMuX2JvZHlCbG9iPXQ6aSYmRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodCk/dGhpcy5fYm9keUZvcm1EYXRhPXQ6ZSYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpP3RoaXMuX2JvZHlUZXh0PXQudG9TdHJpbmcoKTpvJiZuJiYocj10KSYmRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yocik/KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj12KHQuYnVmZmVyKSx0aGlzLl9ib2R5SW5pdD1uZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpOm8mJihBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KXx8cyh0KSk/dGhpcy5fYm9keUFycmF5QnVmZmVyPXYodCk6dGhpcy5fYm9keVRleHQ9dD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCk6dGhpcy5fYm9keVRleHQ9IiIsdGhpcy5oZWFkZXJzLmdldCgiY29udGVudC10eXBlIil8fCgic3RyaW5nIj09dHlwZW9mIHQ/dGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIiwidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Iik6dGhpcy5fYm9keUJsb2ImJnRoaXMuX2JvZHlCbG9iLnR5cGU/dGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIix0aGlzLl9ib2R5QmxvYi50eXBlKTplJiZVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodCkmJnRoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04IikpfSxuJiYodGhpcy5ibG9iPWZ1bmN0aW9uKCl7dmFyIHQ9aCh0aGlzKTtpZih0KXJldHVybiB0O2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSl9LHRoaXMuYXJyYXlCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm9keUFycmF5QnVmZmVyP2godGhpcyl8fFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpOnRoaXMuYmxvYigpLnRoZW4ocCl9KSx0aGlzLnRleHQ9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbj1oKHRoaXMpO2lmKG4pcmV0dXJuIG47aWYodGhpcy5fYm9keUJsb2IpcmV0dXJuIHQ9dGhpcy5fYm9keUJsb2IsZT1uZXcgRmlsZVJlYWRlcixyPWQoZSksZS5yZWFkQXNUZXh0KHQpLHI7aWYodGhpcy5fYm9keUFycmF5QnVmZmVyKXJldHVybiBQcm9taXNlLnJlc29sdmUoZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBVaW50OEFycmF5KHQpLHI9bmV3IEFycmF5KGUubGVuZ3RoKSxuPTA7bjxlLmxlbmd0aDtuKyspcltuXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pO3JldHVybiByLmpvaW4oIiIpfSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKTtpZih0aGlzLl9ib2R5Rm9ybURhdGEpdGhyb3cgbmV3IEVycm9yKCJjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQiKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KX0saSYmKHRoaXMuZm9ybURhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihtKX0pLHRoaXMuanNvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpfSx0aGlzfWMucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0LGUpe3Q9dSh0KSxlPWYoZSk7dmFyIHI9dGhpcy5tYXBbdF07dGhpcy5tYXBbdF09cj9yKyIsICIrZTplfSxjLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMubWFwW3UodCldfSxjLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dSh0KSx0aGlzLmhhcyh0KT90aGlzLm1hcFt0XTpudWxsfSxjLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KHUodCkpfSxjLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLm1hcFt1KHQpXT1mKGUpfSxjLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIHRoaXMubWFwKXRoaXMubWFwLmhhc093blByb3BlcnR5KHIpJiZ0LmNhbGwoZSx0aGlzLm1hcFtyXSxyLHRoaXMpfSxjLnByb3RvdHlwZS5rZXlzPWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24oZSxyKXt0LnB1c2gocil9KSksbCh0KX0sYy5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSkpLGwodCl9LGMucHJvdG90eXBlLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKChmdW5jdGlvbihlLHIpe3QucHVzaChbcixlXSl9KSksbCh0KX0sciYmKGMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09Yy5wcm90b3R5cGUuZW50cmllcyk7dmFyIHk9WyJERUxFVEUiLCJHRVQiLCJIRUFEIiwiT1BUSU9OUyIsIlBPU1QiLCJQVVQiXTtmdW5jdGlvbiBiKHQsZSl7dmFyIHIsbixpPShlPWV8fHt9KS5ib2R5O2lmKHQgaW5zdGFuY2VvZiBiKXtpZih0LmJvZHlVc2VkKXRocm93IG5ldyBUeXBlRXJyb3IoIkFscmVhZHkgcmVhZCIpO3RoaXMudXJsPXQudXJsLHRoaXMuY3JlZGVudGlhbHM9dC5jcmVkZW50aWFscyxlLmhlYWRlcnN8fCh0aGlzLmhlYWRlcnM9bmV3IGModC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9dC5tZXRob2QsdGhpcy5tb2RlPXQubW9kZSx0aGlzLnNpZ25hbD10LnNpZ25hbCxpfHxudWxsPT10Ll9ib2R5SW5pdHx8KGk9dC5fYm9keUluaXQsdC5ib2R5VXNlZD0hMCl9ZWxzZSB0aGlzLnVybD1TdHJpbmcodCk7aWYodGhpcy5jcmVkZW50aWFscz1lLmNyZWRlbnRpYWxzfHx0aGlzLmNyZWRlbnRpYWxzfHwic2FtZS1vcmlnaW4iLCFlLmhlYWRlcnMmJnRoaXMuaGVhZGVyc3x8KHRoaXMuaGVhZGVycz1uZXcgYyhlLmhlYWRlcnMpKSx0aGlzLm1ldGhvZD0ocj1lLm1ldGhvZHx8dGhpcy5tZXRob2R8fCJHRVQiLG49ci50b1VwcGVyQ2FzZSgpLHkuaW5kZXhPZihuKT4tMT9uOnIpLHRoaXMubW9kZT1lLm1vZGV8fHRoaXMubW9kZXx8bnVsbCx0aGlzLnNpZ25hbD1lLnNpZ25hbHx8dGhpcy5zaWduYWwsdGhpcy5yZWZlcnJlcj1udWxsLCgiR0VUIj09PXRoaXMubWV0aG9kfHwiSEVBRCI9PT10aGlzLm1ldGhvZCkmJmkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMiKTt0aGlzLl9pbml0Qm9keShpKX1mdW5jdGlvbiBtKHQpe3ZhciBlPW5ldyBGb3JtRGF0YTtyZXR1cm4gdC50cmltKCkuc3BsaXQoIiYiKS5mb3JFYWNoKChmdW5jdGlvbih0KXtpZih0KXt2YXIgcj10LnNwbGl0KCI9Iiksbj1yLnNoaWZ0KCkucmVwbGFjZSgvXCsvZywiICIpLGk9ci5qb2luKCI9IikucmVwbGFjZSgvXCsvZywiICIpO2UuYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuKSxkZWNvZGVVUklDb21wb25lbnQoaSkpfX0pKSxlfWZ1bmN0aW9uIHcodCxlKXtlfHwoZT17fSksdGhpcy50eXBlPSJkZWZhdWx0Iix0aGlzLnN0YXR1cz12b2lkIDA9PT1lLnN0YXR1cz8yMDA6ZS5zdGF0dXMsdGhpcy5vaz10aGlzLnN0YXR1cz49MjAwJiZ0aGlzLnN0YXR1czwzMDAsdGhpcy5zdGF0dXNUZXh0PSJzdGF0dXNUZXh0ImluIGU/ZS5zdGF0dXNUZXh0OiJPSyIsdGhpcy5oZWFkZXJzPW5ldyBjKGUuaGVhZGVycyksdGhpcy51cmw9ZS51cmx8fCIiLHRoaXMuX2luaXRCb2R5KHQpfWIucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMse2JvZHk6dGhpcy5fYm9keUluaXR9KX0sZy5jYWxsKGIucHJvdG90eXBlKSxnLmNhbGwody5wcm90b3R5cGUpLHcucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB3KHRoaXMuX2JvZHlJbml0LHtzdGF0dXM6dGhpcy5zdGF0dXMsc3RhdHVzVGV4dDp0aGlzLnN0YXR1c1RleHQsaGVhZGVyczpuZXcgYyh0aGlzLmhlYWRlcnMpLHVybDp0aGlzLnVybH0pfSx3LmVycm9yPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHcobnVsbCx7c3RhdHVzOjAsc3RhdHVzVGV4dDoiIn0pO3JldHVybiB0LnR5cGU9ImVycm9yIix0fTt2YXIgXz1bMzAxLDMwMiwzMDMsMzA3LDMwOF07dy5yZWRpcmVjdD1mdW5jdGlvbih0LGUpe2lmKC0xPT09Xy5pbmRleE9mKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlIik7cmV0dXJuIG5ldyB3KG51bGwse3N0YXR1czplLGhlYWRlcnM6e2xvY2F0aW9uOnR9fSl9LHQuRE9NRXhjZXB0aW9uPUJrLkRPTUV4Y2VwdGlvbjt0cnl7bmV3IHQuRE9NRXhjZXB0aW9ufWNhdGNoKGspe3QuRE9NRXhjZXB0aW9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5tZXNzYWdlPXQsdGhpcy5uYW1lPWU7dmFyIHI9RXJyb3IodCk7dGhpcy5zdGFjaz1yLnN0YWNrfSx0LkRPTUV4Y2VwdGlvbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHQuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10LkRPTUV4Y2VwdGlvbn1mdW5jdGlvbiB4KGUscil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihpLG8pe3ZhciBhPW5ldyBiKGUscik7aWYoYS5zaWduYWwmJmEuc2lnbmFsLmFib3J0ZWQpcmV0dXJuIG8obmV3IHQuRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwiQWJvcnRFcnJvciIpKTt2YXIgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7ZnVuY3Rpb24gdSgpe3MuYWJvcnQoKX1zLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0LGUscj17c3RhdHVzOnMuc3RhdHVzLHN0YXR1c1RleHQ6cy5zdGF0dXNUZXh0LGhlYWRlcnM6KHQ9cy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8IiIsZT1uZXcgYyx0LnJlcGxhY2UoL1xyP1xuW1x0IF0rL2csIiAiKS5zcGxpdCgvXHI/XG4vKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcj10LnNwbGl0KCI6Iiksbj1yLnNoaWZ0KCkudHJpbSgpO2lmKG4pe3ZhciBpPXIuam9pbigiOiIpLnRyaW0oKTtlLmFwcGVuZChuLGkpfX0pKSxlKX07ci51cmw9InJlc3BvbnNlVVJMImluIHM/cy5yZXNwb25zZVVSTDpyLmhlYWRlcnMuZ2V0KCJYLVJlcXVlc3QtVVJMIik7dmFyIG49InJlc3BvbnNlImluIHM/cy5yZXNwb25zZTpzLnJlc3BvbnNlVGV4dDtpKG5ldyB3KG4scikpfSxzLm9uZXJyb3I9ZnVuY3Rpb24oKXtvKG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSl9LHMub250aW1lb3V0PWZ1bmN0aW9uKCl7byhuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSxzLm9uYWJvcnQ9ZnVuY3Rpb24oKXtvKG5ldyB0LkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSl9LHMub3BlbihhLm1ldGhvZCxhLnVybCwhMCksImluY2x1ZGUiPT09YS5jcmVkZW50aWFscz9zLndpdGhDcmVkZW50aWFscz0hMDoib21pdCI9PT1hLmNyZWRlbnRpYWxzJiYocy53aXRoQ3JlZGVudGlhbHM9ITEpLCJyZXNwb25zZVR5cGUiaW4gcyYmbiYmKHMucmVzcG9uc2VUeXBlPSJibG9iIiksYS5oZWFkZXJzLmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7cy5zZXRSZXF1ZXN0SGVhZGVyKGUsdCl9KSksYS5zaWduYWwmJihhLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsdSkscy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09cy5yZWFkeVN0YXRlJiZhLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsdSl9KSxzLnNlbmQodm9pZCAwPT09YS5fYm9keUluaXQ/bnVsbDphLl9ib2R5SW5pdCl9KSl9eC5wb2x5ZmlsbD0hMCxCay5mZXRjaHx8KEJrLmZldGNoPXgsQmsuSGVhZGVycz1jLEJrLlJlcXVlc3Q9YixCay5SZXNwb25zZT13KSx0LkhlYWRlcnM9Yyx0LlJlcXVlc3Q9Yix0LlJlc3BvbnNlPXcsdC5mZXRjaD14LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0oe30pLGZ1bmN0aW9uKHQpe3ZhciBlPWJnLmV4cG9ydHMscj1ILmV4cG9ydHM7bXIodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5kZWZhdWx0PXZvaWQgMDt2YXIgbj1yKG5rLmV4cG9ydHMpLGk9cihSayksbz1yKFJsKSxhPXIoZ2cpLHM9cihtciksdT1yKEd1KSxmPXIodGYpLGw9cihrZiksYz1yKEJmKSxoPXIoTWYpLGQ9cih0bCkscD1yKGhmKSx2PXIoT2YpLGc9cihMbCkseT1yKERkKSxiPXIoUnApLG09cihxZC5leHBvcnRzKSx3PXIoJGQuZXhwb3J0cyksXz1yKEpkLmV4cG9ydHMpLHg9cihaZC5leHBvcnRzKSxrPXIoWWQuZXhwb3J0cyksRT1yKFFkLmV4cG9ydHMpLEE9cihPbC5leHBvcnRzKSxTPXIoamwuZXhwb3J0cyksTz1yKE9fLmV4cG9ydHMpLFQ9cihQXy5leHBvcnRzKSxCPXIoTV8uZXhwb3J0cyksST1yKFJfLmV4cG9ydHMpLFA9ZShjXyksUj1sXyxNPVF4O2Z1bmN0aW9uIEwodCxlKXt2YXIgcj0oMCxoLmRlZmF1bHQpKHQpO2lmKGMuZGVmYXVsdCl7dmFyIG49KDAsYy5kZWZhdWx0KSh0KTtlJiYobj0oMCx2LmRlZmF1bHQpKG4pLmNhbGwobiwoZnVuY3Rpb24oZSl7cmV0dXJuKDAsbC5kZWZhdWx0KSh0LGUpLmVudW1lcmFibGV9KSkpLHIucHVzaC5hcHBseShyLG4pfXJldHVybiByfWZ1bmN0aW9uIGoodCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIHIsbj1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2lmKGUlMikoMCxwLmRlZmF1bHQpKHI9TChPYmplY3QobiksITApKS5jYWxsKHIsKGZ1bmN0aW9uKGUpeygwLEEuZGVmYXVsdCkodCxlLG5bZV0pfSkpO2Vsc2UgaWYoZi5kZWZhdWx0KSgwLHUuZGVmYXVsdCkodCwoMCxmLmRlZmF1bHQpKG4pKTtlbHNle3ZhciBpOygwLHAuZGVmYXVsdCkoaT1MKE9iamVjdChuKSkpLmNhbGwoaSwoZnVuY3Rpb24oZSl7KDAscy5kZWZhdWx0KSh0LGUsKDAsbC5kZWZhdWx0KShuLGUpKX0pKX19cmV0dXJuIHR9ZnVuY3Rpb24geih0KXt2YXIgZT1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IWQuZGVmYXVsdClyZXR1cm4hMTtpZihkLmRlZmF1bHQuc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCgwLGQuZGVmYXVsdCkoRGF0ZSxbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKF9FKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj0oMCxFLmRlZmF1bHQpKHQpO2lmKGUpe3ZhciBpPSgwLEUuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7cj0oMCxkLmRlZmF1bHQpKG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4oMCxrLmRlZmF1bHQpKHRoaXMscil9fWZ1bmN0aW9uIEModCxlKXtyZXR1cm4gTi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gTigpe3JldHVybihOPSgwLFMuZGVmYXVsdCkoZy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoZSxyKXt2YXIgcztyZXR1cm4gZy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0Lm5leHQ9MixhLmRlZmF1bHQuYWxsKCgwLG8uZGVmYXVsdCkoZSkuY2FsbChlLGZ1bmN0aW9uKCl7dmFyIHQ9KDAsUy5kZWZhdWx0KShnLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgbyxhLHMsdTtyZXR1cm4gZy5kZWZhdWx0LndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKG89ZS51cmwsYT1lLmhlYWRlcnMsISgwLGkuZGVmYXVsdCkobykuY2FsbChvLCJkYXRhOiIpKXt0Lm5leHQ9NTticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsQnVmZmVyLmZyb20oby5zcGxpdCgiLCIpWzFdLCJiYXNlNjQiKSk7Y2FzZSA1OnJldHVybiBzPSgwLG4uZGVmYXVsdCkoYSxbInJlZmVyZXIiXSksdC5uZXh0PTgsZmV0Y2gobyxqKGooe30scikse30se2hlYWRlcnM6aihqKHt9LHIuaGVhZGVycykscyl9KSk7Y2FzZSA4OmlmKCh1PXQuc2VudCkub2spe3QubmV4dD0xMTticmVha310aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBmZXRjaCAiLmNvbmNhdCh1LnN0YXR1c1RleHQpKTtjYXNlIDExOnJldHVybiB0LnQwPUJ1ZmZlcix0Lm5leHQ9MTQsdS5hcnJheUJ1ZmZlcigpO2Nhc2UgMTQ6cmV0dXJuIHQudDE9dC5zZW50LHQuYWJydXB0KCJyZXR1cm4iLHQudDAuZnJvbS5jYWxsKHQudDAsdC50MSkpO2Nhc2UgMTY6Y2FzZSJlbmQiOnJldHVybiB0LnN0b3AoKX19KSx0KX0pKSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkpKTtjYXNlIDI6cmV0dXJuIHM9dC5zZW50LHQudDA9KDAsYi5kZWZhdWx0KShCdWZmZXIpLHQudDE9QnVmZmVyLHQubmV4dD03LGEuZGVmYXVsdC5hbGwoKDAsby5kZWZhdWx0KShzKS5jYWxsKHMsKGZ1bmN0aW9uKHQpe3JldHVybigwLFIudW56aXApKHQpfSkpKTtjYXNlIDc6cmV0dXJuIHQudDI9dC5zZW50LHQuYWJydXB0KCJyZXR1cm4iLHQudDAuY2FsbC5jYWxsKHQudDAsdC50MSx0LnQyKSk7Y2FzZSA5OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIFU9ZnVuY3Rpb24odCl7KDAseC5kZWZhdWx0KShpLHQpO3ZhciBlLHIsbj16KGkpO2Z1bmN0aW9uIGkodCl7dmFyIGU7cmV0dXJuKDAsbS5kZWZhdWx0KSh0aGlzLGkpLGU9bi5jYWxsKHRoaXMse2JhbUZpbGVoYW5kbGU6Ij8iLGJhaUZpbGVoYW5kbGU6Ij8ifSksKDAsQS5kZWZhdWx0KSgoMCxfLmRlZmF1bHQpKGUpLCJiYXNlVXJsIix2b2lkIDApLCgwLEEuZGVmYXVsdCkoKDAsXy5kZWZhdWx0KShlKSwidHJhY2tJZCIsdm9pZCAwKSxlLmJhc2VVcmw9dC5iYXNlVXJsLGUudHJhY2tJZD10LnRyYWNrSWQsZX1yZXR1cm4oMCx3LmRlZmF1bHQpKGksW3trZXk6InN0cmVhbVJlY29yZHNGb3JSYW5nZSIsdmFsdWU6ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106e3ZpZXdBc1BhaXJzOiExLHBhaXJBY3Jvc3NDaHI6ITEsbWF4SW5zZXJ0U2l6ZToyZTV9O3JldHVybigwLE8uZGVmYXVsdCkoZy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIG8oKXt2YXIgYSxzLHUsZixsLGMsaCxkLHAsdixtLHc7cmV0dXJuIGcuZGVmYXVsdC53cmFwKChmdW5jdGlvbihvKXtmb3IoOzspc3dpdGNoKG8ucHJldj1vLm5leHQpe2Nhc2UgMDpyZXR1cm4gYz0oMCxiLmRlZmF1bHQpKGE9IiIuY29uY2F0KG4uYmFzZVVybCwiLyIpKS5jYWxsKGEsbi50cmFja0lkKSxoPSgwLGIuZGVmYXVsdCkocz0oMCxiLmRlZmF1bHQpKHU9KDAsYi5kZWZhdWx0KShmPSIiLmNvbmNhdChjLCI/cmVmZXJlbmNlTmFtZT0iKSkuY2FsbChmLHQsIiZzdGFydD0iKSkuY2FsbCh1LGUsIiZlbmQ9IikpLmNhbGwocyxyLCImZm9ybWF0PUJBTSIpLGQ9bi5jaHJUb0luZGV4JiZuLmNoclRvSW5kZXhbdF0sby5uZXh0PTUsKDAsVC5kZWZhdWx0KShmZXRjaChoLGooe30saSkpKTtjYXNlIDU6aWYoKHA9by5zZW50KS5vayl7by5uZXh0PTg7YnJlYWt9dGhyb3cgbmV3IEVycm9yKHAuc3RhdHVzVGV4dCk7Y2FzZSA4OnJldHVybiBvLm5leHQ9MTAsKDAsVC5kZWZhdWx0KShwLmpzb24oKSk7Y2FzZSAxMDpyZXR1cm4gdj1vLnNlbnQsby5uZXh0PTEzLCgwLFQuZGVmYXVsdCkoQygoMCx5LmRlZmF1bHQpKGw9di5odHNnZXQudXJscykuY2FsbChsLDEpLGkpKTtjYXNlIDEzOnJldHVybiBtPW8uc2VudCx3PXtidWZmZXI6bSxjaHVuazp7bWludjp7ZGF0YVBvc2l0aW9uOjB9fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBuLGk7cmV0dXJuKDAsYi5kZWZhdWx0KShuPSgwLGIuZGVmYXVsdCkoaT0iIi5jb25jYXQodCwiXyIpKS5jYWxsKGksZSwiXyIpKS5jYWxsKG4scil9fSxvLmRlbGVnYXRlWWllbGQoKDAsSS5kZWZhdWx0KSgoMCxCLmRlZmF1bHQpKG4uX2ZldGNoQ2h1bmtGZWF0dXJlcyhbd10sZCxlLHIsaSkpLFQuZGVmYXVsdCksInQwIiwxNik7Y2FzZSAxNjpjYXNlImVuZCI6cmV0dXJuIG8uc3RvcCgpfX0pLG8pfSkpKSgpfX0se2tleToiX3JlYWRDaHVuayIsdmFsdWU6KHI9KDAsUy5kZWZhdWx0KShnLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuLGk7cmV0dXJuIGcuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj1lLmNodW5rLG49ci5idWZmZXIsaT1yLmNodW5rLHQuYWJydXB0KCJyZXR1cm4iLHtkYXRhOm4sY3Bvc2l0aW9uczpudWxsLGRwb3NpdGlvbnM6bnVsbCxjaHVuazppfSk7Y2FzZSAzOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpLGZ1bmN0aW9uKHQpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJnZXRIZWFkZXIiLHZhbHVlOihlPSgwLFMuZGVmYXVsdCkoZy5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIHQoKXt2YXIgZSxyLG4saSxvLGEscyx1LGYsbCxjLGgsZD1hcmd1bWVudHM7cmV0dXJuIGcuZGVmYXVsdC53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gcj1kLmxlbmd0aD4wJiZ2b2lkIDAhPT1kWzBdP2RbMF06e30sbj0oMCxiLmRlZmF1bHQpKGU9IiIuY29uY2F0KHRoaXMuYmFzZVVybCwiLyIpKS5jYWxsKGUsdGhpcy50cmFja0lkLCI/cmVmZXJlbmNlTmFtZT1uYSZjbGFzcz1oZWFkZXIiKSx0Lm5leHQ9NCxmZXRjaChuLHIpO2Nhc2UgNDppZigoaT10LnNlbnQpLm9rKXt0Lm5leHQ9NzticmVha310aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBmZXRjaCAiLmNvbmNhdChpLnN0YXR1c1RleHQpKTtjYXNlIDc6cmV0dXJuIHQubmV4dD05LGkuanNvbigpO2Nhc2UgOTpyZXR1cm4gbz10LnNlbnQsdC5uZXh0PTEyLEMoby5odHNnZXQudXJscyxyKTtjYXNlIDEyOmlmKChhPXQuc2VudCkucmVhZEludDMyTEUoMCk9PT1QLkJBTV9NQUdJQyl7dC5uZXh0PTE1O2JyZWFrfXRocm93IG5ldyBFcnJvcigiTm90IGEgQkFNIGZpbGUiKTtjYXNlIDE1OnJldHVybiBzPWEucmVhZEludDMyTEUoNCksdT1hLnRvU3RyaW5nKCJ1dGY4Iiw4LDgrcyksZj0oMCxNLnBhcnNlSGVhZGVyVGV4dCkodSksbD1bXSxjPXt9LGg9KDAsdi5kZWZhdWx0KShmKS5jYWxsKGYsKGZ1bmN0aW9uKHQpe3JldHVybiJTUSI9PT10LnRhZ30pKSwoMCxwLmRlZmF1bHQpKGgpLmNhbGwoaCwoZnVuY3Rpb24odCxlKXt2YXIgcjsoMCxwLmRlZmF1bHQpKHI9dC5kYXRhKS5jYWxsKHIsKGZ1bmN0aW9uKHQpe2lmKCJTTiI9PT10LnRhZyl7dmFyIHI9dC52YWx1ZTtjW3JdPWUsbFtlXT1yfX0pKX0pKSx0aGlzLmNoclRvSW5kZXg9Yyx0aGlzLmluZGV4VG9DaHI9bCx0LmFicnVwdCgicmV0dXJuIixmKTtjYXNlIDI1OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxpfShQLmRlZmF1bHQpO3QuZGVmYXVsdD1VfShyayksZnVuY3Rpb24odCl7dmFyIGU9SC5leHBvcnRzLHI9bXI7cih0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxyKHQsIkJBSSIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uZGVmYXVsdH19KSxyKHQsIkNTSSIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuZGVmYXVsdH19KSxyKHQsIkJhbUZpbGUiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBvLmRlZmF1bHR9fSkscih0LCJIdHNnZXRGaWxlIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5kZWZhdWx0fX0pLHIodCwiQmFtUmVjb3JkIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0fX0pO3ZhciBuPWUod3IpLGk9ZSh5Zyksbz1lKGNfKSxhPWUocmspLHM9ZShPeCl9KFopO3ZhciBNaz1MaztmdW5jdGlvbiBMayh0KXt2YXIgZT10aGlzO2lmKGUgaW5zdGFuY2VvZiBMa3x8KGU9bmV3IExrKSxlLnRhaWw9bnVsbCxlLmhlYWQ9bnVsbCxlLmxlbmd0aD0wLHQmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmZvckVhY2gpdC5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godCl9KSk7ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPjApZm9yKHZhciByPTAsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZS5wdXNoKGFyZ3VtZW50c1tyXSk7cmV0dXJuIGV9ZnVuY3Rpb24gamsodCxlLHIpe3ZhciBuPWU9PT10LmhlYWQ/bmV3IE5rKHIsbnVsbCxlLHQpOm5ldyBOayhyLGUsZS5uZXh0LHQpO3JldHVybiBudWxsPT09bi5uZXh0JiYodC50YWlsPW4pLG51bGw9PT1uLnByZXYmJih0LmhlYWQ9biksdC5sZW5ndGgrKyxufWZ1bmN0aW9uIHprKHQsZSl7dC50YWlsPW5ldyBOayhlLHQudGFpbCxudWxsLHQpLHQuaGVhZHx8KHQuaGVhZD10LnRhaWwpLHQubGVuZ3RoKyt9ZnVuY3Rpb24gQ2sodCxlKXt0LmhlYWQ9bmV3IE5rKGUsbnVsbCx0LmhlYWQsdCksdC50YWlsfHwodC50YWlsPXQuaGVhZCksdC5sZW5ndGgrK31mdW5jdGlvbiBOayh0LGUscixuKXtpZighKHRoaXMgaW5zdGFuY2VvZiBOaykpcmV0dXJuIG5ldyBOayh0LGUscixuKTt0aGlzLmxpc3Q9bix0aGlzLnZhbHVlPXQsZT8oZS5uZXh0PXRoaXMsdGhpcy5wcmV2PWUpOnRoaXMucHJldj1udWxsLHI/KHIucHJldj10aGlzLHRoaXMubmV4dD1yKTp0aGlzLm5leHQ9bnVsbH1May5Ob2RlPU5rLExrLmNyZWF0ZT1MayxMay5wcm90b3R5cGUucmVtb3ZlTm9kZT1mdW5jdGlvbih0KXtpZih0Lmxpc3QhPT10aGlzKXRocm93IG5ldyBFcnJvcigicmVtb3Zpbmcgbm9kZSB3aGljaCBkb2VzIG5vdCBiZWxvbmcgdG8gdGhpcyBsaXN0Iik7dmFyIGU9dC5uZXh0LHI9dC5wcmV2O3JldHVybiBlJiYoZS5wcmV2PXIpLHImJihyLm5leHQ9ZSksdD09PXRoaXMuaGVhZCYmKHRoaXMuaGVhZD1lKSx0PT09dGhpcy50YWlsJiYodGhpcy50YWlsPXIpLHQubGlzdC5sZW5ndGgtLSx0Lm5leHQ9bnVsbCx0LnByZXY9bnVsbCx0Lmxpc3Q9bnVsbCxlfSxMay5wcm90b3R5cGUudW5zaGlmdE5vZGU9ZnVuY3Rpb24odCl7aWYodCE9PXRoaXMuaGVhZCl7dC5saXN0JiZ0Lmxpc3QucmVtb3ZlTm9kZSh0KTt2YXIgZT10aGlzLmhlYWQ7dC5saXN0PXRoaXMsdC5uZXh0PWUsZSYmKGUucHJldj10KSx0aGlzLmhlYWQ9dCx0aGlzLnRhaWx8fCh0aGlzLnRhaWw9dCksdGhpcy5sZW5ndGgrK319LExrLnByb3RvdHlwZS5wdXNoTm9kZT1mdW5jdGlvbih0KXtpZih0IT09dGhpcy50YWlsKXt0Lmxpc3QmJnQubGlzdC5yZW1vdmVOb2RlKHQpO3ZhciBlPXRoaXMudGFpbDt0Lmxpc3Q9dGhpcyx0LnByZXY9ZSxlJiYoZS5uZXh0PXQpLHRoaXMudGFpbD10LHRoaXMuaGVhZHx8KHRoaXMuaGVhZD10KSx0aGlzLmxlbmd0aCsrfX0sTGsucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPWFyZ3VtZW50cy5sZW5ndGg7dDxlO3QrKyl6ayh0aGlzLGFyZ3VtZW50c1t0XSk7cmV0dXJuIHRoaXMubGVuZ3RofSxMay5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9YXJndW1lbnRzLmxlbmd0aDt0PGU7dCsrKUNrKHRoaXMsYXJndW1lbnRzW3RdKTtyZXR1cm4gdGhpcy5sZW5ndGh9LExrLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXtpZih0aGlzLnRhaWwpe3ZhciB0PXRoaXMudGFpbC52YWx1ZTtyZXR1cm4gdGhpcy50YWlsPXRoaXMudGFpbC5wcmV2LHRoaXMudGFpbD90aGlzLnRhaWwubmV4dD1udWxsOnRoaXMuaGVhZD1udWxsLHRoaXMubGVuZ3RoLS0sdH19LExrLnByb3RvdHlwZS5zaGlmdD1mdW5jdGlvbigpe2lmKHRoaXMuaGVhZCl7dmFyIHQ9dGhpcy5oZWFkLnZhbHVlO3JldHVybiB0aGlzLmhlYWQ9dGhpcy5oZWFkLm5leHQsdGhpcy5oZWFkP3RoaXMuaGVhZC5wcmV2PW51bGw6dGhpcy50YWlsPW51bGwsdGhpcy5sZW5ndGgtLSx0fX0sTGsucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCxlKXtlPWV8fHRoaXM7Zm9yKHZhciByPXRoaXMuaGVhZCxuPTA7bnVsbCE9PXI7bisrKXQuY2FsbChlLHIudmFsdWUsbix0aGlzKSxyPXIubmV4dH0sTGsucHJvdG90eXBlLmZvckVhY2hSZXZlcnNlPWZ1bmN0aW9uKHQsZSl7ZT1lfHx0aGlzO2Zvcih2YXIgcj10aGlzLnRhaWwsbj10aGlzLmxlbmd0aC0xO251bGwhPT1yO24tLSl0LmNhbGwoZSxyLnZhbHVlLG4sdGhpcykscj1yLnByZXZ9LExrLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmhlYWQ7bnVsbCE9PXImJmU8dDtlKyspcj1yLm5leHQ7aWYoZT09PXQmJm51bGwhPT1yKXJldHVybiByLnZhbHVlfSxMay5wcm90b3R5cGUuZ2V0UmV2ZXJzZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMudGFpbDtudWxsIT09ciYmZTx0O2UrKylyPXIucHJldjtpZihlPT09dCYmbnVsbCE9PXIpcmV0dXJuIHIudmFsdWV9LExrLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtlPWV8fHRoaXM7Zm9yKHZhciByPW5ldyBMayxuPXRoaXMuaGVhZDtudWxsIT09bjspci5wdXNoKHQuY2FsbChlLG4udmFsdWUsdGhpcykpLG49bi5uZXh0O3JldHVybiByfSxMay5wcm90b3R5cGUubWFwUmV2ZXJzZT1mdW5jdGlvbih0LGUpe2U9ZXx8dGhpcztmb3IodmFyIHI9bmV3IExrLG49dGhpcy50YWlsO251bGwhPT1uOylyLnB1c2godC5jYWxsKGUsbi52YWx1ZSx0aGlzKSksbj1uLnByZXY7cmV0dXJuIHJ9LExrLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCxlKXt2YXIgcixuPXRoaXMuaGVhZDtpZihhcmd1bWVudHMubGVuZ3RoPjEpcj1lO2Vsc2V7aWYoIXRoaXMuaGVhZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJSZWR1Y2Ugb2YgZW1wdHkgbGlzdCB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKTtuPXRoaXMuaGVhZC5uZXh0LHI9dGhpcy5oZWFkLnZhbHVlfWZvcih2YXIgaT0wO251bGwhPT1uO2krKylyPXQocixuLnZhbHVlLGkpLG49bi5uZXh0O3JldHVybiByfSxMay5wcm90b3R5cGUucmVkdWNlUmV2ZXJzZT1mdW5jdGlvbih0LGUpe3ZhciByLG49dGhpcy50YWlsO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlyPWU7ZWxzZXtpZighdGhpcy50YWlsKXRocm93IG5ldyBUeXBlRXJyb3IoIlJlZHVjZSBvZiBlbXB0eSBsaXN0IHdpdGggbm8gaW5pdGlhbCB2YWx1ZSIpO249dGhpcy50YWlsLnByZXYscj10aGlzLnRhaWwudmFsdWV9Zm9yKHZhciBpPXRoaXMubGVuZ3RoLTE7bnVsbCE9PW47aS0tKXI9dChyLG4udmFsdWUsaSksbj1uLnByZXY7cmV0dXJuIHJ9LExrLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSh0aGlzLmxlbmd0aCksZT0wLHI9dGhpcy5oZWFkO251bGwhPT1yO2UrKyl0W2VdPXIudmFsdWUscj1yLm5leHQ7cmV0dXJuIHR9LExrLnByb3RvdHlwZS50b0FycmF5UmV2ZXJzZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5sZW5ndGgpLGU9MCxyPXRoaXMudGFpbDtudWxsIT09cjtlKyspdFtlXT1yLnZhbHVlLHI9ci5wcmV2O3JldHVybiB0fSxMay5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlKXsoZT1lfHx0aGlzLmxlbmd0aCk8MCYmKGUrPXRoaXMubGVuZ3RoKSwodD10fHwwKTwwJiYodCs9dGhpcy5sZW5ndGgpO3ZhciByPW5ldyBMaztpZihlPHR8fGU8MClyZXR1cm4gcjt0PDAmJih0PTApLGU+dGhpcy5sZW5ndGgmJihlPXRoaXMubGVuZ3RoKTtmb3IodmFyIG49MCxpPXRoaXMuaGVhZDtudWxsIT09aSYmbjx0O24rKylpPWkubmV4dDtmb3IoO251bGwhPT1pJiZuPGU7bisrLGk9aS5uZXh0KXIucHVzaChpLnZhbHVlKTtyZXR1cm4gcn0sTGsucHJvdG90eXBlLnNsaWNlUmV2ZXJzZT1mdW5jdGlvbih0LGUpeyhlPWV8fHRoaXMubGVuZ3RoKTwwJiYoZSs9dGhpcy5sZW5ndGgpLCh0PXR8fDApPDAmJih0Kz10aGlzLmxlbmd0aCk7dmFyIHI9bmV3IExrO2lmKGU8dHx8ZTwwKXJldHVybiByO3Q8MCYmKHQ9MCksZT50aGlzLmxlbmd0aCYmKGU9dGhpcy5sZW5ndGgpO2Zvcih2YXIgbj10aGlzLmxlbmd0aCxpPXRoaXMudGFpbDtudWxsIT09aSYmbj5lO24tLSlpPWkucHJldjtmb3IoO251bGwhPT1pJiZuPnQ7bi0tLGk9aS5wcmV2KXIucHVzaChpLnZhbHVlKTtyZXR1cm4gcn0sTGsucHJvdG90eXBlLnNwbGljZT1mdW5jdGlvbih0LGUsLi4ucil7dD50aGlzLmxlbmd0aCYmKHQ9dGhpcy5sZW5ndGgtMSksdDwwJiYodD10aGlzLmxlbmd0aCt0KTtmb3IodmFyIG49MCxpPXRoaXMuaGVhZDtudWxsIT09aSYmbjx0O24rKylpPWkubmV4dDt2YXIgbz1bXTtmb3Iobj0wO2kmJm48ZTtuKyspby5wdXNoKGkudmFsdWUpLGk9dGhpcy5yZW1vdmVOb2RlKGkpO251bGw9PT1pJiYoaT10aGlzLnRhaWwpLGkhPT10aGlzLmhlYWQmJmkhPT10aGlzLnRhaWwmJihpPWkucHJldik7Zm9yKG49MDtuPHIubGVuZ3RoO24rKylpPWprKHRoaXMsaSxyW25dKTtyZXR1cm4gb30sTGsucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5oZWFkLGU9dGhpcy50YWlsLHI9dDtudWxsIT09cjtyPXIucHJldil7dmFyIG49ci5wcmV2O3IucHJldj1yLm5leHQsci5uZXh0PW59cmV0dXJuIHRoaXMuaGVhZD1lLHRoaXMudGFpbD10LHRoaXN9O3RyeXtMay5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbiooKXtmb3IobGV0IHQ9dGhpcy5oZWFkO3Q7dD10Lm5leHQpeWllbGQgdC52YWx1ZX19Y2F0Y2goa0Upe31jb25zdCBVaz1NayxGaz1TeW1ib2woIm1heCIpLERrPVN5bWJvbCgibGVuZ3RoIikscWs9U3ltYm9sKCJsZW5ndGhDYWxjdWxhdG9yIiksJGs9U3ltYm9sKCJhbGxvd1N0YWxlIiksWms9U3ltYm9sKCJtYXhBZ2UiKSxIaz1TeW1ib2woImRpc3Bvc2UiKSxHaz1TeW1ib2woIm5vRGlzcG9zZU9uU2V0IiksV2s9U3ltYm9sKCJscnVMaXN0IiksVms9U3ltYm9sKCJjYWNoZSIpLFlrPVN5bWJvbCgidXBkYXRlQWdlT25HZXQiKSxYaz0oKT0+MTtjb25zdCBLaz0odCxlLHIpPT57Y29uc3Qgbj10W1ZrXS5nZXQoZSk7aWYobil7Y29uc3QgZT1uLnZhbHVlO2lmKEprKHQsZSkpe2lmKHRFKHQsbiksIXRbJGtdKXJldHVybn1lbHNlIHImJih0W1lrXSYmKG4udmFsdWUubm93PURhdGUubm93KCkpLHRbV2tdLnVuc2hpZnROb2RlKG4pKTtyZXR1cm4gZS52YWx1ZX19LEprPSh0LGUpPT57aWYoIWV8fCFlLm1heEFnZSYmIXRbWmtdKXJldHVybiExO2NvbnN0IHI9RGF0ZS5ub3coKS1lLm5vdztyZXR1cm4gZS5tYXhBZ2U/cj5lLm1heEFnZTp0W1prXSYmcj50W1prXX0sUWs9dD0+e2lmKHRbRGtdPnRbRmtdKWZvcihsZXQgZT10W1drXS50YWlsO3RbRGtdPnRbRmtdJiZudWxsIT09ZTspe2NvbnN0IHI9ZS5wcmV2O3RFKHQsZSksZT1yfX0sdEU9KHQsZSk9PntpZihlKXtjb25zdCByPWUudmFsdWU7dFtIa10mJnRbSGtdKHIua2V5LHIudmFsdWUpLHRbRGtdLT1yLmxlbmd0aCx0W1ZrXS5kZWxldGUoci5rZXkpLHRbV2tdLnJlbW92ZU5vZGUoZSl9fTtjbGFzcyBlRXtjb25zdHJ1Y3Rvcih0LGUscixuLGkpe3RoaXMua2V5PXQsdGhpcy52YWx1ZT1lLHRoaXMubGVuZ3RoPXIsdGhpcy5ub3c9bix0aGlzLm1heEFnZT1pfHwwfX1jb25zdCByRT0odCxlLHIsbik9PntsZXQgaT1yLnZhbHVlO0prKHQsaSkmJih0RSh0LHIpLHRbJGtdfHwoaT12b2lkIDApKSxpJiZlLmNhbGwobixpLnZhbHVlLGkua2V5LHQpfTt2YXIgbkU9Y2xhc3N7Y29uc3RydWN0b3IodCl7aWYoIm51bWJlciI9PXR5cGVvZiB0JiYodD17bWF4OnR9KSx0fHwodD17fSksdC5tYXgmJigibnVtYmVyIiE9dHlwZW9mIHQubWF4fHx0Lm1heDwwKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJtYXggbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIiKTt0aGlzW0ZrXT10Lm1heHx8MS8wO2NvbnN0IGU9dC5sZW5ndGh8fFhrO2lmKHRoaXNbcWtdPSJmdW5jdGlvbiIhPXR5cGVvZiBlP1hrOmUsdGhpc1ska109dC5zdGFsZXx8ITEsdC5tYXhBZ2UmJiJudW1iZXIiIT10eXBlb2YgdC5tYXhBZ2UpdGhyb3cgbmV3IFR5cGVFcnJvcigibWF4QWdlIG11c3QgYmUgYSBudW1iZXIiKTt0aGlzW1prXT10Lm1heEFnZXx8MCx0aGlzW0hrXT10LmRpc3Bvc2UsdGhpc1tHa109dC5ub0Rpc3Bvc2VPblNldHx8ITEsdGhpc1tZa109dC51cGRhdGVBZ2VPbkdldHx8ITEsdGhpcy5yZXNldCgpfXNldCBtYXgodCl7aWYoIm51bWJlciIhPXR5cGVvZiB0fHx0PDApdGhyb3cgbmV3IFR5cGVFcnJvcigibWF4IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyIik7dGhpc1tGa109dHx8MS8wLFFrKHRoaXMpfWdldCBtYXgoKXtyZXR1cm4gdGhpc1tGa119c2V0IGFsbG93U3RhbGUodCl7dGhpc1ska109ISF0fWdldCBhbGxvd1N0YWxlKCl7cmV0dXJuIHRoaXNbJGtdfXNldCBtYXhBZ2UodCl7aWYoIm51bWJlciIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIm1heEFnZSBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlciIpO3RoaXNbWmtdPXQsUWsodGhpcyl9Z2V0IG1heEFnZSgpe3JldHVybiB0aGlzW1prXX1zZXQgbGVuZ3RoQ2FsY3VsYXRvcih0KXsiZnVuY3Rpb24iIT10eXBlb2YgdCYmKHQ9WGspLHQhPT10aGlzW3FrXSYmKHRoaXNbcWtdPXQsdGhpc1tEa109MCx0aGlzW1drXS5mb3JFYWNoKCh0PT57dC5sZW5ndGg9dGhpc1txa10odC52YWx1ZSx0LmtleSksdGhpc1tEa10rPXQubGVuZ3RofSkpKSxRayh0aGlzKX1nZXQgbGVuZ3RoQ2FsY3VsYXRvcigpe3JldHVybiB0aGlzW3FrXX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXNbRGtdfWdldCBpdGVtQ291bnQoKXtyZXR1cm4gdGhpc1tXa10ubGVuZ3RofXJmb3JFYWNoKHQsZSl7ZT1lfHx0aGlzO2ZvcihsZXQgcj10aGlzW1drXS50YWlsO251bGwhPT1yOyl7Y29uc3Qgbj1yLnByZXY7ckUodGhpcyx0LHIsZSkscj1ufX1mb3JFYWNoKHQsZSl7ZT1lfHx0aGlzO2ZvcihsZXQgcj10aGlzW1drXS5oZWFkO251bGwhPT1yOyl7Y29uc3Qgbj1yLm5leHQ7ckUodGhpcyx0LHIsZSkscj1ufX1rZXlzKCl7cmV0dXJuIHRoaXNbV2tdLnRvQXJyYXkoKS5tYXAoKHQ9PnQua2V5KSl9dmFsdWVzKCl7cmV0dXJuIHRoaXNbV2tdLnRvQXJyYXkoKS5tYXAoKHQ9PnQudmFsdWUpKX1yZXNldCgpe3RoaXNbSGtdJiZ0aGlzW1drXSYmdGhpc1tXa10ubGVuZ3RoJiZ0aGlzW1drXS5mb3JFYWNoKCh0PT50aGlzW0hrXSh0LmtleSx0LnZhbHVlKSkpLHRoaXNbVmtdPW5ldyBNYXAsdGhpc1tXa109bmV3IFVrLHRoaXNbRGtdPTB9ZHVtcCgpe3JldHVybiB0aGlzW1drXS5tYXAoKHQ9PiFKayh0aGlzLHQpJiZ7azp0LmtleSx2OnQudmFsdWUsZTp0Lm5vdysodC5tYXhBZ2V8fDApfSkpLnRvQXJyYXkoKS5maWx0ZXIoKHQ9PnQpKX1kdW1wTHJ1KCl7cmV0dXJuIHRoaXNbV2tdfXNldCh0LGUscil7aWYoKHI9cnx8dGhpc1taa10pJiYibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigibWF4QWdlIG11c3QgYmUgYSBudW1iZXIiKTtjb25zdCBuPXI/RGF0ZS5ub3coKTowLGk9dGhpc1txa10oZSx0KTtpZih0aGlzW1ZrXS5oYXModCkpe2lmKGk+dGhpc1tGa10pcmV0dXJuIHRFKHRoaXMsdGhpc1tWa10uZ2V0KHQpKSwhMTtjb25zdCBvPXRoaXNbVmtdLmdldCh0KS52YWx1ZTtyZXR1cm4gdGhpc1tIa10mJih0aGlzW0drXXx8dGhpc1tIa10odCxvLnZhbHVlKSksby5ub3c9bixvLm1heEFnZT1yLG8udmFsdWU9ZSx0aGlzW0RrXSs9aS1vLmxlbmd0aCxvLmxlbmd0aD1pLHRoaXMuZ2V0KHQpLFFrKHRoaXMpLCEwfWNvbnN0IG89bmV3IGVFKHQsZSxpLG4scik7cmV0dXJuIG8ubGVuZ3RoPnRoaXNbRmtdPyh0aGlzW0hrXSYmdGhpc1tIa10odCxlKSwhMSk6KHRoaXNbRGtdKz1vLmxlbmd0aCx0aGlzW1drXS51bnNoaWZ0KG8pLHRoaXNbVmtdLnNldCh0LHRoaXNbV2tdLmhlYWQpLFFrKHRoaXMpLCEwKX1oYXModCl7aWYoIXRoaXNbVmtdLmhhcyh0KSlyZXR1cm4hMTtjb25zdCBlPXRoaXNbVmtdLmdldCh0KS52YWx1ZTtyZXR1cm4hSmsodGhpcyxlKX1nZXQodCl7cmV0dXJuIEtrKHRoaXMsdCwhMCl9cGVlayh0KXtyZXR1cm4gS2sodGhpcyx0LCExKX1wb3AoKXtjb25zdCB0PXRoaXNbV2tdLnRhaWw7cmV0dXJuIHQ/KHRFKHRoaXMsdCksdC52YWx1ZSk6bnVsbH1kZWwodCl7dEUodGhpcyx0aGlzW1ZrXS5nZXQodCkpfWxvYWQodCl7dGhpcy5yZXNldCgpO2NvbnN0IGU9RGF0ZS5ub3coKTtmb3IobGV0IHI9dC5sZW5ndGgtMTtyPj0wO3ItLSl7Y29uc3Qgbj10W3JdLGk9bi5lfHwwO2lmKDA9PT1pKXRoaXMuc2V0KG4uayxuLnYpO2Vsc2V7Y29uc3QgdD1pLWU7dD4wJiZ0aGlzLnNldChuLmssbi52LHQpfX19cHJ1bmUoKXt0aGlzW1ZrXS5mb3JFYWNoKCgodCxlKT0+S2sodGhpcyxlLCExKSkpfX07Y29uc3QgaUU9KHQsZSk9PntsZXQgcj0wLG49MCxpPSExLG89MDtjb25zdCBhPVtdO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cysrKXRbc10ubWF0Y2goL1swLTldL2cpPyhuPTEwKm4rICt0W3NdLGk9ITEpOiJeIj09PXRbc10/aT0hMDoocis9bixlP2EucHVzaCh7bGVuZ3RoOm4sdHlwZTp0W3NdfSk6aT9vLT0xOmEucHVzaCh7cG9zOnIsYmFzZTp0W3NdLGxlbmd0aDoxLGJhbVNlcVNoaWZ0Om99KSxuPTAscis9MSk7cmV0dXJuIGF9LG9FPSh0LGUpPT57bGV0IHI9W10sbj1udWxsO2lmKHQuY2lnYXIpe2NvbnN0IGU9aUUodC5jaWdhciwhMCk7bGV0IGk9MDtmb3IoY29uc3QgdCBvZiBlKSJYIj09PXQudHlwZT8oci5wdXNoKHtwb3M6aSxsZW5ndGg6dC5sZW5ndGgsdHlwZToiWCJ9KSxpKz10Lmxlbmd0aCk6IkkiPT09dC50eXBlP3IucHVzaCh7cG9zOmksbGVuZ3RoOnQubGVuZ3RoLHR5cGU6IkkifSk6IkQiPT09dC50eXBlPyhyLnB1c2goe3BvczppLGxlbmd0aDp0Lmxlbmd0aCx0eXBlOiJEIn0pLGkrPXQubGVuZ3RoKToiTiI9PT10LnR5cGU/KHIucHVzaCh7cG9zOmksbGVuZ3RoOnQubGVuZ3RoLHR5cGU6Ik4ifSksaSs9dC5sZW5ndGgpOiI9IiE9PXQudHlwZSYmIk0iIT09dC50eXBlfHwoaSs9dC5sZW5ndGgpO2NvbnN0IG89ZVswXSxhPWVbZS5sZW5ndGgtMV07IlMiPT09by50eXBlJiYobj1vLHIucHVzaCh7cG9zOi1vLmxlbmd0aCx0eXBlOiJTIixsZW5ndGg6by5sZW5ndGh9KSksIlMiPT09YS50eXBlJiZyLnB1c2goe3Bvczp0LnRvLXQuZnJvbSxsZW5ndGg6YS5sZW5ndGgsdHlwZToiUyJ9KSwiSCI9PT1vLnR5cGUmJnIucHVzaCh7cG9zOi1vLmxlbmd0aCx0eXBlOiJIIixsZW5ndGg6by5sZW5ndGh9KSwiSCI9PT1hLnR5cGUmJnIucHVzaCh7cG9zOnQudG8tdC5mcm9tLGxlbmd0aDphLmxlbmd0aCx0eXBlOiJIIn0pfWlmKHQubWQpe2NvbnN0IGk9aUUodC5tZCwhMSk7aS5mb3JFYWNoKChmdW5jdGlvbih0KXtsZXQgcj10LnBvcyt0LmJhbVNlcVNoaWZ0LGk9cit0Lmxlbmd0aDtudWxsIT09biYmKHIrPW4ubGVuZ3RoLGkrPW4ubGVuZ3RoKSx0LnZhcmlhbnQ9ZS5zdWJzdHJpbmcocixpKSxkZWxldGUgdC5iYW1TZXFTaGlmdH0pKSxyPWkuY29uY2F0KHIpfXJldHVybiByfSxhRT1mdW5jdGlvbih0KXtsZXQgZT10LHI9dDtmdW5jdGlvbiBuKHQsZSxuLGkpe2ZvcihudWxsPT1uJiYobj0wKSxudWxsPT1pJiYoaT10Lmxlbmd0aCk7bjxpOyl7Y29uc3Qgbz1uK2k+Pj4xO3IodFtvXSxlKTwwP249bysxOmk9b31yZXR1cm4gbn1yZXR1cm4gMT09PXQubGVuZ3RoJiYoZT0oZSxyKT0+dChlKS1yLHI9ZnVuY3Rpb24odCl7cmV0dXJuKGUscik9PntyZXR1cm4obj10KGUpKTwoaT1yKT8tMTpuPmk/MTpuPj1pPzA6TmFOO3ZhciBuLGl9fSh0KSkse2xlZnQ6bixjZW50ZXI6ZnVuY3Rpb24odCxyLGksbyl7bnVsbD09aSYmKGk9MCksbnVsbD09byYmKG89dC5sZW5ndGgpO2NvbnN0IGE9bih0LHIsaSxvLTEpO3JldHVybiBhPmkmJmUodFthLTFdLHIpPi1lKHRbYV0scik/YS0xOmF9LHJpZ2h0OmZ1bmN0aW9uKHQsZSxuLGkpe2ZvcihudWxsPT1uJiYobj0wKSxudWxsPT1pJiYoaT10Lmxlbmd0aCk7bjxpOyl7Y29uc3Qgbz1uK2k+Pj4xO3IodFtvXSxlKT4wP2k9bzpuPW8rMX1yZXR1cm4gbn19fSgodD0+dC5wb3MpKS5sZWZ0O2Z1bmN0aW9uIHNFKHQsZSl7Y29uc3Qgcj10WzBdLG49ZVswXTtpZihyLmluZGV4T2YoIl8iKT49MCl7Y29uc3QgdD1yLnNwbGl0KCJfIik7aWYobi5pbmRleE9mKCJfIik+PTApe2NvbnN0IGU9bi5zcGxpdCgiXyIpO3JldHVybiBzRSh0WzFdLGVbMV0pfXJldHVybiAxfWlmKG4uaW5kZXhPZigiXyIpPj0wKXJldHVybi0xO2NvbnN0IGk9W10sbz1bXTtmb3IoY29uc3QgYSBvZiByLm1hdGNoKC8oXGQrfFteXGRdKykvZykpaS5wdXNoKE51bWJlci5pc05hTihhKT9hLnRvTG93ZXJDYXNlKCk6K2EpO2Zvcihjb25zdCBhIG9mIG4ubWF0Y2goLyhcZCt8W15cZF0rKS9nKSlpLnB1c2goTnVtYmVyLmlzTmFOKGEpP2EudG9Mb3dlckNhc2UoKTorYSk7Zm9yKGNvbnN0IGEgb2ZbIm0iLCJ5IiwieCJdKXtpZihuLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYSkpcmV0dXJuLTE7aWYoci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGEpKXJldHVybiAxfXJldHVybiBpPG8/LTE6bz5pPzE6MH1mdW5jdGlvbiB1RSh0KXtjb25zdCBlPVtdLHI9e30sbj17fTtsZXQgaT0wO2ZvcihsZXQgbz0wO288dC5sZW5ndGg7bysrKXtjb25zdCBhPU51bWJlcih0W29dWzFdKTtpKz1hO2NvbnN0IHM9e2lkOm8sY2hyOnRbb11bMF0scG9zOmktYX07ZS5wdXNoKHMpLG5bcy5jaHJdPXMsclt0W29dWzBdXT1hfXJldHVybntjdW1Qb3NpdGlvbnM6ZSxjaHJQb3NpdGlvbnM6bix0b3RhbExlbmd0aDppLGNocm9tTGVuZ3RoczpyfX1mdW5jdGlvbiBmRSh0LGUpe2NvbnN0IHI9e307cmV0dXJuIHIuYWJzVG9DaHI9dD0+ci5jaHJQb3NpdGlvbnM/KCh0LGUpPT57aWYoIWV8fCFlLmN1bVBvc2l0aW9uc3x8IWUuY3VtUG9zaXRpb25zLmxlbmd0aClyZXR1cm4gbnVsbDtsZXQgcj1hRShlLmN1bVBvc2l0aW9ucyx0KTtjb25zdCBuPWUuY3VtUG9zaXRpb25zW2UuY3VtUG9zaXRpb25zLmxlbmd0aC0xXS5jaHIsaT1lLmNocm9tTGVuZ3Roc1tuXTtyLT1yPjAmJjE7bGV0IG89TWF0aC5mbG9vcih0LWUuY3VtUG9zaXRpb25zW3JdLnBvcyksYT0wO3JldHVybiBvPDAmJihhPW8tMSxvPTEpLHI9PT1lLmN1bVBvc2l0aW9ucy5sZW5ndGgtMSYmbz5pJiYoYT1vLWksbz1pKSxbZS5jdW1Qb3NpdGlvbnNbcl0uY2hyLG8sYSxyXX0pKHQscik6bnVsbCxyLmNoclRvQWJzPShbdCxlXT1bXSk9PntyZXR1cm4gci5jaHJQb3NpdGlvbnM/KG49dCxpPWUsci5jaHJQb3NpdGlvbnNbbl0ucG9zK2kpOm51bGw7dmFyIG4saX0scCh0LCgodCxuKT0+e2lmKHQpZSYmZShudWxsKTtlbHNle2NvbnN0IHQ9dUUoXyhuKSk7T2JqZWN0LmtleXModCkuZm9yRWFjaCgoZT0+e3JbZV09dFtlXX0pKSxlJiZlKHIpfX0pKX1jb25zdCBsRT0odCxlLHIpPT57Y29uc3Qgbj10LmdldCgic2VxIiksaT17aWQ6dC5faWQsZnJvbTordC5kYXRhLnN0YXJ0KzErcix0bzordC5kYXRhLmVuZCsxK3IsbWQ6dC5nZXQoIk1EIiksY2hyTmFtZTplLGNock9mZnNldDpyLGNpZ2FyOnQuZ2V0KCJjaWdhciIpLG1hcHE6dC5nZXQoIm1xIiksc3RyYW5kOjE9PT10LmdldCgic3RyYW5kIik/IisiOiItIixyb3c6bnVsbCxzdWJzdGl0dXRpb25zOltdfTtyZXR1cm4gaS5zdWJzdGl0dXRpb25zPW9FKGksbiksaX0sY0U9e30saEU9e30sZEU9e30scEU9e30sdkU9bmV3IG5FKHttYXg6MjB9KSxnRT17fSx5RT17fSxiRT10PT57Y29uc3R7Y2hyb21TaXplc1VybDplLGJhbVVybDpyfT15RVt0XSxuPWU/W2hFW3JdLGRFW2VdXTpbaEVbcl1dO3JldHVybiBQcm9taXNlLmFsbChuKS50aGVuKChuPT57Y29uc3QgaT0xMDI0O2xldCBvPW51bGw7aWYobi5sZW5ndGg+MSlvPW5bMV07ZWxzZXtjb25zdCB0PVtdO2Zvcihjb25zdHtyZWZOYW1lOmUsbGVuZ3RoOm59b2YgY0Vbcl0uaW5kZXhUb0Nocil0LnB1c2goW2Usbl0pO3Quc29ydChzRSksbz11RSh0KX1yZXR1cm4gcEVbZV09byxnRVt0XT17dGlsZV9zaXplOmksYmluc19wZXJfZGltZW5zaW9uOmksbWF4X3pvb206TWF0aC5jZWlsKE1hdGgubG9nKG8udG90YWxMZW5ndGgvaSkvTWF0aC5sb2coMikpLG1heF93aWR0aDpvLnRvdGFsTGVuZ3RoLG1pbl9wb3M6WzBdLG1heF9wb3M6W28udG90YWxMZW5ndGhdfSxnRVt0XX0pKX0sbUU9YXN5bmModCxlLHIpPT57Y29uc3R7YmFtVXJsOm4sY2hyb21TaXplc1VybDppfT15RVt0XSxvPWNFW25dO3JldHVybiBiRSh0KS50aGVuKChuPT57Y29uc3QgYT0rbi5tYXhfd2lkdGgvMioqK2Uscz1bXTtpZihhPjJlNSlyZXR1cm4gbmV3IFByb21pc2UoKHQ9PnQoW10pKSk7bGV0IHU9bi5taW5fcG9zWzBdK3IqYTtjb25zdCBmPW4ubWluX3Bvc1swXSsocisxKSphLGw9cEVbaV0se2Nocm9tTGVuZ3RoczpjLGN1bVBvc2l0aW9uczpofT1sO2ZvcihsZXQgaT0wO2k8aC5sZW5ndGg7aSsrKXtjb25zdCBuPWhbaV0uY2hyLGE9aFtpXS5wb3MsbD1oW2ldLnBvcytjW25dO2lmKHZFLnNldChgJHt0fS4ke2V9LiR7cn1gLFtdKSxhPD11JiZ1PGwpe2lmKCEoZj5sKSl7Y29uc3QgbD1NYXRoLmNlaWwoZi1hKSxjPU1hdGguZmxvb3IodS1hKTtzLnB1c2goby5nZXRSZWNvcmRzRm9yUmFuZ2UobixjLGwse30pLnRoZW4oKG89Pntjb25zdCBhPW8ubWFwKCh0PT5sRSh0LG4saFtpXS5wb3MpKSk7cmV0dXJuIHZFLnNldChgJHt0fS4ke2V9LiR7cn1gLHZFLmdldChgJHt0fS4ke2V9LiR7cn1gKS5jb25jYXQoYSkpLFtdfSkpKTticmVha31zLnB1c2goby5nZXRSZWNvcmRzRm9yUmFuZ2Uobix1LWEsbC1hKS50aGVuKChvPT57Y29uc3QgYT1vLm1hcCgodD0+bEUodCxuLGhbaV0ucG9zKSkpO3ZFLnNldChgJHt0fS4ke2V9LiR7cn1gLHZFLmdldChgJHt0fS4ke2V9LiR7cn1gKS5jb25jYXQoYSkpfSkpKSx1PWx9fXJldHVybiBQcm9taXNlLmFsbChzKS50aGVuKCh0PT50LmZsYXQoKSkpfSkpfTtEKHtpbml0Oih0LGUscixuKT0+e249bnx8Imh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9nb3NsaW5nLWxhbmcub3JnL2RhdGEvaGcxOS5jaHJvbS5zaXplcyIsY0VbZV18fChjRVtlXT1uZXcgWi5CYW1GaWxlKHtiYW1Vcmw6ZSxiYWlVcmw6cn0pLGhFW2VdPWNFW2VdLmdldEhlYWRlcigpKSxkRVtuXT1kRVtuXXx8bmV3IFByb21pc2UoKHQ9PntmRShuLHQpfSkpLHlFW3RdPXtiYW1Vcmw6ZSxjaHJvbVNpemVzVXJsOm59fSx0aWxlc2V0SW5mbzpiRSxmZXRjaFRpbGVzRGVib3VuY2VkOmFzeW5jKHQsZSk9Pntjb25zdCByPXt9LG49W10saT1bXTtmb3IoY29uc3QgbyBvZiBlKXtjb25zdCBlPW8uc3BsaXQoIi4iKSxyPXBhcnNlSW50KGVbMF0sMTApLGE9cGFyc2VJbnQoZVsxXSwxMCk7TnVtYmVyLmlzTmFOKGEpfHxOdW1iZXIuaXNOYU4ocik/Y29uc29sZS53YXJuKCJJbnZhbGlkIHRpbGUgem9vbSBvciBwb3NpdGlvbjoiLHIsYSk6KG4ucHVzaChvKSxpLnB1c2gobUUodCxyLGEpKSl9cmV0dXJuIFByb21pc2UuYWxsKGkpLnRoZW4oKHQ9Pih0LmZvckVhY2goKCh0LGUpPT57Y29uc3QgaT1uW2VdO3JbaV09dCxyW2ldLnRpbGVQb3NpdGlvbklkPWl9KSkscikpKX0sdGlsZTptRSxnZXRUYWJ1bGFyRGF0YToodCxlKT0+e2NvbnN0IHI9e307Zm9yKGNvbnN0IG8gb2YgZSl7Y29uc3QgZT12RS5nZXQoYCR7dH0uJHtvfWApO2lmKGUuZXJyb3IpdGhyb3cgbmV3IEVycm9yKGUuZXJyb3IpO2Zvcihjb25zdCB0IG9mIGUpclt0LmlkXT1fX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LHQpLHtzdWJzdGl0dXRpb25zOkpTT04uc3RyaW5naWZ5KHQuc3Vic3RpdHV0aW9ucyl9KX1jb25zdCBuPU9iamVjdC52YWx1ZXMociksaT1CdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShuKSkuYnVmZmVyO3JldHVybiBxKGksW2ldKX19KSx0LmNpZ2FyVHlwZVRvVGV4dD10PT4iRCI9PT10PyJEZWxldGlvbiI6IlMiPT09dD8iU29mdCBjbGlwcGluZyI6IkgiPT09dD8iSGFyZCBjbGlwcGluZyI6IkkiPT09dD8iSW5zZXJ0aW9uIjoiTiI9PT10PyJTa2lwcGVkIHJlZ2lvbiI6dCx0LmdldFN1YnN0aXR1dGlvbnM9b0UsdC5wYXJzZU1EPWlFLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0oe30pOwo=",Fi="undefined"!=typeof window&&window.Blob&&new Blob([atob(Pi)],{type:"text/javascript;charset=utf-8"});function wi(){const e=Fi&&(window.URL||window.webkitURL).createObjectURL(Fi);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Pi,{type:"module"})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}function zi(e){var i;return"bam"===(null==(i=e.data)?void 0:i.type)}function Mi(e,...i){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');const{tileProxy:t}=e.services,{showMousePosition:l}=e.utils;class d extends e.tracks.BarTrack{constructor(i){var t,d,a,n,m;const[c,r]=i;let b;if(zi(r.spec))try{b=M(new wi),c.dataFetcher=new vi(e,c.dataConfig,b)}catch(Z){console.warn("Error loading worker",Z)}super(c,r),this.worker=b,c.dataFetcher.track=this,this.context=c,"overlay"in this.options.spec?this.options.spec.overlay=this.options.spec.overlay.map((e=>s(o({},e),{_renderingId:K.v1()}))):this.options.spec._renderingId=K.v1(),this.tileSize=null!=(d=null==(t=this.tilesetInfo)?void 0:t.tile_size)?d:1024,this.drawnAtScale=e.libraries.d3Scale.scaleLinear(),this.scalableGraphics={};const{valid:p,errorMessages:h}=Ki(this.options.spec);p||console.warn("The specification of the following track is invalid",h,this.options.spec),this.extent={min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER},this.mouseOverGraphics=new e.libraries.PIXI.Graphics,this.pMain.addChild(this.mouseOverGraphics),this.pMask.interactive=!0,this.pMask.mousedown=e=>this.onMouseDown(e.data.getLocalPosition(this.pMain).x,e.data.getLocalPosition(this.pMain).y),this.pMask.mouseup=e=>this.onClick(e.data.getLocalPosition(this.pMain).x,e.data.getLocalPosition(this.pMain).y),this.pMask.mousemove=()=>this.onMouseOut(),this.flipText="vertical"===this.options.spec.orientation,this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0),(null==(a=this.options)?void 0:a.showMousePosition)&&!this.hideMousePosition&&(this.hideMousePosition=l(this,ze(Ee(this.options.spec)[0]),this.isShowGlobalMousePosition())),this.tooltips=[],this.svgData=[],this.textGraphics=[],this.textsBeingUsed=0,e.libraries.PIXI.GRAPHICS_CURVES.adaptive=null!=(m=null==(n=this.options.spec.style)?void 0:n.enableSmoothPath)&&m,e.libraries.PIXI.GRAPHICS_CURVES.adaptive&&(e.libraries.PIXI.GRAPHICS_CURVES.maxLength=1,e.libraries.PIXI.GRAPHICS_CURVES.maxSegments=20480)}draw(){var e;this.tooltips=[],this.svgData=[],this.textsBeingUsed=0,null==(e=this.mouseOverGraphics)||e.clear();const i=()=>{this.preprocessAllTiles(),super.draw(),this.prevVisibleAndFetchedTiles=this.visibleAndFetchedTiles()};zi(this.options.spec)&&!N(this.visibleAndFetchedTiles(),this.prevVisibleAndFetchedTiles)?this.updateTileAsync(i):i()}initTile(e){this.drawTile(e)}updateTile(){}renderTile(){}drawTile(i){if(i.drawnAtScale=this._xScale.copy(),i.goslingModels){if(i.graphics.clear(),i.graphics.removeChildren(),i.goslingModels&&i.goslingModels[0]){const t=i.goslingModels[0],l=this.dimensions[1],d=this._xScale.invert(l)-this._xScale.invert(0);if(!t.trackVisibility({zoomLevel:d}))return;fe(e,this,i,t,this.options.theme)}if(i.goslingModels.forEach((t=>{const l=this.dimensions[1],d=this._xScale.invert(l)-this._xScale.invert(0);t.trackVisibility({zoomLevel:d})&&Se(e,this,i,t)})),i.goslingModels&&i.goslingModels[0]){const t=i.goslingModels[0],l=this.dimensions[1],d=this._xScale.invert(l)-this._xScale.invert(0);if(!t.trackVisibility({zoomLevel:d}))return;Re(e,this,i,t,this.options.theme)}this.forceDraw()}}rerender(e){this.options=e,this.tooltips=[],this.svgData=[],this.textsBeingUsed=0,this.preprocessAllTiles(!0),this.draw(),this.forceDraw()}setDimensions(e){this.oldDimensions=this.dimensions,super.setDimensions(e)}setPosition(e){super.setPosition(e),[this.pMain.position.x,this.pMain.position.y]=this.position}forceDraw(){this.animate()}zoomed(e,i){this.xScale(e),this.yScale(i),this.refreshTiles(),this.draw(),this.forceDraw()}updateTileAsync(i){this.xDomain=this._xScale.domain(),this.xRange=this._xScale.range(),this.labelText.text=" Loading...",this.worker.then((t=>{t.getTabularData(this.dataFetcher.uid,Object.values(this.fetchedTiles).map((e=>e.remoteId))).then((t=>{var l;const d=this.visibleAndFetchedTiles(),a=JSON.parse(Buffer.from(t).toString());if(null==d?void 0:d[0]){const i=d[0];i.tileData.tabularData=a;const[t]=e.utils.trackUtils.calculate1DVisibleTiles(this.tilesetInfo,this._xScale);i.tileData.zoomLevel=t[0],i.tileData.tilePos=[t[1]]}i(),this.labelText.text=null!=(l=this.options.spec.title)?l:""}))}))}scaleScalableGraphics(e,i,t){const l=(t.domain()[1]-t.domain()[0])/(i.domain()[1]-i.domain()[0]),d=i.domain().map(t)[0];e.forEach((e=>{e.scale.x=l,e.position.x=-d*l}))}visibleAndFetchedIds(){return Object.keys(this.fetchedTiles).filter((e=>this.visibleTileIds.has(e)))}visibleAndFetchedTiles(){return this.visibleAndFetchedIds().map((e=>this.fetchedTiles[e]))}calculateVisibleTiles(){if(zi(this.options.spec)){const i=e.utils.trackUtils.calculate1DVisibleTiles(this.tilesetInfo,this._xScale);for(const e of i){const{tileWidth:i}=this.getTilePosAndDimensions(e[0],[e[1]],this.tilesetInfo.tile_size),t=2e4;if(i>(this.tilesetInfo.max_tile_width||t))return void this.forceDraw();this.forceDraw()}this.setVisibleTiles(i)}else{if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,i)=>i-e));this.xTiles=t.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),ze(Ee(this.options.spec)[0])&&t.calculateTilesFromResolution(e[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);const i=this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel);this.setVisibleTiles(i)}else{this.xTiles=t.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),ze(Ee(this.options.spec)[0])&&(this.yTiles=t.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width1||this.tilesetInfo.max_width));const e=this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel);this.setVisibleTiles(e)}}}getTilePosAndDimensions(e,i,t){const l=t||this.tilesetInfo.bins_per_dimension||256;if(this.tilesetInfo.resolutions){const t=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,i)=>i-e))[e],d=t*l,a=d;return{tileX:t*l*i[0],tileY:t*l*i[1],tileWidth:d,tileHeight:a}}{const t=i[0],l=i[1],d=this.tilesetInfo.min_pos[0],a=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],n=this.tilesetInfo.max_width/2**e,o=this.tilesetInfo.max_width/2**e;return{tileX:d+t*n,tileY:a+l*o,tileWidth:n,tileHeight:o}}}tilesToId(e,i,t){if(e&&!i)return e.map((e=>[t,e]));{const l=[];return e.forEach((e=>i.forEach((i=>l.push([t,e,i]))))),l}}reorganizeTileInfo(){var e,i;const t=this.visibleAndFetchedTiles();this.tileSize=null!=(i=null==(e=this.tilesetInfo)?void 0:e.tile_size)?i:1024,t.forEach((e=>{e.gos={};Object.keys(e.tileData).filter((e=>!+e&&"0"!==e)).forEach((i=>{e.gos[i]=e.tileData[i]})),e.gos.raw=Array.from(e.tileData)}))}shouldCombineTiles(){var e,i,t,l,d,a;return(null==(e=this.options.spec.dataTransform)?void 0:e.find((e=>"displace"===e.type)))&&(null==(t=null==(i=this.visibleAndFetchedTiles())?void 0:i[0])?void 0:t.tileData)&&!(null==(d=null==(l=this.visibleAndFetchedTiles())?void 0:l[0])?void 0:d.tileData.dense)||"bam"===(null==(a=this.options.spec.data)?void 0:a.type)}combineAllTilesIfNeeded(){var e,i,t;if(!this.shouldCombineTiles())return;const l=this.visibleAndFetchedTiles();if(!l||0===l.length)return;this.tileSize=(null!=(i=null==(e=this.tilesetInfo)?void 0:e.tile_size)?i:1024)*l.length;let d=[];l.forEach(((e,i)=>{d=[...d,...e.tileData],e.mergedToAnotherTile=0!==i})),l[0].gos.raw=d,(null==(t=l[0].gos.raw[0])?void 0:t.uid)&&(l[0].gos.raw=Q(l[0].gos.raw,"uid"))}preprocessAllTiles(e=!1){const i=[];this.reorganizeTileInfo(),this.combineAllTilesIfNeeded(),this.visibleAndFetchedTiles().forEach((t=>{e&&(t.goslingModels=[]);const l=this.preprocessTile(t);null==l||l.forEach((e=>{i.push(e)}))})),function(e,i){const t={},l=Ce;e.forEach((e=>{l.forEach((i=>{const l=e.spec()[i];if(!Qe(l)||void 0===l.domain)return;const{domain:d,type:a}=l;if("quantitative"===a){const e=Array.from(d);t[i]?(t[i][0]>e[0]&&(t[i][0]=e[0]),t[i][1]<e[1]&&(t[i][1]=e[1])):t[i]=e}else if("nominal"===a){const e=Array.from(d);t[i]?t[i]=Array.from(new Set([...t[i],...e])):t[i]=e}}))})),e.forEach((e=>{l.forEach((l=>{const d=e.spec()[l];Qe(d)&&"genomic"===d.type||(e.setChannelDomain(l,t[l],i),e.generateScales())})),e.updateChannelValue()}))}(i)}preprocessTile(e){if(e.mergedToAnotherTile)return void(e.goslingModels=[]);if(e.goslingModels&&0!==e.goslingModels.length)return e.goslingModels;e.goslingModels=[];return Ee(JSON.parse(JSON.stringify(this.options.spec))).forEach((i=>{if("brush"===i.mark)return;if("matrix"===i.data.type)return;if(!e.gos.tabularData){const{tileX:t,tileWidth:l}=this.getTilePosAndDimensions(e.gos.zoomLevel,e.gos.tilePos,this.tileSize);e.gos.tabularData=function(e,i){var t,l,d,a,n,m,c;const r=[];if(Ne(e.data)){if("vector"===e.data.type||"bigwig"===e.data.type){if(!e.data.column||!e.data.value)return void console.warn("Proper data configuration is not provided. Please specify the name of data fields.");if(!i.dense)return;const a=null!=(t=e.data.binSize)?t:1,n=i.dense,o=i.tileSize,s=i.tileWidth/i.tileSize,m=e.data.value,c=e.data.column,b=null!=(l=e.data.start)?l:"start",p=null!=(d=e.data.end)?d:"end",h=`${m}_min`,Z=`${m}_max`;let y=0,u=Number.MAX_SAFE_INTEGER,X=Number.MIN_SAFE_INTEGER,G=Number.MIN_SAFE_INTEGER,W=Number.MAX_SAFE_INTEGER;Array.from(Array(o).keys()).forEach(((e,t)=>{if(1===a){const e=n[t]/s;r.push({[m]:e,[c]:i.tileX+(t+.5)*s,[b]:i.tileX+t*s,[p]:i.tileX+(t+1)*s,[h]:e,[Z]:e})}else if(t%a==0)y=u=X=n[t],G=t,W=t+a;else if(t%a==a-1)r.push({[m]:y/a/s,[c]:i.tileX+(G+a/2)*s,[b]:i.tileX+G*s,[p]:i.tileX+W*s,[h]:u,[Z]:X});else if(t===o-1){const e=o%a,t=G+e;r.push({[m]:y/e/s,[c]:i.tileX+(G+e/2)*s,[b]:i.tileX+G*s,[p]:i.tileX+t*s,[h]:u,[Z]:X})}else y+=n[t],u>n[t]&&(u=n[t]),X<n[t]&&(X=n[t])}))}else if("multivec"===e.data.type){if(!e.data.row||!e.data.column||!e.data.value)return void console.warn("Proper data configuration is not provided. Please specify the name of data fields.");if(!i.dense||void 0===i.shape)return;const t=null!=(a=e.data.binSize)?a:1,l=i.shape[0],d=null!=(n=e.data.categories)?n:[...Array(l).keys()],o=i.dense,s=i.shape[1],b=i.tileWidth/i.tileSize,p=e.data.row,h=e.data.value,Z=e.data.column,y=null!=(m=e.data.start)?m:"start",u=null!=(c=e.data.end)?c:"end",X=`${h}_min`,G=`${h}_max`;d.forEach(((e,l)=>{let d=0,a=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;Array.from(Array(s).keys()).forEach(((W,g)=>{if(1===t){const t=o[s*l+g]/b;r.push({[p]:e,[h]:t,[Z]:i.tileX+(g+.5)*b,[y]:i.tileX+g*b,[u]:i.tileX+(g+1)*b,[X]:t,[G]:t})}else if(g%t==0)d=m=c=o[s*l+g],a=g,n=g+t;else if(g%t==t-1)r.push({[p]:e,[h]:d/t/b,[Z]:i.tileX+(a+t/2)*b,[y]:i.tileX+a*b,[u]:i.tileX+n*b,[X]:m,[G]:c});else if(g===s-1){const l=s%t,n=a+l;r.push({[p]:e,[h]:d/l/b,[Z]:i.tileX+(a+l/2)*b,[y]:i.tileX+a*b,[u]:i.tileX+n*b,[X]:m,[G]:c})}else{const e=o[s*l+g];d+=e,m>e&&(m=e),c<e&&(c=e)}}))}))}else if("beddb"===e.data.type){if(!i.raw)return;const{genomicFields:t,exonIntervalFields:l,valueFields:d}=e.data;i.raw.forEach((e=>{const{chrOffset:i,fields:a}=e,n={};if(t.forEach((e=>{n[e.name]=+a[e.index]+i})),null==d||d.forEach((e=>{n[e.name]="quantitative"===e.type?+a[e.index]:a[e.index]})),r.push(s(o({},n),{type:"gene"})),l){const[e,t]=l,d=a[e.index].split(","),m=a[t.index].split(",");d.forEach(((l,a)=>{const c=m[a];if(r.push(s(o({},n),{[e.name]:+l+i,[t.name]:+c+i,type:"exon"})),a+1<d.length){const l=d[a+1];r.push(s(o({},n),{[e.name]:+c+i,[t.name]:+l+i,type:"intron"}))}}))}}))}else e.data.type;return r}console.warn("No data is specified")}(i,s(o({},e.gos),{tileX:t,tileWidth:l,tileSize:this.tileSize}))}e.gos.tabularDataFiltered=Array.from(e.gos.tabularData),i.dataTransform&&i.dataTransform.forEach((t=>{switch(t.type){case"filter":e.gos.tabularDataFiltered=Gi(t,e.gos.tabularDataFiltered);break;case"concat":e.gos.tabularDataFiltered=function(e,i){const{fields:t,separator:l,newField:d}=e;let a=Array.from(i);return a=a.map((e=>{const i=t.map((i=>e[i]));return e[d]=i.join(l),e})),a}(t,e.gos.tabularDataFiltered);break;case"replace":e.gos.tabularDataFiltered=function(e,i){const{field:t,replace:l,newField:d}=e;let a=Array.from(i);return a=a.map((e=>(e[d]=e[t],l.forEach((i=>{const{from:t,to:l}=i;e[d]=e[d].toString().replaceAll(t,l)})),e))),a}(t,e.gos.tabularDataFiltered);break;case"log":e.gos.tabularDataFiltered=function(e,i){const{field:t,base:l,newField:d}=e;let a=Array.from(i);return a=a.map((e=>(+e[t]&&(e[null!=d?d:t]="e"===l?Math.log(+e[t]):Math.log(+e[t])/Math.log(null!=l?l:10)),e))),a}(t,e.gos.tabularDataFiltered);break;case"exonSplit":e.gos.tabularDataFiltered=function(e,i,t="hg38"){const{separator:l,fields:d,flag:a}=e;let n=Array.from(i);return n=n.map((e=>{const i=[];return d.forEach((d=>{const{field:n,type:o,newField:s,chrField:m}=d;e[n].toString().split(l).forEach(((l,d)=>{let n=l;"genomic"===o&&(n=bi(t).interval[e[m]][0]+ +l),i[d]?i[d][s]=n:i[d]=Y(JSON.parse(JSON.stringify(e)),{[s]:n,[a.field]:a.value})}))})),[e,...i]})).reduce(((e,i)=>e.concat(i)),[]),n}(t,e.gos.tabularDataFiltered,i.assembly);break;case"coverage":e.gos.tabularDataFiltered=function(e,i,t){const{startField:l,endField:d,newField:a,groupField:n}=e,o={};return i.forEach((e=>{const i=t(e[l]),a=t(e[d]),s=n?e[n]:"__NO_GROUP__";for(let t=Math.floor(i);t<a;t+=1)o[s]||(o[s]={}),o[s][t]||(o[s][t]=0),o[s][t]++})),Object.entries(o).flatMap((e=>{const[i,o]=e;return Object.entries(o).map((e=>{const[o,s]=e;return{[l]:t.invert(+o),[d]:t.invert(+o+1),[null!=a?a:"coverage"]:s,[null!=n?n:"group"]:i}}))}))}(t,e.gos.tabularDataFiltered,this._xScale.copy());break;case"subjson":e.gos.tabularDataFiltered=function(e,i){const{field:t,genomicField:l,baseGenomicField:d,genomicLengthField:a}=e;let n=Array.from(i);return n=n.map((e=>{let i=JSON.parse(e[t]);return i=i.map((i=>(i[l]&&e[d]&&(i[`${l}_start`]=+i[l]+ +e[d],i[`${l}_end`]=+i[l]+ +e[d]+ +i[a]),Y(JSON.parse(JSON.stringify(e)),s(o({},i),{[`${l}_start`]:i[`${l}_start`],[`${l}_end`]:i[`${l}_end`],type:"sub"}))))),[e,...i]})).reduce(((e,i)=>e.concat(i)),[]),n}(t,e.gos.tabularDataFiltered);break;case"displace":e.gos.tabularDataFiltered=function(e,i,t){const{boundingBox:l,method:d,newField:a}=e,{startField:n,endField:o,groupField:s}=l;let m=0;l.padding&&t&&!l.isPaddingBP?m=Math.abs(t.invert(l.padding)-t.invert(0)):l.padding&&l.isPaddingBP&&(m=l.padding);const c=Array.from(i);if(c&&c.length>0&&(!Object.keys(c[0]).find((e=>e===n))||!Object.keys(c[0]).find((e=>e===o))))return c;if("pile"===d){const{maxRows:i}=e,t={};c.sort(((e,i)=>e[n]-i[n])).forEach((e=>{const l=e[n]-m,d=e[o]+m,c=s?e[s]:"__NO_GROUP__";t[c]||(t[c]=[]);let r=t[c].findIndex((e=>d<e.start?(e.start=l,!0):e.end<l&&(e.end=d,!0)));-1===r&&(t[c].push({start:l,end:d}),r=t[c].length-1),e[a]=`${i&&i<=r?i-1:r}`}))}else if("spread"===d){const e=[];c.sort(((e,i)=>e[n]-i[n])).forEach((i=>{let t=i[n]-m,l=i[o]+m,d=e.filter((e=>e.start===t&&l===e.end||e.start<t&&t<e.end||e.start<l&&l<e.end||t<e.start&&e.end<l));if(d.length>0){let i=0;do{d=e.filter((e=>e.start===t&&l===e.end||e.start<t&&t<e.end||e.start<l&&l<e.end||t<e.start&&e.end<l)),d.length>0&&(i%2==0?(t+=m*i,l+=m*i):(t-=m*i,l-=m*i)),i++}while(d.length>0&&i<1e3)}i[`${a}Start`]=`${t+m}`,i[`${a}Etart`]=""+(l-m),e.push({start:t,end:l})}))}return c}(t,e.gos.tabularDataFiltered,this._xScale.copy())}}));try{if(j){const t=100,l=e.gos.tabularDataFiltered.length;j.publish("data-preview",{id:this.context.id,dataConfig:JSON.stringify({data:i.data}),data:t>l?e.gos.tabularDataFiltered:R(e.gos.tabularDataFiltered,t)})}}catch(l){}const t=new Ji(i,e.gos.tabularDataFiltered,this.options.theme);e.goslingModels.push(t)})),e.goslingModels}getIndicesOfVisibleDataInTile(e){var i,t,l;const d=this._xScale.range();if(!this.tilesetInfo)return[null,null];const{tileX:a,tileWidth:n}=this.getTilePosAndDimensions(e.gos.zoomLevel,e.gos.tilePos,this.tilesetInfo.bins_per_dimension||(null==(i=this.tilesetInfo)?void 0:i.tile_size)),o=Z().domain([0,(null==(t=this.tilesetInfo)?void 0:t.tile_size)||(null==(l=this.tilesetInfo)?void 0:l.bins_per_dimension)]).range([a,a+n]);return[Math.max(0,Math.round(o.invert(this._xScale.invert(d[0])))),Math.min(e.gos.dense.length,Math.round(o.invert(this._xScale.invert(d[1]))))]}minVisibleValue(){}maxVisibleValue(){}exportSVG(){}onMouseOut(){document.body.style.cursor="default"}onMouseDown(e,i){this.mouseDownX=e,this.mouseDownY=i}onClick(e,i){if(!this.tilesetInfo||!this.tooltips)return;if(Math.sqrt((this.mouseDownX-e)**2+(this.mouseDownY-i)**2)>1)return;const t=this.tooltips.find((t=>t.isMouseOver(e,i)));t&&j.publish("click",{data:o({},t.datum),genomicPosition:ri(Math.floor(this._xScale.invert(e)))})}getMouseOverHtml(e,i){if(!this.tilesetInfo||!this.tooltips)return;this.mouseOverGraphics.clear(),this.pMain.removeChild(this.mouseOverGraphics),this.pMain.addChild(this.mouseOverGraphics);const t=this.tooltips.find((t=>t.isMouseOver(e,i)));if(document.body.style.cursor=t?"pointer":"default",t&&j.publish("mouseover",{data:o({},t.datum),genomicPosition:ri(Math.floor(this._xScale.invert(e)))}),t&&(t.markInfo.type,this.options.spec.tooltip)){return`<table style='text-align: left; margin-top: 12px'>${this.options.spec.tooltip.map((e=>{var i;const l=t.datum[e.field];let d=l;return"quantitative"===e.type&&e.format?d=I(e.format)(+l):"genomic"===e.type&&(d=ri(+l)),`<tr><td style='padding: 4px 8px'>${null!=(i=e.alt)?i:e.field}</td><td style='padding: 4px 8px'><b>${d}</b></td></tr>`})).join("")}</table>`}}}return new d(i)}Mi.config={type:"gosling-track",datatype:["multivec","epilogos"],rotatable:!0,local:!1,orientation:"1d-horizontal",thumbnail:(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width={30} height={30}>\n    <rect style={{ fill: \'none\' }} width="400" height="400" />\n    <circle cx="110.62" cy="129.64" r="41.69" />\n    <circle style={{ fill: \'#fff\' }} cx="124.14" cy="114.12" r="10.76" />\n    <circle cx="288.56" cy="129.64" r="41.69" />\n    <circle style={{ fill: \'#fff\' }} cx="302.07" cy="114.12" r="10.76" />\n    <path\n        style={{ fill: \'#e18241\' }}\n        d="M313.1,241.64l8.61-22.09a430.11,430.11,0,0,0-88-15.87L224,225.63A384.54,384.54,0,0,1,313.1,241.64Z"\n    />\n    <path\n        style={{ fill: \'#e18241\' }}\n        d="M208.63,260.53a299.77,299.77,0,0,1,90.56,16.79L308,254.79a371.68,371.68,0,0,0-90-15.47Z"\n    />\n    <path\n        style={{ fill: \'#e18241\' }}\n        d="M174.4,225.56l-9-22a431.34,431.34,0,0,0-88,15.43l8.9,22A385.08,385.08,0,0,1,174.4,225.56Z"\n    />\n    <path\n        style={{ fill: \'#e18241\' }}\n        d="M100.71,276.35a300.51,300.51,0,0,1,87.91-15.82L180,239.29a372.51,372.51,0,0,0-88.3,14.76Z"\n    />\n    <path\n        style={{ fill: \'#e18241\' }}\n        d="M106.52,290.71c27.53,13.92,59.05,21.34,92.05,21.34h0c33.68,0,65.83-7.72,93.75-22.2a291.31,291.31,0,0,0-186.33-.4Z"\n    />\n</svg>',"text/xml").documentElement,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","trackType","scaledHeight","backgroundColor","barBorder","sortLargestOnTop","theme","axisPositionHorizontal"],defaultOptions:{labelPosition:"none",labelColor:"black",labelTextOpacity:.4,trackBorderWidth:0,trackBorderColor:"black",backgroundColor:"white",barBorder:!1,sortLargestOnTop:!0,axisPositionHorizontal:"left",theme:"light"}};let Ni=!1;function Qi(e){let i=0,t=0;return e.forEach((e=>{const l=e.boundingBox.x+e.boundingBox.width,d=e.boundingBox.y+e.boundingBox.height;t<d&&(t=d),i<l&&(i=l)})),{width:i,height:t}}function ji(e,i){var t,l;let d=[];Ui(e,d);const a=Qi(d);if(e.title||e.subtitle){const n=(e.title?(null!=(t=i.root.titleFontSize)?t:18)+6:0)+(e.subtitle?(null!=(l=i.root.subtitleFontSize)?l:14)+6:0),o=4;a.height+=n+o,a.height=a.height+(8-a.height%8),d.forEach((e=>{e.boundingBox.y+=n+o})),d=[{track:Di({width:a.width,height:n},e.title,e.subtitle),boundingBox:{x:0,y:0,width:a.width,height:n},layout:{x:0,y:0,w:12,h:n/a.height*12}},...d]}else a.height=a.height+(8-a.height%8);return d.forEach((e=>{e.layout.x=e.boundingBox.x/a.width*12,e.layout.w=e.boundingBox.width/a.width*12,e.layout.y=e.boundingBox.y,e.layout.h=e.boundingBox.height})),d}function Ui(e,i,t=0,l=0,d=!0){let a=0,n=0,o=!0,s=!1;qe(e,(e=>{s=!0,"circular"!==e.layout&&(o=!1)}));let m=!0;ei(e,(e=>{"vertical"!==e.arrangement&&"horizontal"!==e.arrangement||(m=!1)}));const c=d&&o&&s&&m&&("views"in e&&("parallel"===e.arrangement||"serial"===e.arrangement)||"tracks"in e),r=i.length;if("tracks"in e){const d=e.tracks;"vertical"===e.orientation?(n=Math.max(...d.map((e=>e.height))),d.forEach(((d,o,s)=>{1===Bi([d])&&(d.width+=30),d.height=n,i.push({track:d,boundingBox:{x:t+a,y:l,width:d.width,height:n},layout:{x:0,y:0,w:0,h:0}}),s[o+1]&&s[o+1].overlayOnPreviousTrack||(a+=d.width,o!==s.length-1&&(a+=void 0!==e.spacing?e.spacing:0))}))):(a=Math.max(...d.map((e=>e.width))),d.forEach(((d,o,s)=>{1===Bi([d])&&(d.height+=30),d.width=a,i.push({track:d,boundingBox:{x:t,y:l+n,width:a,height:d.height},layout:{x:0,y:0,w:0,h:0}}),s[o+1]&&s[o+1].overlayOnPreviousTrack||(n+=d.height,o!==s.length-1&&(n+=void 0!==e.spacing?e.spacing:0))})))}else if("parallel"===e.arrangement||"vertical"===e.arrangement){const o=void 0!==e.spacing?e.spacing:10;e.views.forEach(((e,s,m)=>{var r,b,p,h,Z;const y=Ui(e,i,t+(null!=(r=e.xOffset)?r:0),l+(null!=(b=e.yOffset)?b:0)+n,!c&&d);a<(null!=(p=e.xOffset)?p:0)+y.width&&(a=(null!=(h=e.xOffset)?h:0)+y.width),s!==m.length-1&&(n+=o),n+=(null!=(Z=e.yOffset)?Z:0)+y.height}))}else"serial"!==e.arrangement&&"horizontal"!==e.arrangement||e.views.forEach(((o,s,m)=>{var r,b,p,h,Z;const y=void 0!==e.spacing?e.spacing:10,u=Ui(o,i,t+(null!=(r=o.xOffset)?r:0)+a,l+(null!=(b=o.yOffset)?b:0),!c&&d);n<(null!=(p=o.xOffset)?p:0)+u.height&&(n=(null!=(h=o.xOffset)?h:0)+u.height),s!==m.length-1&&(a+=y),a+=(null!=(Z=o.xOffset)?Z:0)+u.width}));if(c){const d=i.slice(r),o="views"in e&&("parallel"===e.arrangement||"serial"===e.arrangement)&&e.views.length>1,s=void 0!==e.spacing?e.spacing:10,m=0,c=void 0!==e.centerRadius?e.centerRadius:.3,b=a/2+m,p=b*(1-c);d.forEach(((e,i)=>{var d,c;e.track.layout="circular",e.track.outerRadius=b-m-(e.boundingBox.y-l)/n*p,e.track.innerRadius=b-m-(e.boundingBox.y+e.boundingBox.height-l)/n*p;const r=s/a*360;e.track.startAngle=r+(e.boundingBox.x-t)/a*(a-s)/a*360,e.track.endAngle=(e.boundingBox.x+e.boundingBox.width-t)/a*(a-s)/a*360,e.boundingBox.x=t+(null!=(d=e.track.xOffset)?d:0),e.boundingBox.y=l+(null!=(c=e.track.yOffset)?c:0),e.boundingBox.height=e.track.height=e.boundingBox.width=e.track.width=2*b,0!==i&&(e.track.overlayOnPreviousTrack=!0),o&&we(e.track)&&(e.track.overlay=e.track.overlay.filter((e=>"brush"!==e.mark)))})),n=2*b}return{x:t,y:l,width:a,height:n}}function Bi(e){return e.filter((e=>Oe(e))).length}const Di=(e,i,t)=>JSON.parse(JSON.stringify({mark:"header",width:e.width,height:e.height,title:i,subtitle:t}));const Oi=["rgba(68,1,84,1)","rgba(68,2,85,1)","rgba(69,3,87,1)","rgba(69,5,88,1)","rgba(69,6,90,1)","rgba(70,8,91,1)","rgba(70,9,93,1)","rgba(70,11,94,1)","rgba(70,12,96,1)","rgba(71,14,97,1)","rgba(71,15,98,1)","rgba(71,17,100,1)","rgba(71,18,101,1)","rgba(71,20,102,1)","rgba(72,21,104,1)","rgba(72,22,105,1)","rgba(72,24,106,1)","rgba(72,25,108,1)","rgba(72,26,109,1)","rgba(72,28,110,1)","rgba(72,29,111,1)","rgba(72,30,112,1)","rgba(72,32,113,1)","rgba(72,33,115,1)","rgba(72,34,116,1)","rgba(72,36,117,1)","rgba(72,37,118,1)","rgba(72,38,119,1)","rgba(72,39,120,1)","rgba(71,41,121,1)","rgba(71,42,121,1)","rgba(71,43,122,1)","rgba(71,44,123,1)","rgba(71,46,124,1)","rgba(70,47,125,1)","rgba(70,48,126,1)","rgba(70,49,126,1)","rgba(70,51,127,1)","rgba(69,52,128,1)","rgba(69,53,129,1)","rgba(69,54,129,1)","rgba(68,56,130,1)","rgba(68,57,131,1)","rgba(68,58,131,1)","rgba(67,59,132,1)","rgba(67,60,132,1)","rgba(67,62,133,1)","rgba(66,63,133,1)","rgba(66,64,134,1)","rgba(65,65,134,1)","rgba(65,66,135,1)","rgba(65,67,135,1)","rgba(64,69,136,1)","rgba(64,70,136,1)","rgba(63,71,136,1)","rgba(63,72,137,1)","rgba(62,73,137,1)","rgba(62,74,137,1)","rgba(61,75,138,1)","rgba(61,77,138,1)","rgba(60,78,138,1)","rgba(60,79,138,1)","rgba(59,80,139,1)","rgba(59,81,139,1)","rgba(58,82,139,1)","rgba(58,83,139,1)","rgba(57,84,140,1)","rgba(57,85,140,1)","rgba(56,86,140,1)","rgba(56,87,140,1)","rgba(55,88,140,1)","rgba(55,89,140,1)","rgba(54,91,141,1)","rgba(54,92,141,1)","rgba(53,93,141,1)","rgba(53,94,141,1)","rgba(52,95,141,1)","rgba(52,96,141,1)","rgba(51,97,141,1)","rgba(51,98,141,1)","rgba(51,99,141,1)","rgba(50,100,142,1)","rgba(50,101,142,1)","rgba(49,102,142,1)","rgba(49,103,142,1)","rgba(48,104,142,1)","rgba(48,105,142,1)","rgba(47,106,142,1)","rgba(47,107,142,1)","rgba(47,108,142,1)","rgba(46,109,142,1)","rgba(46,110,142,1)","rgba(45,111,142,1)","rgba(45,112,142,1)","rgba(45,112,142,1)","rgba(44,113,142,1)","rgba(44,114,142,1)","rgba(43,115,142,1)","rgba(43,116,142,1)","rgba(43,117,142,1)","rgba(42,118,142,1)","rgba(42,119,142,1)","rgba(41,120,142,1)","rgba(41,121,142,1)","rgba(41,122,142,1)","rgba(40,123,142,1)","rgba(40,124,142,1)","rgba(40,125,142,1)","rgba(39,126,142,1)","rgba(39,127,142,1)","rgba(38,128,142,1)","rgba(38,129,142,1)","rgba(38,130,142,1)","rgba(37,131,142,1)","rgba(37,131,142,1)","rgba(37,132,142,1)","rgba(36,133,142,1)","rgba(36,134,142,1)","rgba(35,135,142,1)","rgba(35,136,142,1)","rgba(35,137,142,1)","rgba(34,138,141,1)","rgba(34,139,141,1)","rgba(34,140,141,1)","rgba(33,141,141,1)","rgba(33,142,141,1)","rgba(33,143,141,1)","rgba(32,144,141,1)","rgba(32,145,140,1)","rgba(32,146,140,1)","rgba(32,147,140,1)","rgba(31,147,140,1)","rgba(31,148,140,1)","rgba(31,149,139,1)","rgba(31,150,139,1)","rgba(31,151,139,1)","rgba(30,152,139,1)","rgba(30,153,138,1)","rgba(30,154,138,1)","rgba(30,155,138,1)","rgba(30,156,137,1)","rgba(30,157,137,1)","rgba(30,158,137,1)","rgba(30,159,136,1)","rgba(30,160,136,1)","rgba(31,161,136,1)","rgba(31,162,135,1)","rgba(31,163,135,1)","rgba(31,163,134,1)","rgba(32,164,134,1)","rgba(32,165,134,1)","rgba(33,166,133,1)","rgba(33,167,133,1)","rgba(34,168,132,1)","rgba(35,169,131,1)","rgba(35,170,131,1)","rgba(36,171,130,1)","rgba(37,172,130,1)","rgba(38,173,129,1)","rgba(39,174,129,1)","rgba(40,175,128,1)","rgba(41,175,127,1)","rgba(42,176,127,1)","rgba(43,177,126,1)","rgba(44,178,125,1)","rgba(46,179,124,1)","rgba(47,180,124,1)","rgba(48,181,123,1)","rgba(50,182,122,1)","rgba(51,183,121,1)","rgba(53,183,121,1)","rgba(54,184,120,1)","rgba(56,185,119,1)","rgba(57,186,118,1)","rgba(59,187,117,1)","rgba(61,188,116,1)","rgba(62,189,115,1)","rgba(64,190,114,1)","rgba(66,190,113,1)","rgba(68,191,112,1)","rgba(70,192,111,1)","rgba(72,193,110,1)","rgba(73,194,109,1)","rgba(75,194,108,1)","rgba(77,195,107,1)","rgba(79,196,106,1)","rgba(81,197,105,1)","rgba(83,198,104,1)","rgba(85,198,102,1)","rgba(88,199,101,1)","rgba(90,200,100,1)","rgba(92,201,99,1)","rgba(94,201,98,1)","rgba(96,202,96,1)","rgba(98,203,95,1)","rgba(101,204,94,1)","rgba(103,204,92,1)","rgba(105,205,91,1)","rgba(108,206,90,1)","rgba(110,206,88,1)","rgba(112,207,87,1)","rgba(115,208,85,1)","rgba(117,208,84,1)","rgba(119,209,82,1)","rgba(122,210,81,1)","rgba(124,210,79,1)","rgba(127,211,78,1)","rgba(129,212,76,1)","rgba(132,212,75,1)","rgba(134,213,73,1)","rgba(137,213,72,1)","rgba(139,214,70,1)","rgba(142,215,68,1)","rgba(144,215,67,1)","rgba(147,216,65,1)","rgba(149,216,63,1)","rgba(152,217,62,1)","rgba(155,217,60,1)","rgba(157,218,58,1)","rgba(160,218,57,1)","rgba(163,219,55,1)","rgba(165,219,53,1)","rgba(168,220,51,1)","rgba(171,220,50,1)","rgba(173,221,48,1)","rgba(176,221,46,1)","rgba(179,221,45,1)","rgba(181,222,43,1)","rgba(184,222,41,1)","rgba(187,223,39,1)","rgba(189,223,38,1)","rgba(192,223,36,1)","rgba(195,224,35,1)","rgba(197,224,33,1)","rgba(200,225,32,1)","rgba(203,225,30,1)","rgba(205,225,29,1)","rgba(208,226,28,1)","rgba(211,226,27,1)","rgba(213,226,26,1)","rgba(216,227,25,1)","rgba(219,227,24,1)","rgba(221,227,24,1)","rgba(224,228,24,1)","rgba(226,228,24,1)","rgba(229,228,24,1)","rgba(232,229,25,1)","rgba(234,229,25,1)","rgba(237,229,26,1)","rgba(239,230,27,1)","rgba(242,230,28,1)","rgba(244,230,30,1)","rgba(247,230,31,1)","rgba(249,231,33,1)","rgba(251,231,35,1)","rgba(254,231,36,1)"];function Ei(e,i,t,l,d){var a,n,m,c,r,b,p,h,Z,y,u;const X=Ee(i)[0],G=X.assembly;if(Pe(X.data)){let r,b;if(Ne(X.data)){const e=(W=X.data.url).includes("tileset_info/?d=")&&(W.includes("https:")||W.includes("http:"))?{server:W.split("tileset_info/?d=")[0],tilesetUid:W.split("tileset_info/?d=")[1]}:(console.warn(`Data url format is incorrect:${W}`),{server:void 0,tilesetUid:void 0});r=e.server,b=e.tilesetUid}const p=Ii(X),h=ki(X),Z=("x"===h||"xe"===h)&&Qe(p)?p.domain:void 0,y=ze(X)&&Qe(X.y)?X.y.domain:void 0,u=t.width-("circular"!==X.layout&&"vertical"===X.orientation&&Oe(X)?30:0),g=t.height-("circular"!==X.layout&&"horizontal"===X.orientation&&Oe(X)?30:0),x={uid:null!=(a=X.id)?a:K.v4(),type:ze(X)?"gosling-2d-track":"gosling-track",server:r,tilesetUid:b,width:u,height:g,options:{showMousePosition:"circular"!==X.layout&&d.root.showMousePosition,mousePositionColor:d.root.mousePositionColor,name:"linear"===X.layout?X.title:" ",labelPosition:X.title?"left"===d.track.titleAlign?"topLeft":"topRight":"none",labelShowResolution:!1,labelColor:d.track.titleColor,labelBackgroundColor:d.track.titleBackground,labelBackgroundOpacity:.5,labelTextOpacity:1,labelLeftMargin:1,labelTopMargin:1,labelRightMargin:0,labelBottomMargin:0,backgroundColor:"transparent",spec:o({},i),theme:d}};X.data&&Pe(X.data)&&("csv"===X.data.type||"json"===X.data.type||"bigwig"===X.data.type||"bam"===X.data.type)&&(x.data=s(o({},X.data),{assembly:G}));"matrix"===(null==(n=X.data)?void 0:n.type)&&(x.type="heatmap",x.options.colorRange="warm"===(null==X?void 0:X.color.range)?["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]:Oi,x.options.trackBorderWidth=1,x.options.trackBorderColor="black",x.options.colorbarPosition=(null==(m=X.color)?void 0:m.legend)?"topRight":"hidden"),X.overlayOnPreviousTrack?e.setViewOrientation(X.orientation).addTrackToCombined(x):e.setViewOrientation(X.orientation).setAssembly(G).addDefaultView(X.id?`${X.id}-view`:K.v1(),G).setDomain(Z,ze(X)?y:Z).adjustDomain(X.orientation,u,g).setMainTrack(x).addTrackSourceServers(r).setZoomFixed(!0===X.static).setZoomLimits(null!=(c=X.zoomLimits)?c:[1,null]).setLayout(l);const V=(e,i="horizontal",t,l)=>{const d=400,a=200;return"horizontal"===i?"x"===e&&t<=a||"y"===e&&l<=a?"narrower":"x"===e&&t<=d||"y"===e&&l<=d?"narrow":"regular":"x"===e&&l<=a||"y"===e&&t<=a?"narrower":"x"===e&&l<=d||"y"===e&&t<=d?"narrow":"regular"};["x","y"].forEach((l=>{const a=X[l];if(Qe(a)&&a.axis&&"none"!==a.axis&&"genomic"===a.type){const n=V(l,i.orientation,t.width,t.height);e.setAxisTrack(a.axis,n,{layout:X.layout,innerRadius:"top"===a.axis?X.outerRadius-30:X.innerRadius,outerRadius:"top"===a.axis?X.outerRadius:X.innerRadius+30,width:X.width,height:X.height,startAngle:X.startAngle,endAngle:X.endAngle,theme:d})}})),e.validateSpec(!0)}else"header"===X.mark&&(e.addDefaultView(null!=(r=i.id)?r:K.v1()).setLayout(l),"string"==typeof X.title&&e.setTextTrack(t.width,(null!=(b=d.root.titleFontSize)?b:18)+6,X.title,d.root.titleColor,null!=(p=d.root.titleFontSize)?p:18,d.root.titleFontWeight,d.root.titleAlign,d.root.titleBackgroundColor,null!=(h=d.root.titleFontFamily)?h:Ie.fontFamily),"string"==typeof X.subtitle&&e.setTextTrack(t.width,(null!=(Z=d.root.subtitleFontSize)?Z:14)+6,X.subtitle,d.root.subtitleColor,null!=(y=d.root.subtitleFontSize)?y:14,d.root.subtitleFontWeight,d.root.subtitleAlign,d.root.subtitleBackgroundColor,null!=(u=d.root.subtitleFontFamily)?u:Ie.fontFamily));var W;return e}function Ai(e,i,t,l){if(0===i.length)return;const d=new fi;i.forEach((e=>{const{track:i,boundingBox:t,layout:a}=e;Ei(d,i,t,a,l)}));const a=function(e){const i=[];return e.spec().views.forEach((e=>{var t,l,d,a,n,o,s,m,c,r,b,p,h,Z,y;const u=e.uid;let X=null==(n=null==(a=null==(d=null==(l=null==(t=e.tracks.center)?void 0:t[0])?void 0:l.contents)?void 0:d[0])?void 0:a.options)?void 0:n.spec;X||(X=null==(r=null==(c=null==(m=null==(s=null==(o=e.tracks.left)?void 0:o[0])?void 0:s.contents)?void 0:m[0])?void 0:c.options)?void 0:r.spec,X||(X=null==(y=null==(Z=null==(h=null==(p=null==(b=e.tracks.left)?void 0:b[1])?void 0:p.contents)?void 0:h[0])?void 0:Z.options)?void 0:y.spec)),u&&X&&Ee(X).forEach((e=>{Ce.forEach((t=>{var l,d,a,n;const o=e[t];Qe(o)&&o.linkingId&&i.push({layout:"circular"===e.layout?"circular":"linear",viewId:u,linkId:o.linkingId,isBrush:"brush"===e.mark,style:{color:null==(l=e.color)?void 0:l.value,stroke:null==(d=e.stroke)?void 0:d.value,strokeWidth:null==(a=e.strokeWidth)?void 0:a.value,opacity:null==(n=e.opacity)?void 0:n.value,startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius}})}))}))})),i}(d);a.filter((e=>e.isBrush)).forEach((e=>{var i;d.addBrush(e.layout,e.viewId,l,null==(i=a.find((i=>!i.isBrush&&i.linkId===e.linkId)))?void 0:i.viewId,e.style)})),a.filter((e=>!e.isBrush)).forEach((e=>{d.spec().zoomLocks.locksByViewUid[e.viewId]=e.linkId,d.spec().locationLocks.locksByViewUid[e.viewId]=e.linkId}));Array.from(new Set(a.map((e=>e.linkId)))).forEach((e=>{d.spec().zoomLocks.locksDict[e]={uid:e},d.spec().locationLocks.locksDict[e]={uid:e},a.filter((e=>!e.isBrush)).filter((i=>i.linkId===e)).forEach((i=>{d.spec().zoomLocks.locksDict[e][i.viewId]=[124625310.5,124625310.5,249250.621],d.spec().locationLocks.locksDict[e][i.viewId]=[124625310.5,124625310.5,249250.621]}))})),t(d.spec(),Qi(i))}function _i(e,i,t,l){const d=JSON.parse(JSON.stringify(e));!function(e){$e(e,((e,i,t)=>{var l,d,a;if(e.data&&Ne(e.data)&&!("alignment"in e)&&"data"in(l=e)&&"overrideTemplate"in l&&l.overrideTemplate)switch(e.data.type){case"vector":case"bigwig":t[i]=Y({data:{type:"vector",url:"",column:d=e.data.column,value:a=e.data.value},mark:"bar",x:{field:d,type:"genomic",axis:"top"},y:{field:a,type:"quantitative"},width:400,height:100},e);break;case"multivec":t[i]=Y(function(e,i,t,l){return l&&l.length<10?{data:{type:"multivec",url:"",row:e,column:i,value:t,categories:l},mark:"bar",x:{field:i,type:"genomic",axis:"top"},y:{field:t,type:"quantitative"},row:{field:e,type:"nominal",legend:!0},color:{field:e,type:"nominal"},width:400,height:100}:{data:{type:"multivec",url:"",row:e,column:i,value:t,categories:l},mark:"rect",x:{field:i,type:"genomic",axis:"top"},row:{field:e,type:"nominal",legend:!0},color:{field:t,type:"quantitative"},width:400,height:100}}(e.data.row,e.data.column,e.data.value,e.data.categories),e)}}))}(d),function(e,i){$e(e,((e,t,l)=>{var d,a;if(!("template"in e))return;const{template:n}=e,m=i.find((e=>e.name===n));if(!m)return e._invalidTrack=!0,void console.warn(`There is no track template named '${n}'`);let c=!0;if(m.channels.forEach((i=>{!i.required||e.encoding&&i.name in e.encoding||(c=!1,console.warn(`A template spec ('${n}') does not contain a required channel, ${i.name}`))})),!c)return void(e._invalidTrack=!0);const r=JSON.parse(JSON.stringify(e));"encoding"in r&&delete r.encoding;const b=s(o({},r),{alignment:"overlay",tracks:[],width:null!=(d=e.width)?d:100,height:null!=(a=e.height)?a:100});m.mapping.forEach((i=>{const t={data:e.data,mark:i.mark},{dataTransform:l}=i;l&&l.map((i=>{const t=i.base;t&&e.encoding&&t in e.encoding&&"field"in e.encoding[t]&&(delete i.base,i.field=e.encoding[t].field)}));const d=e.encoding;d?Object.keys(i).filter((e=>"mark"!==e)).forEach((e=>{const l=JSON.parse(JSON.stringify(i[e]));if("base"in l){const i=l.base;if(i in d){const a=JSON.parse(JSON.stringify(d[i]));delete l.base;const n=Y(l,JSON.parse(JSON.stringify(a)));t[e]=n}else delete l.base,t[e]=l}else t[e]=l})):Object.keys(i).filter((e=>"mark"!==e)).forEach((e=>{const l=JSON.parse(JSON.stringify(i[e]));"base"in l&&delete l.base,t[e]=l})),b.tracks.push(t)})),l[t]=b}))}(d,t),ti(d),function(e,i,t){Ai(0,ji(e,t),i,t)}(d,i,l)}Ni||(U({name:"GoslingTrack",track:Mi,config:Mi.config}),U({name:"Gosling2DTrack",track:Mi,config:s(o({},Mi.config),{type:"gosling-2d-track",orientation:"2d"})}),U({name:"AxisTrack",track:ui,config:ui.config}),U({name:"TextTrack",track:B,config:B.config}),U({name:"BrushTrack",track:Xi,config:Xi.config}),U({dataFetcher:gi,config:gi.config},{pluginType:"dataFetcher"}),U({dataFetcher:xi,config:xi.config},{pluginType:"dataFetcher"}),U({dataFetcher:Vi,config:Vi.config},{pluginType:"dataFetcher"}),Ni=!0);const $i=D.exports.forwardRef(((e,i)=>{var t;const[l,d]=D.exports.useState(null!=(t=e.id)?t:K.v4());D.exports.useEffect((()=>{var i;d(null!=(i=e.id)?i:K.v4())}),[e.id]);const a=e.viewConfig||{},n=D.exports.useMemo((()=>O.createElement(E.exports.HiGlassComponent,{ref:i,options:{pixelPreciseMarginPadding:!0,containerPaddingX:0,containerPaddingY:0,viewMarginTop:0,viewMarginBottom:0,viewMarginLeft:0,viewMarginRight:0,viewPaddingTop:0,viewPaddingBottom:0,viewPaddingLeft:0,viewPaddingRight:0,sizeMode:"bounded",rangeSelectionOnAlt:!0},viewConfig:a})),[a]),{padding:o=60,margin:s=0,border:m="none",background:c}=e.options||{};return O.createElement(O.Fragment,null,O.createElement("div",{id:l,className:`gosling-component ${e.className||""}`,style:{position:"relative",padding:o,margin:s,border:m,background:c,width:e.size.width,height:e.size.height,textAlign:"left"}},O.createElement("div",{key:JSON.stringify(a),id:"higlass-wrapper",className:"higlass-wrapper",style:{position:"relative",display:"block",background:c,margin:0,padding:0,width:e.size.width,height:e.size.height}},n)))}));var qi,et;$i.displayName="HiGlassComponentWrapper",(et=qi||(qi={})).light="light",et.dark="dark";const it={color:Ti.NOMINAL_COLOR[0],size:1,stroke:"black",strokeWidth:0,opacity:1,nominalColorRange:Ti.NOMINAL_COLOR,quantitativeSizeRange:[2,6]},tt=s(o({},it),{stroke:"white"}),lt={light:{base:"light",root:{background:"white",titleColor:"black",titleBackgroundColor:"transparent",titleFontSize:18,titleFontFamily:"Arial",titleAlign:"left",titleFontWeight:"bold",subtitleColor:"gray",subtitleBackgroundColor:"transparent",subtitleFontSize:16,subtitleFontFamily:"Arial",subtitleFontWeight:"normal",subtitleAlign:"left",showMousePosition:!0,mousePositionColor:"#000000"},track:{background:"transparent",alternatingBackground:"transparent",titleColor:"black",titleBackground:"white",titleFontSize:24,titleAlign:"left",outline:"black",outlineWidth:1},legend:{position:"top",background:"white",backgroundOpacity:.7,labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",backgroundStroke:"#DBDBDB",tickColor:"black"},axis:{tickColor:"black",labelColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",baselineColor:"black",gridColor:"#E3E3E3",gridStrokeWidth:1,gridStrokeType:"solid",gridStrokeDash:[4,4]},markCommon:o({},it),point:s(o({},it),{size:3}),rect:o({},it),triangle:o({},it),area:o({},it),line:o({},it),bar:o({},it),rule:s(o({},it),{strokeWidth:1}),link:s(o({},it),{strokeWidth:1}),text:s(o({},it),{textAnchor:"middle",textFontWeight:"normal"}),brush:s(o({},it),{color:"gray",opacity:.3,stroke:"black",strokeWidth:1})},dark:{base:"dark",root:{background:"black",titleColor:"white",titleBackgroundColor:"transparent",titleFontSize:18,titleFontFamily:"Arial",titleAlign:"middle",titleFontWeight:"bold",subtitleColor:"lightgray",subtitleBackgroundColor:"transparent",subtitleFontSize:16,subtitleFontFamily:"Arial",subtitleAlign:"middle",subtitleFontWeight:"normal",showMousePosition:!0,mousePositionColor:"#FFFFFF"},track:{background:"transparent",alternatingBackground:"transparent",titleColor:"white",titleBackground:"black",titleFontSize:18,titleAlign:"left",outline:"white",outlineWidth:1},legend:{position:"right",background:"black",backgroundOpacity:.7,labelColor:"white",labelFontSize:12,labelFontWeight:"normal",labelFontFamily:"Arial",backgroundStroke:"#DBDBDB",tickColor:"white"},axis:{tickColor:"white",labelColor:"white",labelFontSize:10,labelFontWeight:"normal",labelFontFamily:"Arial",baselineColor:"white",gridColor:"gray",gridStrokeWidth:1,gridStrokeType:"solid",gridStrokeDash:[4,4]},markCommon:o({},tt),point:s(o({},tt),{size:3}),rect:o({},tt),triangle:o({},tt),area:o({},tt),line:o({},tt),bar:o({},tt),rule:s(o({},tt),{strokeWidth:1}),link:s(o({},tt),{strokeWidth:1}),text:s(o({},tt),{textAnchor:"middle",textFontWeight:"normal"}),brush:s(o({},tt),{color:"lightgray",opacity:.3,stroke:"white",strokeWidth:1})}},dt={};function at(e,i,t){const l=()=>{if("api"in e)return e;if(e.current)return e.current;throw new Error("HiGlass ref not initalized")},d=e=>{var i,d;const a=l(),n=null!=(i=null==e?void 0:e.resolution)?i:4,o=null!=(d=null==e?void 0:e.transparentBackground)&&d,s=a.pixiRenderer,m=$.create({width:s.width/2,height:s.height/2,resolution:n});s.render(a.pixiStage,m);const c=s.plugins.extract.canvas(m),r=document.createElement("canvas");r.width=c.width,r.height=c.height;const b=r.getContext("2d");return o||(b.fillStyle=t.root.background,b.fillRect(0,0,r.width,r.height)),b.drawImage(c,0,0),{canvas:r,resolution:n,canvasWidth:c.width,canvasHeight:c.height}};return{subscribe:(e,i)=>{switch(e){case"mouseover":case"click":return PubSub.subscribe(e,i);default:return void console.error(`Event type not recognized, got ${JSON.stringify(e)}.`)}},unsubscribe:e=>PubSub.unsubscribe(e),zoomTo:(e,i,t=0,d=1e3)=>{var a,n,o,s;if(!i.includes("chr"))return void console.warn("Genomic interval you entered is not in a correct form.");const m=i.split(":")[0],c=null==(n=null==(a=bi().interval)?void 0:a[m])?void 0:n[0];if(!m||void 0===typeof c)return void console.warn("Chromosome name is not valid",m);const[r,b]=null!=(s=null==(o=i.split(":")[1])?void 0:o.split("-"))?s:[0,bi().size[m]],p=+r+c-t,h=+b+c+t;l().api.zoomTo(e,p,h,p,h,d)},zoomToExtent:(e,i=1e3)=>{const[t,d]=[0,bi().total];l().api.zoomTo(e,t,d,t,d,i)},zoomToGene:(e,i,t=0,d=1e3)=>{l().api.zoomToGene(e,i,t,d)},getViewIds:()=>{if(!i)return[];const e=[];var t,l;return l=i=>{i.uid&&e.push(i.uid)},(t=i)&&t.views&&Array.isArray(t.views)&&t.views.forEach((e=>{e&&e.uid&&l(e)})),e},getCanvas:d,exportPng:e=>{const{canvas:i}=d({resolution:4,transparentBackground:e});i.toBlob((e=>{const i=document.createElement("a");document.body.append(i),i.download="gosling-visualization",i.href=URL.createObjectURL(e),i.click(),i.remove()}),"image/png")},exportPdf:async e=>{const{jsPDF:i}=await(t=()=>import("./jspdf.es.min.58363f7a.js"),l=[],l&&0!==l.length?Promise.all(l.map((e=>{if((e=`/${e}`)in dt)return;dt[e]=!0;const i=e.endsWith(".css"),t=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const l=document.createElement("link");return l.rel=i?"stylesheet":"modulepreload",i||(l.as="script",l.crossOrigin=""),l.href=e,document.head.appendChild(l),i?new Promise(((e,i)=>{l.addEventListener("load",e),l.addEventListener("error",i)})):void 0}))).then((()=>t())):t());var t,l;const{canvas:a}=d({resolution:4,transparentBackground:e}),n=a.toDataURL("image/jpeg",1),o=new i({orientation:a.width<a.height?"p":"l",unit:"pt",format:[a.width,a.height]});o.addImage(n,"JPEG",0,0,a.width,a.height),o.save("gosling-visualization.pdf")}}}const nt=D.exports.forwardRef(((e,i)=>{const[t,l]=D.exports.useState(),[d,a]=D.exports.useState({width:200,height:200}),n=D.exports.useRef(),o=function(e="light"){if("string"==typeof e)return A(e)?_(e):"dark"===e||"light"===e?lt[e]:lt.light;{let i=JSON.parse(JSON.stringify(lt.light));return A(e.base)?i=_(e.base):"light"!==e.base&&"dark"!==e.base||(i=JSON.parse(JSON.stringify(lt[e.base]))),Object.keys(i).forEach((t=>{e[t]&&"base"!==t&&(i[t]=Y(JSON.parse(JSON.stringify(i[t])),JSON.parse(JSON.stringify(e[t]))))})),i}}(e.theme||"light");D.exports.useEffect((()=>{if(!i)return;const e=at(n,t,o);"function"==typeof i?i({api:e}):i.current={api:e}}),[i,n,t,o]),D.exports.useEffect((()=>{if(e.spec){if("error"===Li(e.spec).state)return void console.warn("Gosling spec is not valid. Please refer to the console message.");_i(e.spec,((i,d)=>{var o,s,m;null==(o=e.compiled)||o.call(e,e.spec,i),a(d);const c=void 0!==t;(null==(s=e.experimental)?void 0:s.reactive)&&c?null==(m=n.current)||m.api.setViewConfig(i):l(i)}),[...li],o)}}),[e.spec,o]);return D.exports.useMemo((()=>O.createElement($i,{ref:n,viewConfig:t,size:d,id:e.id,className:e.className,options:{padding:e.padding,border:e.border,margin:e.margin,background:o.root.background}})),[t,d,o])}));function ot(e){const{code:i,readOnly:t,openFindBox:l,fontZoomIn:d,fontZoomOut:a,isDarkTheme:n}=e,o=D.exports.useRef(null),[s,m]=D.exports.useState(i);function c(){ee.defineTheme("gosling",n?{base:"vs-dark",inherit:!0,rules:[{token:"string.key.json",foreground:"#eeeeee",fontStyle:"bold"},{token:"string.value.json",foreground:"#8BE9FD",fontStyle:"bold"},{token:"number",foreground:"#FF79C6",fontStyle:"bold"},{token:"keyword.json",foreground:"#FF79C6",fontStyle:"bold"}],colors:{}}:{base:"vs",inherit:!0,rules:[{token:"string.key.json",foreground:"#222222"},{token:"string.value.json",foreground:"#035CC5"},{token:"number",foreground:"#E32A4F"},{token:"keyword.json",foreground:"#E32A4F"}],colors:{}})}return D.exports.useEffect((()=>{c()}),[n]),D.exports.useEffect((()=>{m(i)}),[i]),D.exports.useEffect((()=>{o.current&&void 0!==l&&o.current.getAction("actions.find").run()}),[l]),D.exports.useEffect((()=>{o.current&&void 0!==d&&o.current.getAction("editor.action.fontZoomIn").run()}),[d]),D.exports.useEffect((()=>{o.current&&void 0!==a&&o.current.getAction("editor.action.fontZoomOut").run()}),[a]),O.createElement(O.Fragment,null,O.createElement(ie,{handleWidth:!0,handleHeight:!0,onResize:(e,i)=>{var t;null==(t=null==o?void 0:o.current)||t.layout({width:e,height:i})}}),O.createElement(te,{language:"json",value:s,theme:"gosling",options:{autoClosingBrackets:"beforeWhitespace",autoClosingQuotes:"beforeWhitespace",cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",lineNumbers:"on",renderLineHighlight:"line",renderIndentGuides:!0,fontSize:14,readOnly:t},onChange:function(i){m(i),e.onChange&&e.onChange(i)},editorDidMount:function(e){o.current=e,e.focus(),e.createContextKey("editorIsOpen",!0)},editorWillMount:function(){c(),le.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0,enableSchemaRequest:!0,validate:!0,schemas:[{uri:"https://raw.githubusercontent.com/gosling-lang/gosling.js/master/schema/gosling.schema.json",fileMatch:["*"],schema:We}]}),le.json.jsonDefaults.setModeConfiguration({diagnostics:!0,documentFormattingEdits:!1,documentRangeFormattingEdits:!1,documentSymbols:!0,completionItems:!0,hovers:!0,tokens:!0,colors:!0,foldingRanges:!0,selectionRanges:!1})}}))}self.MonacoEnvironment={getWorker:()=>new q};class st extends O.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?O.createElement("div",{style:{margin:"10px 40px"}},O.createElement("h3",null,"Something Went Wrong..."),O.createElement("h4",null," Refresh the webpage to restart the editor."),O.createElement("h4",null," Please help us fix this issue by submitting a"," ",O.createElement("a",{href:"https://github.com/gosling-lang/gosling.js/issues/new",target:"_blank",rel:"noopener noreferrer"},"GitHub issue")," ","with the spec on the left side.")):this.props.children}}const mt="https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",ct="https://server.gosling-lang.org/api/v1/tileset_info/?d=epilogos-hg38",rt="https://server.gosling-lang.org/api/v1/tileset_info/?d=sequence-multivec",bt="https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",pt="https://server.gosling-lang.org/api/v1/tileset_info/?d=clinvar-beddb",ht="https://server.gosling-lang.org/api/v1/tileset_info/?d=clinvar-multivec",Zt="https://server.gosling-lang.org/api/v1/tileset_info/?d=hffc6-microc-hg38",yt="https://server.gosling-lang.org/api/v1/tileset_info/?d=hffc6-hic-hg38",ut="https://server.gosling-lang.org/api/v1/tileset_info/?d=transcript-hg38-beddb",Xt=["#D45E00","#029F73","#0072B2","#CB7AA7","#E79F00"],Gt=(e,i,t,l,d)=>({tracks:Array(1).fill({data:{type:"multivec",url:mt,value:"y",row:"_",column:"x",categories:["_"],binSize:32},mark:"rect",x:{field:"start",type:"genomic",axis:"none"},xe:{field:"end",type:"genomic"},row:{field:"_",type:"nominal"},color:{value:"lightgray"},style:{outline:e,outlineWidth:7},width:i+10*l,height:t+10*d})}),Wt={title:"Layout and Arrangement",subtitle:"Try yourself with different arrangements and layouts",static:!0,layout:"linear",arrangement:"parallel",centerRadius:.5,views:[o({},Gt(Xt[0],400,30,1,0)),{arrangement:"serial",views:[o({},Gt(Xt[1],200,30,0,0)),o({},Gt(Xt[2],200,30,0,0))]}]},gt={static:!0,layout:"linear",arrangement:"serial",centerRadius:.5,views:[{arrangement:"serial",views:[{arrangement:"parallel",views:[o({},Gt(Xt[0],300,60,1,0)),o({},Gt(Xt[1],300,30,1,0))]},{arrangement:"parallel",views:[o({},Gt(Xt[2],50,60,1,0)),o({},Gt(Xt[3],50,30,1,0))]}]},o({},Gt(Xt[4],50,90,0,1))]},xt={title:"Visual Encoding",subtitle:"Gosling provides diverse visual encoding methods",layout:"linear",arrangement:"vertical",centerRadius:.8,xDomain:{chromosome:"1",interval:[1,3000500]},views:[{tracks:[{id:"track-1",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},row:{field:"sample",type:"nominal",legend:!0},color:{field:"peak",type:"quantitative",legend:!0},tooltip:[{field:"start",type:"genomic",alt:"Start Position"},{field:"end",type:"genomic",alt:"End Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{tracks:[{id:"track-2",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{tracks:[{id:"track-3",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative",grid:!0},color:{field:"sample",type:"nominal",legend:!0},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{id:"track-4",alignment:"overlay",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},tracks:[{mark:"line"},{mark:"point",size:{field:"peak",type:"quantitative",range:[0,2]}}],tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130},{tracks:[{id:"track-5",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"point",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},size:{field:"peak",type:"quantitative"},color:{field:"sample",type:"nominal",legend:!0},opacity:{value:.5},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{tracks:[{id:"track-6",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"point",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative",grid:!0},size:{field:"peak",type:"quantitative"},color:{field:"sample",type:"nominal",legend:!0},opacity:{value:.5},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{tracks:[{id:"track-7",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"area",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},stroke:{value:"white"},strokeWidth:{value:.5},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak",type:"quantitative",alt:"Value",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{tracks:[{id:"track-8",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"bar",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic",axis:"top"},y:{field:"peak_min",type:"quantitative"},ye:{field:"peak_max",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},stroke:{value:"black"},strokeWidth:{value:.2},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak_min",type:"quantitative",alt:"min(Value)",format:".2"},{field:"peak_max",type:"quantitative",alt:"max(Value)",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:600,height:130}]},{tracks:[{id:"track-9",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"withinLink",x:{field:"s1",type:"genomic",domain:{chromosome:"1",interval:[1039e5,1041e5]}},xe:{field:"e1",type:"genomic"},x1:{field:"s2",type:"genomic",domain:{chromosome:"1"}},x1e:{field:"e2",type:"genomic"},color:{field:"s1",type:"nominal"},stroke:{value:"black"},strokeWidth:{value:.5},opacity:{value:.2},width:600,height:130}]}]},Vt={title:"Visual Encoding in Circular Layouts",subtitle:"Gosling provides diverse visual encoding methods in circular layouts",layout:"circular",arrangement:"vertical",centerRadius:.5,static:!0,xDomain:{chromosome:"1",interval:[1,3000500]},views:[{arrangement:"horizontal",views:[{spacing:2,tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},row:{field:"sample",type:"nominal",legend:!0},color:{field:"peak",type:"quantitative",legend:!0},width:350,height:130}]},{spacing:2,tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},width:350,height:130}]}]},{arrangement:"horizontal",views:[{spacing:2,tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative",grid:!0},color:{field:"sample",type:"nominal",legend:!0},width:350,height:130}]},{spacing:2,alignment:"overlay",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},tracks:[{mark:"line"},{mark:"point",size:{field:"peak",type:"quantitative",range:[0,2]}}],width:350,height:130}]},{arrangement:"horizontal",views:[{spacing:2,tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"point",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},size:{field:"peak",type:"quantitative"},color:{field:"sample",type:"nominal",legend:!0},opacity:{value:.5},width:350,height:130}]},{spacing:2,tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"point",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative",grid:!0},size:{field:"peak",type:"quantitative"},color:{field:"sample",type:"nominal",legend:!0},opacity:{value:.5},width:350,height:130}]}]},{arrangement:"horizontal",views:[{spacing:2,tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"area",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},stroke:{value:"white"},strokeWidth:{value:.5},width:350,height:130}]},{spacing:2,tracks:[{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"withinLink",x:{field:"s1",type:"genomic",domain:{chromosome:"1",interval:[1039e5,1041e5]}},xe:{field:"e1",type:"genomic"},x1:{field:"s2",type:"genomic",domain:{chromosome:"1"}},x1e:{field:"e2",type:"genomic"},color:{field:"s1",type:"nominal"},stroke:{value:"black"},strokeWidth:{value:.5},opacity:{value:.4},width:350,height:130}]}]},{tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2"],binSize:4},mark:"bar",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic",axis:"top"},y:{field:"peak_min",type:"quantitative"},ye:{field:"peak_max",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},stroke:{value:"black"},strokeWidth:{value:.2},tooltip:[{field:"position",type:"genomic",alt:"Position"},{field:"peak_min",type:"quantitative",alt:"min(Value)",format:".2"},{field:"peak_max",type:"quantitative",alt:"max(Value)",format:".2"},{field:"sample",type:"nominal",alt:"Sample"}],width:350,height:130}]}]},Lt={url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},Yt={higlass:{alignment:"overlay",title:"HiGlass",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic",domain:undefined,axis:"top"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right"}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:5}}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:5}}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},width:350,height:100},igv:{alignment:"overlay",title:"IGV",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic",domain:undefined,axis:"top"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic",axis:"top"},strokeWidth:{value:0},xe:{field:"end",type:"genomic"},color:{value:"white"},opacity:{value:.6},style:{linePattern:{type:"triangleLeft",size:10}}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic",axis:"top"},strokeWidth:{value:0},xe:{field:"end",type:"genomic"},color:{value:"white"},opacity:{value:.6},style:{linePattern:{type:"triangleRight",size:10}}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#0900B1"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:350,height:100},cyverse:{alignment:"overlay",title:"Cyverse-QUBES",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic",domain:undefined},xe:{field:"end",type:"genomic"},color:{value:"black"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic",axis:"top"},color:{value:"#999999"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic",axis:"top"},color:{value:"#999999"},style:{align:"right"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},color:{value:"lightgray"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic",axis:"top"},strokeWidth:{value:5},xe:{field:"end",type:"genomic"},color:{value:"gray"}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},color:{value:"#E2A6F5"},stroke:{value:"#BB57C9"},strokeWidth:{value:1}}],row:{field:"strand",type:"nominal",domain:["+","-"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],size:{value:15},width:350,height:100},gmgdb:{alignment:"overlay",title:"GmGDV",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic",domain:undefined,axis:"top"},xe:{field:"end",type:"genomic"},style:{dy:-14}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic",axis:"top"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic",axis:"top"},size:{value:15},style:{align:"right"}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},size:{value:10},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic",axis:"top"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["blue","red"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:350,height:100},give:{alignment:"overlay",title:"GIVE",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rect",x:{field:"end",type:"genomic",axis:"top"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:14}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},strokeWidth:{value:3}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#4050B4"},width:350,height:100},corces:{alignment:"overlay",title:"Corces et al.",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic",domain:undefined},xe:{field:"end",type:"genomic"},size:{value:8},style:{textFontSize:8,dy:-12}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:8},style:{textFontSize:8,dy:10}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rect",x:{field:"end",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:14}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},strokeWidth:{value:3}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#012DB8","#BE1E2C"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:350,height:100},g6:{alignment:"overlay",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic",domain:undefined,axis:"top"},xe:{field:"end",type:"genomic"},style:{dy:-14}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},size:{value:10},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["intron"]}],mark:"rule",x:{field:"start",type:"genomic",axis:"top"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{curve:"top"}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#B54F4A"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:350,height:100},g7:{alignment:"overlay",data:Lt,tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic",domain:undefined,axis:"top"},color:{value:"black"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},color:{value:"#666666"}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},color:{value:"#FF6666"}},{dataTransform:[{type:"filter",field:"type",oneOf:["intron"]}],mark:"rect",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},color:{value:"#99FEFF"}}],size:{value:30},row:{field:"strand",type:"nominal",domain:["+","-"]},stroke:{value:"#777777"},strokeWidth:{value:1},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:350,height:100}},Kt={layout:"linear",xDomain:{chromosome:"3",interval:[52168e3,5289e4]},arrangement:"horizontal",views:[{arrangement:"vertical",views:[Yt.higlass,Yt.corces,Yt.igv]},{arrangement:"vertical",views:[Yt.cyverse,Yt.gmgdb,Yt.g7]}]},It={xDomain:{chromosome:"3",interval:[1014e4,1016e4]},centerRadius:.1,layout:"linear",spacing:0,alignment:"stack",tracks:[Yt.higlass,{alignment:"overlay",data:{url:pt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:7,name:"significance",type:"nominal"}]},tracks:[{mark:"bar",x:{field:"start",type:"genomic"},y:{field:"significance",type:"nominal",domain:["Pathogenic","Pathogenic/Likely_pathogenic","Likely_pathogenic","Uncertain_significance","Likely_benign","Benign/Likely_benign","Benign"],baseline:"Uncertain_significance",range:[150,20]},size:{value:1},color:{value:"lightgray"},stroke:{value:"lightgray"},strokeWidth:{value:1},opacity:{value:.3},visibility:[{measure:"zoomLevel",target:"mark",threshold:1e5,operation:"LT",transitionPadding:1e5}]},{mark:"point",x:{field:"start",type:"genomic"},row:{field:"significance",type:"nominal",domain:["Pathogenic","Pathogenic/Likely_pathogenic","Likely_pathogenic","Uncertain_significance","Likely_benign","Benign/Likely_benign","Benign"]},size:{value:7},opacity:{value:.8},visibility:[{measure:"zoomLevel",target:"mark",threshold:1e6,operation:"LT",transitionPadding:1e6}]},{data:{url:ht,type:"multivec",row:"significance",column:"position",value:"count",categories:["Benign","Benign/Likely_benign","Likely_benign","Uncertain_significance","Likely_pathogenic","Pathogenic/Likely_pathogenic","Pathogenic"],binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"count",type:"quantitative",axis:"none"},color:{field:"significance",type:"nominal",domain:["Pathogenic","Pathogenic/Likely_pathogenic","Likely_pathogenic","Uncertain_significance","Likely_benign","Benign/Likely_benign","Benign"],range:["#CB3B8C","#CB71A3","#CB96B3","gray","#029F73","#5A9F8C","#5A9F8C"],legend:!0},visibility:[{measure:"zoomLevel",target:"mark",threshold:5e5,operation:"GT",transitionPadding:5e5}]}],color:{field:"significance",type:"nominal",domain:["Pathogenic","Pathogenic/Likely_pathogenic","Likely_pathogenic","Uncertain_significance","Likely_benign","Benign/Likely_benign","Benign"],range:["#CB3B8C","#CB71A3","#CB96B3","gray","#029F73","#5A9F8C","#5A9F8C"]},width:800,height:150}]},kt={sequence:{alignment:"overlay",data:{url:rt,type:"multivec",row:"base",column:"position",value:"count",categories:["A","T","G","C"],start:"start",end:"end"},tracks:[{mark:"bar",y:{field:"count",type:"quantitative",axis:"none"}},{dataTransform:[{type:"filter",field:"count",oneOf:[0],not:!0}],mark:"text",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:24},color:{value:"white"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:30,target:"mark"},{operation:"LT",measure:"zoomLevel",threshold:10,target:"track"}]}],x:{field:"position",type:"genomic"},color:{field:"base",type:"nominal",domain:["A","T","G","C"],legend:!0},text:{field:"base",type:"nominal"},style:{textFontWeight:"bold"},width:400,height:80},cytoband:{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"rect",color:{field:"Chromosome",type:"nominal",domain:["chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY"],range:["#F6F6F6","gray"]},x:{field:"chromStart",type:"genomic",aggregate:"min"},xe:{field:"chromEnd",aggregate:"max",type:"genomic"},strokeWidth:{value:2},stroke:{value:"gray"},visibility:[{operation:"greater-than",measure:"zoomLevel",threshold:1e8,target:"mark",transitionPadding:1e8}]},{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],text:{field:"Name",type:"nominal"},color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}]},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["white","#D9D9D9","#979797","#636363","black","#A0A0F2"]}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}],color:{value:"#B40101"}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}],color:{value:"#B40101"}}],x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},size:{value:20},stroke:{value:"gray"},strokeWidth:{value:.5},visibility:[{operation:"greater-than",measure:"width",threshold:3,transitionPadding:5,target:"mark"}],style:{outline:"white"},width:400,height:25}},Ht={arrangement:"vertical",views:[s(o({layout:"linear",xDomain:{chromosome:"1",interval:[3e6,3000010]}},kt.sequence),{width:800,height:100})]},Ct={arrangement:"vertical",views:[s(o({},It),{xDomain:{chromosome:"13",interval:[315e5,3315e4]}}),s(o({},It),{xDomain:{chromosome:"13",interval:[32e6,327e5]}}),s(o({},It),{xDomain:{chromosome:"13",interval:[32314e3,32402500]}})]};function St(e,i,t,l,d){return{static:!1,layout:"linear",centerRadius:.05,xDomain:l,spacing:.01,tracks:[{id:e,title:"Coverage",data:{type:"bam",url:"https://aveit.s3.amazonaws.com/higlass/bam/example_higlass.bam",indexUrl:"https://aveit.s3.amazonaws.com/higlass/bam/example_higlass.bam.bai"},dataTransform:[{type:"coverage",startField:"from",endField:"to"}],mark:"bar",x:{field:"from",type:"genomic"},xe:{field:"to",type:"genomic"},y:{field:"coverage",type:"quantitative",axis:"right",grid:!0},color:{value:"lightgray"},stroke:{value:"gray"},width:i,height:80},{alignment:"overlay",title:"hg38 | Genes",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15,outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#97A8B2","#D4C6BA"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:i,height:100},s(o({title:"Sequence"},kt.sequence),{style:{inlineLegend:!0,outline:"white"},width:i,height:40}),{alignment:"overlay",title:"Reads",data:{type:"bam",url:"https://aveit.s3.amazonaws.com/higlass/bam/example_higlass.bam",indexUrl:"https://aveit.s3.amazonaws.com/higlass/bam/example_higlass.bam.bai"},mark:"rect",tracks:[{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"from",endField:"to",groupField:"strand",padding:5,isPaddingBP:!0},newField:"pileup-row"}],x:{field:"from",type:"genomic"},xe:{field:"to",type:"genomic"},stroke:{value:"white"},strokeWidth:{value:.5}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"from",endField:"to",groupField:"strand",padding:5,isPaddingBP:!0},newField:"pileup-row"},{type:"subjson",field:"substitutions",genomicField:"pos",baseGenomicField:"from",genomicLengthField:"length"},{type:"filter",field:"type",oneOf:["sub"]}],x:{field:"pos_start",type:"genomic"},xe:{field:"pos_end",type:"genomic"},color:{field:"variant",type:"nominal",domain:["A","T","G","C","S","H","X","I","D"],legend:!0}}],y:{field:"pileup-row",type:"nominal",flip:!1},row:{field:"strand",type:"nominal",domain:["+","-"],padding:1},color:{field:"strand",type:"nominal",domain:["+","-"],range:null!=d?d:["#97A8B2","#D4C6BA"]},style:{outlineWidth:.5},width:i,height:t}]}}const ft=o({title:"Pileup Track Using BAM Data",subtitle:""},St("bam",1250,600,{chromosome:"1",interval:[136750,139450]})),Rt={title:"Breast Cancer Variant (Staaf et al. 2019)",subtitle:"Genetic characteristics of RAD51C- and PALB2-altered TNBCs",layout:"linear",arrangement:"vertical",centerRadius:.5,assembly:"hg19",spacing:40,style:{outlineWidth:1,outline:"lightgray",enableSmoothPath:!1},views:[{arrangement:"vertical",views:[{xOffset:190,layout:"circular",spacing:1,tracks:[{title:"Patient Overview (PD35930a)",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"rect"},{mark:"brush",x:{linkingId:"mid-scale"},strokeWidth:{value:1.5},stroke:{value:"#0070DC"},color:{value:"#AFD8FF"},opacity:{value:.5}}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","lightgray","gray","gray","black","#7B9CC8","#DC4542"]},size:{value:18},x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"gray"},strokeWidth:{value:.3},width:500,height:100},{title:"Putative Driver",alignment:"overlay",data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/SV/driver.df.scanb.complete.csv",type:"csv",chromosomeField:"Chr",genomicFields:["ChrStart","ChrEnd"]},dataTransform:[{type:"filter",field:"Sample",oneOf:["PD35930a"]}],tracks:[{mark:"text"},{mark:"triangleBottom",size:{value:5}}],x:{field:"ChrStart",type:"genomic"},xe:{field:"ChrEnd",type:"genomic"},text:{field:"Gene",type:"nominal"},color:{value:"black"},style:{textFontWeight:"normal",dx:-10,outlineWidth:0},width:500,height:40},{title:"LOH",style:{background:"lightgray",backgroundOpacity:.2},alignment:"overlay",data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/cancer/cnv.PD35930a.csv",headerNames:["id","chr","start","end","total_cn_normal","minor_cp_normal","total_cn_tumor","minor_cn_tumor"],type:"csv",chromosomeField:"chr",genomicFields:["start","end"]},dataTransform:[{type:"filter",field:"minor_cn_tumor",oneOf:["0"]}],tracks:[{mark:"rect"},{mark:"brush",x:{linkingId:"mid-scale"},strokeWidth:{value:1},stroke:{value:"#94C2EF"},color:{value:"#AFD8FF"}}],x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},color:{value:"#FB6A4B"},width:620,height:40},{title:"Gain",style:{background:"lightgray",backgroundOpacity:.2},alignment:"overlay",data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/cancer/cnv.PD35930a.csv",headerNames:["id","chr","start","end","total_cn_normal","minor_cp_normal","total_cn_tumor","minor_cn_tumor"],type:"csv",chromosomeField:"chr",genomicFields:["start","end"]},dataTransform:[{type:"filter",field:"total_cn_tumor",inRange:[4.5,900]}],tracks:[{mark:"rect"},{mark:"brush",x:{linkingId:"mid-scale"},strokeWidth:{value:0}}],x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},color:{value:"#73C475"},width:500,height:40},{title:"Structural Variant",data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/cancer/rearrangement.PD35930a.csv",type:"csv",genomicFieldsToConvert:[{chromosomeField:"chr1",genomicFields:["start1","end1"]},{chromosomeField:"chr2",genomicFields:["start2","end2"]}]},mark:"withinLink",x:{field:"start1",type:"genomic"},xe:{field:"end2",type:"genomic"},color:{field:"svclass",type:"nominal",legend:!0,domain:["tandem-duplication","translocation","delection","inversion"],range:["#569C4D","#4C75A2","#DA5456","#EA8A2A"]},stroke:{field:"svclass",type:"nominal",domain:["tandem-duplication","translocation","delection","inversion"],range:["#569C4D","#4C75A2","#DA5456","#EA8A2A"]},strokeWidth:{value:1},opacity:{value:.6},style:{legendTitle:"SV Class"},width:500,height:80}]},{linkingId:"mid-scale",xDomain:{chromosome:"1"},layout:"linear",tracks:[{style:{background:"#D7EBFF",outline:"#8DC1F2",outlineWidth:5},title:"Ideogram",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}]},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}]},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}]},{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],size:{value:12},color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}]}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","lightgray","gray","gray","black","#7B9CC8","#DC4542"]},size:{value:18},x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},text:{field:"Name",type:"nominal"},stroke:{value:"gray"},strokeWidth:{value:.3},width:500,height:30},{title:"Putative Driver",data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/SV/driver.df.scanb.complete.csv",type:"csv",chromosomeField:"Chr",genomicFields:["ChrStart","ChrEnd"]},dataTransform:[{type:"filter",field:"Sample",oneOf:["PD35930a"]}],mark:"text",x:{field:"ChrStart",type:"genomic"},xe:{field:"ChrEnd",type:"genomic"},text:{field:"Gene",type:"nominal"},color:{value:"black"},style:{textFontWeight:"normal",dx:-10},width:500,height:20},{alignment:"overlay",title:"hg38 | Genes",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15,outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:3.5},outline:"black",outlineWidth:0}},{mark:"brush",x:{linkingId:"detail-1"},strokeWidth:{value:0},color:{value:"gray"},opacity:{value:.3}},{mark:"brush",x:{linkingId:"detail-2"},strokeWidth:{value:0},color:{value:"gray"},opacity:{value:.3}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#97A8B2","#D4C6BA"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:400,height:100},{title:"LOH",style:{background:"lightgray",backgroundOpacity:.2},data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/cancer/cnv.PD35930a.csv",headerNames:["id","chr","start","end","total_cn_normal","minor_cp_normal","total_cn_tumor","minor_cn_tumor"],type:"csv",chromosomeField:"chr",genomicFields:["start","end"]},dataTransform:[{type:"filter",field:"minor_cn_tumor",oneOf:["0"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},color:{value:"#FB6A4B"},width:620,height:20},{title:"Gain",style:{background:"lightgray",backgroundOpacity:.2},data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/cancer/cnv.PD35930a.csv",headerNames:["id","chr","start","end","total_cn_normal","minor_cp_normal","total_cn_tumor","minor_cn_tumor"],type:"csv",chromosomeField:"chr",genomicFields:["start","end"]},dataTransform:[{type:"filter",field:"total_cn_tumor",inRange:[4.5,900]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},color:{value:"#73C475"},width:500,height:20},{title:"Structural Variant",data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/cancer/rearrangement.PD35930a.csv",type:"csv",genomicFieldsToConvert:[{chromosomeField:"chr1",genomicFields:["start1","end1"]},{chromosomeField:"chr2",genomicFields:["start2","end2"]}]},alignment:"overlay",tracks:[{mark:"withinLink",x:{field:"start1",type:"genomic"},xe:{field:"end2",type:"genomic"}},{mark:"point",x:{field:"start1",type:"genomic"},y:{value:400}},{mark:"point",x:{field:"end2",type:"genomic"},y:{value:400}}],color:{field:"svclass",type:"nominal",domain:["tandem-duplication","translocation","delection","inversion"],range:["#569C4D","#4C75A2","#DA5456","#EA8A2A"],legend:!0},stroke:{field:"svclass",type:"nominal",domain:["tandem-duplication","translocation","delection","inversion"],range:["#569C4D","#4C75A2","#DA5456","#EA8A2A"]},strokeWidth:{value:1},opacity:{value:.6},size:{value:4},tooltip:[{field:"start1",type:"genomic"},{field:"end2",type:"genomic"},{field:"svclass",type:"nominal"}],style:{legendTitle:"SV Class",bazierLink:!0},width:1e3,height:200}]}]},{arrangement:"horizontal",spacing:100,views:[o({},St("bam-1",450,310,{chromosome:"1",interval:[205e3,207e3]})),o({},St("bam-2",450,310,{chromosome:"1",interval:[49e4,496e3]}))]}]},Tt={title:"Matrix Visualization",subtitle:"Comparison of Micro-C and Hi-C for HFFc6 Cells",arrangement:"horizontal",xDomain:{chromosome:"7",interval:[777e5,81e6]},spacing:1,linkingId:"-",views:[{orientation:"vertical",yOffset:75,views:[{tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFc6_H3K4me3.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},title:"HFFc6_H3K4me3",mark:"bar",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"darkgreen"},height:600,width:40},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFc6_Atacseq.mRp.clN.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},title:"HFFc6_ATAC",mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"#E79F00"},height:600,width:40},{alignment:"overlay",tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFC6_CTCF.mRp.clN.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"#0072B2"}},{style:{backgroundOpacity:0},data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"start",type:"genomic"},size:{value:13},stroke:{value:"white"},strokeWidth:{value:1},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#CB7AA7"}},{style:{backgroundOpacity:0},title:"HFFC6_CTCF",data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:13},stroke:{value:"white"},strokeWidth:{value:1},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#029F73"}}],height:600,width:40}]}]},{spacing:30,views:[{spacing:0,arrangement:"vertical",views:[{tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFc6_H3K4me3.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},title:"HFFc6_H3K4me3",mark:"bar",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"darkgreen"},width:570,height:40},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFc6_Atacseq.mRp.clN.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},title:"HFFc6_ATAC",mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"#E79F00"},width:600,height:40},{alignment:"overlay",tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFC6_CTCF.mRp.clN.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"#0072B2"}},{style:{backgroundOpacity:0},data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"start",type:"genomic"},size:{value:13},stroke:{value:"white"},strokeWidth:{value:1},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#CB7AA7"}},{style:{backgroundOpacity:0},title:"HFFC6_CTCF",data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},stroke:{value:"white"},strokeWidth:{value:1},size:{value:13},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#029F73"}}],width:600,height:40}]},{tracks:[{title:"HFFc6_Micro-C",data:{url:Zt,type:"matrix"},mark:"rect",x:{field:"position1",type:"genomic",axis:"none"},y:{field:"position2",type:"genomic",axis:"none"},color:{field:"value",type:"quantitative",range:"warm"},width:600,height:600}]},{tracks:[{title:"Epilogos (hg38)",data:{url:ct,type:"multivec",row:"category",column:"position",value:"value",categories:["Active TSS","Flanking Active TSS","Transcr at gene 5\\' and 3\\'","Strong transcription","Weak transcription","Genic enhancers","Enhancers","ZNF genes & repeats","Heterochromatin","Bivalent/Poised TSS","Flanking Bivalent TSS/Enh","Bivalent Enhancer","Repressed PolyComb","Weak Repressed PolyComb","Quiescent/Low"],binSize:8},dataTransform:[{type:"filter",field:"value",inRange:[0,999999]}],mark:"bar",x:{field:"start",type:"genomic",axis:"none"},xe:{field:"end",type:"genomic"},y:{field:"value",type:"quantitative",axis:"none"},color:{field:"category",type:"nominal",range:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","gray"]},width:600,height:40}]}]},{arrangement:"vertical",spacing:0,views:[{tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFc6_H3K4me3.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},title:"HFFc6_H3K4me3",mark:"bar",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"darkgreen"},width:600,height:40},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFc6_Atacseq.mRp.clN.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},title:"HFFc6_ATAC",mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"#E79F00"},width:600,height:40},{alignment:"overlay",tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/HFFC6_CTCF.mRp.clN.bigWig",type:"bigwig",column:"position",value:"peak",binSize:8},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"none"},color:{value:"#0072B2"}},{style:{backgroundOpacity:0},data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"start",type:"genomic"},size:{value:13},stroke:{value:"white"},strokeWidth:{value:1},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#CB7AA7"}},{style:{backgroundOpacity:0},title:"HFFC6_CTCF",data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:13},stroke:{value:"white"},strokeWidth:{value:1},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#029F73"}}],width:600,height:40}]},{tracks:[{title:"HFFc6_Hi-C",data:{url:yt,type:"matrix"},mark:"rect",x:{field:"position1",type:"genomic",axis:"none"},y:{field:"position2",type:"genomic",axis:"none"},color:{field:"value",type:"quantitative",range:"warm"},width:600,height:600}]},{tracks:[{title:"Epilogos (hg38)",data:{url:ct,type:"multivec",row:"category",column:"position",value:"value",categories:["Active TSS","Flanking Active TSS","Transcr at gene 5\\' and 3\\'","Strong transcription","Weak transcription","Genic enhancers","Enhancers","ZNF genes & repeats","Heterochromatin","Bivalent/Poised TSS","Flanking Bivalent TSS/Enh","Bivalent Enhancer","Repressed PolyComb","Weak Repressed PolyComb","Quiescent/Low"],binSize:8},dataTransform:[{type:"filter",field:"value",inRange:[0,999999]}],mark:"bar",x:{field:"start",type:"genomic",axis:"none"},xe:{field:"end",type:"genomic"},y:{field:"value",type:"quantitative",axis:"none"},color:{field:"category",type:"nominal",range:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","gray"]},width:600,height:40}]}]}]}],style:{outlineWidth:0,background:"#F6F6F6"}},Jt={title:"Visual Linking",subtitle:"Change the position and range of brushes to update the detail view on the bottom",arrangement:"vertical",centerRadius:.4,views:[{spacing:40,arrangement:"horizontal",views:[{spacing:5,static:!0,layout:"circular",xDomain:{chromosome:"1"},alignment:"overlay",tracks:[{mark:"bar"},{mark:"brush",x:{linkingId:"detail"}}],data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal"},width:250,height:130},{layout:"linear",xDomain:{chromosome:"1"},alignment:"overlay",tracks:[{mark:"bar"},{mark:"brush",x:{linkingId:"detail"}}],data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal"},width:400,height:200}]},{layout:"linear",xDomain:{chromosome:"1",interval:[16e7,2e8]},linkingId:"detail",tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal"},width:690,height:200}]}]},vt={title:"Basic Idea of Semantic Zoom",subtitle:"Zoom in and out to see how different visual encoding (here, color) can be applied depending on the zoom level.",layout:"linear",centerRadius:.5,alignment:"overlay",data:{type:"multivec",url:mt,value:"y",row:"_",column:"x",categories:["_"],binSize:12},mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{outline:"black",outlineWidth:1},width:720,height:130,tracks:[{color:{value:"#E79F00"},visibility:[{operation:"GT",target:"mark",threshold:1e8,measure:"zoomLevel"}]},{color:{value:"#57B4E9"},visibility:[{operation:"GT",target:"mark",threshold:1e7,measure:"zoomLevel"},{operation:"LT",target:"mark",threshold:1e8,measure:"zoomLevel"}]},{color:{value:"#029F73"},visibility:[{operation:"GT",target:"mark",threshold:1e6,measure:"zoomLevel"},{operation:"LT",target:"mark",threshold:1e7,measure:"zoomLevel"}]},{color:{value:"#0072B2"},visibility:[{operation:"GT",target:"mark",threshold:1e5,measure:"zoomLevel"},{operation:"LT",target:"mark",threshold:1e6,measure:"zoomLevel"}]},{color:{value:"#D45E00"},visibility:[{operation:"GT",target:"mark",threshold:1e4,measure:"zoomLevel"},{operation:"LT",target:"mark",threshold:1e5,measure:"zoomLevel"}]},{color:{value:"#CB7AA7"},visibility:[{operation:"GT",target:"mark",threshold:1e3,measure:"zoomLevel"},{operation:"LT",target:"mark",threshold:1e4,measure:"zoomLevel"}]}]},Pt={title:"Mark Displacement",subtitle:"Reposition marks to address visual overlaps using `displacement` options",spacing:1,centerRadius:.8,xDomain:{chromosome:"17",interval:[4308e4,4312e4]},views:[{alignment:"overlay",xDomain:{chromosome:"3",interval:[1425e5,143e6]},data:{url:ut,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:0,name:"chr",type:"nominal"},{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"},{index:9,name:"exon_start",type:"nominal"},{index:10,name:"exon_end",type:"nominal"}]},dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15}],title:"hg38 | Transcript (Max. 15 Rows)",tracks:[{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic",axis:"top"},xe:void 0,size:{value:15}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-10}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"exonSplit",separator:",",flag:{field:"type",value:"exon"},fields:[{field:"exon_start",type:"genomic",newField:"start",chrField:"chr"},{field:"exon_end",type:"genomic",newField:"end",chrField:"chr"}]},{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",size:{value:10},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:5}}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:5}}}],row:{field:"row",type:"nominal"},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#0072B2","#D45E00"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{outline:"black"},width:700,height:500},{xDomain:{chromosome:"2",interval:[1268e5,1277e5]},tracks:[{alignment:"overlay",title:"Likely Benign",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=clinvar-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:7,name:"significance",type:"nominal"},{type:"nominal",index:3,name:"3"},{type:"nominal",index:4,name:"4"}]},dataTransform:[{type:"filter",field:"significance",oneOf:["Likely_benign"]},{type:"displace",boundingBox:{startField:"start",endField:"end",padding:5},method:"spread",newField:"a"}],tracks:[{mark:"point",size:{value:4},color:{value:"#029F73"},stroke:{value:"black"},strokeWidth:{value:1}},{mark:"text",color:{field:"3",type:"nominal",domain:["A","T","G","C"],legend:!0},text:{field:"3",type:"nominal"},y:{value:48}},{mark:"text",color:{field:"4",type:"nominal",domain:["A","T","G","C"]},text:{field:"4",type:"nominal"},y:{value:18}},{mark:"text",color:{value:"gray"},text:{value:""},y:{value:33}}],x:{field:"aStart",type:"genomic"},xe:{field:"aEnd",type:"genomic"},y:{value:5},opacity:{value:.8},style:{inlineLegend:!0},width:700,height:60},{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=clinvar-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:7,name:"significance",type:"nominal"}]},dataTransform:[{type:"filter",field:"significance",oneOf:["Likely_benign"]},{type:"displace",boundingBox:{startField:"start",endField:"end",padding:5},method:"spread",newField:"a"}],mark:"betweenLink",xe:{field:"start",type:"genomic"},x:{field:"aStart",type:"genomic"},color:{value:"#029F73"},stroke:{value:"lightgrey"},strokeWidth:{value:.5},opacity:{value:.8},width:700,height:60},{alignment:"overlay",tracks:[{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=clinvar-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:7,name:"significance",type:"nominal"}]},dataTransform:[{type:"filter",field:"significance",oneOf:["Likely_benign"]}],mark:"rect",color:{value:"lightgray"},stroke:{value:"lightgray"},strokeWidth:{value:.5},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},opacity:{value:.8}},{data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic",axis:"none"},size:{value:15}},{data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15}},{data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right"}},{data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:5}}},{data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#7585FF","#FF8A85"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:3},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:5}}}],width:700,height:100}]},{tracks:[{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=clinvar-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:7,name:"significance",type:"nominal"}]},displacement:{type:"pile",padding:3.5},mark:"point",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:3},color:{field:"significance",type:"nominal",domain:["Pathogenic","Pathogenic/Likely_pathogenic","Likely_pathogenic","Uncertain_significance","Likely_benign","Benign/Likely_benign","Benign"],range:["#CB3B8C","#CB71A3","#CB96B3","gray","#029F73","#5A9F8C","#5A9F8C"],legend:!0},width:700,height:260}]}],style:{outlineWidth:0}},Ft={arrangement:"vertical",views:[{static:!0,layout:"circular",alignment:"stack",tracks:[{alignment:"overlay",data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal"},stroke:{value:"black"},strokeWidth:{value:.3},tracks:[{mark:"bar"},{mark:"brush",x:{linkingId:"detail-1"},color:{value:"blue"}},{mark:"brush",x:{linkingId:"detail-2"},color:{value:"red"}}],style:{outlineWidth:0},width:500,height:100},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/rearrangements.bulk.1639.simple.filtered.pub",headerNames:["chr1","p1s","p1e","chr2","p2s","p2e","type","id","f1","f2","f3","f4","f5","f6"],separator:"\t",genomicFieldsToConvert:[{chromosomeField:"chr1",genomicFields:["p1s","p1e"]},{chromosomeField:"chr2",genomicFields:["p2s","p2e"]}]},dataTransform:[{type:"filter",field:"chr1",oneOf:["1","16","14","9","6","5","3"]},{type:"filter",field:"chr2",oneOf:["1","16","14","9","6","5","3"]}],mark:"withinLink",x:{field:"p1s",type:"genomic"},xe:{field:"p1e",type:"genomic"},x1:{field:"p2s",type:"genomic"},x1e:{field:"p2e",type:"genomic"},stroke:{field:"type",type:"nominal",domain:["deletion","inversion","translocation","tandem-duplication"]},strokeWidth:{value:.8},opacity:{value:.15},width:500,height:100}]},{spacing:10,arrangement:"horizontal",views:[{tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"bar",x:{field:"start",type:"genomic",linkingId:"detail-1",domain:{chromosome:"5"}},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal"},stroke:{value:"black"},strokeWidth:{value:.3},style:{background:"blue"},width:245,height:150}]},{tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"bar",x:{field:"start",type:"genomic",domain:{chromosome:"16"},linkingId:"detail-2"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},row:{field:"sample",type:"nominal"},color:{field:"sample",type:"nominal",legend:!0},stroke:{value:"black"},strokeWidth:{value:.3},style:{background:"red"},width:245,height:150}]}],style:{backgroundOpacity:.1}}]},wt={alignment:"overlay",title:"NC_045512.2 Genes",data:{type:"csv",url:"https://s3.amazonaws.com/gosling-lang.org/data/COVID/NC_045512.2-Genes.csv",genomicFields:["Start","Stop"]},tracks:[{mark:"rect",color:{value:"#0072B2"},stroke:{value:"white"},strokeWidth:{value:2}},{mark:"rule",color:{value:"white"},opacity:{value:.6},strokeWidth:{value:0},style:{linePattern:{type:"triangleRight",size:10}}},{mark:"text",text:{field:"Gene symbol",type:"nominal"},color:{value:"black"},stroke:{value:"white"},strokeWidth:{value:3},visibility:[{target:"mark",measure:"width",threshold:"|xe-x|",operation:"LTET",transitionPadding:30}]}],x:{field:"Start",type:"genomic"},xe:{field:"Stop",type:"genomic"},width:800,height:30},zt={title:"SARS-CoV-2",subtitle:"Data Source: WashU Virus Genome Browser, NCBI, GISAID",assembly:"unknown",layout:"linear",spacing:50,views:[s(o({},wt),{static:!0,layout:"linear",xDomain:{interval:[1,29903]},tracks:[...wt.tracks,{mark:"brush",x:{linkingId:"detail"}}]}),{centerRadius:0,xDomain:{interval:[1,29903]},linkingId:"detail",alignment:"stack",tracks:[{alignment:"overlay",title:"S Protein Annotation",data:{type:"csv",url:"https://s3.amazonaws.com/gosling-lang.org/data/COVID/sars-cov-2_Sprot_annot_sorted.bed",genomicFields:["Start","Stop"]},tracks:[{mark:"rect",color:{field:"Protein",type:"nominal",domain:["receptor-binding domain (RBD)","receptor-binding motif (RBM)","S1/S2 cleavage site","heptad repeat 1 (HR1)","heptad repeat 2 (HR2)"]},xe:{field:"Stop",type:"genomic"}},{mark:"text",text:{field:"Protein",type:"nominal"},color:{value:"#333"},stroke:{value:"white"},strokeWidth:{value:3},style:{textAnchor:"end"}}],x:{field:"Start",type:"genomic"},row:{field:"Protein",type:"nominal",domain:["receptor-binding domain (RBD)","receptor-binding motif (RBM)","S1/S2 cleavage site","heptad repeat 1 (HR1)","heptad repeat 2 (HR2)"]},width:800,height:80},wt,s(o({title:"NC_045512.2 Sequence"},kt.sequence),{data:s(o({},kt.sequence.data),{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=NC_045512_2-multivec"}),style:{inlineLegend:!0},width:800,height:40}),{title:"TRS-L-Dependent Recombination Events",data:{type:"csv",url:"https://s3.amazonaws.com/gosling-lang.org/data/COVID/TRS-L-dependent_recombinationEvents_sorted.bed",genomicFields:["Start1","Stop1","Start2","Stop2"],sampleLength:100},mark:"withinLink",x:{field:"Start1",type:"genomic"},xe:{field:"Stop1",type:"genomic"},x1:{field:"Start2",type:"genomic"},x1e:{field:"Stop2",type:"genomic"},stroke:{value:"#0072B2"},color:{value:"#0072B2"},opacity:{value:.1},width:800,height:400}]}]},Mt={title:"Between Links in Circular Layouts with Parallel Arrangements",layout:"circular",static:!0,spacing:.01,centerRadius:.3,alignment:"stack",tracks:[{data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1"],binSize:1},mark:"bar",x:{field:"start",type:"genomic",axis:"top"},xe:{field:"end",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative",axis:"right"},color:{value:"lightgray"},width:700,height:60},{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},mark:"rect",color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","#D9D9D9","#979797","#636363","black","#F0F0F0","#8D8D8D"]},x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"black"},strokeWidth:{value:.5},width:700,height:30},{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id",sampleLength:5e3},opacity:{value:.1},tracks:[{dataTransform:[{type:"filter",field:"chr",oneOf:["hs1"],not:!0}],mark:"betweenLink",x:{field:"p2_2",type:"genomic"},xe:{field:"p1",type:"genomic"},stroke:{value:"lightgray"},strokeWidth:{value:1}},{dataTransform:[{type:"filter",field:"chr",oneOf:["hs1"]}],mark:"betweenLink",x:{field:"p2_2",type:"genomic"},xe:{field:"p1",type:"genomic"},stroke:{value:"black"},strokeWidth:{value:1}}],width:1e3,height:300},{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},mark:"rect",color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","#D9D9D9","#979797","#636363","black","#F0F0F0","#8D8D8D"]},x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"black"},strokeWidth:{value:.5},width:700,height:30}]},Nt={title:"Single-cell Epigenomic Analysis",subtitle:"Corces et al. 2020",static:!0,layout:"linear",arrangement:"vertical",views:[{layout:"linear",xDomain:{chromosome:"3"},centerRadius:.8,tracks:[{alignment:"overlay",title:"chr3",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/cytogenetic_band.csv",type:"csv",chromosomeField:"Chr.",genomicFields:["ISCN_start","ISCN_stop","Basepair_start","Basepair_stop"],quantitativeFields:["Band","Density"]},tracks:[{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-1","acen-2"],not:!0}],color:{field:"Density",type:"nominal",domain:["","25","50","75","100"],range:["white","#D9D9D9","#979797","#636363","black"]},size:{value:20}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["gvar"]}],color:{value:"#A0A0F2"},size:{value:20}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-1"]}],color:{value:"#B40101"},size:{value:20}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-2"]}],color:{value:"#B40101"},size:{value:20}},{mark:"brush",x:{linkingId:"detail"},color:{value:"red"},opacity:{value:1},strokeWidth:{value:1},stroke:{value:"red"}}],x:{field:"Basepair_start",type:"genomic",axis:"none"},xe:{field:"Basepair_stop",type:"genomic"},stroke:{value:"black"},strokeWidth:{value:1},style:{outlineWidth:0},width:400,height:25}]},{xDomain:{chromosome:"3",interval:[52168e3,5289e4]},linkingId:"detail",mark:"bar",x:{field:"position",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"right"},style:{outline:"#20102F"},width:400,height:40,tracks:[{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/ExcitatoryNeurons-insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"Excitatory neurons",color:{value:"#F29B67"}},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/InhibitoryNeurons-insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"Inhibitory neurons",color:{value:"#3DC491"}},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/DopaNeurons_Cluster10_AllFrags_projSUNI2_insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"Dopaminergic neurons",mark:"bar",color:{value:"#565C8B"}},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/Microglia-insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"Microglia",color:{value:"#77C0FA"}},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/Oligodendrocytes-insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"Oligodendrocytes",mark:"bar",color:{value:"#9B46E5"}},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/Astrocytes-insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"Astrocytes",mark:"bar",color:{value:"#D73636"}},{data:{url:"https://s3.amazonaws.com/gosling-lang.org/data/OPCs-insertions_bin100_RIPnorm.bw",type:"bigwig",column:"position",value:"peak"},title:"OPCs",mark:"bar",color:{value:"#E38ADC"}},{alignment:"overlay",title:"Genes",data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},style:{outline:"#20102F"},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},size:{value:8},xe:{field:"end",type:"genomic"},style:{textFontSize:8,dy:-12}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:8},style:{textFontSize:8,dy:10}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rect",x:{field:"end",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:14}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},strokeWidth:{value:3}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:["#012DB8","#BE1E2C"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],width:400,height:80},{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=oligodendrocyte-plac-seq-bedpe",type:"beddb",genomicFields:[{name:"start",index:1},{name:"end",index:2}]},mark:"withinLink",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{flip:!0},strokeWidth:{value:1},color:{value:"none"},stroke:{value:"#F97E2A"},opacity:{value:.1},width:400,height:60},{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=microglia-plac-seq-bedpe",type:"beddb",genomicFields:[{name:"start",index:1},{name:"end",index:2}]},mark:"withinLink",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{flip:!0},strokeWidth:{value:1},color:{value:"none"},stroke:{value:"#50ADF9"},opacity:{value:.1},overlayOnPreviousTrack:!0,width:400,height:60},{title:"PLAC-seq (H3K4me3) Nott et al.",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=neuron-plac-seq-bedpe",type:"beddb",genomicFields:[{name:"start",index:1},{name:"end",index:2}]},mark:"withinLink",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{flip:!0},strokeWidth:{value:1},color:{value:"none"},stroke:{value:"#7B0EDC"},opacity:{value:.1},overlayOnPreviousTrack:!0,width:400,height:60}]}]},Qt={alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/cytogenetic_band.csv",type:"csv",chromosomeField:"Chr.",genomicFields:["ISCN_start","ISCN_stop","Basepair_start","Basepair_stop"],quantitativeFields:["Band","Density"]},tracks:[{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-1","acen-2"],not:!0}],text:{field:"Band",type:"nominal"},color:{value:"black"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}]},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-1","acen-2"],not:!0}],color:{field:"Density",type:"nominal",domain:["","25","50","75","100"],range:["white","#D9D9D9","#979797","#636363","black"]}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["gvar"]}],color:{value:"#A0A0F2"}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-1"]}],color:{value:"#B40101"}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen-2"]}],color:{value:"#B40101"}}],x:{field:"Basepair_start",type:"genomic"},xe:{field:"Basepair_stop",type:"genomic"},stroke:{value:"gray"},strokeWidth:{value:.5},width:600,height:20},jt={data:{url:mt,type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"]},mark:"area",x:{field:"position",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{field:"sample",type:"nominal"},width:600,height:30},Ut=[{name:"DEBUG",spec:{title:"Between-Connectivity In 2D Tracks",subtitle:"Between-link examples with three types, i.e., straight, corner, and curve",xDomain:{interval:[0,1e9]},style:{outlineWidth:.5},spacing:10,views:[{arrangement:"horizontal",views:[{yOffset:250,spacing:10,orientation:"vertical",tracks:[{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"rect",x:{field:"start",type:"genomic",axis:"left"},xe:{field:"end",type:"genomic"},row:{field:"sample",type:"nominal",legend:!1},color:{field:"peak",type:"quantitative",legend:!1,range:"grey"},width:100,height:500},{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},mark:"withinLink",x:{field:"s1",type:"genomic",axis:"none"},xe:{field:"s2",type:"genomic"},flipY:!1,color:{value:"#3275B4"},size:{value:2},stroke:{value:"#3275B4"},opacity:{value:.2},width:100,height:500}]},{arrangement:"vertical",views:[{spacing:10,tracks:[{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},mark:"withinLink",x:{field:"s1",type:"genomic"},xe:{field:"s2",type:"genomic"},flipY:!1,color:{value:"#3275B4"},size:{value:2},stroke:{value:"#3275B4"},opacity:{value:.2},width:500,height:100},{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},mark:"withinLink",x:{field:"s1",type:"genomic"},xe:{field:"s2",type:"genomic"},flipY:!1,color:{value:"#3275B4"},size:{value:2},stroke:{value:"#3275B4"},opacity:{value:.2},width:500,height:100}]},{tracks:[{title:"Curved Connection",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},tracks:[{mark:"betweenLink",x:{field:"s1",type:"genomic",axis:"none"},y:{field:"s2",type:"genomic",axis:"none"}},{mark:"betweenLink",y:{field:"s1",type:"genomic",axis:"none"},x:{field:"s2",type:"genomic",axis:"none"}},{mark:"point",x:{field:"s1",type:"genomic",axis:"none"},y:{field:"s2",type:"genomic",axis:"none"},opacity:{value:1}},{mark:"point",y:{field:"s1",type:"genomic",axis:"none"},x:{field:"s2",type:"genomic",axis:"none"},opacity:{value:1}}],color:{value:"#3275B4"},size:{value:1},stroke:{value:"#3275B4"},opacity:{value:.2},width:500,height:500}]}]},{xDomain:{interval:[0,1e9]},yOffset:250,spacing:10,orientation:"vertical",tracks:[{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},mark:"withinLink",x:{field:"s1",type:"genomic",axis:"none"},xe:{field:"s2",type:"genomic"},flipY:!0,color:{value:"#3275B4"},size:{value:2},stroke:{value:"#3275B4"},opacity:{value:.2},width:100,height:500},{data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",type:"multivec",row:"sample",column:"position",value:"peak",categories:["sample 1","sample 2","sample 3","sample 4"],binSize:4},mark:"rect",x:{field:"start",type:"genomic",axis:"right"},xe:{field:"end",type:"genomic"},row:{field:"sample",type:"nominal",legend:!1},color:{field:"peak",type:"quantitative",legend:!1,range:"rdbu"},width:100,height:500}]}]},{views:[{xOffset:250,spacing:10,tracks:[{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},mark:"withinLink",x:{field:"s1",type:"genomic",axis:"none"},xe:{field:"s2",type:"genomic"},flipY:!0,color:{value:"#3275B4"},size:{value:2},stroke:{value:"#3275B4"},opacity:{value:.2},width:500,height:100},{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",type:"csv",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},style:{linkConnectionType:"corner"},mark:"withinLink",x:{field:"s1",type:"genomic",axis:"bottom"},xe:{field:"s2",type:"genomic"},flipY:!0,color:{value:"#3275B4"},size:{value:2},stroke:{value:"#3275B4"},opacity:{value:.2},width:500,height:100}]}]}]},id:"DEBUG",hidden:!0},{name:"Basic Example: Visual Encoding",id:"VISUAL_ENCODING",spec:xt},{name:"Basic Example: Circular Visual Encoding",id:"VISUAL_ENCODING_CIRCULAR",spec:Vt},{name:"Basic Example: Band Connection",id:"BAND",spec:{layout:"linear",xDomain:{chromosome:"1",interval:[1039e5,1041e5]},spacing:0,tracks:[{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"rect",x:{field:"s1",type:"genomic"},xe:{field:"e1",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},tooltip:[{field:"s1",type:"genomic",alt:'<b style="color:green">Start Position</b>'},{field:"e1",type:"genomic",alt:'<b style="color:green">End Position</b>'}],opacity:{value:.15},color:{value:"#85B348"},width:500,height:16},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"betweenLink",x:{field:"s1",type:"genomic"},xe:{field:"e1",type:"genomic"},x1:{field:"s2",type:"genomic"},x1e:{field:"e2",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},opacity:{value:.15},color:{value:"#85B348"},style:{outlineWidth:0},width:500,height:100},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"rect",x:{field:"s2",type:"genomic"},xe:{field:"e2",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},tooltip:[{field:"s2",type:"genomic",alt:'<b style="color:green">Start Position</b>'},{field:"e2",type:"genomic",alt:'<b style="color:green">End Position</b>'}],opacity:{value:.15},color:{value:"#85B348"},width:500,height:16},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"betweenLink",x1:{field:"s1",type:"genomic"},x1e:{field:"e1",type:"genomic"},x:{field:"s2",type:"genomic"},xe:{field:"e2",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},opacity:{value:.15},color:{value:"#85B348"},style:{outlineWidth:0},width:500,height:100},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"rect",x:{field:"s1",type:"genomic"},xe:{field:"e1",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},tooltip:[{field:"s1",type:"genomic",alt:'<b style="color:green">Start Position</b>'},{field:"e1",type:"genomic",alt:'<b style="color:green">End Position</b>'}],opacity:{value:.15},color:{value:"#85B348"},width:500,height:16},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"betweenLink",x:{field:"s1",type:"genomic"},xe:{field:"e1",type:"genomic"},x1:{field:"s2",type:"genomic"},x1e:{field:"e2",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},opacity:{value:.15},color:{value:"#85B348"},style:{outlineWidth:0},width:500,height:100},{data:{type:"csv",url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",chromosomeField:"c2",genomicFields:["s1","e1","s2","e2"]},mark:"rect",x:{field:"s2",type:"genomic"},xe:{field:"e2",type:"genomic"},stroke:{value:"#4C6629"},strokeWidth:{value:.8},tooltip:[{field:"s2",type:"genomic",alt:'<b style="color:green">Start Position</b>'},{field:"e2",type:"genomic",alt:'<b style="color:green">End Position</b>'}],opacity:{value:.15},color:{value:"#85B348"},width:500,height:16}]}},{name:"Basic Example: Visual Linking",id:"LINKING",spec:Jt},{name:"Basic Example: Layouts and Arrangements",id:"LAYOUT_AND_ARRANGEMENT_1",spec:Wt,hidden:!0},{name:"Layouts and Arrangements 2",id:"LAYOUT_AND_ARRANGEMENT_2",spec:gt,hidden:!0},{name:"Basic Example: Basic Idea of Semantic Zoom",id:"BASIC_SEMANTIC_ZOOM",spec:vt,hidden:!0},{name:"Basic Example: Mark Displacement",id:"MARK_DISPLACEMENT",spec:Pt},{name:"Basic Example: Circular Overview + Linear Detail Views",id:"CIRCULAR_OVERVIEW_LINEAR_DETAIL",spec:Ft},{name:"Multi-Scale Sequence Track",id:"SEQUENCE",spec:Ht},{name:"Multi-Scale Clinvar Lollipop Plot",id:"SEMANTIC_ZOOM",spec:Ct},{name:"Ideograms",id:"CYTOBANDS",spec:{static:!0,layout:"linear",centerRadius:.2,arrangement:"parallel",views:[{xDomain:{chromosome:"1"},tracks:[s(o({},jt),{width:1e3}),s(o({},Qt),{width:1e3})]},{xDomain:{chromosome:"2"},tracks:[s(o({},jt),{width:970}),s(o({},Qt),{width:970})]},{xDomain:{chromosome:"3"},tracks:[s(o({},jt),{width:800}),s(o({},Qt),{width:800})]},{xDomain:{chromosome:"4"},tracks:[s(o({},jt),{width:770}),s(o({},Qt),{width:770})]},{xDomain:{chromosome:"5"},tracks:[s(o({},jt),{width:740}),s(o({},Qt),{width:740})]}]}},{name:"Custom Gene Annotation",id:"GENE_ANNOTATION",spec:Kt},{name:"Comparative Matrices (Micro-C vs. Hi-C)",id:"MATRIX_HFFC6",spec:Tt},{name:"Circos",id:"CIRCOS",spec:{title:"Circos",description:"http://circos.ca/intro/genomic_data/",layout:"circular",static:!0,spacing:1,centerRadius:.3,alignment:"stack",tracks:[{data:{type:"vector",url:"https://resgen.io/api/v1/tileset_info/?d=VLFaiSVjTjW6mkbjRjWREA",column:"position",value:"peak"},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative",axis:"right"},color:{value:"#EEEDA1"},width:700,height:60},{data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},mark:"rect",color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar","acen"],range:["white","#D9D9D9","#979797","#636363","black","#F0F0F0","#8D8D8D"]},x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"lightgray"},strokeWidth:{value:.5},width:700,height:30},{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id"},opacity:{value:.4},tracks:[{dataTransform:[{type:"filter",field:"chr",oneOf:["hs1"],not:!0}],mark:"withinLink",x:{field:"p1",type:"genomic"},xe:{field:"p1_2",type:"genomic"},x1:{field:"p2",type:"genomic"},x1e:{field:"P2_2",type:"genomic"},stroke:{value:"lightgray"},strokeWidth:{value:1}},{dataTransform:[{type:"filter",field:"chr",oneOf:["hs1"]}],mark:"withinLink",x:{field:"p1",type:"genomic"},xe:{field:"p1_2",type:"genomic"},x1:{field:"p2",type:"genomic"},x1e:{field:"P2_2",type:"genomic"},stroke:{field:"chr_2",type:"nominal",range:["#E79F00","#029F73","#0072B2","#CB7AA7","#D45E00","#57B4E9","#EFE441"]},strokeWidth:{value:1.5}}],width:700,height:300}]}},{name:"Circular Range (Inspired By Weather Radials)",id:"Circular Range",spec:{layout:"circular",static:!0,spacing:1,centerRadius:.3,alignment:"stack",tracks:[{data:{type:"vector",url:"https://resgen.io/api/v1/tileset_info/?d=VLFaiSVjTjW6mkbjRjWREA",column:"position",value:"peak"},mark:"bar",x:{field:"position",type:"genomic",axis:"top"},y:{field:"peak",type:"quantitative"},color:{value:"#EEEDA1"},width:700,height:60}]},hidden:!0},{name:"SARS-CoV-2",id:"SARS_COV_2",spec:zt},{name:"Corces et al. 2020",id:"CORCES_ET_AL",spec:Nt},{name:"Circular Between Bands",id:"CIRCULAR_BETWEEN_BANDS",spec:Mt,underDevelopment:!0},{name:"Gremlin (O'Brien et al. 2010)",id:"GREMLIN",spec:{title:"Gremlin (O'Brien et al. 2010)",views:[{linkingId:"view1",xDomain:{chromosome:"5",interval:[0,8e7]},tracks:[{alignment:"overlay",title:"Chromosome 5",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["#C0C0C0","#808080","#404040","black","black","black"]},size:{value:20}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]}],size:{value:10},color:{value:"#B74780"}},{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["gpos25","gpos50","gpos100"]}],text:{field:"Name",type:"nominal"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],size:{value:6},style:{dy:16,outline:"white"}},{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["gneg","gpos75","gvar"]}],text:{field:"Name",type:"nominal"},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],size:{value:6},style:{dy:-16,outline:"white"}},{mark:"brush",x:{linkingId:"view2"},strokeWidth:{value:0}}],x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},color:{value:"black"},stroke:{value:"white"},strokeWidth:{value:1},style:{outline:"white"},width:800,height:60},{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id",sampleLength:2e3},dataTransform:[{type:"filter",field:"chr",oneOf:["hs5","hs4","hs6"]},{type:"filter",field:"chr_2",oneOf:["hs5","hs4","hs6"]}],tracks:[{mark:"rect"},{mark:"brush",x:{linkingId:"view2"},strokeWidth:{value:0}}],x:{field:"p1",type:"genomic"},xe:{field:"p2",type:"genomic"},row:{field:"chr_2",type:"nominal",domain:["hs5","hs4","hs6"]},color:{field:"chr_2",type:"nominal",domain:["hs5","hs4","hs6"],range:["#62AAD7","#D1A74F","#6CB74C"]},stroke:{field:"chr_2",type:"nominal",domain:["hs5","hs4","hs6"],range:["#62AAD7","#D1A74F","#6CB74C"]},strokeWidth:{value:2},opacity:{value:.4},style:{outline:"black",outlineWidth:1},width:800,height:80},{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id",sampleLength:1e3},dataTransform:[{type:"filter",field:"chr",oneOf:["hs5"]},{type:"filter",field:"chr_2",oneOf:["hs5"]}],tracks:[{mark:"withinLink"},{mark:"brush",x:{linkingId:"view2"},strokeWidth:{value:0}}],x:{field:"p1",type:"genomic",linkingId:"view1"},xe:{field:"p1_2",type:"genomic"},x1:{field:"p2",type:"genomic"},x1e:{field:"P2_2",type:"genomic"},stroke:{value:"#6CB74C"},strokeWidth:{value:1},opacity:{value:.4},style:{outline:"white"},width:800,height:220}]},{views:[{tracks:[{title:"Region of Interest",data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id",sampleLength:1e3},dataTransform:[{type:"filter",field:"chr",oneOf:["hs5","hs4","hs6"]},{type:"filter",field:"chr_2",oneOf:["hs5","hs4","hs6"]}],mark:"withinLink",x:{field:"p1",type:"genomic",linkingId:"view2",axis:"bottom",domain:{chromosome:"5",interval:[68e6,71e6]}},xe:{field:"p2",type:"genomic"},row:{field:"chr_2",type:"nominal",domain:["hs5","hs4","hs6","empty"]},color:{value:"none"},stroke:{field:"chr_2",type:"nominal",domain:["hs5","hs4","hs6"],range:["#62AAD7","#D1A74F","#6CB74C"]},strokeWidth:{value:6},opacity:{value:.4},style:{outline:"lightgray",outlineWidth:3,background:"#F8F8F8"},width:800,height:200}]},{views:[{tracks:[{title:"Rearrangement View",data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id",sampleLength:1e3},dataTransform:[{type:"filter",field:"chr",oneOf:["hs5"]}],mark:"withinLink",x:{field:"p1",type:"genomic",axis:"bottom",domain:{chromosome:"5",interval:[69276e3,69282e3]}},xe:{field:"p2",type:"genomic"},color:{value:"none"},stroke:{value:"#62AAD7"},strokeWidth:{value:6},opacity:{value:.4},style:{outline:"lightgray",outlineWidth:3},width:600,height:200}]}]}]}]},underDevelopment:!0},{name:"GIVE (Cao et al. 2018)",id:"GIVE",spec:{title:"GIVE",subtitle:"Reimplementation of GenoCAT examples",spacing:60,arrangement:"vertical",views:[{layout:"linear",tracks:[{alignment:"overlay",title:"Genes",data:{url:"https://resgen.io/api/v1/tileset_info/?d=M9A9klpwTci5Vf4bHZ864g",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rect",x:{field:"end",type:"genomic",domain:{chromosome:"17",interval:[2e5,8e5]},axis:"top"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:14}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},strokeWidth:{value:3}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#4050B4"},width:700,height:50},{data:{url:"https://resgen.io/api/v1/tileset_info/?d=Zz3CBDSqQ3ySrOSe2yj1eg",type:"vector",column:"position",value:"peak",binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:"#8A96D5"},stroke:{value:"#3C4DB4"},strokeWidth:{value:.5},width:700,height:40},{data:{url:"https://resgen.io/api/v1/tileset_info/?d=dc_SOjdCRgq_8PYf6W--7w",type:"vector",column:"position",value:"peak",binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:"#8A96D5"},stroke:{value:"#3C4DB4"},strokeWidth:{value:.5},width:700,height:40},{data:{url:"https://resgen.io/api/v1/tileset_info/?d=Nolbrk9kS3CE0jJL_7OW1g",type:"vector",column:"position",value:"peak",binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:"#8A96D5"},stroke:{value:"#3C4DB4"},strokeWidth:{value:.5},width:700,height:40},{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}]},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}]},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}]}],x:{field:"chromStart",type:"genomic",domain:{chromosome:"17",interval:[2e7,5e7]}},xe:{field:"chromEnd",type:"genomic"},color:{value:"white"},size:{value:14},stroke:{value:"black"},strokeWidth:{value:.5},width:700,height:40},{data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id"},dataTransform:[{type:"filter",field:"chr",oneOf:["hs17"]}],mark:"rect",x:{field:"p1",type:"genomic"},xe:{field:"p2",type:"genomic"},color:{field:"chr_2",type:"nominal",domain:["chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY"]},opacity:{value:.5},size:{value:14},overlayOnPreviousTrack:!0,width:700,height:40}]},{layout:"linear",tracks:[{alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}]},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}]},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}]}],x:{field:"chromStart",type:"genomic",axis:"none"},xe:{field:"chromEnd",type:"genomic"},color:{value:"white"},size:{value:14},stroke:{value:"black"},strokeWidth:{value:.5},width:700,height:40},{data:{url:"https://raw.githubusercontent.com/vigsterkr/circos/master/data/5/segdup.txt",type:"csv",headerNames:["id","chr","p1","p2"],chromosomePrefix:"hs",chromosomeField:"chr",genomicFields:["p1","p2"],separator:" ",longToWideId:"id"},dataTransform:[{type:"filter",field:"chr_2",oneOf:["hs1"]}],mark:"rect",x:{field:"p1_2",type:"genomic"},xe:{field:"p2_2",type:"genomic"},color:{field:"chr",type:"nominal",domain:["chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY"]},opacity:{value:.5},size:{value:14},overlayOnPreviousTrack:!0,width:700,height:40},{data:{url:"https://resgen.io/api/v1/tileset_info/?d=Zz3CBDSqQ3ySrOSe2yj1eg",type:"vector",column:"position",value:"peak",binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:"#8A96D5"},stroke:{value:"#3C4DB4"},strokeWidth:{value:.5},width:700,height:40},{data:{url:"https://resgen.io/api/v1/tileset_info/?d=dc_SOjdCRgq_8PYf6W--7w",type:"vector",column:"position",value:"peak",binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:"#8A96D5"},stroke:{value:"#3C4DB4"},strokeWidth:{value:.5},width:700,height:40},{data:{url:"https://resgen.io/api/v1/tileset_info/?d=Nolbrk9kS3CE0jJL_7OW1g",type:"vector",column:"position",value:"peak",binSize:4},mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:"#8A96D5"},stroke:{value:"#3C4DB4"},strokeWidth:{value:.5},width:700,height:40},{alignment:"overlay",title:"Genes",data:{url:"https://resgen.io/api/v1/tileset_info/?d=M9A9klpwTci5Vf4bHZ864g",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rect",x:{field:"end",type:"genomic",domain:{chromosome:"1",interval:[109e6,112e6]},axis:"bottom"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:7}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},size:{value:14}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"rule",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},strokeWidth:{value:3}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{value:"#4050B4"},width:700,height:50}]}],style:{outlineWidth:0}},underDevelopment:!0},{name:"Breast Cancer Variant (Staaf et al. 2019)",id:"CANCER_VARIANT",spec:Rt,underDevelopment:!0},{name:"BAM file pileup tracks",id:"BAM_PILEUP",spec:ft,underDevelopment:!0},{name:"Track Template",id:"TEMPLATE",spec:{title:"Track Template In Gosling.js",subtitle:"Gosling.js enables track templates! This allows to create complex visualization more easily.",spacing:0,layout:"linear",centerRadius:.5,style:{enableSmoothPath:!0},views:[{xDomain:{chromosome:"3",interval:[52168e3,5289e4]},tracks:[{template:"gene",data:{url:bt,type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},encoding:{startPosition:{field:"start"},endPosition:{field:"end"},strandColor:{field:"strand",range:["gray"]},strandRow:{field:"strand"},opacity:{value:.4},geneHeight:{value:30},geneLabel:{field:"name"},geneLabelFontSize:{value:30},geneLabelColor:{field:"strand",range:["gray"]},geneLabelStroke:{value:"white"},geneLabelStrokeThickness:{value:4},geneLabelOpacity:{value:1},type:{field:"type"}},width:800,height:300}]},{xDomain:{chromosome:"1",interval:[77925299,77925320]},tracks:[{template:"sequence",data:{url:rt,type:"multivec",row:"base",column:"position",value:"count",categories:["A","T","G","C"],start:"start",end:"end"},encoding:{barLength:{field:"count",type:"quantitative"},baseBackground:{field:"base",type:"nominal"},baseLabelColor:{field:"base",type:"nominal"},position:{field:"position",type:"genomic"},startPosition:{field:"start",type:"genomic"},endPosition:{field:"end",type:"genomic"}},width:800,height:100}]},{xDomain:{chromosome:"1"},tracks:[{template:"ideogram",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},encoding:{startPosition:{field:"chromStart"},endPosition:{field:"chromEnd"},stainBackgroundColor:{field:"Stain"},stainLabelColor:{field:"Stain"},name:{field:"Name"},stainStroke:{value:"black"}},width:800,height:60}]}]},underDevelopment:!0}].filter((e=>!e.hidden));const Bt={width:20,height:20,viewBox:"0 0 16 16",path:["M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],stroke:"none",fill:"currentColor"},Dt={width:20,height:20,viewBox:"0 0 16 16",path:["M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z","M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"],stroke:"none",fill:"currentColor"},Ot={width:20,height:20,viewBox:"0 0 16 16",path:["M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z","M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"],stroke:"none",fill:"currentColor"},Et={width:20,height:20,viewBox:"0 0 16 16",path:["M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.93 4.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"],stroke:"none",fill:"currentColor"},At={width:20,height:20,viewBox:"0 0 16 16",path:["M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z","M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"],stroke:"none",fill:"currentColor"},_t={width:20,height:20,viewBox:"0 0 16 16",path:["M12.258 3H3.747l-.082 2.46h.478c.26-1.544.76-1.783 2.694-1.845l.424-.013v7.827c0 .663-.144.82-1.3.923v.52h4.082v-.52c-1.162-.103-1.306-.26-1.306-.923V3.602l.43.013c1.935.062 2.434.301 2.694 1.846h.479L12.258 3z"],stroke:"none",fill:"currentColor"},$t={width:20,height:20,viewBox:"0 0 15.011423110961914 21.098501205444336",path:["M15.006 10.57c0-1.948-.618-3.397-2.066-4.844a1 1 0 0 0-1.414 1.415c1.079 1.078 1.48 2.007 1.48 3.43a5.46 5.46 0 0 1-1.611 3.887c-1.004 1.003-2.078 1.502-3.428 1.593l1.246-1.247a1 1 0 1 0-1.414-1.414l-3.707 3.707 3.707 3.707a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414l-1.337-1.336c1.923-.082 3.542-.792 4.933-2.18a7.447 7.447 0 0 0 2.197-5.304zm-13 .027c0-1.469.572-2.85 1.61-3.889C4.627 5.7 5.71 5.2 7.075 5.114L5.799 6.39a.999.999 0 0 0 .707 1.708.997.997 0 0 0 .707-.293l3.707-3.707L7.213.39a1 1 0 1 0-1.414 1.414l1.31 1.311c-1.913.086-3.524.796-4.906 2.18a7.447 7.447 0 0 0-2.197 5.302c0 1.948.618 3.397 2.066 4.844a.997.997 0 0 0 1.414 0 1 1 0 0 0 0-1.416c-1.08-1.077-1.48-2.006-1.48-3.428z"],stroke:"none",fill:"currentColor"},qt={width:20,height:20,viewBox:"0 0 16 16",path:["M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"],stroke:"none",fill:"currentColor"},el={width:20,height:20,viewBox:"0 0 16 16",path:["M8.646 5.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 8 8.646 6.354a.5.5 0 0 1 0-.708zm-1.292 0a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L5.707 8l1.647-1.646a.5.5 0 0 0 0-.708z","M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z","M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"],stroke:"none",fill:"currentColor"},il={width:20,height:20,viewBox:"0 0 16 16",path:["M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"],stroke:"none",fill:"currentColor"},tl={width:20,height:20,viewBox:"0 0 16 16",path:["M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"],stroke:"none",fill:"currentColor"},ll={width:20,height:20,viewBox:"0 0 16 16",path:["M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H5zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2V2z"],stroke:"none",fill:"currentColor"},dl={width:22,height:22,viewBox:"0 0 2048 1792",path:["M0 896q0-130 51-248.5t136.5-204 204-136.5 248.5-51h768q130 0 248.5 51t204 136.5 136.5 204 51 248.5-51 248.5-136.5 204-204 136.5-248.5 51h-768q-130 0-248.5-51t-204-136.5-136.5-204-51-248.5zm1408 512q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5-198.5 40.5-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5z"],stroke:"none",fill:"currentColor"},al={width:22,height:22,viewBox:"0 0 2048 1792",path:["M1152 896q0-104-40.5-198.5t-109.5-163.5-163.5-109.5-198.5-40.5-198.5 40.5-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5 198.5-40.5 163.5-109.5 109.5-163.5 40.5-198.5zm768 0q0-104-40.5-198.5t-109.5-163.5-163.5-109.5-198.5-40.5h-386q119 90 188.5 224t69.5 288-69.5 288-188.5 224h386q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5zm128 0q0 130-51 248.5t-136.5 204-204 136.5-248.5 51h-768q-130 0-248.5-51t-204-136.5-136.5-204-51-248.5 51-248.5 136.5-204 204-136.5 248.5-51h768q130 0 248.5 51t204 136.5 136.5 204 51 248.5z"],stroke:"none",fill:"currentColor"},nl={width:20,height:20,viewBox:"0 0 16 16",path:["M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z","M4.603 14.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.697 19.697 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.712 5.712 0 0 1-.911-.95 11.651 11.651 0 0 0-1.997.406 11.307 11.307 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.266.266 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.71 12.71 0 0 1 1.01-.193 11.744 11.744 0 0 1-.51-.858 20.801 20.801 0 0 1-.5 1.05zm2.446.45c.15.163.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.876 3.876 0 0 0-.612-.053zM8.078 7.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z"],stroke:"none",fill:"currentColor"},ol={width:18,height:18,viewBox:"0 0 24 24",path:["M7 4v16l13 -8z"],stroke:"none",fill:"currentColor"},sl={width:18,height:18,viewBox:"0 0 24 24",path:["M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5","M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"],stroke:"currentColor",fill:"none"},ml=-1!==Ut.findIndex((e=>e.forceShow))?Ut.findIndex((e=>e.forceShow)):0,cl=(e,i)=>O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 400",width:e,height:i},O.createElement("rect",{style:{fill:"none"},width:"400",height:"400"}),O.createElement("circle",{cx:"110.62",cy:"129.64",r:"41.69"}),O.createElement("circle",{style:{fill:"#fff"},cx:"124.14",cy:"114.12",r:"10.76"}),O.createElement("circle",{cx:"288.56",cy:"129.64",r:"41.69"}),O.createElement("circle",{style:{fill:"#fff"},cx:"302.07",cy:"114.12",r:"10.76"}),O.createElement("path",{style:{fill:"#e18241"},d:"M313.1,241.64l8.61-22.09a430.11,430.11,0,0,0-88-15.87L224,225.63A384.54,384.54,0,0,1,313.1,241.64Z"}),O.createElement("path",{style:{fill:"#e18241"},d:"M208.63,260.53a299.77,299.77,0,0,1,90.56,16.79L308,254.79a371.68,371.68,0,0,0-90-15.47Z"}),O.createElement("path",{style:{fill:"#e18241"},d:"M174.4,225.56l-9-22a431.34,431.34,0,0,0-88,15.43l8.9,22A385.08,385.08,0,0,1,174.4,225.56Z"}),O.createElement("path",{style:{fill:"#e18241"},d:"M100.71,276.35a300.51,300.51,0,0,1,87.91-15.82L180,239.29a372.51,372.51,0,0,0-88.3,14.76Z"}),O.createElement("path",{style:{fill:"#e18241"},d:"M106.52,290.71c27.53,13.92,59.05,21.34,92.05,21.34h0c33.68,0,65.83-7.72,93.75-22.2a291.31,291.31,0,0,0-186.33-.4Z"})),rl=(e,i,t,l)=>O.createElement("svg",{key:ne(e),xmlns:"http://www.w3.org/2000/svg",width:null!=i?i:e.width,height:null!=t?t:e.height,viewBox:e.viewBox,strokeWidth:"2",stroke:e.stroke,fill:null!=l?l:e.fill,strokeLinecap:"round",strokeLinejoin:"round"},e.path.map((e=>O.createElement("path",{key:e,d:e})))),bl=e=>void 0!==e?`{\n\t// ${e}\n}`:"{}",pl=()=>Math.min(500,window.innerWidth);ue.render(O.createElement(Xe,null,O.createElement(Ge,{component:function(e){var i;const t=window.innerWidth<=500,l=de.parse(e.location.search,{ignoreQueryPrefix:!0}),d=(null==l?void 0:l.spec)?ae.uncrush(l.spec):null,a=null!=(i=null==l?void 0:l.gist)?i:null,n=(null==l?void 0:l.example)?Ut.map((e=>e.id)).indexOf(l.example):ml,m=a?bl():ne(null!=d?d:Ut[ml].spec),c=D.exports.useRef([]),[r,b]=D.exports.useState(!1),[p,h]=D.exports.useState(Ut[-1===n?ml:n]),[Z,y]=D.exports.useState("light"),[u,X]=D.exports.useState(),[G,W]=D.exports.useState(m),[g,x]=D.exports.useState(),[V,L]=D.exports.useState({message:"",state:"success"}),[Y,K]=D.exports.useState(!0),[I,k]=D.exports.useState(0),[H,C]=D.exports.useState(),[S,f]=D.exports.useState(),[R,T]=D.exports.useState(!1),[J,v]=D.exports.useState(t||!1),[P,F]=D.exports.useState(pl()),[w,z]=D.exports.useState(!1),[M,Q]=D.exports.useState(!!a),[U,B]=D.exports.useState(t||"true"===(null==l?void 0:l.full)||!1),[E,A]=D.exports.useState(!1),[_,$]=D.exports.useState(void 0),[q,ee]=D.exports.useState(void 0),[ie,te]=D.exports.useState(void 0),[le,ue]=D.exports.useState(!1),[Xe,Ge]=D.exports.useState(!1),We=D.exports.useRef(),ge=D.exports.useRef(),xe=D.exports.useRef(),Ve=D.exports.useRef(oe((e=>{W(e)}),1500));D.exports.useEffect((()=>{}),[xe.current]),D.exports.useEffect((()=>{c.current=[],k(0),W(null!=d?d:a?bl():ne(p.spec)),X(void 0)}),[p]),D.exports.useEffect((()=>{let e=!0;if(a&&"string"==typeof a)return(async e=>{let i=null;try{const t=await ye(`https://gist.github.com/${e}.json`);i=await(t.ok?t.json():null)}catch(n){return Promise.reject(new Error("Gist not found"))}if(!i)return Promise.reject(new Error("Gist not found"));const t=i.files.find((e=>e.toLowerCase().startsWith("gosling.js"))),l=i.files.find((e=>e.toLowerCase().startsWith("readme.md")));if(!t)return Promise.reject(new Error("Gist does not contain a Gosling spec."));const d=fetch(`https://gist.githubusercontent.com/${e}/raw/${t}`).then((e=>200===e.status?e.text():null)),a=fetch(`https://gist.githubusercontent.com/${e}/raw/${l}`).then((e=>200===e.status?e.text():null));return Promise.all([d,a]).then((([e,t])=>({code:e,description:t,title:i.description})))})(a).then((({code:i,description:t,title:l})=>{e&&i&&(Q(!1),W(i),C(l),f(t))})).catch((i=>{e&&(Q(!1),W(bl(i)),f(void 0),C("Error loading gist! See code for details."))})),()=>{Q(!1),e=!1}}),[a]);const Le=D.exports.useCallback((e=>{if(N(bl(),G))return;let i,t;try{i=JSON.parse(se(G)),t=Li(i),L(t)}catch(l){const e=" Cannnot parse the code.";console.warn(e),L({message:e,state:"error"})}i&&"success"===(null==t?void 0:t.state)&&(Y||e)&&x(i)}),[G,Y,M]);D.exports.useEffect((()=>{const e=j.subscribe("data-preview",((e,i)=>{const t=`${i.dataConfig}`,l=c.current.filter((e=>e.id!==t));c.current=[...l,s(o({},i),{id:t})]}));return()=>{j.unsubscribe(e)}})),D.exports.useEffect((()=>{c.current=[],k(0),Le()}),[G,Y,Z]);const Ye=D.exports.useCallback((()=>{J||(ge.current=me.sourceEvent.clientX,ue(!0))}),[ge,P]),Ke=D.exports.useCallback((()=>{if(ge.current){const e=me.sourceEvent.clientX-ge.current;F(P-e)}}),[ge,P]),Ie=D.exports.useCallback((()=>{ge.current=null,ue(!1)}),[ge,P]);return D.exports.useEffect((()=>{const e=We.current,i=ce().on("start",Ye).on("drag",Ke).on("end",Ie);return re(e).call(i),()=>{re(e).on(".drag",null)}}),[We,Ye,Ke,Ie]),O.createElement(O.Fragment,null,O.createElement("div",{className:"demo-navbar "+("dark"===Z?"dark":""),onClick:()=>{xe.current}},O.createElement("span",{style:{cursor:"pointer",lineHeight:"40px"},onClick:()=>window.open("https://gosling.js.org","_blank")},O.createElement("span",{className:"logo"},cl(20,20)),"Gosling.js Editor"),d&&O.createElement("small",null," Displaying a custom spec contained in URL"),H&&!t&&O.createElement(O.Fragment,null,O.createElement("span",{className:"gist-title"},H),O.createElement("span",{title:"Open GitHub Gist",style:{marginLeft:10},className:"description-github-button",onClick:()=>window.open(`https://gist.github.com/${a}`,"_blank")},rl(Dt,14,14))),O.createElement("span",{className:"demo-dropdown",hidden:null!==d||null!==a},O.createElement("select",{style:{maxWidth:t?window.innerWidth-180:"none"},onChange:e=>{h(Ut.find((i=>i.id===e.target.value)))},defaultValue:p.id},Ut.map((e=>O.createElement("option",{key:e.id,value:e.id},e.name+(e.underDevelopment?" (under development)":"")))))),R?O.createElement("select",{style:{maxWidth:t?window.innerWidth-180:"none"},onChange:e=>{-1!==Object.keys(be).indexOf(e.target.value)&&y(e.target.value)},defaultValue:Z},Object.keys(be).map((e=>O.createElement("option",{key:e,value:e},e)))):null,p.underDevelopment?O.createElement("span",{style:{paddingLeft:12,fontStyle:"normal",fontSize:13}}," This example is under development "):null,O.createElement("input",{type:"hidden",id:"spec-url-exporter"}),S?O.createElement("span",{title:"Open Textual Description",className:"description-button",onClick:function(){F(pl()),v(!1)}},rl(At,23,23)):null),O.createElement("div",{className:"editor "+("dark"===Z?"dark":"")},O.createElement(pe,{className:"side-panel-spliter",split:"vertical",defaultSize:"50px",allowResize:!1},O.createElement("div",{className:"side-panel "+("dark"===Z?"dark":"")},O.createElement("span",{title:"Automatically update visualization upon editing code",className:"side-panel-button",onClick:()=>K(!Y)},Y?rl(dl,23,23,"#E18343"):rl(al),O.createElement("br",null),"AUTO",O.createElement("br",null),"RUN"),O.createElement("span",{title:"Run Code",className:"side-panel-button",onClick:()=>Le(!0)},rl(ol,23,23),O.createElement("br",null),"RUN"),O.createElement("span",{title:"Find",className:"side-panel-button",onClick:()=>{$(!_)}},rl(tl,23,23),O.createElement("br",null),"FIND"),O.createElement("span",{title:"Use Larger Font",className:"side-panel-button",onClick:()=>{ee(!q)}},rl(_t,23,23),"+",O.createElement("br",null),"LARGER"),O.createElement("span",{title:"Use Larger Font",className:"side-panel-button",onClick:()=>{te(!ie)}},rl(_t,15,15),"-",O.createElement("br",null),"SMALLER"),O.createElement("span",{title:"Show or hide a code panel",className:"side-panel-button",onClick:()=>B(!U)},rl(ll,23,23),O.createElement("br",null),"LAYOUT"),O.createElement("span",{title:"Show or hide a data preview",className:"side-panel-button",onClick:()=>A(!E)},rl(qt,23,23),O.createElement("br",null),"DATA",O.createElement("br",null),"PREVIEW"),O.createElement("span",{title:"Save PNG file",className:"side-panel-button",onClick:()=>{xe.current.api.exportPng()}},rl(Ot,23,23),O.createElement("br",null),"PNG"),O.createElement("span",{title:"Save PDF file",className:"side-panel-button",onClick:()=>{xe.current.api.exportPdf()}},rl(nl,23,23),O.createElement("br",null),"PDF"),O.createElement("span",{title:G.length<=4096?"Copy unique URL of current view to clipboard (limit: 4096 characters)":"The current code contains characters more than 4096",className:G.length<=4096?"side-panel-button":"side-panel-button side-panel-button-not-active",onClick:()=>{if(G.length<=4096){const e=encodeURIComponent(ae.crush(G)),i=`https://gosling-lang.github.io/gosling.js/?full=${U}&spec=${e}`,t=document.getElementById("spec-url-exporter");t.type="text",t.value=i,t.select(),document.execCommand("copy"),t.type="hidden"}}},rl(sl,23,23),O.createElement("br",null),"SAVE",O.createElement("br",null),"URL"),O.createElement("span",{title:"Expert mode that turns on additional features, such as theme selection",className:"side-panel-button",onClick:()=>T(!R)},R?rl(dl,23,23,"#E18343"):rl(al),O.createElement("br",null),"EXPERT",O.createElement("br",null),"MODE"),O.createElement("span",{title:"Open GitHub repository",className:"side-panel-button",onClick:()=>window.open("https://github.com/gosling-lang/gosling.js","_blank")},rl(il,23,23),O.createElement("br",null),"GITHUB"),O.createElement("span",{title:"Open Docs",className:"side-panel-button",onClick:()=>window.open("http://gosling-lang.org/docs/","_blank")},rl(el,23,23),O.createElement("br",null),"DOCS"),O.createElement("span",{title:"About",className:"side-panel-button",onClick:()=>Ge(!Xe)},rl(Et,23,23),O.createElement("br",null),"ABOUT")),O.createElement(pe,{split:"vertical",defaultSize:"calc(40%)",size:U?"0px":"calc(40%)",minSize:"0px"},O.createElement(pe,{split:"horizontal",defaultSize:"calc(100% - 30px)",maxSize:window.innerHeight-40-30,onChange:e=>{const i=window.innerHeight-40-e;i>30&&!w?z(!0):i<=30&&w&&z(!1)}},O.createElement(O.Fragment,null,O.createElement(ot,{code:G,readOnly:M,openFindBox:_,fontZoomIn:q,fontZoomOut:ie,onChange:Ve.current,isDarkTheme:"dark"===Z}),O.createElement("div",{className:`compile-message compile-message-${V.state}`},V.message)),O.createElement(pe,{split:"vertical",defaultSize:"100%"},O.createElement(O.Fragment,null,O.createElement("div",{className:"editor-header "+("dark"===Z?"dark":"")},"Compiled HiGlass ViewConfig (Read Only)"),O.createElement("div",{style:{height:"100%",visibility:w?"visible":"hidden"}},O.createElement(ot,{code:ne(u),readOnly:!0,isDarkTheme:"dark"===Z}))),O.createElement(O.Fragment,null))),O.createElement(st,null,O.createElement(pe,{split:"horizontal",defaultSize:"calc(100% - 30px)",size:E?"40%":"calc(100% - 30px)",maxSize:window.innerHeight-40-30},O.createElement("div",{id:"preview-container",className:"preview-container "+("dark"===Z?"dark":"")},O.createElement(nt,{ref:xe,spec:g,theme:Z,padding:60,margin:0,border:"none",id:"goslig-component-root",className:"goslig-component",experimental:{reactive:!1},compiled:(e,i)=>{X(i)}})),O.createElement(pe,{split:"vertical",defaultSize:"100%"},O.createElement(O.Fragment,null,O.createElement("div",{className:"editor-header "+("dark"===Z?"dark":""),style:{cursor:"pointer"},onClick:()=>A(!E)},"Data Preview (~100 Rows, Data Before Transformation)"),O.createElement("div",{className:"editor-data-preview-panel"},O.createElement("div",{title:"Refresh preview data",className:"data-preview-refresh-button",onClick:()=>b(!r)},rl($t,23,23),O.createElement("br",null),"REFRESH DATA"),c.current.length>I&&c.current[I]&&c.current[I].data.length>0?O.createElement(O.Fragment,null,O.createElement("div",{className:"editor-data-preview-tab"},c.current.map(((e,i)=>O.createElement("button",{className:i===I?"selected-tab":"unselected-tab",key:JSON.stringify(e),onClick:()=>k(i)},`${JSON.parse(e.dataConfig).data.type.toLocaleLowerCase()} `,O.createElement("small",null,i))))),O.createElement("div",{className:"editor-data-preview-tab-info"},function(e){var i;const t=JSON.parse(e);if(!(null==(i=t.data)?void 0:i.type))return"";let l="";return t.data&&Object.keys(t.data).forEach((e=>{"object"==typeof t.data[e]?l+=`${JSON.stringify(t.data[e])} | `:l+=`${t.data[e]} | `})),l.slice(0,l.length-2)}(c.current[I].dataConfig)),O.createElement("div",{className:"editor-data-preview-table"},O.createElement("table",null,O.createElement("tbody",null,O.createElement("tr",null,Object.keys(c.current[I].data[0]).map(((e,i)=>O.createElement("th",{key:i},e)))),c.current[I].data.map(((e,i)=>O.createElement("tr",{key:i},Object.keys(e).map(((i,t)=>{var l;return O.createElement("td",{key:t},null==(l=e[i])?void 0:l.toString())}))))))))):null)),O.createElement(O.Fragment,null)))))),O.createElement("div",{className:`description ${J?"":"description-shadow "}${le?"":"description-transition"} ${"dark"===Z?"dark":""}`,style:{width:!S||J?0:P}},O.createElement("div",{className:J?"description-resizer-disabled":"description-resizer",ref:We}),O.createElement("div",{className:"description-wrapper"},O.createElement("header",null,O.createElement("button",{className:"hide-description-button",onClick:function(){v(!0)}},"Close"),O.createElement("br",null),O.createElement("br",null),O.createElement("span",{title:"Open GitHub Gist",className:"description-github-button",onClick:()=>window.open(`https://gist.github.com/${a}`,"_blank")},rl(Dt,14,14)," Open GitHub Gist to see raw files.")),S&&O.createElement(he,{plugins:[Ze],source:S}))),O.createElement("div",{className:Xe?"about-modal-container":"about-modal-container-hidden",onClick:()=>Ge(!1)}),O.createElement("div",{className:Xe?"about-modal":"about-modal-container-hidden"},O.createElement("span",{className:"about-model-close-button",onClick:()=>{Ge(!1)}},rl(Bt,30,30)),O.createElement("div",null,O.createElement("span",{className:"logo"},cl(80,80))),O.createElement("h3",null,"Gosling.js Editor"),"Gosling.js v0.9.8",O.createElement("br",null),O.createElement("br",null),O.createElement("a",{href:"https://github.com/gosling-lang/gosling.js/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"},"Change Log"),O.createElement("br",null),O.createElement("br",null),O.createElement("a",{href:"https://github.com/gosling-lang/gosling.js/blob/master/LICENSE.md",target:"_blank",rel:"noopener noreferrer"},"MIT License"),O.createElement("br",null),O.createElement("br",null),O.createElement("h4",null,"Team"),O.createElement("span",null,"Sehi L'Yi (",O.createElement("a",{href:"https://twitter.com/sehi_lyi",target:"_blank",rel:"noopener noreferrer"},"@sehi_lyi"),")",O.createElement("br",null),"Qianwen Wang (",O.createElement("a",{href:"https://twitter.com/WangQianwenToo",target:"_blank",rel:"noopener noreferrer"},"@WangQianwenToo"),")",O.createElement("br",null),"Fritz Lekschas (",O.createElement("a",{href:"https://twitter.com/flekschas",target:"_blank",rel:"noopener noreferrer"},"@flekschas"),")",O.createElement("br",null),"Nils Gehlenborg (",O.createElement("a",{href:"https://twitter.com/gehlenborg",target:"_blank",rel:"noopener noreferrer"},"@gehlenborg"),")"),O.createElement("br",null),O.createElement("br",null),O.createElement("a",{href:"http://gehlenborglab.org/",target:"_blank",rel:"noopener noreferrer"},"Gehlenborg Lab"),", Harvard Medical School")))}})),document.getElementById("root"));
